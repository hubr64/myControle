(self.webpackChunkmy_controle=self.webpackChunkmy_controle||[]).push([[179],{457:function(E,O){var w;void 0!==(w=function(){"use strict";function j(ze,et,Fn){var Rt=new XMLHttpRequest;Rt.open("GET",ze),Rt.responseType="blob",Rt.onload=function(){dt(Rt.response,et,Fn)},Rt.onerror=function(){console.error("could not download file")},Rt.send()}function Se(ze){var et=new XMLHttpRequest;et.open("HEAD",ze,!1);try{et.send()}catch{}return 200<=et.status&&299>=et.status}function rt(ze){try{ze.dispatchEvent(new MouseEvent("click"))}catch{var et=document.createEvent("MouseEvents");et.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),ze.dispatchEvent(et)}}var ut="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Sn=ut.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),dt=ut.saveAs||("object"!=typeof window||window!==ut?function(){}:"download"in HTMLAnchorElement.prototype&&!Sn?function(ze,et,Fn){var Rt=ut.URL||ut.webkitURL,qt=document.createElement("a");qt.download=et=et||ze.name||"download",qt.rel="noopener","string"==typeof ze?(qt.href=ze,qt.origin===location.origin?rt(qt):Se(qt.href)?j(ze,et,Fn):rt(qt,qt.target="_blank")):(qt.href=Rt.createObjectURL(ze),setTimeout(function(){Rt.revokeObjectURL(qt.href)},4e4),setTimeout(function(){rt(qt)},0))}:"msSaveOrOpenBlob"in navigator?function(ze,et,Fn){if(et=et||ze.name||"download","string"!=typeof ze)navigator.msSaveOrOpenBlob(function L(ze,et){return typeof et>"u"?et={autoBom:!1}:"object"!=typeof et&&(console.warn("Deprecated: Expected third argument to be a object"),et={autoBom:!et}),et.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ze.type)?new Blob(["\ufeff",ze],{type:ze.type}):ze}(ze,Fn),et);else if(Se(ze))j(ze,et,Fn);else{var Rt=document.createElement("a");Rt.href=ze,Rt.target="_blank",setTimeout(function(){rt(Rt)})}}:function(ze,et,Fn,Rt){if((Rt=Rt||open("","_blank"))&&(Rt.document.title=Rt.document.body.innerText="downloading..."),"string"==typeof ze)return j(ze,et,Fn);var qt="application/octet-stream"===ze.type,We=/constructor/i.test(ut.HTMLElement)||ut.safari,Ze=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ze||qt&&We||Sn)&&typeof FileReader<"u"){var Ne=new FileReader;Ne.onloadend=function(){var ht=Ne.result;ht=Ze?ht:ht.replace(/^data:[^;]*;/,"data:attachment/file;"),Rt?Rt.location.href=ht:location=ht,Rt=null},Ne.readAsDataURL(ze)}else{var xt=ut.URL||ut.webkitURL,sn=xt.createObjectURL(ze);Rt?Rt.location=sn:location.href=sn,Rt=null,setTimeout(function(){xt.revokeObjectURL(sn)},4e4)}});ut.saveAs=dt.saveAs=dt,E.exports=dt}.apply(O,[]))&&(E.exports=w)},432:(module,exports)=>{"use strict";var O,E;E=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}),E.fr=Object.assign(E.fr||{},{a:"Envoi du fichier \xe9chou\xe9 :",b:"Barre d'outils des images",c:"Barre d'outils des tableaux",d:"Special characters",e:"T\xe9l\xe9chargement en cours",f:"Gras",g:"Italique",h:"Soulign\xe9",i:"Barr\xe9",j:"Indice",k:"Exposant",l:"Code",m:"Citation",n:"Choisir l'en-t\xeate",o:"En-t\xeate",p:"Objet image",q:"Image taille r\xe9elle",r:"Image lat\xe9rale",s:"Image align\xe9e \xe0 gauche",t:"Image centr\xe9e",u:"Image align\xe9e \xe0 droite",v:"Saisir la l\xe9gende de l\u2019image",w:"Ins\xe9rer une image",x:"\xc9chec de l'envoi",y:"Augmenter le retrait",z:"Diminuer le retrait",aa:"Liste num\xe9rot\xe9e",ab:"Liste \xe0 puces",ac:"Ins\xe9rer un tableau",ad:"Colonne d'ent\xeate",ae:"Ins\xe9rer une colonne \xe0 gauche",af:"Ins\xe9rer une colonne \xe0 droite",ag:"Supprimer la colonne",ah:"Colonne",ai:"Ligne d'ent\xeate",aj:"Ins\xe9rer une ligne en-dessous",ak:"Ins\xe9rer une ligne au-dessus",al:"Supprimer la ligne",am:"Ligne",an:"Fusionner la cellule au-dessus",ao:"Fusionner la cellule \xe0 droite",ap:"Fusionner la cellule en-dessous",aq:"Fusionner la cellule \xe0 gauche",ar:"Scinder la cellule verticalement",as:"Scinder la cellule horizontalement",at:"Fusionner les cellules",au:"Barre d'outils du widget",av:"Marqueur jaune",aw:"Marqueur vert",ax:"Marqueur rose",ay:"Marqueur bleu",az:"Crayon rouge",ba:"Crayon vert",bb:"Enlever le surlignage",bc:"Surlignage",bd:"Barre d'outils du surlignage",be:"Couleur d'arri\xe8re-plan",bf:"Couleur de police",bg:"Taille de police",bh:"Par d\xe9faut",bi:"Minuscule",bj:"Petit",bk:"Grand",bl:"Enorme",bm:"Single left-pointing angle quotation mark",bn:"Single right-pointing angle quotation mark",bo:"Left-pointing double angle quotation mark",bp:"Right-pointing double angle quotation mark",bq:"Left single quotation mark",br:"Right single quotation mark",bs:"Left double quotation mark",bt:"Right double quotation mark",bu:"Single low-9 quotation mark",bv:"Double low-9 quotation mark",bw:"Inverted exclamation mark",bx:"Inverted question mark",by:"Two dot leader",bz:"Horizontal ellipsis",ca:"Double dagger",cb:"Per mille sign",cc:"Per ten thousand sign",cd:"Double exclamation mark",ce:"Question exclamation mark",cf:"Exclamation question mark",cg:"Double question mark",ch:"Copyright sign",ci:"Registered sign",cj:"Trade mark sign",ck:"Section sign",cl:"Paragraph sign",cm:"Reversed paragraph sign",cn:"Changer le texte alternatif \xe0 l\u2019image",co:"Barre d'outils dans un menu d\xe9roulant",cp:"Barre d'outils de l'\xe9diteur",cq:"Montrer plus d'\xe9l\xe9ments",cr:"%0 sur %1",cs:"Pr\xe9cedent",ct:"Suivant",cu:"Enlever la couleur",cv:"Couleurs du document",cw:"Enregistrer",cx:"Annuler",cy:"Texte alternatif",cz:"Noir",da:"Gris p\xe2le",db:"Gris",dc:"Gris clair",dd:"Blanc",de:"Rouge",df:"Orange",dg:"Jaune",dh:"Vert clair",di:"Vert",dj:"Bleu vert",dk:"Turquoise",dl:"Bleu clair",dm:"Bleu",dn:"Violet",do:"Annuler",dp:"Restaurer",dq:"Paragraphe",dr:"Titre 1",ds:"Titre 2",dt:"Titre 3",du:"Titre 4",dv:"Titre 5",dw:"Titre 6",dx:"\xc9diteur de texte enrichi, %0",dy:"Latin capital letter a with macron",dz:"Latin small letter a with macron",ea:"Latin capital letter a with breve",eb:"Latin small letter a with breve",ec:"Latin capital letter a with ogonek",ed:"Latin small letter a with ogonek",ee:"Latin capital letter c with acute",ef:"Latin small letter c with acute",eg:"Latin capital letter c with circumflex",eh:"Latin small letter c with circumflex",ei:"Latin capital letter c with dot above",ej:"Latin small letter c with dot above",ek:"Latin capital letter c with caron",el:"Latin small letter c with caron",em:"Latin capital letter d with caron",en:"Latin small letter d with caron",eo:"Latin capital letter d with stroke",ep:"Latin small letter d with stroke",eq:"Latin capital letter e with macron",er:"Latin small letter e with macron",es:"Latin capital letter e with breve",et:"Latin small letter e with breve",eu:"Latin capital letter e with dot above",ev:"Latin small letter e with dot above",ew:"Latin capital letter e with ogonek",ex:"Latin small letter e with ogonek",ey:"Latin capital letter e with caron",ez:"Latin small letter e with caron",fa:"Latin capital letter g with circumflex",fb:"Latin small letter g with circumflex",fc:"Latin capital letter g with breve",fd:"Latin small letter g with breve",fe:"Latin capital letter g with dot above",ff:"Latin small letter g with dot above",fg:"Latin capital letter g with cedilla",fh:"Latin small letter g with cedilla",fi:"Latin capital letter h with circumflex",fj:"Latin small letter h with circumflex",fk:"Latin capital letter h with stroke",fl:"Latin small letter h with stroke",fm:"Latin capital letter i with tilde",fn:"Latin small letter i with tilde",fo:"Latin capital letter i with macron",fp:"Latin small letter i with macron",fq:"Latin capital letter i with breve",fr:"Latin small letter i with breve",fs:"Latin capital letter i with ogonek",ft:"Latin small letter i with ogonek",fu:"Latin capital letter i with dot above",fv:"Latin small letter dotless i",fw:"Latin capital ligature ij",fx:"Latin small ligature ij",fy:"Latin capital letter j with circumflex",fz:"Latin small letter j with circumflex",ga:"Latin capital letter k with cedilla",gb:"Latin small letter k with cedilla",gc:"Latin small letter kra",gd:"Latin capital letter l with acute",ge:"Latin small letter l with acute",gf:"Latin capital letter l with cedilla",gg:"Latin small letter l with cedilla",gh:"Latin capital letter l with caron",gi:"Latin small letter l with caron",gj:"Latin capital letter l with middle dot",gk:"Latin small letter l with middle dot",gl:"Latin capital letter l with stroke",gm:"Latin small letter l with stroke",gn:"Latin capital letter n with acute",go:"Latin small letter n with acute",gp:"Latin capital letter n with cedilla",gq:"Latin small letter n with cedilla",gr:"Latin capital letter n with caron",gs:"Latin small letter n with caron",gt:"Latin small letter n preceded by apostrophe",gu:"Latin capital letter eng",gv:"Latin small letter eng",gw:"Latin capital letter o with macron",gx:"Latin small letter o with macron",gy:"Latin capital letter o with breve",gz:"Latin small letter o with breve",ha:"Latin capital letter o with double acute",hb:"Latin small letter o with double acute",hc:"Latin capital ligature oe",hd:"Latin small ligature oe",he:"Latin capital letter r with acute",hf:"Latin small letter r with acute",hg:"Latin capital letter r with cedilla",hh:"Latin small letter r with cedilla",hi:"Latin capital letter r with caron",hj:"Latin small letter r with caron",hk:"Latin capital letter s with acute",hl:"Latin small letter s with acute",hm:"Latin capital letter s with circumflex",hn:"Latin small letter s with circumflex",ho:"Latin capital letter s with cedilla",hp:"Latin small letter s with cedilla",hq:"Latin capital letter s with caron",hr:"Latin small letter s with caron",hs:"Latin capital letter t with cedilla",ht:"Latin small letter t with cedilla",hu:"Latin capital letter t with caron",hv:"Latin small letter t with caron",hw:"Latin capital letter t with stroke",hx:"Latin small letter t with stroke",hy:"Latin capital letter u with tilde",hz:"Latin small letter u with tilde",ia:"Latin capital letter u with macron",ib:"Latin small letter u with macron",ic:"Latin capital letter u with breve",id:"Latin small letter u with breve",ie:"Latin capital letter u with ring above",if:"Latin small letter u with ring above",ig:"Latin capital letter u with double acute",ih:"Latin small letter u with double acute",ii:"Latin capital letter u with ogonek",ij:"Latin small letter u with ogonek",ik:"Latin capital letter w with circumflex",il:"Latin small letter w with circumflex",im:"Latin capital letter y with circumflex",in:"Latin small letter y with circumflex",io:"Latin capital letter y with diaeresis",ip:"Latin capital letter z with acute",iq:"Latin small letter z with acute",ir:"Latin capital letter z with dot above",is:"Latin small letter z with dot above",it:"Latin capital letter z with caron",iu:"Latin small letter z with caron",iv:"Latin small letter long s",iw:"leftwards double arrow",ix:"rightwards double arrow",iy:"upwards double arrow",iz:"downwards double arrow",ja:"leftwards dashed arrow",jb:"rightwards dashed arrow",jc:"upwards dashed arrow",jd:"downwards dashed arrow",je:"leftwards arrow to bar",jf:"rightwards arrow to bar",jg:"upwards arrow to bar",jh:"downwards arrow to bar",ji:"up down arrow with base",jj:"back with leftwards arrow above",jk:"end with leftwards arrow above",jl:"on with exclamation mark with left right arrow above",jm:"soon with rightwards arrow above",jn:"top with upwards arrow above",jo:"Less-than sign",jp:"Greater-than sign",jq:"Less-than or equal to",jr:"Greater-than or equal to",js:"En dash",jt:"Em dash",ju:"Macron",jv:"Overline",jw:"Degree sign",jx:"Minus sign",jy:"Plus-minus sign",jz:"Division sign",ka:"Fraction slash",kb:"Multiplication sign",kc:"Latin small letter f with hook",kd:"Integral",ke:"N-ary summation",kf:"Infinity",kg:"Square root",kh:"Tilde operator",ki:"Approximately equal to",kj:"Almost equal to",kk:"Not equal to",kl:"Identical to",km:"Element of",kn:"Not an element of",ko:"Contains as member",kp:"N-ary product",kq:"Logical and",kr:"Logical or",ks:"Not sign",kt:"Intersection",ku:"Union",kv:"Partial differential",kw:"For all",kx:"There exists",ky:"Empty set",kz:"Nabla",la:"Asterisk operator",lb:"Proportional to",lc:"Angle",ld:"Vulgar fraction one quarter",le:"Vulgar fraction one half",lf:"Vulgar fraction three quarters",lg:"Dollar sign",lh:"Euro sign",li:"Yen sign",lj:"Pound sign",lk:"Cent sign",ll:"Euro-currency sign",lm:"Colon sign",ln:"Cruzeiro sign",lo:"French franc sign",lp:"Lira sign",lq:"Currency sign",lr:"Bitcoin sign",ls:"Mill sign",lt:"Naira sign",lu:"Peseta sign",lv:"Rupee sign",lw:"Won sign",lx:"New sheqel sign",ly:"Dong sign",lz:"Kip sign",ma:"Tugrik sign",mb:"Drachma sign",mc:"German penny sign",md:"Peso sign",me:"Guarani sign",mf:"Austral sign",mg:"Hryvnia sign",mh:"Cedi sign",mi:"Livre tournois sign",mj:"Spesmilo sign",mk:"Tenge sign",ml:"Indian rupee sign",mm:"Turkish lira sign",mn:"Nordic mark sign",mo:"Manat sign",mp:"Ruble sign",mq:"S\xe9paration de page",mr:"Character categories",ms:"Aligner \xe0 gauche",mt:"Aligner \xe0 droite",mu:"Centrer",mv:"Justifier",mw:"Alignement du texte",mx:"Barre d'outils d'alignement du texte"}),window,O=function(){return function(E){var O={};function T(P){if(O[P])return O[P].exports;var w=O[P]={i:P,l:!1,exports:{}};return E[P].call(w.exports,w,w.exports,T),w.l=!0,w.exports}return T.m=E,T.c=O,T.d=function(P,w,L){T.o(P,w)||Object.defineProperty(P,w,{enumerable:!0,get:L})},T.r=function(P){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})},T.t=function(P,w){if(1&w&&(P=T(P)),8&w||4&w&&"object"==typeof P&&P&&P.__esModule)return P;var L=Object.create(null);if(T.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:P}),2&w&&"string"!=typeof P)for(var j in P)T.d(L,j,function(Se){return P[Se]}.bind(null,j));return L},T.n=function(P){var w=P&&P.__esModule?function(){return P.default}:function(){return P};return T.d(w,"a",w),w},T.o=function(P,w){return Object.prototype.hasOwnProperty.call(P,w)},T.p="",T(T.s=104)}([function(E,O,T){T.d(O,"b",function(){return P}),T.d(O,"a",function(){return w});class P extends Error{constructor(j,Se,rt){j=w(j),rt&&(j+=" "+JSON.stringify(rt)),super(j),this.name="CKEditorError",this.context=Se,this.data=rt}is(j){return"CKEditorError"===j}static rethrowUnexpectedError(j,Se){if(j.is&&j.is("CKEditorError"))throw j;const rt=new P(j.message,Se);throw rt.stack=j.stack,rt}}function w(L){const j=L.match(/^([^:]+):/);return j?L+` Read more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-${j[1]}\n`:L}},function(E,O,T){var P,We,L=(We={},function(Ze){if(void 0===We[Ze]){var Ne=document.querySelector(Ze);if(window.HTMLIFrameElement&&Ne instanceof window.HTMLIFrameElement)try{Ne=Ne.contentDocument.head}catch{Ne=null}We[Ze]=Ne}return We[Ze]}),j=[];function Se(We){for(var Ze=-1,Ne=0;Ne<j.length;Ne++)if(j[Ne].identifier===We){Ze=Ne;break}return Ze}function rt(We,Ze){for(var Ne={},xt=[],sn=0;sn<We.length;sn++){var ht=We[sn],An=Ze.base?ht[0]+Ze.base:ht[0],zi=Ne[An]||0,bo="".concat(An," ").concat(zi);Ne[An]=zi+1;var Dr=Se(bo),Ds={css:ht[1],media:ht[2],sourceMap:ht[3]};-1!==Dr?(j[Dr].references++,j[Dr].updater(Ds)):j.push({identifier:bo,updater:qt(Ds,Ze),references:1}),xt.push(bo)}return xt}function ut(We){var Ze=document.createElement("style"),Ne=We.attributes||{};if(void 0===Ne.nonce){var xt=T.nc;xt&&(Ne.nonce=xt)}if(Object.keys(Ne).forEach(function(ht){Ze.setAttribute(ht,Ne[ht])}),"function"==typeof We.insert)We.insert(Ze);else{var sn=L(We.insert||"head");if(!sn)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");sn.appendChild(Ze)}return Ze}var Sn,dt=(Sn=[],function(We,Ze){return Sn[We]=Ze,Sn.filter(Boolean).join("\n")});function ze(We,Ze,Ne,xt){var sn=Ne?"":xt.media?"@media ".concat(xt.media," {").concat(xt.css,"}"):xt.css;if(We.styleSheet)We.styleSheet.cssText=dt(Ze,sn);else{var ht=document.createTextNode(sn),An=We.childNodes;An[Ze]&&We.removeChild(An[Ze]),An.length?We.insertBefore(ht,An[Ze]):We.appendChild(ht)}}function et(We,Ze,Ne){var xt=Ne.css,sn=Ne.media,ht=Ne.sourceMap;if(sn?We.setAttribute("media",sn):We.removeAttribute("media"),ht&&btoa&&(xt+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(ht))))," */")),We.styleSheet)We.styleSheet.cssText=xt;else{for(;We.firstChild;)We.removeChild(We.firstChild);We.appendChild(document.createTextNode(xt))}}var Fn=null,Rt=0;function qt(We,Ze){var Ne,xt,sn;if(Ze.singleton){var ht=Rt++;Ne=Fn||(Fn=ut(Ze)),xt=ze.bind(null,Ne,ht,!1),sn=ze.bind(null,Ne,ht,!0)}else Ne=ut(Ze),xt=et.bind(null,Ne,Ze),sn=function(){!function(An){if(null===An.parentNode)return!1;An.parentNode.removeChild(An)}(Ne)};return xt(We),function(An){if(An){if(An.css===We.css&&An.media===We.media&&An.sourceMap===We.sourceMap)return;xt(We=An)}else sn()}}E.exports=function(We,Ze){(Ze=Ze||{}).singleton||"boolean"==typeof Ze.singleton||(Ze.singleton=(void 0===P&&(P=Boolean(window&&document&&document.all&&!window.atob)),P));var Ne=rt(We=We||[],Ze);return function(xt){if(xt=xt||[],"[object Array]"===Object.prototype.toString.call(xt)){for(var sn=0;sn<Ne.length;sn++){var ht=Se(Ne[sn]);j[ht].references--}for(var An=rt(xt,Ze),zi=0;zi<Ne.length;zi++){var bo=Se(Ne[zi]);0===j[bo].references&&(j[bo].updater(),j.splice(bo,1))}Ne=An}}}},,function(E,O,T){var P=T(7),w="object"==typeof self&&self&&self.Object===Object&&self,L=P.a||w||Function("return this")();O.a=L},function(E,O,T){(function(P){var w=T(3),L=T(13),j=exports&&!exports.nodeType&&exports,Se=j&&"object"==typeof P&&P&&!P.nodeType&&P,rt=Se&&Se.exports===j?w.a.Buffer:void 0;O.a=(rt?rt.isBuffer:void 0)||L.a}).call(this,T(9)(E))},function(E,O,T){(function(P){var w=T(7),L=exports&&!exports.nodeType&&exports,j=L&&"object"==typeof P&&P&&!P.nodeType&&P,Se=j&&j.exports===L&&w.a.process,rt=function(){try{return j&&j.require&&j.require("util").types||Se&&Se.binding&&Se.binding("util")}catch{}}();O.a=rt}).call(this,T(9)(E))},function(E,O,T){(function(P){var w=T(0);const L="object"==typeof window?window:P;if(L.CKEDITOR_VERSION)throw new w.b("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null);L.CKEDITOR_VERSION="17.0.0"}).call(this,T(10))},function(E,O,T){(function(P){O.a="object"==typeof P&&P&&P.Object===Object&&P}).call(this,T(10))},function(E,O,T){(function(P){var w=T(3),L=exports&&!exports.nodeType&&exports,j=L&&"object"==typeof P&&P&&!P.nodeType&&P,Se=j&&j.exports===L?w.a.Buffer:void 0,rt=Se?Se.allocUnsafe:void 0;O.a=function(ut,Sn){if(Sn)return ut.slice();var dt=ut.length,ze=rt?rt(dt):new ut.constructor(dt);return ut.copy(ze),ze}}).call(this,T(9)(E))},function(E,O){E.exports=function(T){if(!T.webpackPolyfill){var P=Object.create(T);P.children||(P.children=[]),Object.defineProperty(P,"loaded",{enumerable:!0,get:function(){return P.l}}),Object.defineProperty(P,"id",{enumerable:!0,get:function(){return P.i}}),Object.defineProperty(P,"exports",{enumerable:!0}),P.webpackPolyfill=1}return P}},function(E,O){var T;T=function(){return this}();try{T=T||new Function("return this")()}catch{"object"==typeof window&&(T=window)}E.exports=T},function(E,O,T){var P=T(1),w=T(41);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O,T){var P=T(1),w=T(44);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O,T){O.a=function(){return!1}},function(E){E.exports=JSON.parse('{"ar":{"latex":"LaTeX","cancel":"\u0625\u0644\u063a\u0627\u0621","accept":"\u0645\u0648\u0627\ufffd?\u0642","manual":"\u0627\u0644\u062f\u0644\u064a\u0644","insert_math":"\u0625\u062f\u0631\u0627\u062c \u0635\u064a\u063a\u0629 \u0631\u064a\u0627\u0636\u064a\u0629 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ca":{"latex":"LaTeX","cancel":"Cancel\xb7lar","accept":"Acceptar","manual":"Manual","insert_math":"Inserir f\xf3rmula matem\xe0tica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"cs":{"latex":"LaTeX","cancel":"Storno","accept":"OK","manual":"P\u0159\xedru\ufffd?ka","insert_math":"Vlo\u017eit matematick\xfd vzorec - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"da":{"latex":"LaTeX","cancel":"Annuller","accept":"OK","manual":"Brugervejledning","insert_math":"Inds\xe6t matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"de":{"latex":"LaTeX","cancel":"Abbrechen","accept":"OK","manual":"Handbuch","insert_math":"Mathematische Formel einf\xfcgen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"en":{"latex":"LaTeX","cancel":"Cancel","accept":"OK","manual":"Manual","insert_math":"Insert a math equation - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"es":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Insertar f\xf3rmula matem\xe1tica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"et":{"latex":"LaTeX","cancel":"Loobu","accept":"OK","manual":"K\xe4siraamat","insert_math":"Lisa matemaatiline valem \u2013 WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"eu":{"latex":"LaTeX","cancel":"Ezeztatu","accept":"Onartu","manual":"Gida","insert_math":"Txertatu matematikako formula - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fi":{"latex":"LaTeX","cancel":"Peruuta","accept":"OK","manual":"Manual","insert_math":"Liit\xe4 matemaattinen kaava - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fr":{"latex":"LaTeX","cancel":"Annuler","accept":"OK","manual":"Manuel","insert_math":"Ins\xe9rer une formule math\xe9matique - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"gl":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Inserir f\xf3rmula matem\xe1tica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"he":{"latex":"LaTeX","cancel":"\u05d1\u05d9\u05d8\u05d5\u05dc","accept":"\ufffd?\u05d9\u05e9\u05d5\u05e8","manual":"\u05de\u05d3\u05e8\u05d9\u05da","insert_math":"\u05d4\u05d5\u05e1\u05e3 \u05e0\u05d5\u05e1\u05d7\u05d4 \u05de\u05ea\u05de\u05d8\u05d9\u05ea - MathType","insert_chem":"\u05d4\u05d5\u05e1\u05e4\u05ea \u05db\u05ea\u05d9\u05d1\u05d4 \u05db\u05d9\u05de\u05d9\u05ea - ChemType","minimize":"\u05de\u05d6\u05e2\u05e8\u05d9","maximize":"\u05de\u05e8\u05d1\u05d9","fullscreen":"\u05de\u05e1\u05da \u05de\u05dc\ufffd?","exit_fullscreen":"\u05d9\u05e6\u05d9\ufffd?\u05d4 \u05de\u05de\u05e6\u05d1 \u05de\u05e1\u05da \u05de\u05dc\ufffd?","close":"\u05e1\u05d2\u05d9\u05e8\u05d4","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"\u05d4\ufffd?\ufffd? \u05dc\u05e6\ufffd?\u05ea? \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\ufffd? \ufffd?\u05e9\u05e8 \u05d1\u05d5\u05e6\u05e2\u05d5 \u05d9\u05de\u05d7\u05e7\u05d5.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" \ufffd?\u05d9\u05e0\u05e0\u05d4 \u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d4","exception_invalid_date_format":"\u05ea\u05e1\u05d3\u05d9\u05e8 \u05ea\ufffd?\u05e8\u05d9\u05da \ufffd?\u05d9\u05e0\u05d5 \u05ea\u05e7\u05d9\u05df : ","exception_casting":"\u05dc\ufffd? \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05de\u05d9\u05e8 ","exception_casting_to":" \u05dc "},"hr":{"latex":"LaTeX","cancel":"Poni\u0161ti","accept":"U redu","manual":"Priru\ufffd?nik","insert_math":"Umetnite matemati\ufffd?ku formulu - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"hu":{"latex":"LaTeX","cancel":"M\xe9gsem","accept":"OK","manual":"K\xe9zik\xf6nyv","insert_math":"Matematikai k\xe9plet besz\xfar\xe1sa - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"it":{"latex":"LaTeX","cancel":"Annulla","accept":"Accetta","manual":"Manuale","insert_math":"Inserisci una formula matematica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ja":{"latex":"LaTeX","cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","accept":"OK","manual":"\u30de\u30cb\u30e5\u30a2\u30eb","insert_math":"\u6570\ufffd?\u3092\u633f\u5165 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ko":{"latex":"LaTeX","cancel":"\ucde8\uc18c","accept":"\uc2b9\ufffd?\ufffd","manual":"\uc124\uba85\uc11c","insert_math":"\uc218\ud559 \uacf5\ufffd? \uc0bd\uc785 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"nl":{"latex":"LaTeX","cancel":"Annuleren","accept":"OK","manual":"Handleiding","insert_math":"Wiskundige formule invoegen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"no":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"H\xe5ndbok","insert_math":"Sett inn matematikkformel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pl":{"latex":"LaTeX","cancel":"Anuluj","accept":"OK","manual":"Instrukcja","insert_math":"Wstaw formu\u0142\u0119 matematyczn\u0105 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir f\xf3rmula matem\xe1tica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt_br":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir f\xf3rmula matem\xe1tica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ru":{"latex":"LaTeX","cancel":"\u043e\u0442\u043c\u0435\u043d\u0430","accept":"OK","manual":"\u0432\u0440\u0443\u0447\u043d\u0443\u044e","insert_math":"\u0412\ufffd?\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\ufffd?\u043a\u0443\u044e \u0444\u043e\u0440\u043c\u0443\u043b\u0443: WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"sv":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"Bruksanvisning","insert_math":"Infoga matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"tr":{"latex":"LaTeX","cancel":"Vazge\xe7","accept":"Tamam","manual":"K\u0131lavuz","insert_math":"Matematik form\xfcl\xfc ekle - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"zh":{"latex":"LaTeX","cancel":"\ufffd?\ufffd\u6d88","accept":"\u786e\u5b9a","manual":"\u624b\u518c","insert_math":"\ufffd?\ufffd\u5165\u6570\u5b66\u516c\ufffd? - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"el":{"latex":"LaTeX","cancel":"\u0386\u03ba\u03c5\ufffd?\u03bf","accept":"\u039f\u039a","manual":"\u03a7\u03b5\u03b9\ufffd?\u03bf\u03ba\u03af\u03bd\u03b7\u03c4\u03b1","insert_math":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03bc\u03b1\u03b8\u03b7\u03bc\u03b1\u03c4\u03b9\u03ba\u03bf\ufffd? \u03c4\ufffd?\u03c0\u03bf\u03c5 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"":{}}')},function(E,O,T){var P=T(1),w=T(16);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(E,O,T){var P=T(1),w=T(18);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#1f89e5;--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(E,O,T){var P=T(1),w=T(20);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(E,O,T){var P=T(1),w=T(22);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}'},function(E,O,T){var P=T(1),w=T(24);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}"},function(E,O,T){var P=T(1),w=T(26);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(E,O,T){var P=T(1),w=T(28);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}'},function(E,O,T){var P=T(1),w=T(30);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(E,O,T){var P=T(1),w=T(32);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(E,O,T){var P=T(1),w=T(34);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}"},function(E,O,T){var P=T(1),w=T(36);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(E,O,T){var P=T(1),w=T(38);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(E,O,T){var P=T(1),w=T(40);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact .ck-toolbar__items>.ck{margin:0}.ck.ck-toolbar.ck-toolbar_compact .ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact .ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact .ck-toolbar__items>.ck:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__grouped-dropdown,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{padding-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__items>*,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__items>*{margin-left:var(--ck-spacing-small);margin-right:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__items>:last-child,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__items>:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__grouped-dropdown,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{padding-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__items>:last-child,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__items>:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{margin-right:var(--ck-spacing-small)}"},function(E,O){E.exports=".ck-content code{background-color:hsla(0,0%,78%,.3);padding:.15em;border-radius:2px}"},function(E,O,T){var P=T(1),w=T(43);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(E,O){E.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(E,O,T){var P=T(1),w=T(46);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}"},function(E,O,T){var P=T(1),w=T(48);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(E,O,T){var P=T(1),w=T(50);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}"},function(E,O,T){var P=T(1),w=T(52);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(E,O,T){var P=T(1),w=T(54);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}"},function(E,O,T){var P=T(1),w=T(56);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(E,O,T){var P=T(1),w=T(58);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(E,O,T){var P=T(1),w=T(60);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}"},function(E,O,T){var P=T(1),w=T(62);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}"},function(E,O,T){var P=T(1),w=T(64);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}"},function(E,O,T){var P=T(1),w=T(66);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(E,O,T){var P=T(1),w=T(68);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(E,O,T){var P=T(1),w=T(70);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(E,O,T){var P=T(1),w=T(72);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0;outline:1px solid var(--ck-color-resizer)}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all;width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nesw-resize}"},function(E,O,T){var P=T(1),w=T(74);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}"},function(E,O,T){var P=T(1),w=T(76);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=":root{--ck-color-table-focused-cell-background:#f5fafe}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(E,O,T){var P=T(1),w=T(78);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(E,O,T){var P=T(1),w=T(80);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#d9d9d9}.ck-content .table table th{font-weight:700;background:#fafafa}"},function(E,O,T){var P=T(1),w=T(82);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports='.ck-content .page-break{position:relative;clear:both;padding:5px 0;display:flex;align-items:center;justify-content:center}.ck-content .page-break:after{content:"";position:absolute;border-bottom:2px dashed #c4c4c4;width:100%}.ck-content .page-break__label{position:relative;z-index:1;padding:.3em .6em;display:block;text-transform:uppercase;border:1px solid #c4c4c4;border-radius:2px;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;color:#333;background:#fff;box-shadow:2px 2px 1px rgba(0,0,0,.15);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}}'},function(E,O,T){var P=T(1),w=T(84);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-character-grid .ck-character-grid__tiles{display:grid;grid-template-columns:repeat(10,1fr)}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{overflow-y:auto;overflow-x:hidden;width:350px;max-height:200px}.ck.ck-character-grid .ck-character-grid__tiles{margin:var(--ck-spacing-standard);grid-gap:var(--ck-spacing-standard)}.ck.ck-character-grid .ck-character-grid__tile{width:var(--ck-character-grid-tile-size);height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);font-size:1.2em;padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);width:100%;text-align:center}"},function(E,O,T){var P=T(1),w=T(86);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-character-info{display:flex;justify-content:space-between;padding:var(--ck-spacing-small) var(--ck-spacing-standard);border-top:1px solid var(--ck-color-base-border)}.ck.ck-character-info>*{text-transform:uppercase;font-size:var(--ck-font-size-small)}.ck.ck-character-info .ck-character-info__name{max-width:280px;text-overflow:ellipsis;overflow:hidden}.ck.ck-character-info .ck-character-info__code{opacity:.6}"},function(E,O,T){var P=T(1),w=T(88);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-special-characters-navigation{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-bottom:1px solid var(--ck-color-base-border);padding:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-special-characters-navigation{padding-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-special-characters-navigation{padding-right:var(--ck-spacing-large)}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;text-overflow:ellipsis;overflow:hidden}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}"},function(E,O,T){var P=T(1),w=T(90);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(E,O,T){var P=T(1),w=T(92);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}"},function(E,O,T){var P=T(1),w=T(94);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".text-tiny{font-size:.7em}.text-small{font-size:.85em}.text-big{font-size:1.4em}.text-huge{font-size:1.8em}"},function(E,O,T){var P=T(1),w=T(96);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}"},function(E,O,T){var P=T(1),w=T(98);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#63f963;--ck-highlight-marker-pink:#fc7999;--ck-highlight-marker-blue:#72cdfd;--ck-highlight-pen-red:#e91313;--ck-highlight-pen-green:#180}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}"},function(E,O,T){var P=T(1),w=T(100);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports='.ck-content .mycontrole-lines{position:relative;clear:both;padding:2px 0;display:flex;align-items:center;justify-content:center}.ck-content .mycontrole-lines:after{content:"";position:absolute;border-bottom:2px dashed #c4c4c4;width:100%}.ck-content .mycontrole-lines__label{position:relative;z-index:1;padding:0 .6em;display:block;text-transform:uppercase;border:1px solid #c4c4c4;border-radius:2px;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;color:#333;background:#fff;box-shadow:2px 2px 1px rgba(0,0,0,.15);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}'},function(module,__webpack_exports__,__webpack_require__){var md5,_unused_webpack_default_export=md5;(function(){var HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.dateStr=function(E){var O=E.getMonth()+1,T=E.getDate(),P=E.getHours(),w=E.getMinutes(),L=E.getSeconds();return E.getFullYear()+"-"+(O<10?"0"+O:""+O)+"-"+(T<10?"0"+T:""+T)+" "+(P<10?"0"+P:""+P)+":"+(w<10?"0"+w:""+w)+":"+(L<10?"0"+L:""+L)},HxOverrides.strDate=function(E){switch(E.length){case 8:var O=E.split(":"),T=new Date;return T.setTime(0),T.setUTCHours(O[0]),T.setUTCMinutes(O[1]),T.setUTCSeconds(O[2]),T;case 10:return O=E.split("-"),new Date(O[0],O[1]-1,O[2],0,0,0);case 19:var P=(O=E.split(" "))[0].split("-"),w=O[1].split(":");return new Date(P[0],P[1]-1,P[2],w[0],w[1],w[2]);default:throw"Invalid date format : "+E}},HxOverrides.cca=function(E,O){var T=E.charCodeAt(O);if(T==T)return T},HxOverrides.substr=function(E,O,T){return null!=O&&0!=O&&null!=T&&T<0?"":(null==T&&(T=E.length),O<0?(O=E.length+O)<0&&(O=0):T<0&&(T=E.length+T-O),E.substr(O,T))},HxOverrides.remove=function(E,O){for(var T=0,P=E.length;T<P;){if(E[T]==O)return E.splice(T,1),!0;T++}return!1},HxOverrides.iter=function(E){return{cur:0,arr:E,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIter=function(E,O){this.min=E,this.max=O};IntIter.__name__=!0,IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:IntIter};var Std=function(){};Std.__name__=!0,Std.is=function(E,O){return js.Boot.__instanceof(E,O)},Std.string=function(E){return js.Boot.__string_rec(E,"")},Std.int=function(E){return 0|E},Std.parseInt=function(E){var O=parseInt(E,10);return 0!=O||120!=HxOverrides.cca(E,1)&&88!=HxOverrides.cca(E,1)||(O=parseInt(E)),isNaN(O)?null:O},Std.parseFloat=function(E){return parseFloat(E)},Std.random=function(E){return Math.floor(Math.random()*E)};var com=com||{};com.wiris||(com.wiris={}),com.wiris.js||(com.wiris.js={}),com.wiris.js.JsPluginTools=function(){this.tryReady()},com.wiris.js.JsPluginTools.__name__=!0,com.wiris.js.JsPluginTools.main=function(){var E;E=com.wiris.js.JsPluginTools.getInstance(),haxe.Timer.delay($bind(E,E.tryReady),100)},com.wiris.js.JsPluginTools.getInstance=function(){return null==com.wiris.js.JsPluginTools.instance&&(com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools),com.wiris.js.JsPluginTools.instance},com.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={}),null==window.com.wiris&&(window.com.wiris={}),null==window.com.wiris.js&&(window.com.wiris.js={}),null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance())},com.wiris.js.JsPluginTools.prototype={md5encode:function(E){return haxe.Md5.encode(E)},doLoad:function(){this.ready=!0,com.wiris.js.JsPluginTools.instance=this,com.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1,js.Lib.document.readyState&&(this.doLoad(),this.ready=!0),this.ready||haxe.Timer.delay($bind(this,this.tryReady),100)},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){},haxe.Log.__name__=!0,haxe.Log.trace=function(E,O){js.Boot.__trace(E,O)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Md5=function(){},haxe.Md5.__name__=!0,haxe.Md5.encode=function(E){return(new haxe.Md5).doEncode(E)},haxe.Md5.prototype={doEncode:function(E){for(var O=this.str2blks(E),T=1732584193,P=-271733879,w=-1732584194,L=271733878,j=0;j<O.length;){var Se=T,rt=P,ut=w,Sn=L;T=this.ff(T,P,w,L,O[j],7,-680876936),L=this.ff(L,T,P,w,O[j+1],12,-389564586),w=this.ff(w,L,T,P,O[j+2],17,606105819),P=this.ff(P,w,L,T,O[j+3],22,-1044525330),T=this.ff(T,P,w,L,O[j+4],7,-176418897),L=this.ff(L,T,P,w,O[j+5],12,1200080426),w=this.ff(w,L,T,P,O[j+6],17,-1473231341),P=this.ff(P,w,L,T,O[j+7],22,-45705983),T=this.ff(T,P,w,L,O[j+8],7,1770035416),L=this.ff(L,T,P,w,O[j+9],12,-1958414417),w=this.ff(w,L,T,P,O[j+10],17,-42063),P=this.ff(P,w,L,T,O[j+11],22,-1990404162),T=this.ff(T,P,w,L,O[j+12],7,1804603682),L=this.ff(L,T,P,w,O[j+13],12,-40341101),w=this.ff(w,L,T,P,O[j+14],17,-1502002290),P=this.ff(P,w,L,T,O[j+15],22,1236535329),T=this.gg(T,P,w,L,O[j+1],5,-165796510),L=this.gg(L,T,P,w,O[j+6],9,-1069501632),w=this.gg(w,L,T,P,O[j+11],14,643717713),P=this.gg(P,w,L,T,O[j],20,-373897302),T=this.gg(T,P,w,L,O[j+5],5,-701558691),L=this.gg(L,T,P,w,O[j+10],9,38016083),w=this.gg(w,L,T,P,O[j+15],14,-660478335),P=this.gg(P,w,L,T,O[j+4],20,-405537848),T=this.gg(T,P,w,L,O[j+9],5,568446438),L=this.gg(L,T,P,w,O[j+14],9,-1019803690),w=this.gg(w,L,T,P,O[j+3],14,-187363961),P=this.gg(P,w,L,T,O[j+8],20,1163531501),T=this.gg(T,P,w,L,O[j+13],5,-1444681467),L=this.gg(L,T,P,w,O[j+2],9,-51403784),w=this.gg(w,L,T,P,O[j+7],14,1735328473),P=this.gg(P,w,L,T,O[j+12],20,-1926607734),T=this.hh(T,P,w,L,O[j+5],4,-378558),L=this.hh(L,T,P,w,O[j+8],11,-2022574463),w=this.hh(w,L,T,P,O[j+11],16,1839030562),P=this.hh(P,w,L,T,O[j+14],23,-35309556),T=this.hh(T,P,w,L,O[j+1],4,-1530992060),L=this.hh(L,T,P,w,O[j+4],11,1272893353),w=this.hh(w,L,T,P,O[j+7],16,-155497632),P=this.hh(P,w,L,T,O[j+10],23,-1094730640),T=this.hh(T,P,w,L,O[j+13],4,681279174),L=this.hh(L,T,P,w,O[j],11,-358537222),w=this.hh(w,L,T,P,O[j+3],16,-722521979),P=this.hh(P,w,L,T,O[j+6],23,76029189),T=this.hh(T,P,w,L,O[j+9],4,-640364487),L=this.hh(L,T,P,w,O[j+12],11,-421815835),w=this.hh(w,L,T,P,O[j+15],16,530742520),P=this.hh(P,w,L,T,O[j+2],23,-995338651),T=this.ii(T,P,w,L,O[j],6,-198630844),L=this.ii(L,T,P,w,O[j+7],10,1126891415),w=this.ii(w,L,T,P,O[j+14],15,-1416354905),P=this.ii(P,w,L,T,O[j+5],21,-57434055),T=this.ii(T,P,w,L,O[j+12],6,1700485571),L=this.ii(L,T,P,w,O[j+3],10,-1894986606),w=this.ii(w,L,T,P,O[j+10],15,-1051523),P=this.ii(P,w,L,T,O[j+1],21,-2054922799),T=this.ii(T,P,w,L,O[j+8],6,1873313359),L=this.ii(L,T,P,w,O[j+15],10,-30611744),w=this.ii(w,L,T,P,O[j+6],15,-1560198380),P=this.ii(P,w,L,T,O[j+13],21,1309151649),T=this.ii(T,P,w,L,O[j+4],6,-145523070),L=this.ii(L,T,P,w,O[j+11],10,-1120210379),w=this.ii(w,L,T,P,O[j+2],15,718787259),P=this.ii(P,w,L,T,O[j+9],21,-343485551),T=this.addme(T,Se),P=this.addme(P,rt),w=this.addme(w,ut),L=this.addme(L,Sn),j+=16}return this.rhex(T)+this.rhex(P)+this.rhex(w)+this.rhex(L)},ii:function(E,O,T,P,w,L,j){return this.cmn(this.bitXOR(T,this.bitOR(O,~P)),E,O,w,L,j)},hh:function(E,O,T,P,w,L,j){return this.cmn(this.bitXOR(this.bitXOR(O,T),P),E,O,w,L,j)},gg:function(E,O,T,P,w,L,j){return this.cmn(this.bitOR(this.bitAND(O,P),this.bitAND(T,~P)),E,O,w,L,j)},ff:function(E,O,T,P,w,L,j){return this.cmn(this.bitOR(this.bitAND(O,T),this.bitAND(~O,P)),E,O,w,L,j)},cmn:function(E,O,T,P,w,L){return this.addme(this.rol(this.addme(this.addme(O,E),this.addme(P,L)),w),T)},rol:function(E,O){return E<<O|E>>>32-O},str2blks:function(E){for(var O=1+(E.length+8>>6),T=new Array,P=0,w=16*O;P<w;)T[L=P++]=0;for(var L=0;L<E.length;)T[L>>2]|=HxOverrides.cca(E,L)<<(8*E.length+L)%4*8,L++;T[L>>2]|=128<<(8*E.length+L)%4*8;var j=8*E.length,Se=16*O-2;return T[Se]=255&j,T[Se]|=(j>>>8&255)<<8,T[Se]|=(j>>>16&255)<<16,T[Se]|=(j>>>24&255)<<24,T},rhex:function(E){for(var O="",T=0;T<4;){var P=T++;O+="0123456789abcdef".charAt(E>>8*P+4&15)+"0123456789abcdef".charAt(E>>8*P&15)}return O},addme:function(E,O){var T=(65535&E)+(65535&O);return(E>>16)+(O>>16)+(T>>16)<<16|65535&T},bitAND:function(E,O){return(E>>>1&O>>>1)<<1|1&E&O},bitXOR:function(E,O){return(E>>>1^O>>>1)<<1|1&E^1&O},bitOR:function(E,O){return(E>>>1|O>>>1)<<1|1&E|1&O},__class__:haxe.Md5},haxe.Timer=function(E){var O=this;this.id=window.setInterval(function(){O.run()},E)},haxe.Timer.__name__=!0,haxe.Timer.delay=function(E,O){var T=new haxe.Timer(O);return T.run=function(){T.stop(),E()},T},haxe.Timer.measure=function(E,O){var T=haxe.Timer.stamp(),P=E();return haxe.Log.trace(haxe.Timer.stamp()-T+"s",O),P},haxe.Timer.stamp=function(){return(new Date).getTime()/1e3},haxe.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:haxe.Timer};var js=js||{},$_;function $bind(E,O){var T=function(){return T.method.apply(T.scope,arguments)};return T.scope=E,T.method=O,T}js.Boot=function(){},js.Boot.__name__=!0,js.Boot.__unhtml=function(E){return E.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(E,O){var T,P=null!=O?O.fileName+":"+O.lineNumber+": ":"";P+=js.Boot.__string_rec(E,""),typeof document<"u"&&null!=(T=document.getElementById("haxe:trace"))?T.innerHTML+=js.Boot.__unhtml(P)+"<br/>":typeof console<"u"&&null!=console.log&&console.log(P)},js.Boot.__clear_trace=function(){var E=document.getElementById("haxe:trace");null!=E&&(E.innerHTML="")},js.Boot.isClass=function(E){return E.__name__},js.Boot.isEnum=function(E){return E.__ename__},js.Boot.getClass=function(E){return E.__class__},js.Boot.__string_rec=function(E,O){if(null==E)return"null";if(O.length>=5)return"<...>";var T=typeof E;switch("function"==T&&(E.__name__||E.__ename__)&&(T="object"),T){case"object":if(E instanceof Array){if(E.__enum__){if(2==E.length)return E[0];var P=E[0]+"(";O+="\t";for(var w=2,L=E.length;w<L;)P+=2!=(j=w++)?","+js.Boot.__string_rec(E[j],O):js.Boot.__string_rec(E[j],O);return P+")"}var j,Se=E.length;for(P="[",O+="\t",L=0;L<Se;){var rt=L++;P+=(rt>0?",":"")+js.Boot.__string_rec(E[rt],O)}return P+"]"}var ut;try{ut=E.toString}catch{return"???"}if(null!=ut&&ut!=Object.toString){var Sn=E.toString();if("[object Object]"!=Sn)return Sn}var dt=null;P="{\n",O+="\t";var ze=null!=E.hasOwnProperty;for(var dt in E)ze&&!E.hasOwnProperty(dt)||"prototype"!=dt&&"__class__"!=dt&&"__super__"!=dt&&"__interfaces__"!=dt&&"__properties__"!=dt&&(2!=P.length&&(P+=", \n"),P+=O+dt+" : "+js.Boot.__string_rec(E[dt],O));return P+"\n"+(O=O.substring(1))+"}";case"function":return"<function>";case"string":return E;default:return String(E)}},js.Boot.__interfLoop=function(E,O){if(null==E)return!1;if(E==O)return!0;var T=E.__interfaces__;if(null!=T)for(var P=0,w=T.length;P<w;){var L=T[P++];if(L==O||js.Boot.__interfLoop(L,O))return!0}return js.Boot.__interfLoop(E.__super__,O)},js.Boot.__instanceof=function(E,O){try{if(E instanceof O)return O!=Array||null==E.__enum__;if(js.Boot.__interfLoop(E.__class__,O))return!0}catch{if(null==O)return!1}switch(O){case Int:return Math.ceil(E%2147483648)===E;case Float:return"number"==typeof E;case Bool:return!0===E||!1===E;case String:return"string"==typeof E;case Dynamic:return!0;default:return null!=E&&(O==Class&&null!=E.__name__||O==Enum&&null!=E.__ename__||E.__enum__==O)}},js.Boot.__cast=function(E,O){if(js.Boot.__instanceof(E,O))return E;throw"Cannot cast "+Std.string(E)+" to "+Std.string(O)},js.Lib=function(){},js.Lib.__name__=!0,js.Lib.debug=function(){},js.Lib.alert=function(E){alert(js.Boot.__string_rec(E,""))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(E){js.Lib.onerror=E},Array.prototype.indexOf&&(HxOverrides.remove=function(E,O){var T=E.indexOf(O);return-1!=T&&(E.splice(T,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(E){return isFinite(E)},Math.isNaN=function(E){return isNaN(E)},String.prototype.__class__=String,String.__name__=!0,Array.prototype.__class__=Array,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Int={__name__:["Int"]},Dynamic={__name__:["Dynamic"]},Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]},Enum={},Void={__ename__:["Void"]};typeof document<"u"&&(js.Lib.document=document),typeof window<"u"&&(js.Lib.window=window,js.Lib.window.onerror=function(E,O,T){var P=js.Lib.onerror;return null!=P&&P(E,[O+":"+T])}),com.wiris.js.JsPluginTools.main(),delete Array.prototype.__class__})(),function(){var HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.dateStr=function(E){var O=E.getMonth()+1,T=E.getDate(),P=E.getHours(),w=E.getMinutes(),L=E.getSeconds();return E.getFullYear()+"-"+(O<10?"0"+O:""+O)+"-"+(T<10?"0"+T:""+T)+" "+(P<10?"0"+P:""+P)+":"+(w<10?"0"+w:""+w)+":"+(L<10?"0"+L:""+L)},HxOverrides.strDate=function(E){switch(E.length){case 8:var O=E.split(":"),T=new Date;return T.setTime(0),T.setUTCHours(O[0]),T.setUTCMinutes(O[1]),T.setUTCSeconds(O[2]),T;case 10:return O=E.split("-"),new Date(O[0],O[1]-1,O[2],0,0,0);case 19:var P=(O=E.split(" "))[0].split("-"),w=O[1].split(":");return new Date(P[0],P[1]-1,P[2],w[0],w[1],w[2]);default:throw"Invalid date format : "+E}},HxOverrides.cca=function(E,O){var T=E.charCodeAt(O);if(T==T)return T},HxOverrides.substr=function(E,O,T){return null!=O&&0!=O&&null!=T&&T<0?"":(null==T&&(T=E.length),O<0?(O=E.length+O)<0&&(O=0):T<0&&(T=E.length+T-O),E.substr(O,T))},HxOverrides.remove=function(E,O){for(var T=0,P=E.length;T<P;){if(E[T]==O)return E.splice(T,1),!0;T++}return!1},HxOverrides.iter=function(E){return{cur:0,arr:E,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIter=function(E,O){this.min=E,this.max=O};IntIter.__name__=!0,IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:IntIter};var Std=function(){};Std.__name__=!0,Std.is=function(E,O){return js.Boot.__instanceof(E,O)},Std.string=function(E){return js.Boot.__string_rec(E,"")},Std.int=function(E){return 0|E},Std.parseInt=function(E){var O=parseInt(E,10);return 0!=O||120!=HxOverrides.cca(E,1)&&88!=HxOverrides.cca(E,1)||(O=parseInt(E)),isNaN(O)?null:O},Std.parseFloat=function(E){return parseFloat(E)},Std.random=function(E){return Math.floor(Math.random()*E)};var com=com||{};com.wiris||(com.wiris={}),com.wiris.js||(com.wiris.js={}),com.wiris.js.JsPluginTools=function(){this.tryReady()},com.wiris.js.JsPluginTools.__name__=!0,com.wiris.js.JsPluginTools.main=function(){var E;E=com.wiris.js.JsPluginTools.getInstance(),haxe.Timer.delay($bind(E,E.tryReady),100)},com.wiris.js.JsPluginTools.getInstance=function(){return null==com.wiris.js.JsPluginTools.instance&&(com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools),com.wiris.js.JsPluginTools.instance},com.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={}),null==window.com.wiris&&(window.com.wiris={}),null==window.com.wiris.js&&(window.com.wiris.js={}),null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance())},com.wiris.js.JsPluginTools.prototype={md5encode:function(E){return haxe.Md5.encode(E)},doLoad:function(){this.ready=!0,com.wiris.js.JsPluginTools.instance=this,com.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1,js.Lib.document.readyState&&(this.doLoad(),this.ready=!0),this.ready||haxe.Timer.delay($bind(this,this.tryReady),100)},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){},haxe.Log.__name__=!0,haxe.Log.trace=function(E,O){js.Boot.__trace(E,O)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Md5=function(){},haxe.Md5.__name__=!0,haxe.Md5.encode=function(E){return(new haxe.Md5).doEncode(E)},haxe.Md5.prototype={doEncode:function(E){for(var O=this.str2blks(E),T=1732584193,P=-271733879,w=-1732584194,L=271733878,j=0;j<O.length;){var Se=T,rt=P,ut=w,Sn=L;T=this.ff(T,P,w,L,O[j],7,-680876936),L=this.ff(L,T,P,w,O[j+1],12,-389564586),w=this.ff(w,L,T,P,O[j+2],17,606105819),P=this.ff(P,w,L,T,O[j+3],22,-1044525330),T=this.ff(T,P,w,L,O[j+4],7,-176418897),L=this.ff(L,T,P,w,O[j+5],12,1200080426),w=this.ff(w,L,T,P,O[j+6],17,-1473231341),P=this.ff(P,w,L,T,O[j+7],22,-45705983),T=this.ff(T,P,w,L,O[j+8],7,1770035416),L=this.ff(L,T,P,w,O[j+9],12,-1958414417),w=this.ff(w,L,T,P,O[j+10],17,-42063),P=this.ff(P,w,L,T,O[j+11],22,-1990404162),T=this.ff(T,P,w,L,O[j+12],7,1804603682),L=this.ff(L,T,P,w,O[j+13],12,-40341101),w=this.ff(w,L,T,P,O[j+14],17,-1502002290),P=this.ff(P,w,L,T,O[j+15],22,1236535329),T=this.gg(T,P,w,L,O[j+1],5,-165796510),L=this.gg(L,T,P,w,O[j+6],9,-1069501632),w=this.gg(w,L,T,P,O[j+11],14,643717713),P=this.gg(P,w,L,T,O[j],20,-373897302),T=this.gg(T,P,w,L,O[j+5],5,-701558691),L=this.gg(L,T,P,w,O[j+10],9,38016083),w=this.gg(w,L,T,P,O[j+15],14,-660478335),P=this.gg(P,w,L,T,O[j+4],20,-405537848),T=this.gg(T,P,w,L,O[j+9],5,568446438),L=this.gg(L,T,P,w,O[j+14],9,-1019803690),w=this.gg(w,L,T,P,O[j+3],14,-187363961),P=this.gg(P,w,L,T,O[j+8],20,1163531501),T=this.gg(T,P,w,L,O[j+13],5,-1444681467),L=this.gg(L,T,P,w,O[j+2],9,-51403784),w=this.gg(w,L,T,P,O[j+7],14,1735328473),P=this.gg(P,w,L,T,O[j+12],20,-1926607734),T=this.hh(T,P,w,L,O[j+5],4,-378558),L=this.hh(L,T,P,w,O[j+8],11,-2022574463),w=this.hh(w,L,T,P,O[j+11],16,1839030562),P=this.hh(P,w,L,T,O[j+14],23,-35309556),T=this.hh(T,P,w,L,O[j+1],4,-1530992060),L=this.hh(L,T,P,w,O[j+4],11,1272893353),w=this.hh(w,L,T,P,O[j+7],16,-155497632),P=this.hh(P,w,L,T,O[j+10],23,-1094730640),T=this.hh(T,P,w,L,O[j+13],4,681279174),L=this.hh(L,T,P,w,O[j],11,-358537222),w=this.hh(w,L,T,P,O[j+3],16,-722521979),P=this.hh(P,w,L,T,O[j+6],23,76029189),T=this.hh(T,P,w,L,O[j+9],4,-640364487),L=this.hh(L,T,P,w,O[j+12],11,-421815835),w=this.hh(w,L,T,P,O[j+15],16,530742520),P=this.hh(P,w,L,T,O[j+2],23,-995338651),T=this.ii(T,P,w,L,O[j],6,-198630844),L=this.ii(L,T,P,w,O[j+7],10,1126891415),w=this.ii(w,L,T,P,O[j+14],15,-1416354905),P=this.ii(P,w,L,T,O[j+5],21,-57434055),T=this.ii(T,P,w,L,O[j+12],6,1700485571),L=this.ii(L,T,P,w,O[j+3],10,-1894986606),w=this.ii(w,L,T,P,O[j+10],15,-1051523),P=this.ii(P,w,L,T,O[j+1],21,-2054922799),T=this.ii(T,P,w,L,O[j+8],6,1873313359),L=this.ii(L,T,P,w,O[j+15],10,-30611744),w=this.ii(w,L,T,P,O[j+6],15,-1560198380),P=this.ii(P,w,L,T,O[j+13],21,1309151649),T=this.ii(T,P,w,L,O[j+4],6,-145523070),L=this.ii(L,T,P,w,O[j+11],10,-1120210379),w=this.ii(w,L,T,P,O[j+2],15,718787259),P=this.ii(P,w,L,T,O[j+9],21,-343485551),T=this.addme(T,Se),P=this.addme(P,rt),w=this.addme(w,ut),L=this.addme(L,Sn),j+=16}return this.rhex(T)+this.rhex(P)+this.rhex(w)+this.rhex(L)},ii:function(E,O,T,P,w,L,j){return this.cmn(this.bitXOR(T,this.bitOR(O,~P)),E,O,w,L,j)},hh:function(E,O,T,P,w,L,j){return this.cmn(this.bitXOR(this.bitXOR(O,T),P),E,O,w,L,j)},gg:function(E,O,T,P,w,L,j){return this.cmn(this.bitOR(this.bitAND(O,P),this.bitAND(T,~P)),E,O,w,L,j)},ff:function(E,O,T,P,w,L,j){return this.cmn(this.bitOR(this.bitAND(O,T),this.bitAND(~O,P)),E,O,w,L,j)},cmn:function(E,O,T,P,w,L){return this.addme(this.rol(this.addme(this.addme(O,E),this.addme(P,L)),w),T)},rol:function(E,O){return E<<O|E>>>32-O},str2blks:function(E){for(var O=1+(E.length+8>>6),T=new Array,P=0,w=16*O;P<w;)T[L=P++]=0;for(var L=0;L<E.length;)T[L>>2]|=HxOverrides.cca(E,L)<<(8*E.length+L)%4*8,L++;T[L>>2]|=128<<(8*E.length+L)%4*8;var j=8*E.length,Se=16*O-2;return T[Se]=255&j,T[Se]|=(j>>>8&255)<<8,T[Se]|=(j>>>16&255)<<16,T[Se]|=(j>>>24&255)<<24,T},rhex:function(E){for(var O="",T=0;T<4;){var P=T++;O+="0123456789abcdef".charAt(E>>8*P+4&15)+"0123456789abcdef".charAt(E>>8*P&15)}return O},addme:function(E,O){var T=(65535&E)+(65535&O);return(E>>16)+(O>>16)+(T>>16)<<16|65535&T},bitAND:function(E,O){return(E>>>1&O>>>1)<<1|1&E&O},bitXOR:function(E,O){return(E>>>1^O>>>1)<<1|1&E^1&O},bitOR:function(E,O){return(E>>>1|O>>>1)<<1|1&E|1&O},__class__:haxe.Md5},haxe.Timer=function(E){var O=this;this.id=window.setInterval(function(){O.run()},E)},haxe.Timer.__name__=!0,haxe.Timer.delay=function(E,O){var T=new haxe.Timer(O);return T.run=function(){T.stop(),E()},T},haxe.Timer.measure=function(E,O){var T=haxe.Timer.stamp(),P=E();return haxe.Log.trace(haxe.Timer.stamp()-T+"s",O),P},haxe.Timer.stamp=function(){return(new Date).getTime()/1e3},haxe.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:haxe.Timer};var js=js||{},$_;function $bind(E,O){var T=function(){return T.method.apply(T.scope,arguments)};return T.scope=E,T.method=O,T}js.Boot=function(){},js.Boot.__name__=!0,js.Boot.__unhtml=function(E){return E.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(E,O){var T,P=null!=O?O.fileName+":"+O.lineNumber+": ":"";P+=js.Boot.__string_rec(E,""),typeof document<"u"&&null!=(T=document.getElementById("haxe:trace"))?T.innerHTML+=js.Boot.__unhtml(P)+"<br/>":typeof console<"u"&&null!=console.log&&console.log(P)},js.Boot.__clear_trace=function(){var E=document.getElementById("haxe:trace");null!=E&&(E.innerHTML="")},js.Boot.isClass=function(E){return E.__name__},js.Boot.isEnum=function(E){return E.__ename__},js.Boot.getClass=function(E){return E.__class__},js.Boot.__string_rec=function(E,O){if(null==E)return"null";if(O.length>=5)return"<...>";var T=typeof E;switch("function"==T&&(E.__name__||E.__ename__)&&(T="object"),T){case"object":if(E instanceof Array){if(E.__enum__){if(2==E.length)return E[0];var P=E[0]+"(";O+="\t";for(var w=2,L=E.length;w<L;)P+=2!=(j=w++)?","+js.Boot.__string_rec(E[j],O):js.Boot.__string_rec(E[j],O);return P+")"}var j,Se=E.length;for(P="[",O+="\t",L=0;L<Se;){var rt=L++;P+=(rt>0?",":"")+js.Boot.__string_rec(E[rt],O)}return P+"]"}var ut;try{ut=E.toString}catch{return"???"}if(null!=ut&&ut!=Object.toString){var Sn=E.toString();if("[object Object]"!=Sn)return Sn}var dt=null;P="{\n",O+="\t";var ze=null!=E.hasOwnProperty;for(var dt in E)ze&&!E.hasOwnProperty(dt)||"prototype"!=dt&&"__class__"!=dt&&"__super__"!=dt&&"__interfaces__"!=dt&&"__properties__"!=dt&&(2!=P.length&&(P+=", \n"),P+=O+dt+" : "+js.Boot.__string_rec(E[dt],O));return P+"\n"+(O=O.substring(1))+"}";case"function":return"<function>";case"string":return E;default:return String(E)}},js.Boot.__interfLoop=function(E,O){if(null==E)return!1;if(E==O)return!0;var T=E.__interfaces__;if(null!=T)for(var P=0,w=T.length;P<w;){var L=T[P++];if(L==O||js.Boot.__interfLoop(L,O))return!0}return js.Boot.__interfLoop(E.__super__,O)},js.Boot.__instanceof=function(E,O){try{if(E instanceof O)return O!=Array||null==E.__enum__;if(js.Boot.__interfLoop(E.__class__,O))return!0}catch{if(null==O)return!1}switch(O){case Int:return Math.ceil(E%2147483648)===E;case Float:return"number"==typeof E;case Bool:return!0===E||!1===E;case String:return"string"==typeof E;case Dynamic:return!0;default:return null!=E&&(O==Class&&null!=E.__name__||O==Enum&&null!=E.__ename__||E.__enum__==O)}},js.Boot.__cast=function(E,O){if(js.Boot.__instanceof(E,O))return E;throw"Cannot cast "+Std.string(E)+" to "+Std.string(O)},js.Lib=function(){},js.Lib.__name__=!0,js.Lib.debug=function(){},js.Lib.alert=function(E){alert(js.Boot.__string_rec(E,""))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(E){js.Lib.onerror=E},Array.prototype.indexOf&&(HxOverrides.remove=function(E,O){var T=E.indexOf(O);return-1!=T&&(E.splice(T,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(E){return isFinite(E)},Math.isNaN=function(E){return isNaN(E)},String.prototype.__class__=String,String.__name__=!0,Array.prototype.__class__=Array,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Int={__name__:["Int"]},Dynamic={__name__:["Dynamic"]},Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]},Enum={},Void={__ename__:["Void"]};typeof document<"u"&&(js.Lib.document=document),typeof window<"u"&&(js.Lib.window=window,js.Lib.window.onerror=function(E,O,T){var P=js.Lib.onerror;return null!=P&&P(E,[O+":"+T])}),com.wiris.js.JsPluginTools.main()}(),delete Array.prototype.__class__},function(E,O,T){var P=T(1),w=T(103);"string"==typeof(w=w.__esModule?w.default:w)&&(w=[[E.i,w,""]]);var j=(P(w,{injectType:"singletonStyleTag",insert:"head",singleton:!0}),w.locals?w.locals:{});E.exports=j},function(E,O){E.exports=".wrs_modal_overlay{position:fixed;font-family:arial,sans-serif;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.8);z-index:999998;opacity:.65;pointer-events:auto}.wrs_modal_overlay.wrs_modal_android,.wrs_modal_overlay.wrs_modal_ios{visibility:hidden;display:none}.wrs_modal_overlay.wrs_modal_ios.moodle{position:fixed}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack{background:transparent;display:none}.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized{background:rgba(0,0,0,.8)}.wrs_modal_overlay.wrs_modal_desktop.wrs_closed,.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized{background:transparent;display:none}.wrs_modal_title{color:#fff;padding:5px 0 5px 10px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-align:left}.wrs_modal_close_button{background-repeat:no-repeat}.wrs_modal_close_button,.wrs_modal_minimize_button{float:right;cursor:pointer;color:#fff;padding:5px 10px 5px 0;margin:10px 7px 0 0}.wrs_modal_minimize_button{top:inherit}.wrs_modal_stack_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_stack_button.wrs_minimized,.wrs_modal_stack_button.wrs_stack{visibility:hidden;margin:0;padding:0}.wrs_modal_maximize_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_maximize_button.wrs_maximized{visibility:hidden;margin:0;padding:0}.wrs_modal_wrapper{display:block}.wrs_modal_title_bar{display:block;background-color:#778e9a}.wrs_modal_dialogContainer{border:none;background:#fafafa;z-index:999999}.wrs_modal_dialogContainer.wrs_modal_desktop{font-size:14px}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized{position:fixed}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized{position:fixed;top:inherit;margin:0 10px 0 0}.wrs_modal_dialogContainer.wrs_closed{visibility:hidden;display:none;opacity:0}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack{position:fixed;bottom:0;right:0;box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_drag,.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag{box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_modal_android{width:99%;height:99%}.wrs_modal_dialogContainer.wrs_modal_android,.wrs_modal_dialogContainer.wrs_modal_ios{margin:auto;overflow:hidden;transform:translate(50%,-50%);top:50%;right:50%!important;position:fixed}.wrs_modal_dialogContainer.wrs_modal_ios{width:100%;height:100%}.wrs_content_container.wrs_minimized{display:none}.wrs_content_container.wrs_modal_android{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_content_container.wrs_modal_android>div:first-child,.wrs_content_container.wrs_modal_desktop>div:first-child,.wrs_content_container.wrs_modal_ios>div:first-child{flex-grow:1}.wrs_modal_wrapper.wrs_modal_android{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_content_container.wrs_modal_desktop,.wrs_content_container.wrs_modal_ios{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_ios{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_virtual_keyboard{height:100%;width:100%;top:0;left:50%;transform:translate(-50%)}@media (orientation:portrait){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}@media (orientation:landscape){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}.wrs_modal_dialogContainer.wrs_modal_badStock,.wrs_modal_wrapper.wrs_modal_badStock{width:100%;height:280px;margin:0 auto;border-width:0}.wrs_noselect{-khtml-user-select:none}.wrs_bottom_right_resizer,.wrs_noselect{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.wrs_bottom_right_resizer{width:10px;height:10px;color:#778e9a;position:absolute;right:4px;bottom:8px;cursor:se-resize}.wrs_bottom_left_resizer{width:15px;height:15px;color:#778e9a;position:absolute;left:0;top:0;cursor:se-resize}.wrs_modal_controls{height:42px;margin:3px 0;overflow:hidden;line-height:normal}.wrs_modal_links{margin:10px auto 0;font-family:arial,sans-serif;padding:6px;display:inline;float:right;text-align:right}.wrs_modal_links>a{text-decoration:none;color:#778e9a;font-size:16px}.wrs_modal_button_cancel,.wrs_modal_button_cancel:active,.wrs_modal_button_cancel:focus,.wrs_modal_button_cancel:hover,.wrs_modal_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;height:32px}.wrs_modal_button_accept,.wrs_modal_button_accept:active,.wrs_modal_button_accept:focus,.wrs_modal_button_accept:hover,.wrs_modal_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor_vertical_bar{height:20px;float:right;background:none;width:20px;cursor:pointer}.wrs_modal_buttons_container{display:inline;float:left}.wrs_modal_buttons_container.wrs_modalAndroid{padding-left:6px}.wrs_modal_buttons_container.wrs_modalDesktop{padding-left:0}.wrs_modal_buttons_container>button{line-height:normal;background-image:none}.wrs_modal_wrapper{margin:6px;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized{display:none}@media only screen and (max-device-width:480px) and (orientation:portrait){#wrs_modal_wrapper{width:140%}}.wrs_popupmessage_overlay_envolture{display:none;width:100%}.wrs_popupmessage_overlay{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);z-index:4;cursor:pointer}.wrs_popupmessage_panel{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;background:#fff;max-width:500px;width:75%;border-radius:2px;padding:20px;font-family:sans-serif;font-size:15px;text-align:left;color:#2e2e2e;z-index:5;max-height:75%;overflow:auto}.wrs_popupmessage_button_area{margin:10px 0 0}.wrs_panelContainer *{border:0}.wrs_button_cancel,.wrs_button_cancel:active,.wrs_button_cancel:focus,.wrs_button_cancel:hover,.wrs_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;background-image:none;height:32px}.wrs_button_accept,.wrs_button_accept:active,.wrs_button_accept:focus,.wrs_button_accept:hover,.wrs_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor button{box-shadow:none}.wrs_editor .wrs_header button{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active{display:block}.wrs_toolbar tr:focus,.wrs_toolbar tr:hover{background:none}.wrs_modal_rtl .wrs_modal_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_modal_button_accept{margin-right:0;margin-left:5px}.wrs_modal_rtl .wrs_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_button_accept{margin-right:0;margin-left:5px}"},function(E,O,T){T.r(O);var P=T(3),w=P.a.Symbol,L=Object.prototype,j=L.hasOwnProperty,Se=L.toString,rt=w?w.toStringTag:void 0,Sn=Object.prototype.toString,ze=w?w.toStringTag:void 0,et=function(u){return null==u?void 0===u?"[object Undefined]":"[object Null]":ze&&ze in Object(u)?function(u){var i=j.call(u,rt),r=u[rt];try{u[rt]=void 0;var a=!0}catch{}var c=Se.call(u);return a&&(i?u[rt]=r:delete u[rt]),c}(u):function(u){return Sn.call(u)}(u)},Fn=function(u,i){return function(r){return u(i(r))}},Rt=Fn(Object.getPrototypeOf,Object),qt=function(u){return null!=u&&"object"==typeof u},Ne=Function.prototype.toString,xt=Object.prototype.hasOwnProperty,sn=Ne.call(Object),ht=function(u){if(!qt(u)||"[object Object]"!=et(u))return!1;var i=Rt(u);if(null===i)return!0;var r=xt.call(i,"constructor")&&i.constructor;return"function"==typeof r&&r instanceof r&&Ne.call(r)==sn},zi=function(u,i){return u===i||u!=u&&i!=i},bo=function(u,i){for(var r=u.length;r--;)if(zi(u[r][0],i))return r;return-1},Dr=Array.prototype.splice;function rs(u){var i=-1,r=null==u?0:u.length;for(this.clear();++i<r;){var a=u[i];this.set(a[0],a[1])}}rs.prototype.clear=function(){this.__data__=[],this.size=0},rs.prototype.delete=function(u){var i=this.__data__,r=bo(i,u);return!(r<0||(r==i.length-1?i.pop():Dr.call(i,r,1),--this.size,0))},rs.prototype.get=function(u){var i=this.__data__,r=bo(i,u);return r<0?void 0:i[r][1]},rs.prototype.has=function(u){return bo(this.__data__,u)>-1},rs.prototype.set=function(u,i){var r=this.__data__,a=bo(r,u);return a<0?(++this.size,r.push([u,i])):r[a][1]=i,this};var sm,yo=rs,$n=function(u){var i=typeof u;return null!=u&&("object"==i||"function"==i)},Ms=function(u){if(!$n(u))return!1;var i=et(u);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i},mt=P.a["__core-js_shared__"],Ih=(sm=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||""))?"Symbol(src)_1."+sm:"",yn=Function.prototype.toString,Et=function(u){if(null!=u){try{return yn.call(u)}catch{}try{return u+""}catch{}}return""},fy=/^\[object .+?Constructor\]$/,mE=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ea=function(u,i){var r=function(u,i){return u?.[i]}(u,i);return function(u){return!(!$n(u)||function(u){return!!Ih&&Ih in u}(u))&&(Ms(u)?mE:fy).test(Et(u))}(r)?r:void 0},Mr=Ea(P.a,"Map"),au=Ea(Object,"create"),um=Object.prototype.hasOwnProperty,yE=Object.prototype.hasOwnProperty;function wo(u){var i=-1,r=null==u?0:u.length;for(this.clear();++i<r;){var a=u[i];this.set(a[0],a[1])}}wo.prototype.clear=function(){this.__data__=au?au(null):{},this.size=0},wo.prototype.delete=function(u){var i=this.has(u)&&delete this.__data__[u];return this.size-=i?1:0,i},wo.prototype.get=function(u){var i=this.__data__;if(au){var r=i[u];return"__lodash_hash_undefined__"===r?void 0:r}return um.call(i,u)?i[u]:void 0},wo.prototype.has=function(u){var i=this.__data__;return au?void 0!==i[u]:yE.call(i,u)},wo.prototype.set=function(u,i){var r=this.__data__;return this.size+=this.has(u)?0:1,r[u]=au&&void 0===i?"__lodash_hash_undefined__":i,this};var dm=wo,Fh=function(u,i){var r=u.__data__;return function(u){var i=typeof u;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==u:null===u}(i)?r["string"==typeof i?"string":"hash"]:r.map};function Tl(u){var i=-1,r=null==u?0:u.length;for(this.clear();++i<r;){var a=u[i];this.set(a[0],a[1])}}Tl.prototype.clear=function(){this.size=0,this.__data__={hash:new dm,map:new(Mr||yo),string:new dm}},Tl.prototype.delete=function(u){var i=Fh(this,u).delete(u);return this.size-=i?1:0,i},Tl.prototype.get=function(u){return Fh(this,u).get(u)},Tl.prototype.has=function(u){return Fh(this,u).has(u)},Tl.prototype.set=function(u,i){var r=Fh(this,u),a=r.size;return r.set(u,i),this.size+=r.size==a?0:1,this};var Lh=Tl;function Ss(u){var i=this.__data__=new yo(u);this.size=i.size}Ss.prototype.clear=function(){this.__data__=new yo,this.size=0},Ss.prototype.delete=function(u){var i=this.__data__,r=i.delete(u);return this.size=i.size,r},Ss.prototype.get=function(u){return this.__data__.get(u)},Ss.prototype.has=function(u){return this.__data__.has(u)},Ss.prototype.set=function(u,i){var r=this.__data__;if(r instanceof yo){var a=r.__data__;if(!Mr||a.length<199)return a.push([u,i]),this.size=++r.size,this;r=this.__data__=new Lh(a)}return r.set(u,i),this.size=r.size,this};var Ta=Ss,Dl=function(){try{var u=Ea(Object,"defineProperty");return u({},"",{}),u}catch{}}(),Vh=function(u,i,r){"__proto__"==i&&Dl?Dl(u,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):u[i]=r},fm=Object.prototype.hasOwnProperty,lu=function(u,i,r){var a=u[i];fm.call(u,i)&&zi(a,r)&&(void 0!==r||i in u)||Vh(u,i,r)},As=function(u,i,r,a){var c=!r;r||(r={});for(var d=-1,f=i.length;++d<f;){var g=i[d],_=a?a(r[g],u[g],g,r,u):void 0;void 0===_&&(_=u[g]),c?Vh(r,g,_):lu(r,g,_)}return r},Yn=function(u){return qt(u)&&"[object Arguments]"==et(u)},gm=Object.prototype,_y=gm.hasOwnProperty,vy=gm.propertyIsEnumerable,jh=Yn(function(){return arguments}())?Yn:function(u){return qt(u)&&_y.call(u,"callee")&&!vy.call(u,"callee")},vi=Array.isArray,Ml=T(4),by=/^(?:0|[1-9]\d*)$/,Ho=function(u,i){var r=typeof u;return!!(i=i??9007199254740991)&&("number"==r||"symbol"!=r&&by.test(u))&&u>-1&&u%1==0&&u<i},mm=function(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=9007199254740991},Ke={};Ke["[object Float32Array]"]=Ke["[object Float64Array]"]=Ke["[object Int8Array]"]=Ke["[object Int16Array]"]=Ke["[object Int32Array]"]=Ke["[object Uint8Array]"]=Ke["[object Uint8ClampedArray]"]=Ke["[object Uint16Array]"]=Ke["[object Uint32Array]"]=!0,Ke["[object Arguments]"]=Ke["[object Array]"]=Ke["[object ArrayBuffer]"]=Ke["[object Boolean]"]=Ke["[object DataView]"]=Ke["[object Date]"]=Ke["[object Error]"]=Ke["[object Function]"]=Ke["[object Map]"]=Ke["[object Number]"]=Ke["[object Object]"]=Ke["[object RegExp]"]=Ke["[object Set]"]=Ke["[object String]"]=Ke["[object WeakMap]"]=!1;var no=function(u){return function(i){return u(i)}},Sl=T(5),_m=Sl.a&&Sl.a.isTypedArray,cu=_m?no(_m):function(u){return qt(u)&&mm(u.length)&&!!Ke[et(u)]},Hh=Object.prototype.hasOwnProperty,Al=function(u,i){var r=vi(u),a=!r&&jh(u),c=!r&&!a&&Object(Ml.a)(u),d=!r&&!a&&!c&&cu(u),f=r||a||c||d,g=f?function(u,i){for(var r=-1,a=Array(u);++r<u;)a[r]=i(r);return a}(u.length,String):[],_=g.length;for(var b in u)!i&&!Hh.call(u,b)||f&&("length"==b||c&&("offset"==b||"parent"==b)||d&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||Ho(b,_))||g.push(b);return g},Ol=Object.prototype,zh=function(u){var i=u&&u.constructor;return u===("function"==typeof i&&i.prototype||Ol)},vm=Fn(Object.keys,Object),bm=Object.prototype.hasOwnProperty,uu=function(u){return null!=u&&mm(u.length)&&!Ms(u)},$h=function(u){return uu(u)?Al(u):function(u){if(!zh(u))return vm(u);var i=[];for(var r in Object(u))bm.call(u,r)&&"constructor"!=r&&i.push(r);return i}(u)},Cy=Object.prototype.hasOwnProperty,dn=function(u){return uu(u)?Al(u,!0):function(u){if(!$n(u))return function(u){var i=[];if(null!=u)for(var r in Object(u))i.push(r);return i}(u);var i=zh(u),r=[];for(var a in u)("constructor"!=a||!i&&Cy.call(u,a))&&r.push(a);return r}(u)},Gh=T(8),du=function(u,i){var r=-1,a=u.length;for(i||(i=Array(a));++r<a;)i[r]=u[r];return i},hu=function(){return[]},nn=Object.prototype.propertyIsEnumerable,fu=Object.getOwnPropertySymbols,qh=fu?function(u){return null==u?[]:(u=Object(u),function(u,i){for(var r=-1,a=null==u?0:u.length,c=0,d=[];++r<a;){var f=u[r];i(f)&&(d[c++]=f)}return d}(fu(u),function(i){return nn.call(u,i)}))}:hu,Ie=function(u,i){for(var r=-1,a=i.length,c=u.length;++r<a;)u[c+r]=i[r];return u},pu=Object.getOwnPropertySymbols?function(u){for(var i=[];u;)Ie(i,qh(u)),u=Rt(u);return i}:hu,pe=function(u,i,r){var a=i(u);return vi(u)?a:Ie(a,r(u))},Ma=function(u){return pe(u,$h,qh)},Je=function(u){return pe(u,dn,pu)},Tt=Ea(P.a,"DataView"),Wh=Ea(P.a,"Promise"),wm=Ea(P.a,"Set"),Kh=Ea(P.a,"WeakMap"),gu=Et(Tt),io=Et(Mr),ME=Et(Wh),xy=Et(wm),SE=Et(Kh),Oi=et;(Tt&&"[object DataView]"!=Oi(new Tt(new ArrayBuffer(1)))||Mr&&"[object Map]"!=Oi(new Mr)||Wh&&"[object Promise]"!=Oi(Wh.resolve())||wm&&"[object Set]"!=Oi(new wm)||Kh&&"[object WeakMap]"!=Oi(new Kh))&&(Oi=function(u){var i=et(u),r="[object Object]"==i?u.constructor:void 0,a=r?Et(r):"";if(a)switch(a){case gu:return"[object DataView]";case io:return"[object Map]";case ME:return"[object Promise]";case xy:return"[object Set]";case SE:return"[object WeakMap]"}return i});var mu=Oi,AE=Object.prototype.hasOwnProperty,Jh=P.a.Uint8Array,Yh=function(u){var i=new u.constructor(u.byteLength);return new Jh(i).set(new Jh(u)),i},Ey=/\w*$/,$i=w?w.prototype:void 0,Ft=$i?$i.valueOf:void 0,Ty=function(u,i){var r=i?Yh(u.buffer):u.buffer;return new u.constructor(r,u.byteOffset,u.length)},de=Object.create,FE=function(){function u(){}return function(i){if(!$n(i))return{};if(de)return de(i);u.prototype=i;var r=new u;return u.prototype=void 0,r}}(),Dt=function(u){return"function"!=typeof u.constructor||zh(u)?{}:FE(Rt(u))},Cm=Sl.a&&Sl.a.isMap,km=Cm?no(Cm):function(u){return qt(u)&&"[object Map]"==mu(u)},xm=Sl.a&&Sl.a.isSet,Em=xm?no(xm):function(u){return qt(u)&&"[object Set]"==mu(u)},$t={};$t["[object Arguments]"]=$t["[object Array]"]=$t["[object ArrayBuffer]"]=$t["[object DataView]"]=$t["[object Boolean]"]=$t["[object Date]"]=$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Map]"]=$t["[object Number]"]=$t["[object Object]"]=$t["[object RegExp]"]=$t["[object Set]"]=$t["[object String]"]=$t["[object Symbol]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t["[object Error]"]=$t["[object Function]"]=$t["[object WeakMap]"]=!1;var Pl=function u(i,r,a,c,d,f){var g,_=1&r,b=2&r,y=4&r;if(a&&(g=d?a(i,c,d,f):a(i)),void 0!==g)return g;if(!$n(i))return i;var k=vi(i);if(k){if(g=function(u){var i=u.length,r=new u.constructor(i);return i&&"string"==typeof u[0]&&AE.call(u,"index")&&(r.index=u.index,r.input=u.input),r}(i),!_)return du(i,g)}else{var S=mu(i),F="[object Function]"==S||"[object GeneratorFunction]"==S;if(Object(Ml.a)(i))return Object(Gh.a)(i,_);if("[object Object]"==S||"[object Arguments]"==S||F&&!d){if(g=b||F?{}:Dt(i),!_)return b?function(u,i){return As(u,pu(u),i)}(i,function(u,i){return u&&As(i,dn(i),u)}(g,i)):function(u,i){return As(u,qh(u),i)}(i,function(u,i){return u&&As(i,$h(i),u)}(g,i))}else{if(!$t[S])return d?i:{};g=function(u,i,r){var a=u.constructor;switch(i){case"[object ArrayBuffer]":return Yh(u);case"[object Boolean]":case"[object Date]":return new a(+u);case"[object DataView]":return function(u,i){var r=i?Yh(u.buffer):u.buffer;return new u.constructor(r,u.byteOffset,u.byteLength)}(u,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ty(u,r);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(u);case"[object RegExp]":return function(u){var i=new u.constructor(u.source,Ey.exec(u));return i.lastIndex=u.lastIndex,i}(u);case"[object Symbol]":return function(u){return Ft?Object(Ft.call(u)):{}}(u)}}(i,S,_)}}f||(f=new Ta);var $=f.get(i);if($)return $;f.set(i,g),Em(i)?i.forEach(function(oe){g.add(u(oe,r,a,oe,i,f))}):km(i)&&i.forEach(function(oe,ue){g.set(ue,u(oe,r,a,ue,i,f))});var G=y?b?Je:Ma:b?keysIn:$h,Y=k?void 0:G(i);return function(u,i){for(var r=-1,a=null==u?0:u.length;++r<a&&!1!==i(u[r],r););}(Y||i,function(oe,ue){Y&&(oe=i[ue=oe]),lu(g,ue,u(oe,r,a,ue,i,f))}),g},Qh=function(u,i){return Pl(u,5,i="function"==typeof i?i:void 0)},ss=function(u){return qt(u)&&1===u.nodeType&&!ht(u)};class Pe{constructor(i,r){this._config={},r&&this.define(vu(r)),i&&this._setObjectToTarget(this._config,i)}set(i,r){this._setToTarget(this._config,i,r)}define(i,r){this._setToTarget(this._config,i,r,!0)}get(i){return this._getFromSource(this._config,i)}*names(){for(const i of Object.keys(this._config))yield i}_setToTarget(i,r,a,c=!1){if(ht(r))return void this._setObjectToTarget(i,r,c);const d=r.split(".");r=d.pop();for(const f of d)ht(i[f])||(i[f]={}),i=i[f];if(ht(a))return ht(i[r])||(i[r]={}),void this._setObjectToTarget(i=i[r],a,c);c&&void 0!==i[r]||(i[r]=a)}_getFromSource(i,r){const a=r.split(".");r=a.pop();for(const c of a){if(!ht(i[c])){i=null;break}i=i[c]}return i?vu(i[r]):void 0}_setObjectToTarget(i,r,a){Object.keys(r).forEach(c=>{this._setToTarget(i,c,r[c],a)})}}function vu(u){return Qh(u,My)}function My(u){return ss(u)?u:void 0}class Nl{constructor(i,r){this.source=i,this.name=r,this.path=[],this.stop=function u(){u.called=!0},this.off=function u(){u.called=!0}}}const Pi=new Array(256).fill().map((u,i)=>("0"+i.toString(16)).slice(-2));function bi(){const u=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,a=4294967296*Math.random()>>>0;return"e"+Pi[u>>0&255]+Pi[u>>8&255]+Pi[u>>16&255]+Pi[u>>24&255]+Pi[i>>0&255]+Pi[i>>8&255]+Pi[i>>16&255]+Pi[i>>24&255]+Pi[r>>0&255]+Pi[r>>8&255]+Pi[r>>16&255]+Pi[r>>24&255]+Pi[a>>0&255]+Pi[a>>8&255]+Pi[a>>16&255]+Pi[a>>24&255]}var Co={get(u){return"number"!=typeof u?this[u]||this.normal:u},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},W=(T(6),T(0));const Os=Symbol("listeningTo"),ko=Symbol("emitterId");var Re={on(u,i,r={}){this.listenTo(this,u,i,r)},once(u,i,r){let a=!1;this.listenTo(this,u,function(c,...d){a||(a=!0,c.off(),i.call(this,c,...d))},r)},off(u,i){this.stopListening(this,u,i)},listenTo(u,i,r,a={}){let c,d;this[Os]||(this[Os]={});const f=this[Os];Tm(u)||Sy(u);const g=Tm(u);(c=f[g])||(c=f[g]={emitter:u,callbacks:{}}),(d=c.callbacks[i])||(d=c.callbacks[i]=[]),d.push(r),function(k,S){const F=Ps(k);if(F[S])return;let $=S,G=null;const Y=[];for(;""!==$&&!F[$];)F[$]={callbacks:[],childEvents:[]},Y.push(F[$]),G&&F[$].childEvents.push(G),G=$,$=$.substr(0,$.lastIndexOf(":"));if(""!==$){for(const oe of Y)oe.callbacks=F[$].callbacks.slice();F[$].childEvents.push(G)}}(u,i);const _=Mt(u,i),b=Co.get(a.priority),y={callback:r,priority:b};for(const k of _){let S=!1;for(let F=0;F<k.length;F++)if(k[F].priority<b){k.splice(F,0,y),S=!0;break}S||k.push(y)}},stopListening(u,i,r){const a=this[Os];let c=u&&Tm(u);const d=a&&c&&a[c],f=d&&i&&d.callbacks[i];if(!(!a||u&&!d||i&&!f))if(r)Rl(u,i,r);else if(f){for(;r=f.pop();)Rl(u,i,r);delete d.callbacks[i]}else if(d){for(i in d.callbacks)this.stopListening(u,i);delete a[c]}else{for(c in a)this.stopListening(a[c].emitter);delete this[Os]}},fire(u,...i){try{const r=u instanceof Nl?u:new Nl(this,u),a=r.name;let c=function d(f,g){let _;return f._events&&(_=f._events[g])&&_.callbacks.length?_.callbacks:g.indexOf(":")>-1?d(f,g.substr(0,g.lastIndexOf(":"))):null}(this,a);if(r.path.push(this),c){const d=[r,...i];c=Array.from(c);for(let f=0;f<c.length&&(c[f].callback.apply(this,d),r.off.called&&(delete r.off.called,Rl(this,a,c[f].callback)),!r.stop.called);f++);}if(this._delegations){const d=this._delegations.get(a),f=this._delegations.get("*");d&&Il(d,r,i),f&&Il(f,r,i)}return r.return}catch(r){W.b.rethrowUnexpectedError(r,this)}},delegate(...u){return{to:(i,r)=>{this._delegations||(this._delegations=new Map),u.forEach(a=>{const c=this._delegations.get(a);c?c.set(i,r):this._delegations.set(a,new Map([[i,r]]))})}}},stopDelegating(u,i){if(this._delegations)if(u)if(i){const r=this._delegations.get(u);r&&r.delete(i)}else this._delegations.delete(u);else this._delegations.clear()}};function Sy(u,i){u[ko]||(u[ko]=i||bi())}function Tm(u){return u[ko]}function Ps(u){return u._events||Object.defineProperty(u,"_events",{value:{}}),u._events}function Mt(u,i){const r=Ps(u)[i];if(!r)return[];let a=[r.callbacks];for(let c=0;c<r.childEvents.length;c++){const d=Mt(u,r.childEvents[c]);a=a.concat(d)}return a}function Il(u,i,r){for(let[a,c]of u){c?"function"==typeof c&&(c=c(i.name)):c=i.name;const d=new Nl(i.source,c);d.path=[...i.path],a.fire(d,...r)}}function Rl(u,i,r){const a=Mt(u,i);for(const c of a)for(let d=0;d<c.length;d++)c[d].callback==r&&(c.splice(d,1),d--)}function Fe(u,...i){i.forEach(r=>{Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r)).forEach(a=>{if(a in u.prototype)return;const c=Object.getOwnPropertyDescriptor(r,a);c.enumerable=!1,Object.defineProperty(u.prototype,a,c)})})}class Ni{constructor(i={}){this._items=[],this._itemMap=new Map,this._idProperty=i.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[]}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(i,r){let a;const c=this._idProperty;if(c in i){if(a=i[c],"string"!=typeof a)throw new W.b("collection-add-invalid-id",this);if(this.get(a))throw new W.b("collection-add-item-already-exists",this)}else i[c]=a=bi();if(void 0===r)r=this._items.length;else if(r>this._items.length||r<0)throw new W.b("collection-add-item-invalid-index",this);return this._items.splice(r,0,i),this._itemMap.set(a,i),this.fire("add",i,r),this}get(i){let r;if("string"==typeof i)r=this._itemMap.get(i);else{if("number"!=typeof i)throw new W.b("collection-get-invalid-arg: Index or id must be given.",this);r=this._items[i]}return r||null}has(i){return this._itemMap.has("string"==typeof i?i:i[this._idProperty])}getIndex(i){let r;return r="string"==typeof i?this._itemMap.get(i):i,this._items.indexOf(r)}remove(i){let r,a,c,d=!1;const f=this._idProperty;if("string"==typeof i?(a=i,c=this._itemMap.get(a),d=!c,c&&(r=this._items.indexOf(c))):"number"==typeof i?(r=i,c=this._items[r],d=!c,c&&(a=c[f])):(c=i,a=c[f],r=this._items.indexOf(c),d=-1==r||!this._itemMap.get(a)),d)throw new W.b("collection-remove-404: Item not found.",this);this._items.splice(r,1),this._itemMap.delete(a);const g=this._bindToInternalToExternalMap.get(c);return this._bindToInternalToExternalMap.delete(c),this._bindToExternalToInternalMap.delete(g),this.fire("remove",c,r),c}map(i,r){return this._items.map(i,r)}find(i,r){return this._items.find(i,r)}filter(i,r){return this._items.filter(i,r)}clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}bindTo(i){if(this._bindToCollection)throw new W.b("collection-bind-to-rebind: The collection cannot be bound more than once.",this);return this._bindToCollection=i,{as:r=>{this._setUpBindToBinding(a=>new r(a))},using:r=>{this._setUpBindToBinding("function"==typeof r?a=>r(a):a=>a[r])}}}_setUpBindToBinding(i){const r=this._bindToCollection,a=(c,d,f)=>{const g=r._bindToCollection==this,_=r._bindToInternalToExternalMap.get(d);if(g&&_)this._bindToExternalToInternalMap.set(d,_),this._bindToInternalToExternalMap.set(_,d);else{const b=i(d);if(!b)return void this._skippedIndexesFromExternal.push(f);let y=f;for(const k of this._skippedIndexesFromExternal)f>k&&y--;for(const k of r._skippedIndexesFromExternal)y>=k&&y++;this._bindToExternalToInternalMap.set(d,b),this._bindToInternalToExternalMap.set(b,d),this.add(b,y);for(let k=0;k<r._skippedIndexesFromExternal.length;k++)y<=r._skippedIndexesFromExternal[k]&&r._skippedIndexesFromExternal[k]++}};for(const c of r)a(0,c,r.getIndex(c));this.listenTo(r,"add",a),this.listenTo(r,"remove",(c,d,f)=>{const g=this._bindToExternalToInternalMap.get(d);g&&this.remove(g),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((_,b)=>(f<b&&_.push(b-1),f>b&&_.push(b),_),[])})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}Fe(Ni,Re);class zo{constructor(i,r=[],a=[]){this._context=i,this._plugins=new Map,this._availablePlugins=new Map;for(const c of r)c.pluginName&&this._availablePlugins.set(c.pluginName,c);this._contextPlugins=new Map;for(const[c,d]of a)this._contextPlugins.set(c,d),this._contextPlugins.set(d,c),c.pluginName&&this._availablePlugins.set(c.pluginName,c)}*[Symbol.iterator](){for(const i of this._plugins)"function"==typeof i[0]&&(yield i)}get(i){const r=this._plugins.get(i);if(!r){let c=i;throw"function"==typeof i&&(c=i.pluginName||i.name),new W.b("plugincollection-plugin-not-loaded: The requested plugin is not loaded.",this._context,{plugin:c})}return r}has(i){return this._plugins.has(i)}init(i,r=[]){const a=this,c=this._context,d=new Set,f=[],g=F(i),_=F(r),b=function($){const G=[];for(const Y of $)S(Y)||G.push(Y);return G.length?G:null}(i);if(b){const $="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return console.error(Object(W.a)($),{plugins:b}),Promise.reject(new W.b($,c,{plugins:b}))}return Promise.all(g.map(function y($){if(!_.includes($)&&!a._plugins.has($)&&!d.has($))return(G=$,new Promise(Y=>{d.add(G),G.requires&&G.requires.forEach(ue=>{const we=S(ue);if(G.isContextPlugin&&!we.isContextPlugin)throw new W.b("plugincollection-context-required: Context plugin can not require plugin which is not a context plugin",null,{plugin:we.name,requiredBy:G.name});if(r.includes(we))throw new W.b("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",c,{plugin:we.name,requiredBy:G.name});y(we)});const oe=a._contextPlugins.get(G)||new G(c);a._add(G,oe),f.push(oe),Y()})).catch(G=>{throw console.error(Object(W.a)("plugincollection-load: It was not possible to load the plugin."),{plugin:$}),G});var G})).then(()=>k(f,"init")).then(()=>k(f,"afterInit")).then(()=>f);function k($,G){return $.reduce((Y,oe)=>oe[G]?a._contextPlugins.has(oe)?Y:Y.then(oe[G].bind(oe)):Y,Promise.resolve())}function S($){return"function"==typeof $?$:a._availablePlugins.get($)}function F($){return $.map(G=>S(G)).filter(G=>!!G)}}destroy(){const i=[];for(const[,r]of this)"function"!=typeof r.destroy||this._contextPlugins.has(r)||i.push(r.destroy());return Promise.all(i)}_add(i,r){this._plugins.set(i,r);const a=i.pluginName;if(a){if(this._plugins.has(a))throw new W.b("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:a,plugin1:this._plugins.get(a).constructor,plugin2:i});this._plugins.set(a,r)}}}Fe(zo,Re),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const Ay=["ar","fa","he","ku","ug"];class $e{constructor(i={}){this.uiLanguage=i.uiLanguage||"en",this.contentLanguage=i.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Dm(this.uiLanguage),this.contentLanguageDirection=Dm(this.contentLanguage),this.t=(...r)=>this._t(...r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(i,r){let a=function Fl(u,i){const r=Object.keys(window.CKEDITOR_TRANSLATIONS).length;return 1===r&&(u=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]),0!==r&&((a=u)in window.CKEDITOR_TRANSLATIONS&&i in window.CKEDITOR_TRANSLATIONS[a])?window.CKEDITOR_TRANSLATIONS[u][i].replace(/ \[context: [^\]]+\]$/,""):i.replace(/ \[context: [^\]]+\]$/,"");var a}(this.uiLanguage,i);return r&&(a=a.replace(/%(\d+)/g,(c,d)=>d<r.length?r[d]:c)),a}}function Dm(u){return Ay.includes(u)?"rtl":"ltr"}class Mm{constructor(i){this.config=new Pe(i,this.constructor.defaultConfig);const r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new zo(this,r);const a=this.config.get("language")||{};this.locale=new $e({uiLanguage:"string"==typeof a?a:a.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Ni,this._contextOwner=null}initPlugins(){const i=this.config.get("plugins")||[];for(const r of i){if("function"!=typeof r)throw new W.b("context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.",null,{Plugin:r});if(!0!==r.isContextPlugin)throw new W.b("context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.",null,{Plugin:r})}return this.plugins.init(i)}destroy(){return Promise.all(Array.from(this.editors,i=>i.destroy())).then(()=>this.plugins.destroy())}_addEditor(i,r){if(this._contextOwner)throw new W.b("context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.");this.editors.add(i),r&&(this._contextOwner=i)}_removeEditor(i){return this.editors.has(i)&&this.editors.remove(i),this._contextOwner===i?this.destroy():Promise.resolve()}_getEditorConfig(){const i={};for(const r of this.config.names())["plugins","removePlugins","extraPlugins"].includes(r)||(i[r]=this.config.get(r));return i}static create(i){return new Promise(r=>{const a=new this(i);r(a.initPlugins().then(()=>a))})}}function yi(u,i){const r=Math.min(u.length,i.length);for(let a=0;a<r;a++)if(u[a]!=i[a])return a;return u.length==i.length?"same":u.length<i.length?"prefix":"extension"}var It=function(u){return Pl(u,4)};class as{constructor(){this.parent=null}get index(){let i;if(!this.parent)return null;if(-1==(i=this.parent.getChildIndex(this)))throw new W.b("view-node-not-found-in-parent: The node's parent does not contain this node.",this);return i}get nextSibling(){const i=this.index;return null!==i&&this.parent.getChild(i+1)||null}get previousSibling(){const i=this.index;return null!==i&&this.parent.getChild(i-1)||null}get root(){let i=this;for(;i.parent;)i=i.parent;return i}get document(){return this.parent instanceof as?this.parent.document:null}getPath(){const i=[];let r=this;for(;r.parent;)i.unshift(r.index),r=r.parent;return i}getAncestors(i={includeSelf:!1,parentFirst:!1}){const r=[];let a=i.includeSelf?this:this.parent;for(;a;)r[i.parentFirst?"push":"unshift"](a),a=a.parent;return r}getCommonAncestor(i,r={}){const a=this.getAncestors(r),c=i.getAncestors(r);let d=0;for(;a[d]==c[d]&&a[d];)d++;return 0===d?null:a[d-1]}isBefore(i){if(this==i||this.root!==i.root)return!1;const r=this.getPath(),a=i.getPath(),c=yi(r,a);switch(c){case"prefix":return!0;case"extension":return!1;default:return r[c]<a[c]}}isAfter(i){return this!=i&&this.root===i.root&&!this.isBefore(i)}_remove(){this.parent._removeChildren(this.index)}_fireChange(i,r){this.fire("change:"+i,r),this.parent&&this.parent._fireChange(i,r)}toJSON(){const i=It(this);return delete i.parent,i}is(i){return"node"==i||"view:node"==i}}Fe(as,Re);class Kt extends as{constructor(i){super(),this._textData=i}is(i){return"text"==i||"view:text"==i||super.is(i)}get data(){return this._textData}get _data(){return this.data}set _data(i){this._fireChange("text",this),this._textData=i}isSimilar(i){return i instanceof Kt&&(this===i||this.data===i.data)}_clone(){return new Kt(this.data)}}class he{constructor(i,r,a){if(this.textNode=i,r<0||r>i.data.length)throw new W.b("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(a<0||r+a>i.data.length)throw new W.b("view-textproxy-wrong-length: Given length value is incorrect.",this);this.data=i.data.substring(r,r+a),this.offsetInText=r}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(i){return"textProxy"==i||"view:textProxy"==i}getAncestors(i={includeSelf:!1,parentFirst:!1}){const r=[];let a=i.includeSelf?this.textNode:this.parent;for(;null!==a;)r[i.parentFirst?"push":"unshift"](a),a=a.parent;return r}}function Jt(u){return!(!u||!u[Symbol.iterator])}function vt(u){return Jt(u)?new Map(u):function(i){const r=new Map;for(const a in i)r.set(a,i[a]);return r}(u)}class wn{constructor(...i){this._patterns=[],this.add(...i)}add(...i){for(let r of i)("string"==typeof r||r instanceof RegExp)&&(r={name:r}),r.classes&&("string"==typeof r.classes||r.classes instanceof RegExp)&&(r.classes=[r.classes]),this._patterns.push(r)}match(...i){for(const r of i)for(const a of this._patterns){const c=wi(r,a);if(c)return{element:r,pattern:a,match:c}}return null}matchAll(...i){const r=[];for(const a of i)for(const c of this._patterns){const d=wi(a,c);d&&r.push({element:a,pattern:c,match:d})}return r.length>0?r:null}getElementName(){if(1!==this._patterns.length)return null;const i=this._patterns[0],r=i.name;return"function"==typeof i||!r||r instanceof RegExp?null:r}}function wi(u,i){if("function"==typeof i)return i(u);const r={};return i.name&&(r.name=(c=u.name,(a=i.name)instanceof RegExp?a.test(c):a===c),!r.name)||i.attributes&&(r.attributes=function(a,c){const d=[];for(const f in a){const g=a[f];if(!c.hasAttribute(f))return null;{const _=c.getAttribute(f);if(!0===g)d.push(f);else if(g instanceof RegExp){if(!g.test(_))return null;d.push(f)}else{if(_!==g)return null;d.push(f)}}}return d}(i.attributes,u),!r.attributes)?null:!(i.classes&&(r.classes=function(a,c){const d=[];for(const f of a)if(f instanceof RegExp){const g=c.getClassNames();for(const _ of g)f.test(_)&&d.push(_);if(0===d.length)return null}else{if(!c.hasClass(f))return null;d.push(f)}return d}(i.classes,u),!r.classes))&&!(i.styles&&(r.styles=function(a,c){const d=[];for(const f in a){const g=a[f];if(!c.hasStyle(f))return null;{const _=c.getStyle(f);if(g instanceof RegExp){if(!g.test(_))return null;d.push(f)}else{if(_!==g)return null;d.push(f)}}}return d}(i.styles,u),!r.styles))&&r;var a,c}var Sr=function(u){return"symbol"==typeof u||qt(u)&&"[object Symbol]"==et(u)},ro=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xo=/^\w*$/;function Ye(u,i){if("function"!=typeof u||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var r=function(){var a=arguments,c=i?i.apply(this,a):a[0],d=r.cache;if(d.has(c))return d.get(c);var f=u.apply(this,a);return r.cache=d.set(c,f)||d,f};return r.cache=new(Ye.Cache||Lh),r}Ye.Cache=Lh;var i,r,so=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ns=/\\(\\)?/g,Qn=(i=Ye(function(u){var i=[];return 46===u.charCodeAt(0)&&i.push(""),u.replace(so,function(r,a,c,d){i.push(c?d.replace(Ns,"$1"):a||r)}),i},function(a){return 500===r.size&&r.clear(),a}),r=i.cache,i),Cn=w?w.prototype:void 0,Sa=Cn?Cn.toString:void 0,Ll=function u(i){if("string"==typeof i)return i;if(vi(i))return function(u,i){for(var r=-1,a=null==u?0:u.length,c=Array(a);++r<a;)c[r]=i(u[r],r,u);return c}(i,u)+"";if(Sr(i))return Sa?Sa.call(i):"";var r=i+"";return"0"==r&&1/i==-1/0?"-0":r},Aa=function(u,i){return vi(u)?u:function(u,i){if(vi(u))return!1;var r=typeof u;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=u&&!Sr(u))||xo.test(u)||!ro.test(u)||null!=i&&u in Object(i)}(u,i)?[u]:Qn(function(u){return null==u?"":Ll(u)}(u))},Rs=function(u){var i=null==u?0:u.length;return i?u[i-1]:void 0},Bl=function(u){if("string"==typeof u||Sr(u))return u;var i=u+"";return"0"==i&&1/u==-1/0?"-0":i},ls=function(u,i){for(var r=0,a=(i=Aa(i,u)).length;null!=u&&r<a;)u=u[Bl(i[r++])];return r&&r==a?u:void 0},$o=function(u,i){return null==u||function(u,i){return null==(u=function(u,i){return i.length<2?u:ls(u,function(u,i,r){var a=-1,c=u.length;i<0&&(i=-i>c?0:c+i),(r=r>c?c:r)<0&&(r+=c),c=i>r?0:r-i>>>0,i>>>=0;for(var d=Array(c);++a<c;)d[a]=u[a+i];return d}(i,0,-1))}(u,i=Aa(i,u)))||delete u[Bl(Rs(i))]}(u,i)},Ar=function(u,i,r){var a=null==u?void 0:ls(u,i);return void 0===a?r:a},bu=function(u,i,r){(void 0===r||zi(u[i],r))&&(void 0!==r||i in u)||Vh(u,i,r)},Xh=function(u,i){if(("constructor"!==i||"function"!=typeof u[i])&&"__proto__"!=i)return u[i]},jl=function u(i,r,a,c,d){i!==r&&function(i,r,a){for(var c=-1,d=Object(i),f=a(i),g=f.length;g--;){var _=f[++c];if(!1===r(d[_],_,d))break}}(r,function(f,g){if(d||(d=new Ta),$n(f))!function(u,i,r,a,c,d,f){var g=Xh(u,r),_=Xh(i,r),b=f.get(_);if(b)bu(u,r,b);else{var y=d?d(g,_,r+"",u,i,f):void 0,k=void 0===y;if(k){var S=vi(_),F=!S&&Object(Ml.a)(_),$=!S&&!F&&cu(_);y=_,S||F||$?vi(g)?y=g:function(u){return qt(u)&&uu(u)}(g)?y=du(g):F?(k=!1,y=Object(Gh.a)(_,!0)):$?(k=!1,y=Ty(_,!0)):y=[]:ht(_)||jh(_)?(y=g,jh(g)?y=function(u){return As(u,dn(u))}(g):$n(g)&&!Ms(g)||(y=Dt(_))):k=!1}k&&(f.set(_,y),c(y,_,a,d,f),f.delete(_)),bu(u,r,y)}}(i,r,g,a,u,c,d);else{var _=c?c(Xh(i,g),f,g+"",i,r,d):void 0;void 0===_&&(_=f),bu(i,g,_)}},dn)},Hl=function(u){return u},Fs=function(u,i,r){switch(r.length){case 0:return u.call(i);case 1:return u.call(i,r[0]);case 2:return u.call(i,r[0],r[1]);case 3:return u.call(i,r[0],r[1],r[2])}return u.apply(i,r)},ni=Math.max,Ui=function(u){return function(){return u}},Uo=Dl?function(u,i){return Dl(u,"toString",{configurable:!0,enumerable:!1,value:Ui(i),writable:!0})}:Hl,ef=Date.now,wu=function(u){var i=0,r=0;return function(){var a=ef(),c=16-(a-r);if(r=a,c>0){if(++i>=800)return arguments[0]}else i=0;return u.apply(void 0,arguments)}}(Uo),Sm=function(u){return function(u,i){return wu(function(u,i,r){return i=ni(void 0===i?u.length-1:i,0),function(){for(var a=arguments,c=-1,d=ni(a.length-i,0),f=Array(d);++c<d;)f[c]=a[i+c];c=-1;for(var g=Array(i+1);++c<i;)g[c]=a[c];return g[i]=r(f),Fs(u,this,g)}}(u,i,Hl),u+"")}(function(i,r){var a=-1,c=r.length,d=c>1?r[c-1]:void 0,f=c>2?r[2]:void 0;for(d=u.length>3&&"function"==typeof d?(c--,d):void 0,f&&function(u,i,r){if(!$n(r))return!1;var a=typeof i;return!!("number"==a?uu(r)&&Ho(i,r.length):"string"==a&&i in r)&&zi(r[i],u)}(r[0],r[1],f)&&(d=c<3?void 0:d,c=1),i=Object(i);++a<c;){var g=r[a];g&&u(i,g,a,d)}return i})},Ny=Sm(function(u,i,r){jl(u,i,r)});class zl{constructor(){this._styles={},Object.defineProperty(this,"_styleProcessor",{get:()=>zl._styleProcessor,enumerable:!1})}get isEmpty(){const i=Object.entries(this._styles);return!Array.from(i).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(i){this.clear();const r=Array.from(function(a){let c=null,d=0,f=0,g=null;const _=new Map;if(""===a)return _;";"!=a.charAt(a.length-1)&&(a+=";");for(let b=0;b<a.length;b++){const y=a.charAt(b);if(null===c)switch(y){case":":g||(g=a.substr(d,b-d),f=b+1);break;case'"':case"'":c=y;break;case";":{const k=a.substr(f,b-f);g&&_.set(g.trim(),k.trim()),g=null,d=b+1;break}}else y===c&&(c=null)}return _}(i).entries());for(const[a,c]of r)this._styleProcessor.toNormalizedForm(a,c,this._styles)}has(i){if(this.isEmpty)return!1;const r=this._styleProcessor.getReducedForm(i,this._styles).find(([a])=>a===i);return Array.isArray(r)}set(i,r){if($n(i))for(const[a,c]of Object.entries(i))this._styleProcessor.toNormalizedForm(a,c,this._styles);else this._styleProcessor.toNormalizedForm(i,r,this._styles)}remove(i){const r=Am(i);$o(this._styles,r),delete this._styles[i],this._cleanEmptyObjectsOnPath(r)}getNormalized(i){return this._styleProcessor.getNormalized(i,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(i=>i.join(":")).sort().join(";")+";"}getAsString(i){if(this.isEmpty)return;if(this._styles[i]&&!$n(this._styles[i]))return this._styles[i];const r=this._styleProcessor.getReducedForm(i,this._styles).find(([a])=>a===i);return Array.isArray(r)?r[1]:void 0}getStyleNames(){return this.isEmpty?[]:this._getStylesEntries().map(([i])=>i)}clear(){this._styles={}}static getRelatedStyles(i){return this._styleProcessor.getRelatedStyles(i)}_getStylesEntries(){const i=[],r=Object.keys(this._styles);for(const a of r)i.push(...this._styleProcessor.getReducedForm(a,this._styles));return i}_cleanEmptyObjectsOnPath(i){const r=i.split(".");if(!(r.length>1))return;const a=r.splice(0,r.length-1).join("."),c=Ar(this._styles,a);c&&!Array.from(Object.keys(c)).length&&this.remove(a)}static get _styleProcessor(){return this._processor||(this._processor=new LE),this._processor}static _setProcessor(i){this._processor=i}}class LE{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(i,r,a){if($n(r))Om(a,Am(i),r);else if(this._normalizers.has(i)){const c=this._normalizers.get(i),{path:d,value:f}=c(r);Om(a,d,f)}else Om(a,i,r)}getNormalized(i,r){if(!i)return Ny({},r);if(void 0!==r[i])return r[i];if(this._extractors.has(i)){const a=this._extractors.get(i);if("string"==typeof a)return Ar(r,a);const c=a(i,r);if(c)return c}return Ar(r,Am(i))}getReducedForm(i,r){const a=this.getNormalized(i,r);return void 0===a?[]:this._reducers.has(i)?this._reducers.get(i)(a):[[i,a]]}getRelatedStyles(i){return this._consumables.get(i)||[]}setNormalizer(i,r){this._normalizers.set(i,r)}setExtractor(i,r){this._extractors.set(i,r)}setReducer(i,r){this._reducers.set(i,r)}setStyleRelation(i,r){this._mapStyleNames(i,r);for(const a of r)this._mapStyleNames(a,[i])}_mapStyleNames(i,r){this._consumables.has(i)||this._consumables.set(i,[]),this._consumables.get(i).push(...r)}}function Am(u){return u.replace("-",".")}function Om(u,i,r){let a=r;$n(r)&&(a=Ny({},Ar(u,i),r)),function(u,i,r){null==u||function(u,i,r,a){if(!$n(u))return u;for(var c=-1,d=(i=Aa(i,u)).length,f=d-1,g=u;null!=g&&++c<d;){var _=Bl(i[c]),b=r;if(c!=f){var y=g[_];void 0===(b=void 0)&&(b=$n(y)?y:Ho(i[c+1])?[]:{})}lu(g,_,b),g=g[_]}}(u,i,r)}(u,i,a)}class Eo extends as{constructor(i,r,a){if(super(),this.name=i,this._attrs=function(c){c=vt(c);for(const[d,f]of c)null===f?c.delete(d):"string"!=typeof f&&c.set(d,String(f));return c}(r),this._children=[],a&&this._insertChild(0,a),this._classes=new Set,this._attrs.has("class")){const c=this._attrs.get("class");Fy(this._classes,c),this._attrs.delete("class")}this._styles=new zl,this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}is(i,r=null){const a=i.replace(/^view:/,"");return r?"element"==a&&r==this.name:"element"==a||a==this.name||super.is(i)}getChild(i){return this._children[i]}getChildIndex(i){return this._children.indexOf(i)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(i){if("class"==i)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"==i){const r=this._styles.toString();return""==r?void 0:r}return this._attrs.get(i)}hasAttribute(i){return"class"==i?this._classes.size>0:"style"==i?!this._styles.isEmpty:this._attrs.has(i)}isSimilar(i){if(!(i instanceof Eo))return!1;if(this===i)return!0;if(this.name!=i.name||this._attrs.size!==i._attrs.size||this._classes.size!==i._classes.size||this._styles.size!==i._styles.size)return!1;for(const[r,a]of this._attrs)if(!i._attrs.has(r)||i._attrs.get(r)!==a)return!1;for(const r of this._classes)if(!i._classes.has(r))return!1;for(const r of this._styles.getStyleNames())if(!i._styles.has(r)||i._styles.getAsString(r)!==this._styles.getAsString(r))return!1;return!0}hasClass(...i){for(const r of i)if(!this._classes.has(r))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(i){return this._styles.getAsString(i)}getNormalizedStyle(i){return this._styles.getNormalized(i)}getStyleNames(){return this._styles.getStyleNames()}hasStyle(...i){for(const r of i)if(!this._styles.has(r))return!1;return!0}findAncestor(...i){const r=new wn(...i);let a=this.parent;for(;a;){if(r.match(a))return a;a=a.parent}return null}getCustomProperty(i){return this._customProperties.get(i)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const i=Array.from(this._classes).sort().join(","),r=this._styles.toString(),a=Array.from(this._attrs).map(c=>`${c[0]}="${c[1]}"`).sort().join(" ");return this.name+(""==i?"":` class="${i}"`)+(r?` style="${r}"`:"")+(""==a?"":` ${a}`)}_clone(i=!1){const r=[];if(i)for(const c of this.getChildren())r.push(c._clone(i));const a=new this.constructor(this.name,this._attrs,r);return a._classes=new Set(this._classes),a._styles.set(this._styles.getNormalized()),a._customProperties=new Map(this._customProperties),a.getFillerOffset=this.getFillerOffset,a}_appendChild(i){return this._insertChild(this.childCount,i)}_insertChild(i,r){this._fireChange("children",this);let a=0;const c="string"==typeof(d=r)?[new Kt(d)]:(Jt(d)||(d=[d]),Array.from(d).map(f=>"string"==typeof f?new Kt(f):f instanceof he?new Kt(f.data):f));var d;for(const d of c)null!==d.parent&&d._remove(),d.parent=this,this._children.splice(i,0,d),i++,a++;return a}_removeChildren(i,r=1){this._fireChange("children",this);for(let a=i;a<i+r;a++)this._children[a].parent=null;return this._children.splice(i,r)}_setAttribute(i,r){r=String(r),this._fireChange("attributes",this),"class"==i?Fy(this._classes,r):"style"==i?this._styles.setTo(r):this._attrs.set(i,r)}_removeAttribute(i){return this._fireChange("attributes",this),"class"==i?this._classes.size>0&&(this._classes.clear(),!0):"style"==i?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(i)}_addClass(i){this._fireChange("attributes",this),(i=Array.isArray(i)?i:[i]).forEach(r=>this._classes.add(r))}_removeClass(i){this._fireChange("attributes",this),(i=Array.isArray(i)?i:[i]).forEach(r=>this._classes.delete(r))}_setStyle(i,r){this._fireChange("attributes",this),this._styles.set(i,r)}_removeStyle(i){this._fireChange("attributes",this),(i=Array.isArray(i)?i:[i]).forEach(r=>this._styles.remove(r))}_setCustomProperty(i,r){this._customProperties.set(i,r)}_removeCustomProperty(i){return this._customProperties.delete(i)}}function Fy(u,i){const r=i.split(/\s+/);u.clear(),r.forEach(a=>u.add(a))}class tf extends Eo{constructor(i,r,a){super(i,r,a),this.getFillerOffset=Ly}is(i,r=null){const a=i&&i.replace(/^view:/,"");return r?"containerElement"==a&&r==this.name||super.is(i,r):"containerElement"==a||super.is(i)}}function Ly(){const u=[...this.getChildren()],i=u[this.childCount-1];if(i&&i.is("element","br"))return this.childCount;for(const r of u)if(!r.is("uiElement"))return null;return this.childCount}var $l=Sm(function(u,i){As(i,dn(i),u)});const nf=Symbol("observableProperties"),rf=Symbol("boundObservables"),sf=Symbol("boundProperties"),By={set(u,i){if($n(u))return void Object.keys(u).forEach(a=>{this.set(a,u[a])},this);af(this);const r=this[nf];if(u in this&&!r.has(u))throw new W.b("observable-set-cannot-override: Cannot override an existing property.",this);Object.defineProperty(this,u,{enumerable:!0,configurable:!0,get:()=>r.get(u),set(a){const c=r.get(u);let d=this.fire("set:"+u,u,a,c);void 0===d&&(d=a),c===d&&r.has(u)||(r.set(u,d),this.fire("change:"+u,u,d,c))}}),this[u]=i},bind(...u){if(!u.length||!Vy(u))throw new W.b("observable-bind-wrong-properties: All properties must be strings.",this);if(new Set(u).size!==u.length)throw new W.b("observable-bind-duplicate-properties: Properties must be unique.",this);af(this);const i=this[sf];u.forEach(a=>{if(i.has(a))throw new W.b("observable-bind-rebind: Cannot bind the same property more than once.",this)});const r=new Map;return u.forEach(a=>{const c={property:a,to:[]};i.set(a,c),r.set(a,c)}),{to:lf,toMany:BE,_observable:this,_bindProperties:u,_to:[],_bindings:r}},unbind(...u){if(!(nf in this))return;const i=this[sf],r=this[rf];if(u.length){if(!Vy(u))throw new W.b("observable-unbind-wrong-properties: Properties must be strings.",this);u.forEach(a=>{const c=i.get(a);if(!c)return;let d,f,g,_;c.to.forEach(b=>{d=b[0],f=b[1],g=r.get(d),_=g[f],_.delete(c),_.size||delete g[f],Object.keys(g).length||(r.delete(d),this.stopListening(d,"change"))}),i.delete(a)})}else r.forEach((a,c)=>{this.stopListening(c,"change")}),r.clear(),i.clear()},decorate(u){const i=this[u];if(!i)throw new W.b("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:u});this.on(u,(r,a)=>{r.return=i.apply(this,a)}),this[u]=function(...r){return this.fire(u,r)}}};$l(By,Re);var On=By;function af(u){nf in u||(Object.defineProperty(u,nf,{value:new Map}),Object.defineProperty(u,rf,{value:new Map}),Object.defineProperty(u,sf,{value:new Map}))}function lf(...u){const i=function(...d){if(!d.length)throw new W.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);const f={to:[]};let g;return"function"==typeof d[d.length-1]&&(f.callback=d.pop()),d.forEach(_=>{if("string"==typeof _)g.properties.push(_);else{if("object"!=typeof _)throw new W.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);g={observable:_,properties:[]},f.to.push(g)}}),f}(...u),r=Array.from(this._bindings.keys()),a=r.length;if(!i.callback&&i.to.length>1)throw new W.b("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this);if(a>1&&i.callback)throw new W.b("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this);var c;i.to.forEach(d=>{if(d.properties.length&&d.properties.length!==a)throw new W.b("observable-bind-to-properties-length: The number of properties must match.",this);d.properties.length||(d.properties=this._bindProperties)}),this._to=i.to,i.callback&&(this._bindings.get(r[0]).callback=i.callback),c=this._observable,this._to.forEach(d=>{const f=c[rf];let g;f.get(d.observable)||c.listenTo(d.observable,"change",(_,b)=>{g=f.get(d.observable)[b],g&&g.forEach(y=>{jy(c,y.property)})})}),function(d){let f;d._bindings.forEach((g,_)=>{d._to.forEach(b=>{f=b.properties[g.callback?0:d._bindProperties.indexOf(_)],g.to.push([b.observable,f]),function(y,k,S,F){const $=y[rf],G=$.get(S),Y=G||{};Y[F]||(Y[F]=new Set),Y[F].add(k),G||$.set(S,Y)}(d._observable,g,b.observable,f)})})}(this),this._bindProperties.forEach(d=>{jy(this._observable,d)})}function BE(u,i,r){if(this._bindings.size>1)throw new W.b("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this);this.to(...function(a,c){const d=a.map(f=>[f,c]);return Array.prototype.concat.apply([],d)}(u,i),r)}function Vy(u){return u.every(i=>"string"==typeof i)}function jy(u,i){const r=u[sf].get(i);let a;r.callback?a=r.callback.apply(u,r.to.map(c=>c[0][c[1]])):(a=r.to[0],a=a[0][a[1]]),u.hasOwnProperty(i)?u[i]=a:u.set(i,a)}const Or=Symbol("document");class ku extends tf{constructor(i,r,a){super(i,r,a),this.set("isReadOnly",!1),this.set("isFocused",!1)}is(i,r=null){const a=i&&i.replace(/^view:/,"");return r?"editableElement"==a&&r==this.name||super.is(i,r):"editableElement"==a||super.is(i)}destroy(){this.stopListening()}get document(){return this.getCustomProperty(Or)}set _document(i){if(this.getCustomProperty(Or))throw new W.b("view-editableelement-document-already-set: View document is already set.",this);this._setCustomProperty(Or,i),this.bind("isReadOnly").to(i),this.bind("isFocused").to(i,"isFocused",r=>r&&i.selection.editableElement==this),this.listenTo(i.selection,"change",()=>{this.isFocused=i.isFocused&&i.selection.editableElement==this})}}Fe(ku,On);const Ln=Symbol("rootName");class Pm extends ku{constructor(i){super(i),this.rootName="main"}is(i,r=null){const a=i.replace(/^view:/,"");return r?"rootElement"==a&&r==this.name||super.is(i,r):"rootElement"==a||super.is(i)}get rootName(){return this.getCustomProperty(Ln)}set rootName(i){this._setCustomProperty(Ln,i)}set _name(i){this.name=i}}class Ls{constructor(i={}){if(!i.boundaries&&!i.startPosition)throw new W.b("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);if(i.direction&&"forward"!=i.direction&&"backward"!=i.direction)throw new W.b("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",i.startPosition,{direction:i.direction});this.boundaries=i.boundaries||null,this.position=fe._createAt(i.startPosition?i.startPosition:i.boundaries["backward"==i.direction?"end":"start"]),this.direction=i.direction||"forward",this.singleCharacters=!!i.singleCharacters,this.shallow=!!i.shallow,this.ignoreElementEnd=!!i.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(i){let r,a,c;do{c=this.position,({done:r,value:a}=this.next())}while(!r&&i(a));r||(this.position=c)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let i=this.position.clone();const r=this.position,a=i.parent;if(null===a.parent&&i.offset===a.childCount)return{done:!0};if(a===this._boundaryEndParent&&i.offset==this.boundaries.end.offset)return{done:!0};let c;if(a instanceof Kt){if(i.isAtEnd)return this.position=fe._createAfter(a),this._next();c=a.data[i.offset]}else c=a.getChild(i.offset);if(c instanceof Eo)return this.shallow?i.offset++:i=new fe(c,0),this.position=i,this._formatReturnValue("elementStart",c,r,i,1);if(c instanceof Kt){if(this.singleCharacters)return i=new fe(c,0),this.position=i,this._next();{let d,f=c.data.length;return c==this._boundaryEndParent?(f=this.boundaries.end.offset,d=new he(c,0,f),i=fe._createAfter(d)):(d=new he(c,0,c.data.length),i.offset++),this.position=i,this._formatReturnValue("text",d,r,i,f)}}if("string"==typeof c){let d;d=this.singleCharacters?1:(a===this._boundaryEndParent?this.boundaries.end.offset:a.data.length)-i.offset;const f=new he(a,i.offset,d);return i.offset+=d,this.position=i,this._formatReturnValue("text",f,r,i,d)}return i=fe._createAfter(a),this.position=i,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",a,r,i)}_previous(){let i=this.position.clone();const r=this.position,a=i.parent;if(null===a.parent&&0===i.offset)return{done:!0};if(a==this._boundaryStartParent&&i.offset==this.boundaries.start.offset)return{done:!0};let c;if(a instanceof Kt){if(i.isAtStart)return this.position=fe._createBefore(a),this._previous();c=a.data[i.offset-1]}else c=a.getChild(i.offset-1);if(c instanceof Eo)return this.shallow?(i.offset--,this.position=i,this._formatReturnValue("elementStart",c,r,i,1)):(i=new fe(c,c.childCount),this.position=i,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",c,r,i));if(c instanceof Kt){if(this.singleCharacters)return i=new fe(c,c.data.length),this.position=i,this._previous();{let d,f=c.data.length;if(c==this._boundaryStartParent){const g=this.boundaries.start.offset;d=new he(c,g,c.data.length-g),f=d.data.length,i=fe._createBefore(d)}else d=new he(c,0,c.data.length),i.offset--;return this.position=i,this._formatReturnValue("text",d,r,i,f)}}if("string"==typeof c){let d;d=this.singleCharacters?1:i.offset-(a===this._boundaryStartParent?this.boundaries.start.offset:0),i.offset-=d;const f=new he(a,i.offset,d);return this.position=i,this._formatReturnValue("text",f,r,i,d)}return i=fe._createBefore(a),this.position=i,this._formatReturnValue("elementStart",a,r,i,1)}_formatReturnValue(i,r,a,c,d){return r instanceof he&&(r.offsetInText+r.data.length==r.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?a=fe._createAfter(r.textNode):(c=fe._createAfter(r.textNode),this.position=c)),0===r.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?a=fe._createBefore(r.textNode):(c=fe._createBefore(r.textNode),this.position=c))),{done:!1,value:{type:i,item:r,previousPosition:a,nextPosition:c,length:d}}}}class fe{constructor(i,r){this.parent=i,this.offset=r}get nodeAfter(){return this.parent.is("text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const i=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===i}get root(){return this.parent.root}get editableElement(){let i=this.parent;for(;!(i instanceof ku);){if(!i.parent)return null;i=i.parent}return i}getShiftedBy(i){const r=fe._createAt(this),a=r.offset+i;return r.offset=a<0?0:a,r}getLastMatchingPosition(i,r={}){r.startPosition=this;const a=new Ls(r);return a.skip(i),a.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(i){const r=this.getAncestors(),a=i.getAncestors();let c=0;for(;r[c]==a[c]&&r[c];)c++;return 0===c?null:r[c-1]}is(i){return"position"==i||"view:position"==i}isEqual(i){return this.parent==i.parent&&this.offset==i.offset}isBefore(i){return"before"==this.compareWith(i)}isAfter(i){return"after"==this.compareWith(i)}compareWith(i){if(this.root!==i.root)return"different";if(this.isEqual(i))return"same";const r=this.parent.is("node")?this.parent.getPath():[],a=i.parent.is("node")?i.parent.getPath():[];r.push(this.offset),a.push(i.offset);const c=yi(r,a);switch(c){case"prefix":return"before";case"extension":return"after";default:return r[c]<a[c]?"before":"after"}}getWalker(i={}){return i.startPosition=this,new Ls(i)}clone(){return new fe(this.parent,this.offset)}static _createAt(i,r){if(i instanceof fe)return new this(i.parent,i.offset);{const a=i;if("end"==r)r=a.is("text")?a.data.length:a.childCount;else{if("before"==r)return this._createBefore(a);if("after"==r)return this._createAfter(a);if(0!==r&&!r)throw new W.b("view-createPositionAt-offset-required: View#createPositionAt() requires the offset when the first parameter is a view item.",a)}return new fe(a,r)}}static _createAfter(i){if(i.is("textProxy"))return new fe(i.textNode,i.offsetInText+i.data.length);if(!i.parent)throw new W.b("view-position-after-root: You can not make position after root.",i,{root:i});return new fe(i.parent,i.index+1)}static _createBefore(i){if(i.is("textProxy"))return new fe(i.textNode,i.offsetInText);if(!i.parent)throw new W.b("view-position-before-root: You can not make position before root.",i,{root:i});return new fe(i.parent,i.index)}}class Ve{constructor(i,r=null){this.start=i.clone(),this.end=r?r.clone():i.clone()}*[Symbol.iterator](){yield*new Ls({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let i=this.start.getLastMatchingPosition(Ul,{direction:"backward"}),r=this.end.getLastMatchingPosition(Ul);return i.parent.is("text")&&i.isAtStart&&(i=fe._createBefore(i.parent)),r.parent.is("text")&&r.isAtEnd&&(r=fe._createAfter(r.parent)),new Ve(i,r)}getTrimmed(){let i=this.start.getLastMatchingPosition(Ul);if(i.isAfter(this.end)||i.isEqual(this.end))return new Ve(i,i);let r=this.end.getLastMatchingPosition(Ul,{direction:"backward"});const a=i.nodeAfter,c=r.nodeBefore;return a&&a.is("text")&&(i=new fe(a,0)),c&&c.is("text")&&(r=new fe(c,c.data.length)),new Ve(i,r)}isEqual(i){return this==i||this.start.isEqual(i.start)&&this.end.isEqual(i.end)}containsPosition(i){return i.isAfter(this.start)&&i.isBefore(this.end)}containsRange(i,r=!1){i.isCollapsed&&(r=!1);const a=this.containsPosition(i.start)||r&&this.start.isEqual(i.start),c=this.containsPosition(i.end)||r&&this.end.isEqual(i.end);return a&&c}getDifference(i){const r=[];return this.isIntersecting(i)?(this.containsPosition(i.start)&&r.push(new Ve(this.start,i.start)),this.containsPosition(i.end)&&r.push(new Ve(i.end,this.end))):r.push(this.clone()),r}getIntersection(i){if(this.isIntersecting(i)){let r=this.start,a=this.end;return this.containsPosition(i.start)&&(r=i.start),this.containsPosition(i.end)&&(a=i.end),new Ve(r,a)}return null}getWalker(i={}){return i.boundaries=this,new Ls(i)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}clone(){return new Ve(this.start,this.end)}*getItems(i={}){i.boundaries=this,i.ignoreElementEnd=!0;const r=new Ls(i);for(const a of r)yield a.item}*getPositions(i={}){i.boundaries=this;const r=new Ls(i);yield r.position;for(const a of r)yield a.nextPosition}is(i){return"range"==i||"view:range"==i}isIntersecting(i){return this.start.isBefore(i.end)&&this.end.isAfter(i.start)}static _createFromParentsAndOffsets(i,r,a,c){return new this(new fe(i,r),new fe(a,c))}static _createFromPositionAndShift(i,r){const a=i,c=i.getShiftedBy(r);return r>0?new this(a,c):new this(c,a)}static _createIn(i){return this._createFromParentsAndOffsets(i,0,i,i.childCount)}static _createOn(i){const r=i.is("textProxy")?i.offsetSize:1;return this._createFromPositionAndShift(fe._createBefore(i),r)}}function Ul(u){return!(!u.item.is("attributeElement")&&!u.item.is("uiElement"))}function cf(u){let i=0;for(const r of u)i++;return i}class ao{constructor(i=null,r,a){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(i,r,a)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const i=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?i.end:i.start).clone()}get focus(){if(!this._ranges.length)return null;const i=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?i.start:i.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const i of this._ranges)yield i.clone()}getFirstRange(){let i=null;for(const r of this._ranges)i&&!r.start.isBefore(i.start)||(i=r);return i?i.clone():null}getLastRange(){let i=null;for(const r of this._ranges)i&&!r.end.isAfter(i.end)||(i=r);return i?i.clone():null}getFirstPosition(){const i=this.getFirstRange();return i?i.start.clone():null}getLastPosition(){const i=this.getLastRange();return i?i.end.clone():null}isEqual(i){if(this.isFake!=i.isFake||this.isFake&&this.fakeSelectionLabel!=i.fakeSelectionLabel||this.rangeCount!=i.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(i.anchor)||!this.focus.isEqual(i.focus))return!1;for(const r of this._ranges){let a=!1;for(const c of i._ranges)if(r.isEqual(c)){a=!0;break}if(!a)return!1}return!0}isSimilar(i){if(this.isBackward!=i.isBackward)return!1;const r=cf(this.getRanges());if(r!=cf(i.getRanges()))return!1;if(0==r)return!0;for(let a of this.getRanges()){a=a.getTrimmed();let c=!1;for(let d of i.getRanges())if(d=d.getTrimmed(),a.start.isEqual(d.start)&&a.end.isEqual(d.end)){c=!0;break}if(!c)return!1}return!0}getSelectedElement(){if(1!==this.rangeCount)return null;const i=this.getFirstRange();let r=i.start.nodeAfter,a=i.end.nodeBefore;return i.start.parent.is("text")&&i.start.isAtEnd&&i.start.parent.nextSibling&&(r=i.start.parent.nextSibling),i.end.parent.is("text")&&i.end.isAtStart&&i.end.parent.previousSibling&&(a=i.end.parent.previousSibling),r instanceof Eo&&r==a?r:null}setTo(i,r,a){if(null===i)this._setRanges([]),this._setFakeOptions(r);else if(i instanceof ao||i instanceof uf)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else if(i instanceof Ve)this._setRanges([i],r&&r.backward),this._setFakeOptions(r);else if(i instanceof fe)this._setRanges([new Ve(i)]),this._setFakeOptions(r);else if(i instanceof as){const c=!!a&&!!a.backward;let d;if(void 0===r)throw new W.b("view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",this);d="in"==r?Ve._createIn(i):"on"==r?Ve._createOn(i):new Ve(fe._createAt(i,r)),this._setRanges([d],c),this._setFakeOptions(a)}else{if(!Jt(i))throw new W.b("view-selection-setTo-not-selectable: Cannot set selection to given place.",this);this._setRanges(i,r&&r.backward),this._setFakeOptions(r)}this.fire("change")}setFocus(i,r){if(null===this.anchor)throw new W.b("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this);const a=fe._createAt(i,r);if("same"==a.compareWith(this.focus))return;const c=this.anchor;this._ranges.pop(),"before"==a.compareWith(c)?this._addRange(new Ve(a,c),!0):this._addRange(new Ve(c,a)),this.fire("change")}is(i){return"selection"==i||"view:selection"==i}_setRanges(i,r=!1){i=Array.from(i),this._ranges=[];for(const a of i)this._addRange(a);this._lastRangeBackward=!!r}_setFakeOptions(i={}){this._isFake=!!i.fake,this._fakeSelectionLabel=i.fake&&i.label||""}_addRange(i,r=!1){if(!(i instanceof Ve))throw new W.b("view-selection-add-range-not-range: Selection range set to an object that is not an instance of view.Range",this);this._pushRange(i),this._lastRangeBackward=!!r}_pushRange(i){for(const r of this._ranges)if(i.isIntersecting(r))throw new W.b("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:i,intersectingRange:r});this._ranges.push(new Ve(i.start,i.end))}}Fe(ao,Re);class uf{constructor(i=null,r,a){this._selection=new ao,this._selection.delegate("change").to(this),this._selection.setTo(i,r,a)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(i){return this._selection.isEqual(i)}isSimilar(i){return this._selection.isSimilar(i)}is(i){return"selection"==i||"documentSelection"==i||"view:selection"==i||"view:documentSelection"==i}_setTo(i,r,a){this._selection.setTo(i,r,a)}_setFocus(i,r){this._selection.setFocus(i,r)}}Fe(uf,Re);class Gi{constructor(){this.selection=new uf,this.roots=new Ni({idProperty:"rootName"}),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(i="main"){return this.roots.get(i)}registerPostFixer(i){this._postFixers.add(i)}destroy(){this.roots.map(i=>i.destroy()),this.stopListening()}addStyleProcessorRules(i){i(zl._styleProcessor)}_callPostFixers(i){let r=!1;do{for(const a of this._postFixers)if(r=a(i),r)break}while(r)}}Fe(Gi,On);class Pr extends Eo{constructor(i,r,a){super(i,r,a),this.getFillerOffset=Hy,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new W.b("attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.",this);return new Set(this._clonesGroup)}is(i,r=null){const a=i&&i.replace(/^view:/,"");return r?"attributeElement"==a&&r==this.name||super.is(i,r):"attributeElement"==a||super.is(i)}isSimilar(i){return null!==this.id||null!==i.id?this.id===i.id:super.isSimilar(i)&&this.priority==i.priority}_clone(i){const r=super._clone(i);return r._priority=this._priority,r._id=this._id,r}}function Hy(){if(Gl(this))return null;let u=this.parent;for(;u&&u.is("attributeElement");){if(Gl(u)>1)return null;u=u.parent}return!u||Gl(u)>1?null:this.childCount}function Gl(u){return Array.from(u.getChildren()).filter(i=>!i.is("uiElement")).length}Pr.DEFAULT_PRIORITY=10;class Nm extends Eo{constructor(i,r,a){super(i,r,a),this.getFillerOffset=VE}is(i,r=null){const a=i.replace(/^view:/,"");return r?"emptyElement"==a&&r==this.name||super.is(i,r):"emptyElement"==a||super.is(i)}_insertChild(i,r){if(r&&(r instanceof as||Array.from(r).length>0))throw new W.b("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,r])}}function VE(){return null}const fn=navigator.userAgent.toLowerCase();var To_isMac=fn.indexOf("macintosh")>-1,To_isEdge=!!fn.match(/edge\/(\d+.?\d*)/),To_isGecko=function(u){return!!u.match(/gecko\/\d+/)}(fn),To_isSafari=function(u){return u.indexOf(" applewebkit/")>-1&&-1===u.indexOf("chrome")}(fn),To_isAndroid=function(u){return u.indexOf("android")>-1}(fn);!function(){let u=!1;try{u=0==="\u0107".search(new RegExp("[\\p{L}]","u"))}catch{}}();const jE={"\u2318":"ctrl","\u21e7":"shift","\u2325":"alt"},xu={ctrl:"\u2318",shift:"\u21e7",alt:"\u2325"},ct=function(){const u={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let i=65;i<=90;i++)u[String.fromCharCode(i).toLowerCase()]=i;for(let i=48;i<=57;i++)u[i-48]=i;for(let i=112;i<=123;i++)u["f"+(i-111)]=i;return u}();function Nr(u){let i;if("string"==typeof u){if(i=ct[u.toLowerCase()],!i)throw new W.b("keyboard-unknown-key: Unknown key name.",null,{key:u})}else i=u.keyCode+(u.altKey?ct.alt:0)+(u.ctrlKey?ct.ctrl:0)+(u.shiftKey?ct.shift:0);return i}function Eu(u){return"string"==typeof u&&(u=qi(u)),u.map(i=>"string"==typeof i?Nr(i):i).reduce((i,r)=>r+i,0)}function Bs(u){return To_isMac?qi(u).map(i=>xu[i.toLowerCase()]||i).reduce((i,r)=>i.slice(-1)in jE?i+r:i+"+"+r):u}function qi(u){return u.split(/\s*\+\s*/)}class Im extends Eo{constructor(i,r,a){super(i,r,a),this.getFillerOffset=zy}is(i,r=null){const a=i.replace(/^view:/,"");return r?"uiElement"==a&&r==this.name||super.is(i,r):"uiElement"==a||super.is(i)}_insertChild(i,r){if(r&&(r instanceof as||Array.from(r).length>0))throw new W.b("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this)}render(i){return this.toDomElement(i)}toDomElement(i){const r=i.createElement(this.name);for(const a of this.getAttributeKeys())r.setAttribute(a,this.getAttribute(a));return r}}function zy(){return null}class lo{constructor(i){this._children=[],i&&this._insertChild(0,i)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(i){return"documentFragment"==i||"view:documentFragment"==i}_appendChild(i){return this._insertChild(this.childCount,i)}getChild(i){return this._children[i]}getChildIndex(i){return this._children.indexOf(i)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(i,r){this._fireChange("children",this);let a=0;const c="string"==typeof(d=r)?[new Kt(d)]:(Jt(d)||(d=[d]),Array.from(d).map(f=>"string"==typeof f?new Kt(f):f instanceof he?new Kt(f.data):f));var d;for(const d of c)null!==d.parent&&d._remove(),d.parent=this,this._children.splice(i,0,d),i++,a++;return a}_removeChildren(i,r=1){this._fireChange("children",this);for(let a=i;a<i+r;a++)this._children[a].parent=null;return this._children.splice(i,r)}_fireChange(i,r){this.fire("change:"+i,r)}}Fe(lo,Re);class df{constructor(i){this.document=i,this._cloneGroups=new Map}setSelection(i,r,a){this.document.selection._setTo(i,r,a)}setSelectionFocus(i,r){this.document.selection._setFocus(i,r)}createText(i){return new Kt(i)}createAttributeElement(i,r,a={}){const c=new Pr(i,r);return a.priority&&(c._priority=a.priority),a.id&&(c._id=a.id),c}createContainerElement(i,r){return new tf(i,r)}createEditableElement(i,r){const a=new ku(i,r);return a._document=this.document,a}createEmptyElement(i,r){return new Nm(i,r)}createUIElement(i,r,a){const c=new Im(i,r);return a&&(c.render=a),c}setAttribute(i,r,a){a._setAttribute(i,r)}removeAttribute(i,r){r._removeAttribute(i)}addClass(i,r){r._addClass(i)}removeClass(i,r){r._removeClass(i)}setStyle(i,r,a){ht(i)&&void 0===a&&(a=r),a._setStyle(i,r)}removeStyle(i,r){r._removeStyle(i)}setCustomProperty(i,r,a){a._setCustomProperty(i,r)}removeCustomProperty(i,r){return r._removeCustomProperty(i)}breakAttributes(i){return i instanceof fe?this._breakAttributes(i):this._breakAttributesRange(i)}breakContainer(i){const r=i.parent;if(!r.is("containerElement"))throw new W.b("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document);if(!r.parent)throw new W.b("view-writer-break-root: Trying to break root element.",this.document);if(i.isAtStart)return fe._createBefore(r);if(!i.isAtEnd){const a=r._clone(!1);this.insert(fe._createAfter(r),a);const c=new Ve(i,fe._createAt(r,"end")),d=new fe(a,0);this.move(c,d)}return fe._createAfter(r)}mergeAttributes(i){const r=i.offset,a=i.parent;if(a.is("text"))return i;if(a.is("attributeElement")&&0===a.childCount){const f=a.parent,g=a.index;return a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new fe(f,g))}const c=a.getChild(r-1),d=a.getChild(r);if(!c||!d)return i;if(c.is("text")&&d.is("text"))return Rm(c,d);if(c.is("attributeElement")&&d.is("attributeElement")&&c.isSimilar(d)){const f=c.childCount;return c._appendChild(d.getChildren()),d._remove(),this._removeFromClonedElementsGroup(d),this.mergeAttributes(new fe(c,f))}return i}mergeContainers(i){const r=i.nodeBefore,a=i.nodeAfter;if(!(r&&a&&r.is("containerElement")&&a.is("containerElement")))throw new W.b("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.",this.document);const c=r.getChild(r.childCount-1),d=fe._createAt(c instanceof Kt?c:r,"end");return this.move(Ve._createIn(a),fe._createAt(r,"end")),this.remove(Ve._createOn(a)),d}insert(i,r){!function _(b,y){for(const k of b){if(!Uy.some(S=>k instanceof S))throw new W.b("view-writer-insert-invalid-node",y);k.is("text")||_(k.getChildren(),y)}}(r=Jt(r)?[...r]:[r],this.document);const a=ql(i);if(!a)throw new W.b("view-writer-invalid-position-container",this.document);const c=this._breakAttributes(i,!0),d=a._insertChild(c.offset,r);for(const _ of r)this._addToClonedElementsGroup(_);const f=c.getShiftedBy(d),g=this.mergeAttributes(c);if(0===d)return new Ve(g,g);{g.isEqual(c)||f.offset--;const _=this.mergeAttributes(f);return new Ve(g,_)}}remove(i){const r=i instanceof Ve?i:Ve._createOn(i);if(Pa(r,this.document),r.isCollapsed)return new lo;const{start:a,end:c}=this._breakAttributesRange(r,!0),g=a.parent._removeChildren(a.offset,c.offset-a.offset);for(const b of g)this._removeFromClonedElementsGroup(b);const _=this.mergeAttributes(a);return r.start=_,r.end=_.clone(),new lo(g)}clear(i,r){Pa(i,this.document);const a=i.getWalker({direction:"backward",ignoreElementEnd:!0});for(const c of a){const d=c.item;let f;if(d.is("element")&&r.isSimilar(d))f=Ve._createOn(d);else if(!c.nextPosition.isAfter(i.start)&&d.is("textProxy")){const g=d.getAncestors().find(_=>_.is("element")&&r.isSimilar(_));g&&(f=Ve._createIn(g))}f&&(f.end.isAfter(i.end)&&(f.end=i.end),f.start.isBefore(i.start)&&(f.start=i.start),this.remove(f))}}move(i,r){let a;if(r.isAfter(i.end)){const c=(r=this._breakAttributes(r,!0)).parent,d=c.childCount;i=this._breakAttributesRange(i,!0),a=this.remove(i),r.offset+=c.childCount-d}else a=this.remove(i);return this.insert(r,a)}wrap(i,r){if(!(r instanceof Pr))throw new W.b("view-writer-wrap-invalid-attribute",this.document);if(Pa(i,this.document),i.isCollapsed){let c=i.start;c.parent.is("element")&&!Array.from(c.parent.getChildren()).some(f=>!f.is("uiElement"))&&(c=c.getLastMatchingPosition(f=>f.item.is("uiElement"))),c=this._wrapPosition(c,r);const d=this.document.selection;return d.isCollapsed&&d.getFirstPosition().isEqual(i.start)&&this.setSelection(c),new Ve(c)}return this._wrapRange(i,r)}unwrap(i,r){if(!(r instanceof Pr))throw new W.b("view-writer-unwrap-invalid-attribute",this.document);if(Pa(i,this.document),i.isCollapsed)return i;const{start:a,end:c}=this._breakAttributesRange(i,!0),f=this._unwrapChildren(a.parent,a.offset,c.offset,r),g=this.mergeAttributes(f.start);g.isEqual(f.start)||f.end.offset--;const _=this.mergeAttributes(f.end);return new Ve(g,_)}rename(i,r){const a=new tf(i,r.getAttributes());return this.insert(fe._createAfter(r),a),this.move(Ve._createIn(r),fe._createAt(a,0)),this.remove(Ve._createOn(r)),a}clearClonedElementsGroup(i){this._cloneGroups.delete(i)}createPositionAt(i,r){return fe._createAt(i,r)}createPositionAfter(i){return fe._createAfter(i)}createPositionBefore(i){return fe._createBefore(i)}createRange(i,r){return new Ve(i,r)}createRangeOn(i){return Ve._createOn(i)}createRangeIn(i){return Ve._createIn(i)}createSelection(i,r,a){return new ao(i,r,a)}_wrapChildren(i,r,a,c){let d=r;const f=[];for(;d<a;){const _=i.getChild(d),b=_.is("text"),y=_.is("attributeElement"),k=_.is("emptyElement"),S=_.is("uiElement");if(y&&this._wrapAttributeElement(c,_))f.push(new fe(i,d));else if(b||k||S||y&&Ue(c,_)){const F=c._clone();_._remove(),F._appendChild(_),i._insertChild(d,F),this._addToClonedElementsGroup(F),f.push(new fe(i,d))}else y&&this._wrapChildren(_,0,_.childCount,c);d++}let g=0;for(const _ of f)_.offset-=g,_.offset!=r&&(this.mergeAttributes(_).isEqual(_)||(g++,a--));return Ve._createFromParentsAndOffsets(i,r,i,a)}_unwrapChildren(i,r,a,c){let d=r;const f=[];for(;d<a;){const _=i.getChild(d);if(_.is("attributeElement"))if(_.isSimilar(c)){const b=_.getChildren(),y=_.childCount;_._remove(),i._insertChild(d,b),this._removeFromClonedElementsGroup(_),f.push(new fe(i,d),new fe(i,d+y)),d+=y,a+=y-1}else this._unwrapAttributeElement(c,_)?(f.push(new fe(i,d),new fe(i,d+1)),d++):(this._unwrapChildren(_,0,_.childCount,c),d++);else d++}let g=0;for(const _ of f)_.offset-=g,_.offset!=r&&_.offset!=a&&(this.mergeAttributes(_).isEqual(_)||(g++,a--));return Ve._createFromParentsAndOffsets(i,r,i,a)}_wrapRange(i,r){const{start:a,end:c}=this._breakAttributesRange(i,!0),f=this._wrapChildren(a.parent,a.offset,c.offset,r),g=this.mergeAttributes(f.start);g.isEqual(f.start)||f.end.offset--;const _=this.mergeAttributes(f.end);return new Ve(g,_)}_wrapPosition(i,r){if(r.isSimilar(i.parent))return hf(i.clone());i.parent.is("text")&&(i=$y(i));const a=this.createAttributeElement();a._priority=Number.POSITIVE_INFINITY,a.isSimilar=()=>!1,i.parent._insertChild(i.offset,a);const c=new Ve(i,i.getShiftedBy(1));this.wrap(c,r);const d=new fe(a.parent,a.index);a._remove();const f=d.nodeBefore,g=d.nodeAfter;return f instanceof Kt&&g instanceof Kt?Rm(f,g):hf(d)}_wrapAttributeElement(i,r){if(!Fm(i,r)||i.name!==r.name||i.priority!==r.priority)return!1;for(const a of i.getAttributeKeys())if("class"!==a&&"style"!==a&&r.hasAttribute(a)&&r.getAttribute(a)!==i.getAttribute(a))return!1;for(const a of i.getStyleNames())if(r.hasStyle(a)&&r.getStyle(a)!==i.getStyle(a))return!1;for(const a of i.getAttributeKeys())"class"!==a&&"style"!==a&&(r.hasAttribute(a)||this.setAttribute(a,i.getAttribute(a),r));for(const a of i.getStyleNames())r.hasStyle(a)||this.setStyle(a,i.getStyle(a),r);for(const a of i.getClassNames())r.hasClass(a)||this.addClass(a,r);return!0}_unwrapAttributeElement(i,r){if(!Fm(i,r)||i.name!==r.name||i.priority!==r.priority)return!1;for(const a of i.getAttributeKeys())if("class"!==a&&"style"!==a&&(!r.hasAttribute(a)||r.getAttribute(a)!==i.getAttribute(a)))return!1;if(!r.hasClass(...i.getClassNames()))return!1;for(const a of i.getStyleNames())if(!r.hasStyle(a)||r.getStyle(a)!==i.getStyle(a))return!1;for(const a of i.getAttributeKeys())"class"!==a&&"style"!==a&&this.removeAttribute(a,r);return this.removeClass(Array.from(i.getClassNames()),r),this.removeStyle(Array.from(i.getStyleNames()),r),!0}_breakAttributesRange(i,r=!1){const a=i.start,c=i.end;if(Pa(i,this.document),i.isCollapsed){const _=this._breakAttributes(i.start,r);return new Ve(_,_)}const d=this._breakAttributes(c,r),f=d.parent.childCount,g=this._breakAttributes(a,r);return d.offset+=d.parent.childCount-f,new Ve(g,d)}_breakAttributes(i,r=!1){const a=i.offset,c=i.parent;if(i.parent.is("emptyElement"))throw new W.b("view-writer-cannot-break-empty-element",this.document);if(i.parent.is("uiElement"))throw new W.b("view-writer-cannot-break-ui-element",this.document);if(!r&&c.is("text")&&ff(c.parent)||ff(c))return i.clone();if(c.is("text"))return this._breakAttributes($y(i),r);if(a==c.childCount){const d=new fe(c.parent,c.index+1);return this._breakAttributes(d,r)}if(0===a){const d=new fe(c.parent,c.index);return this._breakAttributes(d,r)}{const d=c.index+1,f=c._clone();c.parent._insertChild(d,f),this._addToClonedElementsGroup(f);const _=c._removeChildren(a,c.childCount-a);f._appendChild(_);const b=new fe(c.parent,d);return this._breakAttributes(b,r)}}_addToClonedElementsGroup(i){if(!i.root.is("rootElement"))return;if(i.is("element"))for(const c of i.getChildren())this._addToClonedElementsGroup(c);const r=i.id;if(!r)return;let a=this._cloneGroups.get(r);a||(a=new Set,this._cloneGroups.set(r,a)),a.add(i),i._clonesGroup=a}_removeFromClonedElementsGroup(i){if(i.is("element"))for(const c of i.getChildren())this._removeFromClonedElementsGroup(c);const r=i.id;if(!r)return;const a=this._cloneGroups.get(r);a&&a.delete(i)}}function ql(u){let i=u.parent;for(;!ff(i);){if(!i)return;i=i.parent}return i}function Ue(u,i){return u.priority<i.priority||!(u.priority>i.priority)&&u.getIdentity()<i.getIdentity()}function hf(u){const i=u.nodeBefore;if(i&&i.is("text"))return new fe(i,i.data.length);const r=u.nodeAfter;return r&&r.is("text")?new fe(r,0):u}function $y(u){if(u.offset==u.parent.data.length)return new fe(u.parent.parent,u.parent.index+1);if(0===u.offset)return new fe(u.parent.parent,u.parent.index);const i=u.parent.data.slice(u.offset);return u.parent._data=u.parent.data.slice(0,u.offset),u.parent.parent._insertChild(u.parent.index+1,new Kt(i)),new fe(u.parent.parent,u.parent.index+1)}function Rm(u,i){const r=u.data.length;return u._data+=i.data,i._remove(),new fe(u,r)}const Uy=[Kt,Pr,tf,Nm,Im];function ff(u){return u&&(u.is("containerElement")||u.is("documentFragment"))}function Pa(u,i){const r=ql(u.start),a=ql(u.end);if(!r||!a||r!==a)throw new W.b("view-writer-invalid-range-container",i)}function Fm(u,i){return null===u.id&&null===i.id}function ii(u){return"[object Text]"==Object.prototype.toString.call(u)}const re=u=>u.createTextNode("\xa0"),bt=u=>{const i=u.createElement("br");return i.dataset.ckeFiller=!0,i},ae=(()=>{let u="";for(let i=0;i<7;i++)u+="\u200b";return u})();function ne(u){return ii(u)&&u.data.substr(0,7)===ae}function Pn(u){return 7==u.data.length&&ne(u)}function Du(u){return ne(u)?u.data.slice(7):u.data}function Wl(u,i){if(i.keyCode==ct.arrowleft){const r=i.domTarget.ownerDocument.defaultView.getSelection();if(1==r.rangeCount&&r.getRangeAt(0).collapsed){const a=r.getRangeAt(0).startContainer,c=r.getRangeAt(0).startOffset;ne(a)&&c<=7&&r.collapse(a,0)}}}function qo(u,i,r,a=!1){r=r||function(d,f){return d===f},Array.isArray(u)||(u=Array.from(u)),Array.isArray(i)||(i=Array.from(i));const c=function(d,f,g){const _=Mu(d,f,g);if(-1===_)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const k=Mu(Su(d,_),Su(f,_),g);return{firstIndex:_,lastIndexOld:d.length-k,lastIndexNew:f.length-k}}(u,i,r);return a?function(d,f){const{firstIndex:g,lastIndexOld:_,lastIndexNew:b}=d;if(-1===g)return Array(f).fill("equal");let y=[];return g>0&&(y=y.concat(Array(g).fill("equal"))),b-g>0&&(y=y.concat(Array(b-g).fill("insert"))),_-g>0&&(y=y.concat(Array(_-g).fill("delete"))),b<f&&(y=y.concat(Array(f-b).fill("equal"))),y}(c,i.length):function(d,f){const g=[],{firstIndex:_,lastIndexOld:b,lastIndexNew:y}=f;return y-_>0&&g.push({index:_,type:"insert",values:d.slice(_,y)}),b-_>0&&g.push({index:_+(y-_),type:"delete",howMany:b-_}),g}(i,c)}function Mu(u,i,r){for(let a=0;a<Math.max(u.length,i.length);a++)if(void 0===u[a]||void 0===i[a]||!r(u[a],i[a]))return a;return-1}function Su(u,i){return u.slice(i).reverse()}function Vs(u,i,r){r=r||function(G,Y){return G===Y};const a=u.length,c=i.length;if(a>200||c>200||a+c>300)return Vs.fastDiff(u,i,r,!0);let d,f;if(c<a){const G=u;u=i,i=G,d="delete",f="insert"}else d="insert",f="delete";const g=u.length,_=i.length,b=_-g,y={},k={};function S(G){const Y=(void 0!==k[G-1]?k[G-1]:-1)+1,oe=void 0!==k[G+1]?k[G+1]:-1,ue=Y>oe?-1:1;y[G+ue]&&(y[G]=y[G+ue].slice(0)),y[G]||(y[G]=[]),y[G].push(Y>oe?d:f);let we=Math.max(Y,oe),qe=we-G;for(;qe<g&&we<_&&r(u[qe],i[we]);)qe++,we++,y[G].push("equal");return we}let F,$=0;do{for(F=-$;F<b;F++)k[F]=S(F);for(F=b+$;F>b;F--)k[F]=S(F);k[b]=S(b),$++}while(k[b]!==_);return y[b].slice(1)}function Lm(u,i,r){u.insertBefore(r,u.childNodes[i]||null)}function Gy(u){const i=u.parentNode;i&&i.removeChild(u)}function Hs(u){if(u){if(u.defaultView)return u instanceof u.defaultView.Document;if(u.ownerDocument&&u.ownerDocument.defaultView)return u instanceof u.ownerDocument.defaultView.Node}return!1}Vs.fastDiff=qo;class ki{constructor(i,r){this.domDocuments=new Set,this.domConverter=i,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=r,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(i,r){if("text"===i)this.domConverter.mapViewToDom(r.parent)&&this.markedTexts.add(r);else{if(!this.domConverter.mapViewToDom(r))return;if("attributes"===i)this.markedAttributes.add(r);else{if("children"!==i)throw new W.b("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this);this.markedChildren.add(r)}}}render(){let i;for(const r of this.markedChildren)this._updateChildrenMappings(r);this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?i=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(i=this.selection.getFirstPosition(),this.markedChildren.add(i.parent));for(const r of this.markedAttributes)this._updateAttrs(r);for(const r of this.markedChildren)this._updateChildren(r,{inlineFillerPosition:i});for(const r of this.markedTexts)!this.markedChildren.has(r.parent)&&this.domConverter.mapViewToDom(r.parent)&&this._updateText(r,{inlineFillerPosition:i});if(i){const r=this.domConverter.viewPositionToDom(i),a=r.parent.ownerDocument;this._inlineFiller=ne(r.parent)?r.parent:lr(a,r.parent,r.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(i){const r=this.domConverter.mapViewToDom(i);if(!r)return;const a=this.domConverter.mapViewToDom(i).childNodes,c=Array.from(this.domConverter.viewChildrenToDom(i,r.ownerDocument,{withChildren:!1})),d=this._diffNodeLists(a,c),f=this._findReplaceActions(d,a,c);if(-1!==f.indexOf("replace")){const g={equal:0,insert:0,delete:0};for(const _ of f)if("replace"===_){const b=g.equal+g.insert,y=g.equal+g.delete,k=i.getChild(b);k&&!k.is("uiElement")&&this._updateElementMappings(k,a[y]),Gy(c[b]),g.equal++}else g[_]++}}_updateElementMappings(i,r){this.domConverter.unbindDomElement(r),this.domConverter.bindElements(r,i),this.markedChildren.add(i),this.markedAttributes.add(i)}_getInlineFillerPosition(){const i=this.selection.getFirstPosition();return i.parent.is("text")?fe._createBefore(this.selection.getFirstPosition().parent):i}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const i=this.selection.getFirstPosition(),r=this.domConverter.viewPositionToDom(i);return!!(r&&ii(r.parent)&&ne(r.parent))}_removeInlineFiller(){const i=this._inlineFiller;if(!ne(i))throw new W.b("view-renderer-filler-was-lost: The inline filler node was lost.",this);Pn(i)?i.parentNode.removeChild(i):i.data=i.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const i=this.selection.getFirstPosition(),r=i.parent,a=i.offset;return!!(this.domConverter.mapViewToDom(r.root)&&r.is("element")&&function(f){if("false"==f.getAttribute("contenteditable"))return!1;const g=f.findAncestor(_=>_.hasAttribute("contenteditable"));return!g||"true"==g.getAttribute("contenteditable")}(r)&&a!==r.getFillerOffset())&&!(i.nodeBefore instanceof Kt||i.nodeAfter instanceof Kt)}_updateText(i,r){const a=this.domConverter.findCorrespondingDomText(i),c=this.domConverter.viewToDom(i,a.ownerDocument),d=a.data;let f=c.data;const g=r.inlineFillerPosition;if(g&&g.parent==i.parent&&g.offset==i.index&&(f=ae+f),d!=f){const _=qo(d,f);for(const b of _)"insert"===b.type?a.insertData(b.index,b.values.join("")):a.deleteData(b.index,b.howMany)}}_updateAttrs(i){const r=this.domConverter.mapViewToDom(i);if(!r)return;const a=Array.from(r.attributes).map(d=>d.name),c=i.getAttributeKeys();for(const d of c)r.setAttribute(d,i.getAttribute(d));for(const d of a)i.hasAttribute(d)||r.removeAttribute(d)}_updateChildren(i,r){const a=this.domConverter.mapViewToDom(i);if(!a)return;const c=r.inlineFillerPosition,d=this.domConverter.mapViewToDom(i).childNodes,f=Array.from(this.domConverter.viewChildrenToDom(i,a.ownerDocument,{bind:!0,inlineFillerPosition:c}));c&&c.parent===i&&lr(a.ownerDocument,f,c.offset);const g=this._diffNodeLists(d,f);let _=0;const b=new Set;for(const y of g)"insert"===y?(Lm(a,_,f[_]),_++):"delete"===y?(b.add(d[_]),Gy(d[_])):(this._markDescendantTextToSync(this.domConverter.domToView(f[_])),_++);for(const y of b)y.parentNode||this.domConverter.unbindDomElement(y)}_diffNodeLists(i,r){return Vs(i=function(a,c){const d=Array.from(a);return 0==d.length||!c||d[d.length-1]==c&&d.pop(),d}(i,this._fakeSelectionContainer),r,Na.bind(null,this.domConverter))}_findReplaceActions(i,r,a){if(-1===i.indexOf("insert")||-1===i.indexOf("delete"))return i;let c=[],d=[],f=[];const g={equal:0,insert:0,delete:0};for(const _ of i)"insert"===_?f.push(a[g.equal+g.insert]):"delete"===_?d.push(r[g.equal+g.delete]):(c=c.concat(Vs(d,f,pf).map(b=>"equal"===b?"replace":b)),c.push("equal"),d=[],f=[]),g[_]++;return c.concat(Vs(d,f,pf).map(_=>"equal"===_?"replace":_))}_markDescendantTextToSync(i){if(i)if(i.is("text"))this.markedTexts.add(i);else if(i.is("element"))for(const r of i.getChildren())this._markDescendantTextToSync(r)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const i=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&i&&(this.selection.isFake?this._updateFakeSelection(i):(this._removeFakeSelection(),this._updateDomSelection(i)))}_updateFakeSelection(i){const r=i.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(f){const g=f.createElement("div");return Object.assign(g.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),g.textContent="\xa0",g}(r));const a=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(a,this.selection),!this._fakeSelectionNeedsUpdate(i))return;a.parentElement&&a.parentElement==i||i.appendChild(a),a.textContent=this.selection.fakeSelectionLabel||"\xa0";const c=r.getSelection(),d=r.createRange();c.removeAllRanges(),d.selectNodeContents(a),c.addRange(d)}_updateDomSelection(i){const r=i.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(r))return;const a=this.domConverter.viewPositionToDom(this.selection.anchor),c=this.domConverter.viewPositionToDom(this.selection.focus);i.focus(),r.collapse(a.parent,a.offset),r.extend(c.parent,c.offset),To_isGecko&&function(d,f){const g=d.parent;if(g.nodeType!=Node.ELEMENT_NODE||d.offset!=g.childNodes.length-1)return;const _=g.childNodes[d.offset];_&&"BR"==_.tagName&&f.addRange(f.getRangeAt(0))}(c,r)}_domSelectionNeedsUpdate(i){if(!this.domConverter.isDomSelectionCorrect(i))return!0;const r=i&&this.domConverter.domSelectionToView(i);return!(r&&this.selection.isEqual(r)||!this.selection.isCollapsed&&this.selection.isSimilar(r))}_fakeSelectionNeedsUpdate(i){const r=this._fakeSelectionContainer,a=i.ownerDocument.getSelection();return!r||r.parentElement!==i||a.anchorNode!==r&&!r.contains(a.anchorNode)||r.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const i of this.domDocuments)if(i.getSelection().rangeCount){const r=i.activeElement,a=this.domConverter.mapDomToView(r);r&&a&&i.getSelection().removeAllRanges()}}_removeFakeSelection(){const i=this._fakeSelectionContainer;i&&i.remove()}_updateFocus(){if(this.isFocused){const i=this.selection.editableElement;i&&this.domConverter.focus(i)}}}function lr(u,i,r){const a=i instanceof Array?i:i.childNodes,c=a[r];if(ii(c))return c.data=ae+c.data,c;{const d=u.createTextNode(ae);return Array.isArray(i)?a.splice(r,0,d):Lm(i,r,d),d}}function pf(u,i){return Hs(u)&&Hs(i)&&!ii(u)&&!ii(i)&&u.tagName.toLowerCase()===i.tagName.toLowerCase()}function Na(u,i,r){return i===r||(ii(i)&&ii(r)?i.data===r.data:!(!u.isBlockFiller(i)||!u.isBlockFiller(r)))}Fe(ki,On);var ln={window,document};function gf(u){let i=0;for(;u.previousSibling;)u=u.previousSibling,i++;return i}function Ia(u){const i=[];for(;u&&u.nodeType!=Node.DOCUMENT_NODE;)i.unshift(u),u=u.parentNode;return i}const qy=bt(document);class Kl{constructor(i={}){this.blockFillerMode=i.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption"],this._blockFiller="br"==this.blockFillerMode?bt:re,this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}bindFakeSelection(i,r){this._fakeSelectionMapping.set(i,new ao(r))}fakeSelectionToView(i){return this._fakeSelectionMapping.get(i)}bindElements(i,r){this._domToViewMapping.set(i,r),this._viewToDomMapping.set(r,i)}unbindDomElement(i){const r=this._domToViewMapping.get(i);if(r){this._domToViewMapping.delete(i),this._viewToDomMapping.delete(r);for(const a of Array.from(i.childNodes))this.unbindDomElement(a)}}bindDocumentFragments(i,r){this._domToViewMapping.set(i,r),this._viewToDomMapping.set(r,i)}viewToDom(i,r,a={}){if(i.is("text")){const c=this._processDataFromViewText(i);return r.createTextNode(c)}{if(this.mapViewToDom(i))return this.mapViewToDom(i);let c;if(i.is("documentFragment"))c=r.createDocumentFragment(),a.bind&&this.bindDocumentFragments(c,i);else{if(i.is("uiElement"))return c=i.render(r),a.bind&&this.bindElements(c,i),c;c=i.hasAttribute("xmlns")?r.createElementNS(i.getAttribute("xmlns"),i.name):r.createElement(i.name),a.bind&&this.bindElements(c,i);for(const d of i.getAttributeKeys())c.setAttribute(d,i.getAttribute(d))}if(a.withChildren||void 0===a.withChildren)for(const d of this.viewChildrenToDom(i,r,a))c.appendChild(d);return c}}*viewChildrenToDom(i,r,a={}){const c=i.getFillerOffset&&i.getFillerOffset();let d=0;for(const f of i.getChildren())c===d&&(yield this._blockFiller(r)),yield this.viewToDom(f,r,a),d++;c===d&&(yield this._blockFiller(r))}viewRangeToDom(i){const r=this.viewPositionToDom(i.start),a=this.viewPositionToDom(i.end),c=document.createRange();return c.setStart(r.parent,r.offset),c.setEnd(a.parent,a.offset),c}viewPositionToDom(i){const r=i.parent;if(r.is("text")){const a=this.findCorrespondingDomText(r);if(!a)return null;let c=i.offset;return ne(a)&&(c+=7),{parent:a,offset:c}}{let a,c,d;if(0===i.offset){if(a=this.mapViewToDom(r),!a)return null;d=a.childNodes[0]}else{const f=i.nodeBefore;if(c=f.is("text")?this.findCorrespondingDomText(f):this.mapViewToDom(i.nodeBefore),!c)return null;a=c.parentNode,d=c.nextSibling}return ii(d)&&ne(d)?{parent:d,offset:7}:{parent:a,offset:c?gf(c)+1:0}}}domToView(i,r={}){if(this.isBlockFiller(i,this.blockFillerMode))return null;const a=this.getParentUIElement(i,this._domToViewMapping);if(a)return a;if(ii(i)){if(Pn(i))return null;{const c=this._processDataFromDomText(i);return""===c?null:new Kt(c)}}if(this.isComment(i))return null;{if(this.mapDomToView(i))return this.mapDomToView(i);let c;if(this.isDocumentFragment(i))c=new lo,r.bind&&this.bindDocumentFragments(i,c);else{const d=r.keepOriginalCase?i.tagName:i.tagName.toLowerCase();c=new Eo(d),r.bind&&this.bindElements(i,c);const f=i.attributes;for(let g=f.length-1;g>=0;g--)c._setAttribute(f[g].name,f[g].value)}if(r.withChildren||void 0===r.withChildren)for(const d of this.domChildrenToView(i,r))c._appendChild(d);return c}}*domChildrenToView(i,r={}){for(let a=0;a<i.childNodes.length;a++){const d=this.domToView(i.childNodes[a],r);null!==d&&(yield d)}}domSelectionToView(i){if(1===i.rangeCount){let c=i.getRangeAt(0).startContainer;ii(c)&&(c=c.parentNode);const d=this.fakeSelectionToView(c);if(d)return d}const r=this.isDomSelectionBackward(i),a=[];for(let c=0;c<i.rangeCount;c++){const d=i.getRangeAt(c),f=this.domRangeToView(d);f&&a.push(f)}return new ao(a,{backward:r})}domRangeToView(i){const r=this.domPositionToView(i.startContainer,i.startOffset),a=this.domPositionToView(i.endContainer,i.endOffset);return r&&a?new Ve(r,a):null}domPositionToView(i,r){if(this.isBlockFiller(i,this.blockFillerMode))return this.domPositionToView(i.parentNode,gf(i));const a=this.mapDomToView(i);if(a&&a.is("uiElement"))return fe._createBefore(a);if(ii(i)){if(Pn(i))return this.domPositionToView(i.parentNode,gf(i));const c=this.findCorrespondingViewText(i);let d=r;return c?(ne(i)&&(d-=7,d=d<0?0:d),new fe(c,d)):null}if(0===r){const c=this.mapDomToView(i);if(c)return new fe(c,0)}else{const c=i.childNodes[r-1],d=ii(c)?this.findCorrespondingViewText(c):this.mapDomToView(c);if(d&&d.parent)return new fe(d.parent,d.index+1)}return null}mapDomToView(i){return this.getParentUIElement(i)||this._domToViewMapping.get(i)}findCorrespondingViewText(i){if(Pn(i))return null;const r=this.getParentUIElement(i);if(r)return r;const a=i.previousSibling;if(a){if(!this.isElement(a))return null;const c=this.mapDomToView(a);if(c)return c.nextSibling instanceof Kt?c.nextSibling:null}else{const c=this.mapDomToView(i.parentNode);if(c){const d=c.getChild(0);return d instanceof Kt?d:null}}return null}mapViewToDom(i){return this._viewToDomMapping.get(i)}findCorrespondingDomText(i){const r=i.previousSibling;return r&&this.mapViewToDom(r)?this.mapViewToDom(r).nextSibling:!r&&i.parent&&this.mapViewToDom(i.parent)?this.mapViewToDom(i.parent).childNodes[0]:null}focus(i){const r=this.mapViewToDom(i);if(r&&r.ownerDocument.activeElement!==r){const{scrollX:a,scrollY:c}=ln.window,d=[];Au(r,f=>{const{scrollLeft:g,scrollTop:_}=f;d.push([g,_])}),r.focus(),Au(r,f=>{const[g,_]=d.shift();f.scrollLeft=g,f.scrollTop=_}),ln.window.scrollTo(a,c)}}isElement(i){return i&&i.nodeType==Node.ELEMENT_NODE}isDocumentFragment(i){return i&&i.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(i){return i&&i.nodeType==Node.COMMENT_NODE}isBlockFiller(i){return"br"==this.blockFillerMode?i.isEqualNode(qy):!("BR"!==i.tagName||!mf(i,this.blockElements)||1!==i.parentNode.childNodes.length)||function(r,a){return ii(r)&&"\xa0"==r.data&&mf(r,a)&&1===r.parentNode.childNodes.length}(i,this.blockElements)}isDomSelectionBackward(i){if(i.isCollapsed)return!1;const r=document.createRange();r.setStart(i.anchorNode,i.anchorOffset),r.setEnd(i.focusNode,i.focusOffset);const a=r.collapsed;return r.detach(),a}getParentUIElement(i){const r=Ia(i);for(r.pop();r.length;){const a=r.pop(),c=this._domToViewMapping.get(a);if(c&&c.is("uiElement"))return c}return null}isDomSelectionCorrect(i){return this._isDomSelectionPositionCorrect(i.anchorNode,i.anchorOffset)&&this._isDomSelectionPositionCorrect(i.focusNode,i.focusOffset)}_isDomSelectionPositionCorrect(i,r){if(ii(i)&&ne(i)&&r<7||this.isElement(i)&&ne(i.childNodes[r]))return!1;const a=this.mapDomToView(i);return!a||!a.is("uiElement")}_processDataFromViewText(i){let r=i.data;if(i.getAncestors().some(a=>this.preElements.includes(a.name)))return r;if(" "==r.charAt(0)){const a=this._getTouchingViewTextNode(i,!1);(!a||!this._nodeEndsWithSpace(a))&&a||(r="\xa0"+r.substr(1))}if(" "==r.charAt(r.length-1)){const a=this._getTouchingViewTextNode(i,!0);" "!=r.charAt(r.length-2)&&a&&" "!=a.data.charAt(0)||(r=r.substr(0,r.length-1)+"\xa0")}return r.replace(/ {2}/g," \xa0")}_nodeEndsWithSpace(i){if(i.getAncestors().some(a=>this.preElements.includes(a.name)))return!1;const r=this._processDataFromViewText(i);return" "==r.charAt(r.length-1)}_processDataFromDomText(i){let r=i.data;if(Jl(i,this.preElements))return Du(i);r=r.replace(/[ \n\t\r]{1,}/g," ");const a=this._getTouchingInlineDomNode(i,!1),c=this._getTouchingInlineDomNode(i,!0),d=this._checkShouldLeftTrimDomText(a),f=this._checkShouldRightTrimDomText(i,c);return d&&(r=r.replace(/^ /,"")),f&&(r=r.replace(/ $/,"")),r=Du(new Text(r)),r=r.replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(r)||!c||c.data&&" "==c.data.charAt(0))&&(r=r.replace(/\u00A0$/," ")),d&&(r=r.replace(/^\u00A0/," ")),r}_checkShouldLeftTrimDomText(i){return!i||!!ss(i)||/[^\S\u00A0]/.test(i.data.charAt(i.data.length-1))}_checkShouldRightTrimDomText(i,r){return!r&&!ne(i)}_getTouchingViewTextNode(i,r){const a=new Ls({startPosition:r?fe._createAfter(i):fe._createBefore(i),direction:r?"forward":"backward"});for(const c of a){if(c.item.is("containerElement")||c.item.is("br"))return null;if(c.item.is("textProxy"))return c.item}return null}_getTouchingInlineDomNode(i,r){if(!i.parentNode)return null;const a=r?"nextNode":"previousNode",c=i.ownerDocument,d=Ia(i)[0],f=c.createTreeWalker(d,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:_=>ii(_)||"BR"==_.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});f.currentNode=i;const g=f[a]();if(null!==g){const _=function(b,y){const k=Ia(b),S=Ia(y);let F=0;for(;k[F]==S[F]&&k[F];)F++;return 0===F?null:k[F-1]}(i,g);if(_&&!Jl(i,this.blockElements,_)&&!Jl(g,this.blockElements,_))return g}return null}}function Jl(u,i,r){let a=Ia(u);return r&&(a=a.slice(a.indexOf(r)+1)),a.some(c=>c.tagName&&i.includes(c.tagName.toLowerCase()))}function Au(u,i){for(;u&&u!=ln.document;)i(u),u=u.parentNode}function mf(u,i){const r=u.parentNode;return r&&r.tagName&&i.includes(r.tagName.toLowerCase())}function Ra(u){const i=Object.prototype.toString.apply(u);return"[object Window]"==i||"[object global]"==i}var Fa=$l({},Re,{listenTo(u,...i){if(Hs(u)||Ra(u)){const r=this._getProxyEmitter(u)||new Ou(u);r.attach(...i),u=r}Re.listenTo.call(this,u,...i)},stopListening(u,i,r){if(Hs(u)||Ra(u)){const a=this._getProxyEmitter(u);if(!a)return;u=a}Re.stopListening.call(this,u,i,r),u instanceof Ou&&u.detach(i)},_getProxyEmitter(u){return i=this,r=Pu(u),i[Os]&&i[Os][r]?i[Os][r].emitter:null;var i,r}});class Ou{constructor(i){Sy(this,Pu(i)),this._domNode=i}}function Pu(u){return u["data-ck-expando"]||(u["data-ck-expando"]=bi())}$l(Ou.prototype,Re,{attach(u,i,r={}){if(this._domListeners&&this._domListeners[u])return;const a=this._createDomListener(u,!!r.useCapture);this._domNode.addEventListener(u,a,!!r.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[u]=a},detach(u){let i;!this._domListeners[u]||(i=this._events[u])&&i.callbacks.length||this._domListeners[u].removeListener()},_createDomListener(u,i){const r=a=>{this.fire(u,a)};return r.removeListener=()=>{this._domNode.removeEventListener(u,r,i),delete this._domListeners[u]},r}});class Ir{constructor(i){this.view=i,this.document=i.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}}function Yl(u){var i=-1,r=null==u?0:u.length;for(this.__data__=new Lh;++i<r;)this.add(u[i])}Fe(Ir,Fa),Yl.prototype.add=Yl.prototype.push=function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this},Yl.prototype.has=function(u){return this.__data__.has(u)};var _f=Yl,Wy=function(u,i){for(var r=-1,a=null==u?0:u.length;++r<a;)if(i(u[r],r,u))return!0;return!1},Ky=function(u,i){return u.has(i)},xi=function(u,i,r,a,c,d){var f=1&r,g=u.length,_=i.length;if(g!=_&&!(f&&_>g))return!1;var b=d.get(u);if(b&&d.get(i))return b==i;var y=-1,k=!0,S=2&r?new _f:void 0;for(d.set(u,i),d.set(i,u);++y<g;){var F=u[y],$=i[y];if(a)var G=f?a($,F,y,i,u,d):a(F,$,y,u,i,d);if(void 0!==G){if(G)continue;k=!1;break}if(S){if(!Wy(i,function(Y,oe){if(!Ky(S,oe)&&(F===Y||c(F,Y,r,a,d)))return S.push(oe)})){k=!1;break}}else if(F!==$&&!c(F,$,r,a,d)){k=!1;break}}return d.delete(u),d.delete(i),k},cs=function(u){var i=-1,r=Array(u.size);return u.forEach(function(a,c){r[++i]=[c,a]}),r},kn=function(u){var i=-1,r=Array(u.size);return u.forEach(function(a){r[++i]=a}),r},jm=w?w.prototype:void 0,vf=jm?jm.valueOf:void 0,Yy=Object.prototype.hasOwnProperty,Hm=Object.prototype.hasOwnProperty,Ql=function u(i,r,a,c,d){return i===r||(null==i||null==r||!qt(i)&&!qt(r)?i!=i&&r!=r:function(u,i,r,a,c,d){var f=vi(u),g=vi(i),_=f?"[object Array]":mu(u),b=g?"[object Array]":mu(i),y="[object Object]"==(_="[object Arguments]"==_?"[object Object]":_),k="[object Object]"==(b="[object Arguments]"==b?"[object Object]":b),S=_==b;if(S&&Object(Ml.a)(u)){if(!Object(Ml.a)(i))return!1;f=!0,y=!1}if(S&&!y)return d||(d=new Ta),f||cu(u)?xi(u,i,r,a,c,d):function(u,i,r,a,c,d,f){switch(r){case"[object DataView]":if(u.byteLength!=i.byteLength||u.byteOffset!=i.byteOffset)return!1;u=u.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=i.byteLength||!d(new Jh(u),new Jh(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return zi(+u,+i);case"[object Error]":return u.name==i.name&&u.message==i.message;case"[object RegExp]":case"[object String]":return u==i+"";case"[object Map]":var g=cs;case"[object Set]":if(g||(g=kn),u.size!=i.size&&!(1&a))return!1;var b=f.get(u);if(b)return b==i;a|=2,f.set(u,i);var y=xi(g(u),g(i),a,c,d,f);return f.delete(u),y;case"[object Symbol]":if(vf)return vf.call(u)==vf.call(i)}return!1}(u,i,_,r,a,c,d);if(!(1&r)){var F=y&&Hm.call(u,"__wrapped__"),$=k&&Hm.call(i,"__wrapped__");if(F||$){var G=F?u.value():u,Y=$?i.value():i;return d||(d=new Ta),c(G,Y,r,a,d)}}return!!S&&(d||(d=new Ta),function(u,i,r,a,c,d){var f=1&r,g=Ma(u),_=g.length;if(_!=Ma(i).length&&!f)return!1;for(var b=_;b--;){var y=g[b];if(!(f?y in i:Yy.call(i,y)))return!1}var k=d.get(u);if(k&&d.get(i))return k==i;var S=!0;d.set(u,i),d.set(i,u);for(var F=f;++b<_;){var $=u[y=g[b]],G=i[y];if(a)var Y=f?a(G,$,y,i,u,d):a($,G,y,u,i,d);if(!(void 0===Y?$===G||c($,G,r,a,d):Y)){S=!1;break}F||(F="constructor"==y)}if(S&&!F){var oe=u.constructor,ue=i.constructor;oe!=ue&&"constructor"in u&&"constructor"in i&&!("function"==typeof oe&&oe instanceof oe&&"function"==typeof ue&&ue instanceof ue)&&(S=!1)}return d.delete(u),d.delete(i),S}(u,i,r,a,c,d))}(i,r,a,c,u,d))},Iu=function(u,i,r){var a=(r="function"==typeof r?r:void 0)?r(u,i):void 0;return void 0===a?Ql(u,i,void 0,r):!!a};class Ru extends Ir{constructor(i){super(i),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=i.domConverter,this.renderer=i._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(i){this._domElements.push(i),this.isEnabled&&this._mutationObserver.observe(i,this._config)}enable(){super.enable();for(const i of this._domElements)this._mutationObserver.observe(i,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(i){if(0===i.length)return;const r=this.domConverter,a=new Map,c=new Set;for(const b of i)if("childList"===b.type){const y=r.mapDomToView(b.target);if(y&&y.is("uiElement"))continue;y&&!this._isBogusBrMutation(b)&&c.add(y)}for(const b of i){const y=r.mapDomToView(b.target);if(!(y&&y.is("uiElement")||"characterData"!==b.type)){const k=r.findCorrespondingViewText(b.target);k&&!c.has(k.parent)?a.set(k,{type:"text",oldText:k.data,newText:Du(b.target),node:k}):!k&&ne(b.target)&&c.add(r.mapDomToView(b.target.parentNode))}}const d=[];for(const b of a.values())this.renderer.markToSync("text",b.node),d.push(b);for(const b of c){const y=r.mapViewToDom(b),k=Array.from(b.getChildren()),S=Array.from(r.domChildrenToView(y,{withChildren:!1}));Iu(k,S,_)||(this.renderer.markToSync("children",b),d.push({type:"children",oldChildren:k,newChildren:S,node:b}))}const f=i[0].target.ownerDocument.getSelection();let g=null;if(f&&f.anchorNode){const b=r.domPositionToView(f.anchorNode,f.anchorOffset),y=r.domPositionToView(f.focusNode,f.focusOffset);b&&y&&(g=new ao(b),g.setFocus(y))}function _(b,y){if(!Array.isArray(b))return b===y||!(!b.is("text")||!y.is("text"))&&b.data===y.data}d.length&&(this.document.fire("mutations",d,g),this.view.forceRender())}_isBogusBrMutation(i){let r=null;return null===i.nextSibling&&0===i.removedNodes.length&&1==i.addedNodes.length&&(r=this.domConverter.domToView(i.addedNodes[0],{withChildren:!1})),r&&r.is("element","br")}}class Fu{constructor(i,r,a){this.view=i,this.document=i.document,this.domEvent=r,this.domTarget=r.target,$l(this,a)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class zs extends Ir{constructor(i){super(i),this.useCapture=!1}observe(i){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(r=>{this.listenTo(i,r,(a,c)=>{this.isEnabled&&this.onDomEvent(c)},{useCapture:this.useCapture})})}fire(i,r,a){this.isEnabled&&this.document.fire(i,new Fu(this.view,r,a))}}class us extends zs{constructor(i){super(i),this.domEventType=["keydown","keyup"]}onDomEvent(i){this.fire(i.type,i,{keyCode:i.keyCode,altKey:i.altKey,ctrlKey:i.ctrlKey||i.metaKey,shiftKey:i.shiftKey,get keystroke(){return Nr(this)}})}}var $s=function(){return P.a.Date.now()},Xy=/^\s+|\s+$/g,Zy=/^[-+]0x[0-9a-f]+$/i,Xl=/^0b[01]+$/i,bf=/^0o[0-7]+$/i,e1=parseInt,zm=function(u){if("number"==typeof u)return u;if(Sr(u))return NaN;if($n(u)){var i="function"==typeof u.valueOf?u.valueOf():u;u=$n(i)?i+"":i}if("string"!=typeof u)return 0===u?u:+u;u=u.replace(Xy,"");var r=Xl.test(u);return r||bf.test(u)?e1(u.slice(2),r?2:8):Zy.test(u)?NaN:+u},HE=Math.max,zE=Math.min,La=function(u,i,r){var a,c,d,f,g,_,b=0,y=!1,k=!1,S=!0;if("function"!=typeof u)throw new TypeError("Expected a function");function F(we){var qe=a,Nn=c;return a=c=void 0,b=we,f=u.apply(Nn,qe)}function $(we){return b=we,g=setTimeout(Y,i),y?F(we):f}function G(we){var qe=we-_;return void 0===_||qe>=i||qe<0||k&&we-b>=d}function Y(){var qe,Nn,we=$s();if(G(we))return oe(we);g=setTimeout(Y,(Nn=i-((qe=we)-_),k?zE(Nn,d-(qe-b)):Nn))}function oe(we){return g=void 0,S&&a?F(we):(a=c=void 0,f)}function ue(){var we=$s(),qe=G(we);if(a=arguments,c=this,_=we,qe){if(void 0===g)return $(_);if(k)return clearTimeout(g),g=setTimeout(Y,i),F(_)}return void 0===g&&(g=setTimeout(Y,i)),f}return i=zm(i)||0,$n(r)&&(y=!!r.leading,d=(k="maxWait"in r)?HE(zm(r.maxWait)||0,i):d,S="trailing"in r?!!r.trailing:S),ue.cancel=function(){void 0!==g&&clearTimeout(g),b=0,a=_=c=g=void 0},ue.flush=function(){return void 0===g?f:oe($s())},ue};class $m extends Ir{constructor(i){super(i),this._fireSelectionChangeDoneDebounced=La(r=>this.document.fire("selectionChangeDone",r),200)}observe(){const i=this.document;i.on("keydown",(r,a)=>{var c;i.selection.isFake&&((c=a.keyCode)==ct.arrowright||c==ct.arrowleft||c==ct.arrowup||c==ct.arrowdown)&&this.isEnabled&&(a.preventDefault(),this._handleSelectionMove(a.keyCode))},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(i){const r=this.document.selection,a=new ao(r.getRanges(),{backward:r.isBackward,fake:!1});i!=ct.arrowleft&&i!=ct.arrowup||a.setTo(a.getFirstPosition()),i!=ct.arrowright&&i!=ct.arrowdown||a.setTo(a.getLastPosition());const c={oldSelection:r,newSelection:a,domSelection:null};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}class Um extends Ir{constructor(i){super(i),this.mutationObserver=i.getObserver(Ru),this.selection=this.document.selection,this.domConverter=i.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=La(r=>this.document.fire("selectionChangeDone",r),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(i){const r=i.ownerDocument;this._documents.has(r)||(this.listenTo(r,"selectionchange",()=>{this._handleSelectionChange(r)}),this._documents.add(r))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(i){if(!this.isEnabled)return;this.mutationObserver.flush();const r=i.defaultView.getSelection(),a=this.domConverter.domSelectionToView(r);if(0!=a.rangeCount&&!(this.selection.isEqual(a)&&this.domConverter.isDomSelectionCorrect(r)||++this._loopbackCounter>60))if(this.selection.isSimilar(a))this.view.forceRender();else{const c={oldSelection:this.selection,newSelection:a,domSelection:r};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Lu extends zs{constructor(i){super(i),this.domEventType=["focus","blur"],this.useCapture=!0;const r=this.document;r.on("focus",()=>{r.isFocused=!0,this._renderTimeoutId=setTimeout(()=>i.forceRender(),50)}),r.on("blur",(a,c)=>{const d=r.selection.editableElement;null!==d&&d!==c.target||(r.isFocused=!1,i.forceRender())})}onDomEvent(i){this.fire(i.type,i)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Gm extends zs{constructor(i){super(i),this.domEventType=["compositionstart","compositionupdate","compositionend"];const r=this.document;r.on("compositionstart",()=>{r.isComposing=!0}),r.on("compositionend",()=>{r.isComposing=!1})}onDomEvent(i){this.fire(i.type,i)}}class qm extends zs{constructor(i){super(i),this.domEventType=["beforeinput"]}onDomEvent(i){this.fire(i.type,i)}}function Rr(u){return"[object Range]"==Object.prototype.toString.apply(u)}function Wm(u){const i=u.ownerDocument.defaultView.getComputedStyle(u);return{top:parseInt(i.borderTopWidth,10),right:parseInt(i.borderRightWidth,10),bottom:parseInt(i.borderBottomWidth,10),left:parseInt(i.borderLeftWidth,10)}}const Us=["top","right","bottom","left","width","height"];class Yt{constructor(i){const r=Rr(i);if(Object.defineProperty(this,"_source",{value:i._source||i,writable:!0,enumerable:!1}),ss(i)||r)Ba(this,r?Yt.getDomRangeRects(i)[0]:i.getBoundingClientRect());else if(Ra(i)){const{innerWidth:a,innerHeight:c}=i;Ba(this,{top:0,right:a,bottom:c,left:0,width:a,height:c})}else Ba(this,i)}clone(){return new Yt(this)}moveTo(i,r){return this.top=r,this.right=i+this.width,this.bottom=r+this.height,this.left=i,this}moveBy(i,r){return this.top+=r,this.right+=i,this.left+=i,this.bottom+=r,this}getIntersection(i){const r={top:Math.max(this.top,i.top),right:Math.min(this.right,i.right),bottom:Math.min(this.bottom,i.bottom),left:Math.max(this.left,i.left)};return r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<0||r.height<0?null:new Yt(r)}getIntersectionArea(i){const r=this.getIntersection(i);return r?r.getArea():0}getArea(){return this.width*this.height}getVisible(){const i=this._source;let r=this.clone();if(!t1(i)){let a=i.parentNode||i.commonAncestorContainer;for(;a&&!t1(a);){const c=new Yt(a),d=r.getIntersection(c);if(!d)return null;d.getArea()<r.getArea()&&(r=d),a=a.parentNode}}return r}isEqual(i){for(const r of Us)if(this[r]!==i[r])return!1;return!0}contains(i){const r=this.getIntersection(i);return!(!r||!r.isEqual(i))}excludeScrollbarsAndBorders(){const i=this._source;let r,a,c;if(Ra(i))r=i.innerWidth-i.document.documentElement.clientWidth,a=i.innerHeight-i.document.documentElement.clientHeight,c=i.getComputedStyle(i.document.documentElement).direction;else{const d=Wm(this._source);r=i.offsetWidth-i.clientWidth-d.left-d.right,a=i.offsetHeight-i.clientHeight-d.top-d.bottom,c=i.ownerDocument.defaultView.getComputedStyle(i).direction,this.left+=d.left,this.top+=d.top,this.right-=d.right,this.bottom-=d.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=r,"ltr"===c?this.right-=r:this.left+=r,this.height-=a,this.bottom-=a,this}static getDomRangeRects(i){const r=[],a=Array.from(i.getClientRects());if(a.length)for(const c of a)r.push(new Yt(c));else{let c=i.startContainer;ii(c)&&(c=c.parentNode);const d=new Yt(c.getBoundingClientRect());d.right=d.left,d.width=0,r.push(d)}return r}}function Ba(u,i){for(const r of Us)u[r]=i[r]}function t1(u){return!!ss(u)&&u===u.ownerDocument.body}function yf({target:u,viewportOffset:i=0}){const r=Zl(u);let a=r,c=null;for(;a;){let d;d=ec(a==r?u:c),Jm(d,()=>tc(u,a));const f=tc(u,a);if(Km(a,f,i),a.parent!=a){if(c=a.frameElement,a=a.parent,!c)return}else a=null}}function Km(u,i,r){const a=i.clone().moveBy(0,r),c=i.clone().moveBy(0,-r),d=new Yt(u).excludeScrollbarsAndBorders();if(![c,a].every(f=>d.contains(f))){let{scrollX:f,scrollY:g}=u;Ym(c,d)?g-=d.top-i.top+r:Wo(a,d)&&(g+=i.bottom-d.bottom+r),Va(i,d)?f-=d.left-i.left+r:Bu(i,d)&&(f+=i.right-d.right+r),u.scrollTo(f,g)}}function Jm(u,i){const r=Zl(u);let a,c;for(;u!=r.document.body;)c=i(),a=new Yt(u).excludeScrollbarsAndBorders(),a.contains(c)||(Ym(c,a)?u.scrollTop-=a.top-c.top:Wo(c,a)&&(u.scrollTop+=c.bottom-a.bottom),Va(c,a)?u.scrollLeft-=a.left-c.left:Bu(c,a)&&(u.scrollLeft+=c.right-a.right)),u=u.parentNode}function Wo(u,i){return u.bottom>i.bottom}function Ym(u,i){return u.top<i.top}function Va(u,i){return u.left<i.left}function Bu(u,i){return u.right>i.right}function Zl(u){return Rr(u)?u.startContainer.ownerDocument.defaultView:u.ownerDocument.defaultView}function ec(u){if(Rr(u)){let i=u.commonAncestorContainer;return ii(i)&&(i=i.parentNode),i}return u.parentNode}function tc(u,i){const r=Zl(u),a=new Yt(u);if(r===i)return a;{let c=r;for(;c!=i;){const f=new Yt(c.frameElement).excludeScrollbarsAndBorders();a.moveBy(f.left,f.top),c=c.parent}}return a}Object.assign({},{scrollViewportToShowTarget:yf,scrollAncestorsToShowTarget:function(u){Jm(ec(u),()=>new Yt(u))}});class Qm{constructor(){this.document=new Gi,this.domConverter=new Kl,this.domRoots=new Map,this.set("isRenderingInProgress",!1),this._renderer=new ki(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new df(this.document),this.addObserver(Ru),this.addObserver(Um),this.addObserver(Lu),this.addObserver(us),this.addObserver($m),this.addObserver(Gm),To_isAndroid&&this.addObserver(qm),this.document.on("keydown",Wl),function Tu(u){u.document.on("keydown",(i,r)=>function(a,c,d){if(c.keyCode==ct.arrowright){const f=c.domTarget.ownerDocument.defaultView.getSelection(),g=1==f.rangeCount&&f.getRangeAt(0).collapsed;if(g||c.shiftKey){const y=d.domPositionToView(f.focusNode,f.focusOffset);if(null===y)return;let k=!1;const S=y.getLastMatchingPosition(F=>(F.item.is("uiElement")&&(k=!0),!(!F.item.is("uiElement")&&!F.item.is("attributeElement"))));if(k){const F=d.viewPositionToDom(S);g?f.collapse(F.parent,F.offset):f.extend(F.parent,F.offset)}}}}(0,r,u.domConverter))}(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(i,r="main"){const a=this.document.getRoot(r);a._name=i.tagName.toLowerCase();const c={};for(const{name:f,value:g}of Array.from(i.attributes))c[f]=g,"class"===f?this._writer.addClass(g.split(" "),a):this._writer.setAttribute(f,g,a);this._initialDomRootAttributes.set(i,c);const d=()=>{this._writer.setAttribute("contenteditable",!a.isReadOnly,a),a.isReadOnly?this._writer.addClass("ck-read-only",a):this._writer.removeClass("ck-read-only",a)};d(),this.domRoots.set(r,i),this.domConverter.bindElements(i,a),this._renderer.markToSync("children",a),this._renderer.markToSync("attributes",a),this._renderer.domDocuments.add(i.ownerDocument),a.on("change:children",(f,g)=>this._renderer.markToSync("children",g)),a.on("change:attributes",(f,g)=>this._renderer.markToSync("attributes",g)),a.on("change:text",(f,g)=>this._renderer.markToSync("text",g)),a.on("change:isReadOnly",()=>this.change(d)),a.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const f of this._observers.values())f.observe(i,r)}detachDomRoot(i){const r=this.domRoots.get(i);Array.from(r.attributes).forEach(({name:c})=>r.removeAttribute(c));const a=this._initialDomRootAttributes.get(r);for(const c in a)r.setAttribute(c,a[c]);this.domRoots.delete(i),this.domConverter.unbindDomElement(r)}getDomRoot(i="main"){return this.domRoots.get(i)}addObserver(i){let r=this._observers.get(i);if(r)return r;r=new i(this),this._observers.set(i,r);for(const[a,c]of this.domRoots)r.observe(c,a);return r.enable(),r}getObserver(i){return this._observers.get(i)}disableObservers(){for(const i of this._observers.values())i.disable()}enableObservers(){for(const i of this._observers.values())i.enable()}scrollToTheSelection(){const i=this.document.selection.getFirstRange();i&&yf({target:this.domConverter.viewRangeToDom(i),viewportOffset:20})}focus(){if(!this.document.isFocused){const i=this.document.selection.editableElement;i&&(this.domConverter.focus(i),this.forceRender())}}change(i){if(this.isRenderingInProgress||this._postFixersInProgress)throw new W.b("cannot-change-view-tree: Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behavior and inconsistency between the DOM and the view.",this);try{if(this._ongoingChange)return i(this._writer);this._ongoingChange=!0;const r=i(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),r}catch(r){W.b.rethrowUnexpectedError(r,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(()=>{})}destroy(){for(const i of this._observers.values())i.destroy();this.document.destroy(),this.stopListening()}createPositionAt(i,r){return fe._createAt(i,r)}createPositionAfter(i){return fe._createAfter(i)}createPositionBefore(i){return fe._createBefore(i)}createRange(i,r){return new Ve(i,r)}createRangeOn(i){return Ve._createOn(i)}createRangeIn(i){return Ve._createIn(i)}createSelection(i,r,a){return new ao(i,r,a)}_disableRendering(i){this._renderingDisabled=i,0==i&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}Fe(Qm,On);class ds{constructor(i){this.parent=null,this._attrs=vt(i)}get index(){let i;if(!this.parent)return null;if(null===(i=this.parent.getChildIndex(this)))throw new W.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return i}get startOffset(){let i;if(!this.parent)return null;if(null===(i=this.parent.getChildStartOffset(this)))throw new W.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return i}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const i=this.index;return null!==i&&this.parent.getChild(i+1)||null}get previousSibling(){const i=this.index;return null!==i&&this.parent.getChild(i-1)||null}get root(){let i=this;for(;i.parent;)i=i.parent;return i}get document(){return this.root==this?null:this.root.document||null}getPath(){const i=[];let r=this;for(;r.parent;)i.unshift(r.startOffset),r=r.parent;return i}getAncestors(i={includeSelf:!1,parentFirst:!1}){const r=[];let a=i.includeSelf?this:this.parent;for(;a;)r[i.parentFirst?"push":"unshift"](a),a=a.parent;return r}getCommonAncestor(i,r={}){const a=this.getAncestors(r),c=i.getAncestors(r);let d=0;for(;a[d]==c[d]&&a[d];)d++;return 0===d?null:a[d-1]}isBefore(i){if(this==i||this.root!==i.root)return!1;const r=this.getPath(),a=i.getPath(),c=yi(r,a);switch(c){case"prefix":return!0;case"extension":return!1;default:return r[c]<a[c]}}isAfter(i){return this!=i&&this.root===i.root&&!this.isBefore(i)}hasAttribute(i){return this._attrs.has(i)}getAttribute(i){return this._attrs.get(i)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const i={};return this._attrs.size&&(i.attributes=Array.from(this._attrs).reduce((r,a)=>(r[a[0]]=a[1],r),{})),i}is(i){return"node"==i||"model:node"==i}_clone(){return new ds(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(i,r){this._attrs.set(i,r)}_setAttributesTo(i){this._attrs=vt(i)}_removeAttribute(i){return this._attrs.delete(i)}_clearAttributes(){this._attrs.clear()}}class Ut extends ds{constructor(i,r){super(r),this._data=i||""}get offsetSize(){return this.data.length}get data(){return this._data}is(i){return"text"==i||"model:text"==i||super.is(i)}toJSON(){const i=super.toJSON();return i.data=this.data,i}_clone(){return new Ut(this.data,this.getAttributes())}static fromJSON(i){return new Ut(i.data,i.attributes)}}class Ko{constructor(i,r,a){if(this.textNode=i,r<0||r>i.offsetSize)throw new W.b("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(a<0||r+a>i.offsetSize)throw new W.b("model-textproxy-wrong-length: Given length value is incorrect.",this);this.data=i.data.substring(r,r+a),this.offsetInText=r}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(i){return"textProxy"==i||"model:textProxy"==i}getPath(){const i=this.textNode.getPath();return i.length>0&&(i[i.length-1]+=this.offsetInText),i}getAncestors(i={includeSelf:!1,parentFirst:!1}){const r=[];let a=i.includeSelf?this:this.parent;for(;a;)r[i.parentFirst?"push":"unshift"](a),a=a.parent;return r}hasAttribute(i){return this.textNode.hasAttribute(i)}getAttribute(i){return this.textNode.getAttribute(i)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class Gs{constructor(i){this._nodes=[],i&&this._insertNodes(0,i)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((i,r)=>i+r.offsetSize,0)}getNode(i){return this._nodes[i]||null}getNodeIndex(i){const r=this._nodes.indexOf(i);return-1==r?null:r}getNodeStartOffset(i){const r=this.getNodeIndex(i);return null===r?null:this._nodes.slice(0,r).reduce((a,c)=>a+c.offsetSize,0)}indexToOffset(i){if(i==this._nodes.length)return this.maxOffset;const r=this._nodes[i];if(!r)throw new W.b("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);return this.getNodeStartOffset(r)}offsetToIndex(i){let r=0;for(const a of this._nodes){if(i>=r&&i<r+a.offsetSize)return this.getNodeIndex(a);r+=a.offsetSize}if(r!=i)throw new W.b("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:i,nodeList:this});return this.length}_insertNodes(i,r){for(const a of r)if(!(a instanceof ds))throw new W.b("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this);this._nodes.splice(i,0,...r)}_removeNodes(i,r=1){return this._nodes.splice(i,r)}toJSON(){return this._nodes.map(i=>i.toJSON())}}class Qt extends ds{constructor(i,r,a){super(r),this.name=i,this._children=new Gs,a&&this._insertChild(0,a)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(i,r=null){const a=i.replace(/^model:/,"");return r?"element"==a&&r==this.name:"element"==a||a==this.name||super.is(i)}getChild(i){return this._children.getNode(i)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(i){return this._children.getNodeIndex(i)}getChildStartOffset(i){return this._children.getNodeStartOffset(i)}offsetToIndex(i){return this._children.offsetToIndex(i)}getNodeByPath(i){let r=this;for(const a of i)r=r.getChild(r.offsetToIndex(a));return r}toJSON(){const i=super.toJSON();if(i.name=this.name,this._children.length>0){i.children=[];for(const r of this._children)i.children.push(r.toJSON())}return i}_clone(i=!1){const r=i?Array.from(this._children).map(a=>a._clone(!0)):null;return new Qt(this.name,this.getAttributes(),r)}_appendChild(i){this._insertChild(this.childCount,i)}_insertChild(i,r){const a="string"==typeof(c=r)?[new Ut(c)]:(Jt(c)||(c=[c]),Array.from(c).map(d=>"string"==typeof d?new Ut(d):d instanceof Ko?new Ut(d.data,d.getAttributes()):d));var c;for(const c of a)null!==c.parent&&c._remove(),c.parent=this;this._children._insertNodes(i,a)}_removeChildren(i,r=1){const a=this._children._removeNodes(i,r);for(const c of a)c.parent=null;return a}static fromJSON(i){let r=null;if(i.children){r=[];for(const a of i.children)r.push(a.name?Qt.fromJSON(a):Ut.fromJSON(a))}return new Qt(i.name,i.attributes,r)}}class Do{constructor(i={}){if(!i.boundaries&&!i.startPosition)throw new W.b("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);const r=i.direction||"forward";if("forward"!=r&&"backward"!=r)throw new W.b("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",i,{direction:r});this.direction=r,this.boundaries=i.boundaries||null,this.position=i.startPosition?i.startPosition.clone():se._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!i.singleCharacters,this.shallow=!!i.shallow,this.ignoreElementEnd=!!i.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(i){let r,a,c,d;do{c=this.position,d=this._visitedParent,({done:r,value:a}=this.next())}while(!r&&i(a));r||(this.position=c,this._visitedParent=d)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const i=this.position,r=this.position.clone(),a=this._visitedParent;if(null===a.parent&&r.offset===a.maxOffset)return{done:!0};if(a===this._boundaryEndParent&&r.offset==this.boundaries.end.offset)return{done:!0};const c=r.textNode?r.textNode:r.nodeAfter;if(c instanceof Qt)return this.shallow?r.offset++:(r.path.push(0),this._visitedParent=c),this.position=r,Jo("elementStart",c,i,r,1);if(c instanceof Ut){let d;if(this.singleCharacters)d=1;else{let _=c.endOffset;this._boundaryEndParent==a&&this.boundaries.end.offset<_&&(_=this.boundaries.end.offset),d=_-r.offset}const g=new Ko(c,r.offset-c.startOffset,d);return r.offset+=d,this.position=r,Jo("text",g,i,r,d)}return r.path.pop(),r.offset++,this.position=r,this._visitedParent=a.parent,this.ignoreElementEnd?this._next():Jo("elementEnd",a,i,r)}_previous(){const i=this.position,r=this.position.clone(),a=this._visitedParent;if(null===a.parent&&0===r.offset)return{done:!0};if(a==this._boundaryStartParent&&r.offset==this.boundaries.start.offset)return{done:!0};const c=r.textNode?r.textNode:r.nodeBefore;if(c instanceof Qt)return r.offset--,this.shallow?(this.position=r,Jo("elementStart",c,i,r,1)):(r.path.push(c.maxOffset),this.position=r,this._visitedParent=c,this.ignoreElementEnd?this._previous():Jo("elementEnd",c,i,r));if(c instanceof Ut){let d;if(this.singleCharacters)d=1;else{let _=c.startOffset;this._boundaryStartParent==a&&this.boundaries.start.offset>_&&(_=this.boundaries.start.offset),d=r.offset-_}const g=new Ko(c,r.offset-c.startOffset-d,d);return r.offset-=d,this.position=r,Jo("text",g,i,r,d)}return r.path.pop(),this.position=r,this._visitedParent=a.parent,Jo("elementStart",a,i,r,1)}}function Jo(u,i,r,a,c){return{done:!1,value:{type:u,item:i,previousPosition:r,nextPosition:a,length:c}}}class se{constructor(i,r,a="toNone"){if(!i.is("element")&&!i.is("documentFragment"))throw new W.b("model-position-root-invalid: Position root invalid.",i);if(!(r instanceof Array)||0===r.length)throw new W.b("model-position-path-incorrect-format: Position path must be an array with at least one item.",i,{path:r});r=i.getPath().concat(r),this.root=i=i.root,this.path=r,this.stickiness=a}get offset(){return Rs(this.path)}set offset(i){this.path[this.path.length-1]=i}get parent(){let i=this.root;for(let r=0;r<this.path.length-1;r++)if(i=i.getChild(i.offsetToIndex(this.path[r])),!i)throw new W.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});if(i.is("text"))throw new W.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});return i}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){const i=this.parent.getChild(this.index);return i instanceof Ut&&i.startOffset<this.offset?i:null}get nodeAfter(){return null===this.textNode?this.parent.getChild(this.index):null}get nodeBefore(){return null===this.textNode?this.parent.getChild(this.index-1):null}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(i){if(this.root!=i.root)return"different";const r=yi(this.path,i.path);switch(r){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[r]<i.path[r]?"before":"after"}}getLastMatchingPosition(i,r={}){r.startPosition=this;const a=new Do(r);return a.skip(i),a.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonPath(i){if(this.root!=i.root)return[];const r=yi(this.path,i.path),a="string"==typeof r?Math.min(this.path.length,i.path.length):r;return this.path.slice(0,a)}getCommonAncestor(i){const r=this.getAncestors(),a=i.getAncestors();let c=0;for(;r[c]==a[c]&&r[c];)c++;return 0===c?null:r[c-1]}getShiftedBy(i){const r=this.clone(),a=r.offset+i;return r.offset=a<0?0:a,r}isAfter(i){return"after"==this.compareWith(i)}isBefore(i){return"before"==this.compareWith(i)}isEqual(i){return"same"==this.compareWith(i)}isTouching(i){let r=null,a=null;switch(this.compareWith(i)){case"same":return!0;case"before":r=se._createAt(this),a=se._createAt(i);break;case"after":r=se._createAt(i),a=se._createAt(this);break;default:return!1}let c=r.parent;for(;r.path.length+a.path.length;){if(r.isEqual(a))return!0;if(r.path.length>a.path.length){if(r.offset!==c.maxOffset)return!1;r.path=r.path.slice(0,-1),c=c.parent,r.offset++}else{if(0!==a.offset)return!1;a.path=a.path.slice(0,-1)}}}is(i){return"position"==i||"model:position"==i}hasSameParentAs(i){return this.root===i.root&&"same"==yi(this.getParentPath(),i.getParentPath())}getTransformedByOperation(i){let r;switch(i.type){case"insert":r=this._getTransformedByInsertOperation(i);break;case"move":case"remove":case"reinsert":r=this._getTransformedByMoveOperation(i);break;case"split":r=this._getTransformedBySplitOperation(i);break;case"merge":r=this._getTransformedByMergeOperation(i);break;default:r=se._createAt(this)}return r}_getTransformedByInsertOperation(i){return this._getTransformedByInsertion(i.position,i.howMany)}_getTransformedByMoveOperation(i){return this._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)}_getTransformedBySplitOperation(i){const r=i.movedRange;return r.containsPosition(this)||r.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(i.splitPosition,i.moveTargetPosition):i.graveyardPosition?this._getTransformedByMove(i.graveyardPosition,i.insertionPosition,1):this._getTransformedByInsertion(i.insertionPosition,1)}_getTransformedByMergeOperation(i){const r=i.movedRange;let a;return r.containsPosition(this)||r.start.isEqual(this)?(a=this._getCombined(i.sourcePosition,i.targetPosition),i.sourcePosition.isBefore(i.targetPosition)&&(a=a._getTransformedByDeletion(i.deletionPosition,1))):a=this.isEqual(i.deletionPosition)?se._createAt(i.deletionPosition):this._getTransformedByMove(i.deletionPosition,i.graveyardPosition,1),a}_getTransformedByDeletion(i,r){const a=se._createAt(this);if(this.root!=i.root)return a;if("same"==yi(i.getParentPath(),this.getParentPath())){if(i.offset<this.offset){if(i.offset+r>this.offset)return null;a.offset-=r}}else if("prefix"==yi(i.getParentPath(),this.getParentPath())){const c=i.path.length-1;if(i.offset<=this.path[c]){if(i.offset+r>this.path[c])return null;a.path[c]-=r}}return a}_getTransformedByInsertion(i,r){const a=se._createAt(this);if(this.root!=i.root)return a;if("same"==yi(i.getParentPath(),this.getParentPath()))(i.offset<this.offset||i.offset==this.offset&&"toPrevious"!=this.stickiness)&&(a.offset+=r);else if("prefix"==yi(i.getParentPath(),this.getParentPath())){const c=i.path.length-1;i.offset<=this.path[c]&&(a.path[c]+=r)}return a}_getTransformedByMove(i,r,a){if(r=r._getTransformedByDeletion(i,a),i.isEqual(r))return se._createAt(this);const c=this._getTransformedByDeletion(i,a);return null===c||i.isEqual(this)&&"toNext"==this.stickiness||i.getShiftedBy(a).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(i,r):c._getTransformedByInsertion(r,a)}_getCombined(i,r){const a=i.path.length-1,c=se._createAt(r);return c.stickiness=this.stickiness,c.offset=c.offset+this.path[a]-i.offset,c.path=c.path.concat(this.path.slice(a+1)),c}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(i,r,a="toNone"){if(i instanceof se)return new se(i.root,i.path,i.stickiness);{const c=i;if("end"==r)r=c.maxOffset;else{if("before"==r)return this._createBefore(c,a);if("after"==r)return this._createAfter(c,a);if(0!==r&&!r)throw new W.b("model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,i])}if(!c.is("element")&&!c.is("documentFragment"))throw new W.b("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,i]);const d=c.getPath();return d.push(r),new this(c.root,d,a)}}static _createAfter(i,r){if(!i.parent)throw new W.b("model-position-after-root: You cannot make a position after root.",[this,i],{root:i});return this._createAt(i.parent,i.endOffset,r)}static _createBefore(i,r){if(!i.parent)throw new W.b("model-position-before-root: You cannot make a position before root.",i,{root:i});return this._createAt(i.parent,i.startOffset,r)}static fromJSON(i,r){if("$graveyard"===i.root){const a=new se(r.graveyard,i.path);return a.stickiness=i.stickiness,a}if(!r.getRoot(i.root))throw new W.b("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",r,{rootName:i.root});return new se(r.getRoot(i.root),i.path,i.stickiness)}}class ee{constructor(i,r=null){this.start=se._createAt(i),this.end=se._createAt(r||i),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Do({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==yi(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(i){return i.isAfter(this.start)&&i.isBefore(this.end)}containsRange(i,r=!1){i.isCollapsed&&(r=!1);const a=this.containsPosition(i.start)||r&&this.start.isEqual(i.start),c=this.containsPosition(i.end)||r&&this.end.isEqual(i.end);return a&&c}containsItem(i){const r=se._createBefore(i);return this.containsPosition(r)||this.start.isEqual(r)}is(i){return"range"==i||"model:range"==i}isEqual(i){return this.start.isEqual(i.start)&&this.end.isEqual(i.end)}isIntersecting(i){return this.start.isBefore(i.end)&&this.end.isAfter(i.start)}getDifference(i){const r=[];return this.isIntersecting(i)?(this.containsPosition(i.start)&&r.push(new ee(this.start,i.start)),this.containsPosition(i.end)&&r.push(new ee(i.end,this.end))):r.push(new ee(this.start,this.end)),r}getIntersection(i){if(this.isIntersecting(i)){let r=this.start,a=this.end;return this.containsPosition(i.start)&&(r=i.start),this.containsPosition(i.end)&&(a=i.end),new ee(r,a)}return null}getMinimalFlatRanges(){const i=[],r=this.start.getCommonPath(this.end).length,a=se._createAt(this.start);let c=a.parent;for(;a.path.length>r+1;){const d=c.maxOffset-a.offset;0!==d&&i.push(new ee(a,a.getShiftedBy(d))),a.path=a.path.slice(0,-1),a.offset++,c=c.parent}for(;a.path.length<=this.end.path.length;){const d=this.end.path[a.path.length-1],f=d-a.offset;0!==f&&i.push(new ee(a,a.getShiftedBy(f))),a.offset=d,a.path.push(0)}return i}getWalker(i={}){return i.boundaries=this,new Do(i)}*getItems(i={}){i.boundaries=this,i.ignoreElementEnd=!0;const r=new Do(i);for(const a of r)yield a.item}*getPositions(i={}){i.boundaries=this;const r=new Do(i);yield r.position;for(const a of r)yield a.nextPosition}getTransformedByOperation(i){switch(i.type){case"insert":return this._getTransformedByInsertOperation(i);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(i);case"split":return[this._getTransformedBySplitOperation(i)];case"merge":return[this._getTransformedByMergeOperation(i)]}return[new ee(this.start,this.end)]}getTransformedByOperations(i){const r=[new ee(this.start,this.end)];for(const a of i)for(let c=0;c<r.length;c++){const d=r[c].getTransformedByOperation(a);r.splice(c,1,...d),c+=d.length-1}for(let a=0;a<r.length;a++){const c=r[a];for(let d=a+1;d<r.length;d++){const f=r[d];(c.containsRange(f)||f.containsRange(c)||c.isEqual(f))&&r.splice(d,1)}}return r}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(i,r=!1){return this._getTransformedByInsertion(i.position,i.howMany,r)}_getTransformedByMoveOperation(i,r=!1){return this._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany,r)}_getTransformedBySplitOperation(i){const r=this.start._getTransformedBySplitOperation(i);let a=this.end._getTransformedBySplitOperation(i);return this.end.isEqual(i.insertionPosition)&&(a=this.end.getShiftedBy(1)),r.root!=a.root&&(a=this.end.getShiftedBy(-1)),new ee(r,a)}_getTransformedByMergeOperation(i){if(this.start.isEqual(i.targetPosition)&&this.end.isEqual(i.deletionPosition))return new ee(this.start);let r=this.start._getTransformedByMergeOperation(i),a=this.end._getTransformedByMergeOperation(i);return r.root!=a.root&&(a=this.end.getShiftedBy(-1)),r.isAfter(a)?(i.sourcePosition.isBefore(i.targetPosition)?(r=se._createAt(a),r.offset=0):(i.deletionPosition.isEqual(r)||(a=i.deletionPosition),r=i.targetPosition),new ee(r,a)):new ee(r,a)}_getTransformedByInsertion(i,r,a=!1){if(a&&this.containsPosition(i))return[new ee(this.start,i),new ee(i.getShiftedBy(r),this.end._getTransformedByInsertion(i,r))];{const c=new ee(this.start,this.end);return c.start=c.start._getTransformedByInsertion(i,r),c.end=c.end._getTransformedByInsertion(i,r),[c]}}_getTransformedByMove(i,r,a,c=!1){if(this.isCollapsed){const k=this.start._getTransformedByMove(i,r,a);return[new ee(k)]}const d=ee._createFromPositionAndShift(i,a),f=r._getTransformedByDeletion(i,a);if(this.containsPosition(r)&&!c&&(d.containsPosition(this.start)||d.containsPosition(this.end))){const k=this.start._getTransformedByMove(i,r,a),S=this.end._getTransformedByMove(i,r,a);return[new ee(k,S)]}let g;const _=this.getDifference(d);let b=null;const y=this.getIntersection(d);if(1==_.length?b=new ee(_[0].start._getTransformedByDeletion(i,a),_[0].end._getTransformedByDeletion(i,a)):2==_.length&&(b=new ee(this.start,this.end._getTransformedByDeletion(i,a))),g=b?b._getTransformedByInsertion(f,a,null!==y||c):[],y){const k=new ee(y.start._getCombined(d.start,f),y.end._getCombined(d.start,f));2==g.length?g.splice(1,0,k):g.push(k)}return g}_getTransformedByDeletion(i,r){let a=this.start._getTransformedByDeletion(i,r),c=this.end._getTransformedByDeletion(i,r);return null==a&&null==c?null:(null==a&&(a=i),null==c&&(c=i),new ee(a,c))}static _createFromPositionAndShift(i,r){const a=i,c=i.getShiftedBy(r);return r>0?new this(a,c):new this(c,a)}static _createIn(i){return new this(se._createAt(i,0),se._createAt(i,i.maxOffset))}static _createOn(i){return this._createFromPositionAndShift(se._createBefore(i),i.offsetSize)}static _createFromRanges(i){if(0===i.length)throw new W.b("range-create-from-ranges-empty-array: At least one range has to be passed.",null);if(1==i.length)return i[0].clone();const r=i[0];i.sort((d,f)=>d.start.isAfter(f.start)?1:-1);const a=i.indexOf(r),c=new this(r.start,r.end);if(a>0)for(let d=a-1;i[d].end.isEqual(c.start);d++)c.start=se._createAt(i[d].start);for(let d=a+1;d<i.length&&i[d].start.isEqual(c.end);d++)c.end=se._createAt(i[d].end);return c}static fromJSON(i,r){return new this(se.fromJSON(i.start,r),se.fromJSON(i.end,r))}}class Vu{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(i,r)=>{if(r.viewPosition)return;const a=this._modelToViewMapping.get(r.modelPosition.parent);r.viewPosition=this._findPositionIn(a,r.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(i,r)=>{if(r.modelPosition)return;const a=this.findMappedViewAncestor(r.viewPosition),c=this._viewToModelMapping.get(a),d=this._toModelOffset(r.viewPosition.parent,r.viewPosition.offset,a);r.modelPosition=se._createAt(c,d)},{priority:"low"})}bindElements(i,r){this._modelToViewMapping.set(i,r),this._viewToModelMapping.set(r,i)}unbindViewElement(i){const r=this.toModelElement(i);if(this._viewToModelMapping.delete(i),this._elementToMarkerNames.has(i))for(const a of this._elementToMarkerNames.get(i))this._unboundMarkerNames.add(a);this._modelToViewMapping.get(r)==i&&this._modelToViewMapping.delete(r)}unbindModelElement(i){const r=this.toViewElement(i);this._modelToViewMapping.delete(i),this._viewToModelMapping.get(r)==i&&this._viewToModelMapping.delete(r)}bindElementToMarker(i,r){const a=this._markerNameToElements.get(r)||new Set;a.add(i);const c=this._elementToMarkerNames.get(i)||new Set;c.add(r),this._markerNameToElements.set(r,a),this._elementToMarkerNames.set(i,c)}unbindElementFromMarkerName(i,r){const a=this._markerNameToElements.get(r);a&&(a.delete(i),0==a.size&&this._markerNameToElements.delete(r));const c=this._elementToMarkerNames.get(i);c&&(c.delete(r),0==c.size&&this._elementToMarkerNames.delete(i))}flushUnboundMarkerNames(){const i=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),i}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(i){return this._viewToModelMapping.get(i)}toViewElement(i){return this._modelToViewMapping.get(i)}toModelRange(i){return new ee(this.toModelPosition(i.start),this.toModelPosition(i.end))}toViewRange(i){return new Ve(this.toViewPosition(i.start),this.toViewPosition(i.end))}toModelPosition(i){const r={viewPosition:i,mapper:this};return this.fire("viewToModelPosition",r),r.modelPosition}toViewPosition(i,r={isPhantom:!1}){const a={modelPosition:i,mapper:this,isPhantom:r.isPhantom};return this.fire("modelToViewPosition",a),a.viewPosition}markerNameToElements(i){const r=this._markerNameToElements.get(i);if(!r)return null;const a=new Set;for(const c of r)if(c.is("attributeElement"))for(const d of c.getElementsWithSameId())a.add(d);else a.add(c);return a}registerViewToModelLength(i,r){this._viewToModelLengthCallbacks.set(i,r)}findMappedViewAncestor(i){let r=i.parent;for(;!this._viewToModelMapping.has(r);)r=r.parent;return r}_toModelOffset(i,r,a){if(a!=i)return this._toModelOffset(i.parent,i.index,a)+this._toModelOffset(i,r,i);if(i.is("text"))return r;let c=0;for(let d=0;d<r;d++)c+=this.getModelLength(i.getChild(d));return c}getModelLength(i){if(this._viewToModelLengthCallbacks.get(i.name))return this._viewToModelLengthCallbacks.get(i.name)(i);if(this._viewToModelMapping.has(i))return 1;if(i.is("text"))return i.data.length;if(i.is("uiElement"))return 0;{let r=0;for(const a of i.getChildren())r+=this.getModelLength(a);return r}}_findPositionIn(i,r){let a,c=0,d=0,f=0;if(i.is("text"))return new fe(i,r);for(;d<r;)a=i.getChild(f),c=this.getModelLength(a),d+=c,f++;return d==r?this._moveViewPositionToTextNode(new fe(i,f)):this._findPositionIn(a,r-(d-c))}_moveViewPositionToTextNode(i){const r=i.nodeBefore,a=i.nodeAfter;return r instanceof Kt?new fe(r,r.data.length):a instanceof Kt?new fe(a,0):i}}Fe(Vu,Re);class Fr{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(i,r){r=ju(r),i instanceof Ko&&(i=this._getSymbolForTextProxy(i)),this._consumable.has(i)||this._consumable.set(i,new Map),this._consumable.get(i).set(r,!0)}consume(i,r){return r=ju(r),i instanceof Ko&&(i=this._getSymbolForTextProxy(i)),!!this.test(i,r)&&(this._consumable.get(i).set(r,!1),!0)}test(i,r){r=ju(r),i instanceof Ko&&(i=this._getSymbolForTextProxy(i));const a=this._consumable.get(i);if(void 0===a)return null;const c=a.get(r);return void 0===c?null:c}revert(i,r){r=ju(r),i instanceof Ko&&(i=this._getSymbolForTextProxy(i));const a=this.test(i,r);return!1===a?(this._consumable.get(i).set(r,!0),!0):!0!==a&&null}_getSymbolForTextProxy(i){let r=null;const a=this._textProxyRegistry.get(i.startOffset);if(a){const c=a.get(i.endOffset);c&&(r=c.get(i.parent))}return r||(r=this._addSymbolForTextProxy(i.startOffset,i.endOffset,i.parent)),r}_addSymbolForTextProxy(i,r,a){const c=Symbol("textProxySymbol");let d,f;return d=this._textProxyRegistry.get(i),d||(d=new Map,this._textProxyRegistry.set(i,d)),f=d.get(r),f||(f=new Map,d.set(r,f)),f.set(a,c),c}}function ju(u){const i=u.split(":");return i.length>1?i[0]+":"+i[1]:i[0]}class pn{constructor(i){this.conversionApi=$l({dispatcher:this},i)}convertChanges(i,r,a){for(const c of i.getMarkersToRemove())this.convertMarkerRemove(c.name,c.range,a);for(const c of i.getChanges())"insert"==c.type?this.convertInsert(ee._createFromPositionAndShift(c.position,c.length),a):"remove"==c.type?this.convertRemove(c.position,c.length,c.name,a):this.convertAttribute(c.range,c.attributeKey,c.attributeOldValue,c.attributeNewValue,a);for(const c of this.conversionApi.mapper.flushUnboundMarkerNames()){const d=r.get(c).getRange();this.convertMarkerRemove(c,d,a),this.convertMarkerAdd(c,d,a)}for(const c of i.getMarkersToAdd())this.convertMarkerAdd(c.name,c.range,a)}convertInsert(i,r){this.conversionApi.writer=r,this.conversionApi.consumable=this._createInsertConsumable(i);for(const a of i){const c=a.item,d={item:c,range:ee._createFromPositionAndShift(a.previousPosition,a.length)};this._testAndFire("insert",d);for(const f of c.getAttributeKeys())d.attributeKey=f,d.attributeOldValue=null,d.attributeNewValue=c.getAttribute(f),this._testAndFire(`attribute:${f}`,d)}this._clearConversionApi()}convertRemove(i,r,a,c){this.conversionApi.writer=c,this.fire("remove:"+a,{position:i,length:r},this.conversionApi),this._clearConversionApi()}convertAttribute(i,r,a,c,d){this.conversionApi.writer=d,this.conversionApi.consumable=this._createConsumableForRange(i,`attribute:${r}`);for(const f of i){const g={item:f.item,range:ee._createFromPositionAndShift(f.previousPosition,f.length),attributeKey:r,attributeOldValue:a,attributeNewValue:c};this._testAndFire(`attribute:${r}`,g)}this._clearConversionApi()}convertSelection(i,r,a){const c=Array.from(r.getMarkersAtPosition(i.getFirstPosition()));if(this.conversionApi.writer=a,this.conversionApi.consumable=this._createSelectionConsumable(i,c),this.fire("selection",{selection:i},this.conversionApi),i.isCollapsed){for(const d of c){const f=d.getRange();if(!wf(i.getFirstPosition(),d,this.conversionApi.mapper))continue;const g={item:i,markerName:d.name,markerRange:f};this.conversionApi.consumable.test(i,"addMarker:"+d.name)&&this.fire("addMarker:"+d.name,g,this.conversionApi)}for(const d of i.getAttributeKeys()){const f={item:i,range:i.getFirstRange(),attributeKey:d,attributeOldValue:null,attributeNewValue:i.getAttribute(d)};this.conversionApi.consumable.test(i,"attribute:"+f.attributeKey)&&this.fire("attribute:"+f.attributeKey+":$text",f,this.conversionApi)}this._clearConversionApi()}}convertMarkerAdd(i,r,a){if(!r.root.document||"$graveyard"==r.root.rootName)return;this.conversionApi.writer=a;const c="addMarker:"+i,d=new Fr;if(d.add(r,c),this.conversionApi.consumable=d,this.fire(c,{markerName:i,markerRange:r},this.conversionApi),d.test(r,c)){this.conversionApi.consumable=this._createConsumableForRange(r,c);for(const f of r.getItems()){if(!this.conversionApi.consumable.test(f,c))continue;const g={item:f,range:ee._createOn(f),markerName:i,markerRange:r};this.fire(c,g,this.conversionApi)}this._clearConversionApi()}}convertMarkerRemove(i,r,a){r.root.document&&"$graveyard"!=r.root.rootName&&(this.conversionApi.writer=a,this.fire("removeMarker:"+i,{markerName:i,markerRange:r},this.conversionApi),this._clearConversionApi())}_createInsertConsumable(i){const r=new Fr;for(const a of i){const c=a.item;r.add(c,"insert");for(const d of c.getAttributeKeys())r.add(c,"attribute:"+d)}return r}_createConsumableForRange(i,r){const a=new Fr;for(const c of i.getItems())a.add(c,r);return a}_createSelectionConsumable(i,r){const a=new Fr;a.add(i,"selection");for(const c of r)a.add(i,"addMarker:"+c.name);for(const c of i.getAttributeKeys())a.add(i,"attribute:"+c);return a}_testAndFire(i,r){this.conversionApi.consumable.test(r.item,i)&&this.fire(i+":"+(r.item.name||"$text"),r,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}}function wf(u,i,r){const a=i.getRange(),c=Array.from(u.getAncestors());return c.shift(),c.reverse(),!c.some(d=>{if(a.containsItem(d))return!!r.toViewElement(d).getCustomProperty("addHighlight")})}Fe(pn,Re);class cr{constructor(i,r,a){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,i&&this.setTo(i,r,a)}get anchor(){if(this._ranges.length>0){const i=this._ranges[this._ranges.length-1];return this._lastRangeBackward?i.end:i.start}return null}get focus(){if(this._ranges.length>0){const i=this._ranges[this._ranges.length-1];return this._lastRangeBackward?i.start:i.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(i){if(this.rangeCount!=i.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(i.anchor)||!this.focus.isEqual(i.focus))return!1;for(const r of this._ranges){let a=!1;for(const c of i._ranges)if(r.isEqual(c)){a=!0;break}if(!a)return!1}return!0}*getRanges(){for(const i of this._ranges)yield new ee(i.start,i.end)}getFirstRange(){let i=null;for(const r of this._ranges)i&&!r.start.isBefore(i.start)||(i=r);return i?new ee(i.start,i.end):null}getLastRange(){let i=null;for(const r of this._ranges)i&&!r.end.isAfter(i.end)||(i=r);return i?new ee(i.start,i.end):null}getFirstPosition(){const i=this.getFirstRange();return i?i.start.clone():null}getLastPosition(){const i=this.getLastRange();return i?i.end.clone():null}setTo(i,r,a){if(null===i)this._setRanges([]);else if(i instanceof cr)this._setRanges(i.getRanges(),i.isBackward);else if(i&&"function"==typeof i.getRanges)this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof ee)this._setRanges([i],!!r&&!!r.backward);else if(i instanceof se)this._setRanges([new ee(i)]);else if(i instanceof ds){const c=!!a&&!!a.backward;let d;if("in"==r)d=ee._createIn(i);else if("on"==r)d=ee._createOn(i);else{if(void 0===r)throw new W.b("model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",[this,i]);d=new ee(se._createAt(i,r))}this._setRanges([d],c)}else{if(!Jt(i))throw new W.b("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,i]);this._setRanges(i,r&&!!r.backward)}}_setRanges(i,r=!1){const a=(i=Array.from(i)).some(c=>{if(!(c instanceof ee))throw new W.b("model-selection-set-ranges-not-range: Selection range set to an object that is not an instance of model.Range.",[this,i]);return this._ranges.every(d=>!d.isEqual(c))});if(i.length!==this._ranges.length||a){this._removeAllRanges();for(const c of i)this._pushRange(c);this._lastRangeBackward=!!r,this.fire("change:range",{directChange:!0})}}setFocus(i,r){if(null===this.anchor)throw new W.b("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,i]);const a=se._createAt(i,r);if("same"==a.compareWith(this.focus))return;const c=this.anchor;this._ranges.length&&this._popRange(),"before"==a.compareWith(c)?(this._pushRange(new ee(a,c)),this._lastRangeBackward=!0):(this._pushRange(new ee(c,a)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(i){return this._attrs.get(i)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(i){return this._attrs.has(i)}removeAttribute(i){this.hasAttribute(i)&&(this._attrs.delete(i),this.fire("change:attribute",{attributeKeys:[i],directChange:!0}))}setAttribute(i,r){this.getAttribute(i)!==r&&(this._attrs.set(i,r),this.fire("change:attribute",{attributeKeys:[i],directChange:!0}))}getSelectedElement(){if(1!==this.rangeCount)return null;const i=this.getFirstRange(),r=i.start.nodeAfter;return r instanceof Qt&&r==i.end.nodeBefore?r:null}is(i){return"selection"==i||"model:selection"==i}*getSelectedBlocks(){const i=new WeakSet;for(const r of this.getRanges()){const a=Ws(r.start,i);a&&hs(a,r)&&(yield a);for(const d of r.getWalker()){const f=d.item;"elementEnd"==d.type&&qs(f,i,r)&&(yield f)}const c=Ws(r.end,i);c&&!r.end.isTouching(se._createAt(c,0))&&hs(c,r)&&(yield c)}}containsEntireContent(i=this.anchor.root){const r=se._createAt(i,0),a=se._createAt(i,"end");return r.isTouching(this.getFirstPosition())&&a.isTouching(this.getLastPosition())}_pushRange(i){this._checkRange(i),this._ranges.push(new ee(i.start,i.end))}_checkRange(i){for(let r=0;r<this._ranges.length;r++)if(i.isIntersecting(this._ranges[r]))throw new W.b("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,i],{addedRange:i,intersectingRange:this._ranges[r]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Cf(u,i){return!i.has(u)&&(i.add(u),u.document.model.schema.isBlock(u)&&u.parent)}function qs(u,i,r){return Cf(u,i)&&hs(u,r)}function Ws(u,i){const r=u.parent.document.model.schema,a=u.parent.getAncestors({parentFirst:!0,includeSelf:!0});let c=!1;const d=a.find(f=>!c&&(c=r.isLimit(f),!c&&Cf(f,i)));return a.forEach(f=>i.add(f)),d}function hs(u,i){const r=function(a){const c=a.document.model.schema;let d=a.parent;for(;d;){if(c.isBlock(d))return d;d=d.parent}}(u);return!r||!i.containsRange(ee._createOn(r),!0)}Fe(cr,Re);class Yo extends ee{constructor(i,r){super(i,r),Xm.call(this)}detach(){this.stopListening()}is(i){return"liveRange"==i||"model:liveRange"==i||super.is(i)}toRange(){return new ee(this.start,this.end)}static fromRange(i){return new Yo(i.start,i.end)}}function Xm(){this.listenTo(this.root.document.model,"applyOperation",(u,i)=>{const r=i[0];r.isDocumentOperation&&kf.call(this,r)},{priority:"low"})}function kf(u){const i=this.getTransformedByOperation(u),r=ee._createFromRanges(i),a=!r.isEqual(this),c=function(f,g){switch(g.type){case"insert":return f.containsPosition(g.position);case"move":case"remove":case"reinsert":case"merge":return f.containsPosition(g.sourcePosition)||f.start.isEqual(g.sourcePosition)||f.containsPosition(g.targetPosition);case"split":return f.containsPosition(g.splitPosition)||f.containsPosition(g.insertionPosition)}return!1}(this,u);let d=null;if(a){"$graveyard"==r.root.rootName&&(d="remove"==u.type?u.sourcePosition:u.deletionPosition);const f=this.toRange();this.start=r.start,this.end=r.end,this.fire("change:range",f,{deletionPosition:d})}else c&&this.fire("change:content",this.toRange(),{deletionPosition:d})}Fe(Yo,Re);class Ei{constructor(i){this._selection=new $E(i),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(i){return this._selection.containsEntireContent(i)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(i){return this._selection.getAttribute(i)}hasAttribute(i){return this._selection.hasAttribute(i)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}is(i){return"selection"==i||"model:selection"==i||"documentSelection"==i||"model:documentSelection"==i}_setFocus(i,r){this._selection.setFocus(i,r)}_setTo(i,r,a){this._selection.setTo(i,r,a)}_setAttribute(i,r){this._selection.setAttribute(i,r)}_removeAttribute(i){this._selection.removeAttribute(i)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(i){this._selection.restoreGravity(i)}static _getStoreAttributeKey(i){return"selection:"+i}static _isStoreAttributeKey(i){return i.startsWith("selection:")}}Fe(Ei,Re);class $E extends cr{constructor(i){super(),this.markers=new Ni({idProperty:"name"}),this._model=i.model,this._document=i,this._attributePriority=new Map,this._fixGraveyardRangesData=[],this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this.listenTo(this._model,"applyOperation",(r,a)=>{const c=a[0];if(c.isDocumentOperation&&"marker"!=c.type&&"rename"!=c.type&&"noop"!=c.type){for(;this._fixGraveyardRangesData.length;){const{liveRange:d,sourcePosition:f}=this._fixGraveyardRangesData.shift();this._fixGraveyardSelection(d,f)}this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1}))}},{priority:"lowest"}),this.on("change:range",()=>{for(const r of this.getRanges())if(!this._document._validateSelectionRange(r))throw new W.b("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",this,{range:r})}),this.listenTo(this._model.markers,"update",()=>this._updateMarkers()),this.listenTo(this._document,"change",(r,a)=>{!function(c,d){const f=c.document.differ;for(const g of f.getChanges()){if("insert"!=g.type)continue;const _=g.position.parent;g.length===_.maxOffset&&c.enqueueChange(d,b=>{const y=Array.from(_.getAttributeKeys()).filter(k=>k.startsWith("selection:"));for(const k of y)b.removeAttribute(k,_)})}}(this._model,a)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let i=0;i<this._ranges.length;i++)this._ranges[i].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(i,r,a){super.setTo(i,r,a),this._updateAttributes(!0),this._updateMarkers()}setFocus(i,r){super.setFocus(i,r),this._updateAttributes(!0),this._updateMarkers()}setAttribute(i,r){this._setAttribute(i,r)&&this.fire("change:attribute",{attributeKeys:[i],directChange:!0})}removeAttribute(i){this._removeAttribute(i)&&this.fire("change:attribute",{attributeKeys:[i],directChange:!0})}overrideGravity(){const i=bi();return this._overriddenGravityRegister.add(i),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),i}restoreGravity(i){if(!this._overriddenGravityRegister.has(i))throw new W.b("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:i});this._overriddenGravityRegister.delete(i),this.isGravityOverridden||this._updateAttributes(!0)}_popRange(){this._ranges.pop().detach()}_pushRange(i){const r=this._prepareRange(i);r&&this._ranges.push(r)}_prepareRange(i){if(this._checkRange(i),i.root==this._document.graveyard)return;const r=Yo.fromRange(i);return r.on("change:range",(a,c,d)=>{this._hasChangedRange=!0,r.root==this._document.graveyard&&this._fixGraveyardRangesData.push({liveRange:r,sourcePosition:d.deletionPosition})}),r}_updateMarkers(){const i=[];let r=!1;for(const c of this._model.markers){const d=c.getRange();for(const f of this.getRanges())d.containsRange(f,!f.isCollapsed)&&i.push(c)}const a=Array.from(this.markers);for(const c of i)this.markers.has(c)||(this.markers.add(c),r=!0);for(const c of Array.from(this.markers))i.includes(c)||(this.markers.remove(c),r=!0);r&&this.fire("change:marker",{oldMarkers:a,directChange:!1})}_updateAttributes(i){const r=vt(this._getSurroundingAttributes()),a=vt(this.getAttributes());if(i)this._attributePriority=new Map,this._attrs=new Map;else for(const[d,f]of this._attributePriority)"low"==f&&(this._attrs.delete(d),this._attributePriority.delete(d));this._setAttributesTo(r);const c=[];for(const[d,f]of this.getAttributes())a.has(d)&&a.get(d)===f||c.push(d);for(const[d]of a)this.hasAttribute(d)||c.push(d);c.length>0&&this.fire("change:attribute",{attributeKeys:c,directChange:!1})}_setAttribute(i,r,a=!0){const c=a?"normal":"low";return("low"!=c||"normal"!=this._attributePriority.get(i))&&super.getAttribute(i)!==r&&(this._attrs.set(i,r),this._attributePriority.set(i,c),!0)}_removeAttribute(i,r=!0){const a=r?"normal":"low";return!("low"==a&&"normal"==this._attributePriority.get(i)||(this._attributePriority.set(i,a),!super.hasAttribute(i)||(this._attrs.delete(i),0)))}_setAttributesTo(i){const r=new Set;for(const[a,c]of this.getAttributes())i.get(a)!==c&&this._removeAttribute(a,!1);for(const[a,c]of i)this._setAttribute(a,c,!1)&&r.add(a);return r}*_getStoredAttributes(){const i=this.getFirstPosition().parent;if(this.isCollapsed&&i.isEmpty)for(const r of i.getAttributeKeys())r.startsWith("selection:")&&(yield[r.substr(10),i.getAttribute(r)])}_getSurroundingAttributes(){const i=this.getFirstPosition(),r=this._model.schema;let a=null;if(this.isCollapsed){const c=i.textNode?i.textNode:i.nodeBefore,d=i.textNode?i.textNode:i.nodeAfter;if(this.isGravityOverridden||(a=Hu(c)),a||(a=Hu(d)),!this.isGravityOverridden&&!a){let f=c;for(;f&&!a;)f=f.previousSibling,a=Hu(f)}if(!a){let f=d;for(;f&&!a;)f=f.nextSibling,a=Hu(f)}a||(a=this._getStoredAttributes())}else{const c=this.getFirstRange();for(const d of c){if(d.item.is("element")&&r.isObject(d.item))break;if("text"==d.type){a=d.item.getAttributes();break}}}return a}_fixGraveyardSelection(i,r){const a=r.clone(),c=this._model.schema.getNearestSelectionRange(a),d=this._ranges.indexOf(i);if(this._ranges.splice(d,1),i.detach(),c){const f=this._prepareRange(c);this._ranges.splice(d,0,f)}}}function Hu(u){return u instanceof Ko||u instanceof Ut?u.getAttributes():null}class De{constructor(i){this._dispatchers=i}add(i){for(const r of this._dispatchers)i(r);return this}}var Ks=function(u){return Pl(u,5)};class UE extends De{elementToElement(i){return this.add(function(r){return(r=Ks(r)).view=xf(r.view,"container"),a=>{var c;a.on("insert:"+r.model,(c=r.view,(d,f,g)=>{const _=c(f.item,g.writer);if(!_||!g.consumable.consume(f.item,"insert"))return;const b=g.mapper.toViewPosition(f.range.start);g.mapper.bindElements(f.item,_),g.writer.insert(b,_)}),{priority:r.converterPriority||"normal"})}}(i))}attributeToElement(i){return this.add(function(r){let a="attribute:"+((r=Ks(r)).model.key?r.model.key:r.model);if(r.model.name&&(a+=":"+r.model.name),r.model.values)for(const d of r.model.values)r.view[d]=xf(r.view[d],"attribute");else r.view=xf(r.view,"attribute");const c=i1(r);return d=>{var f;d.on(a,(f=c,(g,_,b)=>{const y=f(_.attributeOldValue,b.writer),k=f(_.attributeNewValue,b.writer);if(!y&&!k||!b.consumable.consume(_.item,g.name))return;const S=b.writer;if(_.item instanceof cr||_.item instanceof Ei)S.wrap(S.document.selection.getFirstRange(),k);else{let $=b.mapper.toViewRange(_.range);null!==_.attributeOldValue&&y&&($=S.unwrap($,y)),null!==_.attributeNewValue&&k&&S.wrap($,k)}}),{priority:r.converterPriority||"normal"})}}(i))}attributeToAttribute(i){return this.add(function(r){let a="attribute:"+((r=Ks(r)).model.key?r.model.key:r.model);if(r.model.name&&(a+=":"+r.model.name),r.model.values)for(const d of r.model.values)r.view[d]=o1(r.view[d]);else r.view=o1(r.view);const c=i1(r);return d=>{var f;d.on(a,(f=c,(g,_,b)=>{const y=f(_.attributeOldValue,_),k=f(_.attributeNewValue,_);if(!y&&!k||!b.consumable.consume(_.item,g.name))return;const S=b.mapper.toViewElement(_.item),F=b.writer;if(!S)throw new W.b("conversion-attribute-to-attribute-on-text: Trying to convert text node's attribute with attribute-to-attribute converter.",[_,b]);if(null!==_.attributeOldValue&&y)if("class"==y.key){const $=Array.isArray(y.value)?y.value:[y.value];for(const G of $)F.removeClass(G,S)}else if("style"==y.key){const $=Object.keys(y.value);for(const G of $)F.removeStyle(G,S)}else F.removeAttribute(y.key,S);if(null!==_.attributeNewValue&&k)if("class"==k.key){const $=Array.isArray(k.value)?k.value:[k.value];for(const G of $)F.addClass(G,S)}else if("style"==k.key){const $=Object.keys(k.value);for(const G of $)F.setStyle(G,k.value[G],S)}else F.setAttribute(k.key,k.value,S)}),{priority:r.converterPriority||"normal"})}}(i))}markerToElement(i){return this.add(function(r){return(r=Ks(r)).view=xf(r.view,"ui"),a=>{var c;a.on("addMarker:"+r.model,(c=r.view,(d,f,g)=>{f.isOpening=!0;const _=c(f,g.writer);f.isOpening=!1;const b=c(f,g.writer);if(!_||!b)return;const y=f.markerRange;if(y.isCollapsed&&!g.consumable.consume(y,d.name))return;for(const F of y)if(!g.consumable.consume(F.item,d.name))return;const k=g.mapper,S=g.writer;S.insert(k.toViewPosition(y.start),_),g.mapper.bindElementToMarker(_,f.markerName),y.isCollapsed||(S.insert(k.toViewPosition(y.end),b),g.mapper.bindElementToMarker(b,f.markerName)),d.stop()}),{priority:r.converterPriority||"normal"}),a.on("removeMarker:"+r.model,(d,f,g)=>{const _=g.mapper.markerNameToElements(f.markerName);if(_){for(const b of _)g.mapper.unbindElementFromMarkerName(b,f.markerName),g.writer.clear(g.writer.createRangeOn(b),b);g.writer.clearClonedElementsGroup(f.markerName),d.stop()}},{priority:r.converterPriority||"normal"})}}(i))}markerToHighlight(i){return this.add(function(r){return a=>{var c,d;a.on("addMarker:"+r.model,(c=r.view,(d,f,g)=>{if(!f.item||!(f.item instanceof cr||f.item instanceof Ei||f.item.is("textProxy")))return;const _=Zm(c,f,g);if(!_||!g.consumable.consume(f.item,d.name))return;const b=n1(_),y=g.writer,k=y.document.selection;if(f.item instanceof cr||f.item instanceof Ei)y.wrap(k.getFirstRange(),b,k);else{const S=g.mapper.toViewRange(f.range),F=y.wrap(S,b);for(const $ of F.getItems())if($.is("attributeElement")&&$.isSimilar(b)){g.mapper.bindElementToMarker($,f.markerName);break}}}),{priority:r.converterPriority||"normal"}),a.on("addMarker:"+r.model,(d=r.view,(f,g,_)=>{if(!(g.item&&g.item instanceof Qt))return;const b=Zm(d,g,_);if(!b||!_.consumable.test(g.item,f.name))return;const y=_.mapper.toViewElement(g.item);if(y&&y.getCustomProperty("addHighlight")){_.consumable.consume(g.item,f.name);for(const k of ee._createIn(g.item))_.consumable.consume(k.item,f.name);y.getCustomProperty("addHighlight")(y,b,_.writer),_.mapper.bindElementToMarker(y,g.markerName)}}),{priority:r.converterPriority||"normal"}),a.on("removeMarker:"+r.model,function(d){return(f,g,_)=>{if(g.markerRange.isCollapsed)return;const b=Zm(d,g,_);if(!b)return;const y=n1(b),k=_.mapper.markerNameToElements(g.markerName);if(k){for(const S of k)_.mapper.unbindElementFromMarkerName(S,g.markerName),S.is("attributeElement")?_.writer.unwrap(_.writer.createRangeOn(S),y):S.getCustomProperty("removeHighlight")(S,b.id,_.writer);_.writer.clearClonedElementsGroup(g.markerName),f.stop()}}}(r.view),{priority:r.converterPriority||"normal"})}}(i))}}function n1(u){const i=new Pr("span",u.attributes);return u.classes&&i._addClass(u.classes),u.priority&&(i._priority=u.priority),i._id=u.id,i}function xf(u,i){return"function"==typeof u?u:(r,a)=>function(c,d,f){let g;"string"==typeof c&&(c={name:c});const _=Object.assign({},c.attributes);if(g="container"==f?d.createContainerElement(c.name,_):"attribute"==f?d.createAttributeElement(c.name,_,{priority:c.priority||Pr.DEFAULT_PRIORITY}):d.createUIElement(c.name,_),c.styles){const b=Object.keys(c.styles);for(const y of b)d.setStyle(y,c.styles[y],g)}if(c.classes){const b=c.classes;if("string"==typeof b)d.addClass(b,g);else for(const y of b)d.addClass(y,g)}return g}(u,a,i)}function i1(u){return u.model.values?(i,r)=>{const a=u.view[i];return a?a(i,r):null}:u.view}function o1(u){return"string"==typeof u?i=>({key:u,value:i}):"object"==typeof u?u.value?()=>u:i=>({key:u.key,value:i}):u}function Zm(u,i,r){const a="function"==typeof u?u(i,r):u;return a?(a.priority||(a.priority=10),a.id||(a.id=i.markerName),a):null}class nc extends De{elementToElement(i){return this.add(r1(i))}elementToAttribute(i){return this.add(function(r){Un(r=Ks(r));const a=zu(r,!1),c=e_(r.view),d=c?"element:"+c:"element";return f=>{f.on(d,a,{priority:r.converterPriority||"low"})}}(i))}attributeToAttribute(i){return this.add(function(r){let a=null;("string"==typeof(r=Ks(r)).view||r.view.key)&&(a=function(d){"string"==typeof d.view&&(d.view={key:d.view});const f=d.view.key;let g;return g="class"==f||"style"==f?{["class"==f?"classes":"styles"]:d.view.value}:{attributes:{[f]:void 0===d.view.value?/[\s\S]*/:d.view.value}},d.view.name&&(g.name=d.view.name),d.view=g,f}(r)),Un(r,a);const c=zu(r,!0);return d=>{d.on("element",c,{priority:r.converterPriority||"low"})}}(i))}elementToMarker(i){return this.add(function(r){return function(a){const c=a.model;a.model=(d,f)=>{const g="string"==typeof c?c:c(d);return f.createElement("$marker",{"data-name":g})}}(r=Ks(r)),r1(r)}(i))}}function r1(u){const i=function(c){const d=c.view?new wn(c.view):null;return(f,g,_)=>{let b={};if(d){const Y=d.match(g.viewItem);if(!Y)return;b=Y.match}b.name=!0;const y=(F=_.writer,(k=c.model)instanceof Function?k(g.viewItem,F):F.createElement(k));var k,F;if(!y||!_.consumable.test(g.viewItem,b))return;const $=_.splitToAllowedParent(y,g.modelCursor);if(!$)return;_.writer.insert(y,$.position),_.convertChildren(g.viewItem,_.writer.createPositionAt(y,0)),_.consumable.consume(g.viewItem,b);const G=_.getSplitParts(y);g.modelRange=new ee(_.writer.createPositionBefore(y),_.writer.createPositionAfter(G[G.length-1])),g.modelCursor=$.cursorParent?_.writer.createPositionAt($.cursorParent,0):g.modelRange.end}}(u=Ks(u)),r=e_(u.view),a=r?"element:"+r:"element";return c=>{c.on(a,i,{priority:u.converterPriority||"normal"})}}function e_(u){return"string"==typeof u?u:"object"==typeof u&&"string"==typeof u.name?u.name:null}function Un(u,i=null){u.model={key:"object"!=typeof u.model?u.model:u.model.key,value:"object"!=typeof u.model||void 0===u.model.value?null===i||(d=>d.getAttribute(i)):u.model.value}}function zu(u,i){const r=new wn(u.view);return(a,c,d)=>{const f=r.match(c.viewItem);if(!f)return;const g=u.model.key,_="function"==typeof u.model.value?u.model.value(c.viewItem):u.model.value;null!==_&&(function(b,y){const k="function"==typeof b?b(y):b;return!("object"==typeof k&&!e_(k)||k.classes||k.attributes||k.styles)}(u.view,c.viewItem)?f.match.name=!0:delete f.match.name,d.consumable.test(c.viewItem,f.match)&&(c.modelRange||(c=Object.assign(c,d.convertChildren(c.viewItem,c.modelCursor))),function(b,y,k,S){let F=!1;for(const $ of Array.from(b.getItems({shallow:k})))S.schema.checkAttribute($,y.key)&&(S.writer.setAttribute(y.key,y.value,$),F=!0);return F}(c.modelRange,{key:g,value:_},i,d)&&d.consumable.consume(c.viewItem,f.match)))}}class ja{constructor(i){this.model=i,this.view=new Qm,this.mapper=new Vu,this.downcastDispatcher=new pn({mapper:this.mapper});const r=this.model.document,a=r.selection,c=this.model.markers;var d,f;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(r,"change",()=>{this.view.change(d=>{this.downcastDispatcher.convertChanges(r.differ,c,d),this.downcastDispatcher.convertSelection(a,c,d)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",(d=this.model,f=this.mapper,(g,_)=>{const b=_.newSelection,y=new cr,k=[];for(const S of b.getRanges())k.push(f.toModelRange(S));y.setTo(k,{backward:b.isBackward}),y.isEqual(d.document.selection)||d.change(S=>{S.setSelection(y)})})),this.downcastDispatcher.on("insert:$text",(d,f,g)=>{if(!g.consumable.consume(f.item,"insert"))return;const _=g.writer,b=g.mapper.toViewPosition(f.range.start),y=_.createText(f.item.data);_.insert(b,y)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(d,f,g)=>{const _=g.mapper.toViewPosition(f.position),b=f.position.getShiftedBy(f.length),y=g.mapper.toViewPosition(b,{isPhantom:!0}),k=g.writer.createRange(_,y),S=g.writer.remove(k.getTrimmed());for(const F of g.writer.createRangeIn(S).getItems())g.mapper.unbindViewElement(F)},{priority:"low"}),this.downcastDispatcher.on("selection",(d,f,g)=>{const _=g.writer,b=_.document.selection;for(const y of b.getRanges())y.isCollapsed&&y.end.parent.document&&g.writer.mergeAttributes(y.start);_.setSelection(null)},{priority:"low"}),this.downcastDispatcher.on("selection",(d,f,g)=>{const _=f.selection;if(_.isCollapsed||!g.consumable.consume(_,"selection"))return;const b=[];for(const y of _.getRanges()){const k=g.mapper.toViewRange(y);b.push(k)}g.writer.setSelection(b,{backward:_.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(d,f,g)=>{const _=f.selection;if(!_.isCollapsed||!g.consumable.consume(_,"selection"))return;const b=g.writer,y=_.getFirstPosition(),k=g.mapper.toViewPosition(y),S=b.breakAttributes(k);b.setSelection(S)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(d=>{if("$graveyard"==d.rootName)return null;const f=new Pm(d.name);return f.rootName=d.rootName,f._document=this.view.document,this.mapper.bindElements(d,f),f})}destroy(){this.view.destroy(),this.stopListening()}}Fe(ja,On);class GE{constructor(){this._commands=new Map}add(i,r){this._commands.set(i,r)}get(i){return this._commands.get(i)}execute(i,...r){const a=this.get(i);if(!a)throw new W.b("commandcollection-command-not-found: Command does not exist.",this,{commandName:i});a.execute(...r)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const i of this.commands())i.destroy()}}class ic{constructor(){this._consumables=new Map}add(i,r){let a;i.is("text")||i.is("documentFragment")?this._consumables.set(i,!0):(this._consumables.has(i)?a=this._consumables.get(i):(a=new co,this._consumables.set(i,a)),a.add(r))}test(i,r){const a=this._consumables.get(i);return void 0===a?null:i.is("text")||i.is("documentFragment")?a:a.test(r)}consume(i,r){return!!this.test(i,r)&&(i.is("text")||i.is("documentFragment")?this._consumables.set(i,!1):this._consumables.get(i).consume(r),!0)}revert(i,r){const a=this._consumables.get(i);void 0!==a&&(i.is("text")||i.is("documentFragment")?this._consumables.set(i,!0):a.revert(r))}static consumablesFromElement(i){const r={name:!0,attributes:[],classes:[],styles:[]},a=i.getAttributeKeys();for(const f of a)"style"!=f&&"class"!=f&&r.attributes.push(f);const c=i.getClassNames();for(const f of c)r.classes.push(f);const d=i.getStyleNames();for(const f of d)r.styles.push(f);return r}static createFrom(i,r){if(r||(r=new ic),i.is("text"))return r.add(i),r;i.is("element")&&r.add(i,ic.consumablesFromElement(i)),i.is("documentFragment")&&r.add(i);for(const a of i.getChildren())r=ic.createFrom(a,r);return r}}class co{constructor(){this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(i){i.name&&(this._canConsumeName=!0);for(const r in this._consumables)r in i&&this._add(r,i[r])}test(i){if(i.name&&!this._canConsumeName)return this._canConsumeName;for(const r in this._consumables)if(r in i){const a=this._test(r,i[r]);if(!0!==a)return a}return!0}consume(i){i.name&&(this._canConsumeName=!1);for(const r in this._consumables)r in i&&this._consume(r,i[r])}revert(i){i.name&&(this._canConsumeName=!0);for(const r in this._consumables)r in i&&this._revert(r,i[r])}_add(i,r){const a=vi(r)?r:[r],c=this._consumables[i];for(const d of a){if("attributes"===i&&("class"===d||"style"===d))throw new W.b("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this);if(c.set(d,!0),"styles"===i)for(const f of zl.getRelatedStyles(d))c.set(f,!0)}}_test(i,r){const a=vi(r)?r:[r],c=this._consumables[i];for(const d of a)if("attributes"!==i||"class"!==d&&"style"!==d){const f=c.get(d);if(void 0===f)return null;if(!f)return!1}else{const f="class"==d?"classes":"styles",g=this._test(f,[...this._consumables[f].keys()]);if(!0!==g)return g}return!0}_consume(i,r){const a=vi(r)?r:[r],c=this._consumables[i];for(const d of a)if("attributes"!==i||"class"!==d&&"style"!==d){if(c.set(d,!1),"styles"==i)for(const f of zl.getRelatedStyles(d))c.set(f,!1)}else{const f="class"==d?"classes":"styles";this._consume(f,[...this._consumables[f].keys()])}}_revert(i,r){const a=vi(r)?r:[r],c=this._consumables[i];for(const d of a)if("attributes"!==i||"class"!==d&&"style"!==d)!1===c.get(d)&&c.set(d,!0);else{const f="class"==d?"classes":"styles";this._revert(f,[...this._consumables[f].keys()])}}}class ur{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(i,r)=>{r[0]=new fs(r[0])},{priority:"highest"}),this.on("checkChild",(i,r)=>{r[0]=new fs(r[0]),r[1]=this.getDefinition(r[1])},{priority:"highest"})}register(i,r){if(this._sourceDefinitions[i])throw new W.b("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:i});this._sourceDefinitions[i]=[Object.assign({},r)],this._clearCache()}extend(i,r){if(!this._sourceDefinitions[i])throw new W.b("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:i});this._sourceDefinitions[i].push(Object.assign({},r)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(i){let r;return r="string"==typeof i?i:i.is&&(i.is("text")||i.is("textProxy"))?"$text":i.name,this.getDefinitions()[r]}isRegistered(i){return!!this.getDefinition(i)}isBlock(i){const r=this.getDefinition(i);return!(!r||!r.isBlock)}isLimit(i){const r=this.getDefinition(i);return!(!r||!r.isLimit&&!r.isObject)}isObject(i){const r=this.getDefinition(i);return!(!r||!r.isObject)}isInline(i){const r=this.getDefinition(i);return!(!r||!r.isInline)}checkChild(i,r){return!!r&&this._checkContextMatch(r,i)}checkAttribute(i,r){const a=this.getDefinition(i.last);return!!a&&a.allowAttributes.includes(r)}checkMerge(i,r=null){if(i instanceof se){const a=i.nodeBefore,c=i.nodeAfter;if(!(a instanceof Qt))throw new W.b("schema-check-merge-no-element-before: The node before the merge position must be an element.",this);if(!(c instanceof Qt))throw new W.b("schema-check-merge-no-element-after: The node after the merge position must be an element.",this);return this.checkMerge(a,c)}for(const a of r.getChildren())if(!this.checkChild(i,a))return!1;return!0}addChildCheck(i){this.on("checkChild",(r,[a,c])=>{if(!c)return;const d=i(a,c);"boolean"==typeof d&&(r.stop(),r.return=d)},{priority:"high"})}addAttributeCheck(i){this.on("checkAttribute",(r,[a,c])=>{const d=i(a,c);"boolean"==typeof d&&(r.stop(),r.return=d)},{priority:"high"})}setAttributeProperties(i,r){this._attributeProperties[i]=Object.assign(this.getAttributeProperties(i),r)}getAttributeProperties(i){return this._attributeProperties[i]||{}}getLimitElement(i){let r;for(r=i instanceof se?i.parent:(i instanceof ee?[i]:Array.from(i.getRanges())).reduce((a,c)=>{const d=c.getCommonAncestor();return a?a.getCommonAncestor(d,{includeSelf:!0}):d},null);!this.isLimit(r)&&r.parent;)r=r.parent;return r}checkAttributeInSelection(i,r){if(i.isCollapsed){const a=[...i.getFirstPosition().getAncestors(),new Ut("",i.getAttributes())];return this.checkAttribute(a,r)}{const a=i.getRanges();for(const c of a)for(const d of c)if(this.checkAttribute(d.item,r))return!0}return!1}*getValidRanges(i,r){i=function*(a){for(const c of a)yield*c.getMinimalFlatRanges()}(i);for(const a of i)yield*this._getValidRangesForRange(a,r)}getNearestSelectionRange(i,r="both"){if(this.checkChild(i,"$text"))return new ee(i);let a,c;"both"!=r&&"backward"!=r||(a=new Do({startPosition:i,direction:"backward"})),"both"!=r&&"forward"!=r||(c=new Do({startPosition:i}));for(const d of function*(f,g){let _=!1;for(;!_;){if(_=!0,f){const b=f.next();b.done||(_=!1,yield{walker:f,value:b.value})}if(g){const b=g.next();b.done||(_=!1,yield{walker:g,value:b.value})}}}(a,c)){const g=d.value;if(g.type==(d.walker==a?"elementEnd":"elementStart")&&this.isObject(g.item))return ee._createOn(g.item);if(this.checkChild(g.nextPosition,"$text"))return new ee(g.nextPosition)}return null}findAllowedParent(i,r){let a=i.parent;for(;a;){if(this.checkChild(a,r))return a;if(this.isLimit(a))return null;a=a.parent}return null}removeDisallowedAttributes(i,r){for(const a of i)if(a.is("text"))Ys(this,a,r);else{const c=ee._createIn(a).getPositions();for(const d of c)Ys(this,d.nodeBefore||d.parent,r)}}createContext(i){return new fs(i)}_clearCache(){this._compiledDefinitions=null}_compile(){const i={},r=this._sourceDefinitions,a=Object.keys(r);for(const c of a)i[c]=$u(r[c],c);for(const c of a)oc(i,c);for(const c of a)t_(i,c);for(const c of a)s1(i,c),a1(i,c);for(const c of a)qE(i,c),WE(i,c);this._compiledDefinitions=i}_checkContextMatch(i,r,a=r.length-1){const c=r.getItem(a);if(i.allowIn.includes(c.name)){if(0==a)return!0;{const d=this.getDefinition(c);return this._checkContextMatch(d,r,a-1)}}return!1}*_getValidRangesForRange(i,r){let a=i.start,c=i.start;for(const d of i.getItems({shallow:!0}))d.is("element")&&(yield*this._getValidRangesForRange(ee._createIn(d),r)),this.checkAttribute(d,r)||(a.isEqual(c)||(yield new ee(a,c)),a=se._createAfter(d)),c=se._createAfter(d);a.isEqual(c)||(yield new ee(a,c))}}Fe(ur,On);class fs{constructor(i){if(i instanceof fs)return i;"string"==typeof i?i=[i]:Array.isArray(i)||(i=i.getAncestors({includeSelf:!0})),i[0]&&"string"!=typeof i[0]&&i[0].is("documentFragment")&&i.shift(),this._items=i.map(Ef)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(i){const r=new fs([i]);return r._items=[...this._items,...r._items],r}getItem(i){return this._items[i]}*getNames(){yield*this._items.map(i=>i.name)}endsWith(i){return Array.from(this.getNames()).join(" ").endsWith(i)}startsWith(i){return Array.from(this.getNames()).join(" ").startsWith(i)}}function $u(u,i){const r={name:i,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(a,c){for(const d of a){const f=Object.keys(d).filter(g=>g.startsWith("is"));for(const g of f)c[g]=d[g]}}(u,r),Js(u,r,"allowIn"),Js(u,r,"allowContentOf"),Js(u,r,"allowWhere"),Js(u,r,"allowAttributes"),Js(u,r,"allowAttributesOf"),Js(u,r,"inheritTypesFrom"),function(a,c){for(const d of a){const f=d.inheritAllFrom;f&&(c.allowContentOf.push(f),c.allowWhere.push(f),c.allowAttributesOf.push(f),c.inheritTypesFrom.push(f))}}(u,r),r}function oc(u,i){for(const r of u[i].allowContentOf)u[r]&&uo(u,r).forEach(a=>{a.allowIn.push(i)});delete u[i].allowContentOf}function t_(u,i){for(const r of u[i].allowWhere){const a=u[r];a&&u[i].allowIn.push(...a.allowIn)}delete u[i].allowWhere}function s1(u,i){for(const r of u[i].allowAttributesOf){const a=u[r];a&&u[i].allowAttributes.push(...a.allowAttributes)}delete u[i].allowAttributesOf}function a1(u,i){const r=u[i];for(const a of r.inheritTypesFrom){const c=u[a];if(c){const d=Object.keys(c).filter(f=>f.startsWith("is"));for(const f of d)f in r||(r[f]=c[f])}}delete r.inheritTypesFrom}function qE(u,i){const r=u[i],a=r.allowIn.filter(c=>u[c]);r.allowIn=Array.from(new Set(a))}function WE(u,i){const r=u[i];r.allowAttributes=Array.from(new Set(r.allowAttributes))}function Js(u,i,r){for(const a of u)"string"==typeof a[r]?i[r].push(a[r]):Array.isArray(a[r])&&i[r].push(...a[r])}function uo(u,i){const r=u[i];return(a=u,Object.keys(a).map(c=>a[c])).filter(c=>c.allowIn.includes(r.name));var a}function Ef(u){return"string"==typeof u?{name:u,*getAttributeKeys(){},getAttribute(){}}:{name:u.is("element")?u.name:"$text",*getAttributeKeys(){yield*u.getAttributeKeys()},getAttribute:i=>u.getAttribute(i)}}function Ys(u,i,r){for(const a of i.getAttributeKeys())u.checkAttribute(i,a)||r.removeAttribute(a,i)}class l1{constructor(i={}){this._splitParts=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},i),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(i,r,a=["$root"]){this.fire("viewCleanup",i),this._modelCursor=function(f,g){let _;for(const b of new fs(f)){const y={};for(const S of b.getAttributeKeys())y[S]=b.getAttribute(S);const k=g.createElement(b.name,y);_&&g.append(k,_),_=se._createAt(k,0)}return _}(a,r),this.conversionApi.writer=r,this.conversionApi.consumable=ic.createFrom(i),this.conversionApi.store={};const{modelRange:c}=this._convertItem(i,this._modelCursor),d=r.createDocumentFragment();if(c){this._removeEmptyElements();for(const f of Array.from(this._modelCursor.parent.getChildren()))r.append(f,d);d.markers=function(f,g){const _=new Set,b=new Map,y=ee._createIn(f).getItems();for(const k of y)"$marker"==k.name&&_.add(k);for(const k of _){const S=k.getAttribute("data-name"),F=g.createPositionBefore(k);b.has(S)?b.get(S).end=F.clone():b.set(S,new ee(F.clone())),g.remove(k)}return b}(d,r)}return this._modelCursor=null,this._splitParts.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,d}_convertItem(i,r){const a=Object.assign({viewItem:i,modelCursor:r,modelRange:null});if(i.is("element")?this.fire("element:"+i.name,a,this.conversionApi):i.is("text")?this.fire("text",a,this.conversionApi):this.fire("documentFragment",a,this.conversionApi),a.modelRange&&!(a.modelRange instanceof ee))throw new W.b("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this);return{modelRange:a.modelRange,modelCursor:a.modelCursor}}_convertChildren(i,r){const a=new ee(r);let c=r;for(const d of Array.from(i.getChildren())){const f=this._convertItem(d,c);f.modelRange instanceof ee&&(a.end=f.modelRange.end,c=f.modelCursor)}return{modelRange:a,modelCursor:c}}_splitToAllowedParent(i,r){const a=this.conversionApi.schema.findAllowedParent(r,i);if(!a)return null;if(a===r.parent)return{position:r};if(this._modelCursor.parent.getAncestors().includes(a))return null;const c=this.conversionApi.writer.split(r,a),d=[];for(const f of c.range.getWalker())if("elementEnd"==f.type)d.push(f.item);else{const g=d.pop();this._registerSplitPair(g,f.item)}return{position:c.position,cursorParent:c.range.end.parent}}_registerSplitPair(i,r){this._splitParts.has(i)||this._splitParts.set(i,[i]);const a=this._splitParts.get(i);this._splitParts.set(r,a),a.push(r)}_getSplitParts(i){let r;return r=this._splitParts.has(i)?this._splitParts.get(i):[i],r}_removeEmptyElements(){let i=!1;for(const r of this._splitParts.keys())r.isEmpty&&(this.conversionApi.writer.remove(r),this._splitParts.delete(r),i=!0);i&&this._removeEmptyElements()}}Fe(l1,Re);class Tf{constructor(i,r){this.model=i,this.processor=r,this.mapper=new Vu,this.downcastDispatcher=new pn({mapper:this.mapper}),this.downcastDispatcher.on("insert:$text",(a,c,d)=>{if(!d.consumable.consume(c.item,"insert"))return;const f=d.writer,g=d.mapper.toViewPosition(c.range.start),_=f.createText(c.item.data);f.insert(g,_)},{priority:"lowest"}),this.upcastDispatcher=new l1({schema:i.schema}),this.upcastDispatcher.on("text",(a,c,d)=>{if(d.schema.checkChild(c.modelCursor,"$text")&&d.consumable.consume(c.viewItem)){const f=d.writer.createText(c.viewItem.data);d.writer.insert(f,c.modelCursor),c.modelRange=ee._createFromPositionAndShift(c.modelCursor,f.offsetSize),c.modelCursor=c.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",(a,c,d)=>{if(!c.modelRange&&d.consumable.consume(c.viewItem,{name:!0})){const{modelRange:f,modelCursor:g}=d.convertChildren(c.viewItem,c.modelCursor);c.modelRange=f,c.modelCursor=g}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(a,c,d)=>{if(!c.modelRange&&d.consumable.consume(c.viewItem,{name:!0})){const{modelRange:f,modelCursor:g}=d.convertChildren(c.viewItem,c.modelCursor);c.modelRange=f,c.modelCursor=g}},{priority:"lowest"}),this.decorate("init"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"})}get(i){const{rootName:r="main",trim:a="empty"}=i||{};if(!this._checkIfRootsExists([r]))throw new W.b("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this);const c=this.model.document.getRoot(r);return"empty"!==a||this.model.hasContent(c,{ignoreWhitespaces:!0})?this.stringify(c):""}stringify(i){const r=this.toView(i);return this.processor.toData(r)}toView(i){this.mapper.clearBindings();const r=ee._createIn(i),a=new lo,c=new df(new Gi);if(this.mapper.bindElements(i,a),this.downcastDispatcher.convertInsert(r,c),!i.is("documentFragment")){const d=function(f){const g=[],_=f.root.document;if(!_)return[];const b=ee._createIn(f);for(const y of _.model.markers){const k=b.getIntersection(y.getRange());k&&g.push([y.name,k])}return g}(i);for(const[f,g]of d)this.downcastDispatcher.convertMarkerAdd(f,g,c)}return a}init(i){if(this.model.document.version)throw new W.b("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this);let r={};if("string"==typeof i?r.main=i:r=i,!this._checkIfRootsExists(Object.keys(r)))throw new W.b("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this);return this.model.enqueueChange("transparent",a=>{for(const c of Object.keys(r)){const d=this.model.document.getRoot(c);a.insert(this.parse(r[c],d),d,0)}}),Promise.resolve()}set(i){let r={};if("string"==typeof i?r.main=i:r=i,!this._checkIfRootsExists(Object.keys(r)))throw new W.b("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this);this.model.enqueueChange("transparent",a=>{a.setSelection(null),a.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const c of Object.keys(r)){const d=this.model.document.getRoot(c);a.remove(a.createRangeIn(d)),a.insert(this.parse(r[c],d),d,0)}})}parse(i,r="$root"){const a=this.processor.toView(i);return this.toModel(a,r)}toModel(i,r="$root"){return this.model.change(a=>this.upcastDispatcher.convert(i,a,r))}destroy(){this.stopListening()}_checkIfRootsExists(i){for(const r of i)if(!this.model.document.getRootNames().includes(r))return!1;return!0}}Fe(Tf,On);class c1{constructor(i,r){this._helpers=new Map,this._downcast=Array.isArray(i)?i:[i],this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Array.isArray(r)?r:[r],this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(i,r){const a=this._downcast.includes(r);if(!this._upcast.includes(r)&&!a)throw new W.b("conversion-add-alias-dispatcher-not-registered: Trying to register and alias for a dispatcher that nas not been registered.",this);this._createConversionHelpers({name:i,dispatchers:[r],isDowncast:a})}for(i){if(!this._helpers.has(i))throw new W.b("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this);return this._helpers.get(i)}elementToElement(i){this.for("downcast").elementToElement(i);for(const{model:r,view:a}of Df(i))this.for("upcast").elementToElement({model:r,view:a,converterPriority:i.converterPriority})}attributeToElement(i){this.for("downcast").attributeToElement(i);for(const{model:r,view:a}of Df(i))this.for("upcast").elementToAttribute({view:a,model:r,converterPriority:i.converterPriority})}attributeToAttribute(i){this.for("downcast").attributeToAttribute(i);for(const{model:r,view:a}of Df(i))this.for("upcast").attributeToAttribute({view:a,model:r})}_createConversionHelpers({name:i,dispatchers:r,isDowncast:a}){if(this._helpers.has(i))throw new W.b("conversion-group-exists: Trying to register a group name that has already been registered.",this);const c=a?new UE(r):new nc(r);this._helpers.set(i,c)}}function*Df(u){if(u.model.values)for(const i of u.model.values){const r={key:u.model.key,value:i},a=u.view[i],c=u.upcastAlso?u.upcastAlso[i]:void 0;yield*n_(r,a,c)}else yield*n_(u.model,u.view,u.upcastAlso)}function*n_(u,i,r){if(yield{model:u,view:i},r){r=Array.isArray(r)?r:[r];for(const a of r)yield{model:u,view:a}}}class Uu{constructor(i="default"){this.operations=[],this.type=i}get baseVersion(){for(const i of this.operations)if(null!==i.baseVersion)return i.baseVersion;return null}addOperation(i){return i.batch=this,this.operations.push(i),i}}class Mo{constructor(i){this.baseVersion=i,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const i=Object.assign({},this);return i.__className=this.constructor.className,delete i.batch,delete i.isDocumentOperation,i}static get className(){return"Operation"}static fromJSON(i){return new this(i.baseVersion)}}class Lr{constructor(i){this.markers=new Map,this._children=new Gs,i&&this._insertChild(0,i)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(i){return"documentFragment"==i||"model:documentFragment"==i}getChild(i){return this._children.getNode(i)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(i){return this._children.getNodeIndex(i)}getChildStartOffset(i){return this._children.getNodeStartOffset(i)}getPath(){return[]}getNodeByPath(i){let r=this;for(const a of i)r=r.getChild(r.offsetToIndex(a));return r}offsetToIndex(i){return this._children.offsetToIndex(i)}toJSON(){const i=[];for(const r of this._children)i.push(r.toJSON());return i}static fromJSON(i){const r=[];for(const a of i)r.push(a.name?Qt.fromJSON(a):Ut.fromJSON(a));return new Lr(r)}_appendChild(i){this._insertChild(this.childCount,i)}_insertChild(i,r){const a="string"==typeof(c=r)?[new Ut(c)]:(Jt(c)||(c=[c]),Array.from(c).map(d=>"string"==typeof d?new Ut(d):d instanceof Ko?new Ut(d.data,d.getAttributes()):d));var c;for(const c of a)null!==c.parent&&c._remove(),c.parent=this;this._children._insertNodes(i,a)}_removeChildren(i,r=1){const a=this._children._removeNodes(i,r);for(const c of a)c.parent=null;return a}}function rc(u,i){const r=(i=Ha(i)).reduce((d,f)=>d+f.offsetSize,0),a=u.parent;ps(u);const c=u.index;return a._insertChild(c,i),Qs(a,c+i.length),Qs(a,c),new ee(u,u.getShiftedBy(r))}function sc(u){if(!u.isFlat)throw new W.b("operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.",this);const i=u.start.parent;ps(u.start),ps(u.end);const r=i._removeChildren(u.start.index,u.end.index-u.start.index);return Qs(i,u.start.index),r}function Gu(u,i){if(!u.isFlat)throw new W.b("operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.",this);const r=sc(u);return rc(i=i._getTransformedByDeletion(u.start,u.end.offset-u.start.offset),r)}function Ha(u){const i=[];u instanceof Array||(u=[u]);for(let r=0;r<u.length;r++)if("string"==typeof u[r])i.push(new Ut(u[r]));else if(u[r]instanceof Ko)i.push(new Ut(u[r].data,u[r].getAttributes()));else if(u[r]instanceof Lr||u[r]instanceof Gs)for(const a of u[r])i.push(a);else u[r]instanceof ds&&i.push(u[r]);for(let r=1;r<i.length;r++){const a=i[r],c=i[r-1];a instanceof Ut&&c instanceof Ut&&i_(a,c)&&(i.splice(r-1,2,new Ut(c.data+a.data,c.getAttributes())),r--)}return i}function Qs(u,i){const r=u.getChild(i-1),a=u.getChild(i);if(r&&a&&r.is("text")&&a.is("text")&&i_(r,a)){const c=new Ut(r.data+a.data,r.getAttributes());u._removeChildren(i-1,2),u._insertChild(i-1,c)}}function ps(u){const i=u.textNode,r=u.parent;if(i){const a=u.offset-i.startOffset,c=i.index;r._removeChildren(c,1);const d=new Ut(i.data.substr(0,a),i.getAttributes()),f=new Ut(i.data.substr(a),i.getAttributes());r._insertChild(c,[d,f])}}function i_(u,i){const r=u.getAttributes(),a=i.getAttributes();for(const c of r){if(c[1]!==i.getAttribute(c[0]))return!1;a.next()}return a.next().done}var o_=function(u,i){return Ql(u,i)};class Bn extends Mo{constructor(i,r,a,c,d){super(d),this.range=i.clone(),this.key=r,this.oldValue=void 0===a?null:a,this.newValue=void 0===c?null:c}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new Bn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Bn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const i=super.toJSON();return i.range=this.range.toJSON(),i}_validate(){if(!this.range.isFlat)throw new W.b("attribute-operation-range-not-flat: The range to change is not flat.",this);for(const i of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!o_(i.getAttribute(this.key),this.oldValue))throw new W.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{item:i,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&i.hasAttribute(this.key))throw new W.b("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:i,key:this.key})}}_execute(){o_(this.oldValue,this.newValue)||function(i,r,a){ps(i.start),ps(i.end);for(const c of i.getItems({shallow:!0})){const d=c.is("textProxy")?c.textNode:c;null!==a?d._setAttribute(r,a):d._removeAttribute(r),Qs(d.parent,d.index)}Qs(i.end.parent,i.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(i,r){return new Bn(ee.fromJSON(i.range,r),i.key,i.oldValue,i.newValue,i.baseVersion)}}class r_ extends Mo{constructor(i,r){super(null),this.sourcePosition=i.clone(),this.howMany=r}get type(){return"detach"}toJSON(){const i=super.toJSON();return i.sourcePosition=this.sourcePosition.toJSON(),i}_validate(){if(this.sourcePosition.root.document)throw new W.b("detach-operation-on-document-node: Cannot detach document node.",this)}_execute(){sc(ee._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class St extends Mo{constructor(i,r,a,c){super(c),this.sourcePosition=i.clone(),this.sourcePosition.stickiness="toNext",this.howMany=r,this.targetPosition=a.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const i=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,i,this.baseVersion+1)}_validate(){const i=this.sourcePosition.parent,r=this.targetPosition.parent,a=this.sourcePosition.offset,c=this.targetPosition.offset;if(a+this.howMany>i.maxOffset)throw new W.b("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this);if(i===r&&a<c&&c<a+this.howMany)throw new W.b("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==yi(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const d=this.sourcePosition.path.length-1;if(this.targetPosition.path[d]>=a&&this.targetPosition.path[d]<a+this.howMany)throw new W.b("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this)}}_execute(){Gu(ee._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const i=super.toJSON();return i.sourcePosition=this.sourcePosition.toJSON(),i.targetPosition=this.targetPosition.toJSON(),i}static get className(){return"MoveOperation"}static fromJSON(i,r){const a=se.fromJSON(i.sourcePosition,r),c=se.fromJSON(i.targetPosition,r);return new this(a,i.howMany,c,i.baseVersion)}}class xn extends Mo{constructor(i,r,a){super(a),this.position=i.clone(),this.position.stickiness="toNone",this.nodes=new Gs(Ha(r)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const i=new Gs([...this.nodes].map(a=>a._clone(!0))),r=new xn(this.position,i,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}getReversed(){const r=new se(this.position.root.document.graveyard,[0]);return new St(this.position,this.nodes.maxOffset,r,this.baseVersion+1)}_validate(){const i=this.position.parent;if(!i||i.maxOffset<this.position.offset)throw new W.b("insert-operation-position-invalid: Insertion position is invalid.",this)}_execute(){const i=this.nodes;this.nodes=new Gs([...i].map(r=>r._clone(!0))),rc(this.position,i)}toJSON(){const i=super.toJSON();return i.position=this.position.toJSON(),i.nodes=this.nodes.toJSON(),i}static get className(){return"InsertOperation"}static fromJSON(i,r){const a=[];for(const d of i.nodes)a.push(d.name?Qt.fromJSON(d):Ut.fromJSON(d));const c=new xn(se.fromJSON(i.position,r),a,i.baseVersion);return c.shouldReceiveAttributes=i.shouldReceiveAttributes,c}}class Wi extends Mo{constructor(i,r,a,c,d,f){super(f),this.name=i,this.oldRange=r?r.clone():null,this.newRange=a?a.clone():null,this.affectsData=d,this._markers=c}get type(){return"marker"}clone(){return new Wi(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Wi(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this._markers[this.newRange?"_set":"_remove"](this.name,this.newRange,!0,this.affectsData)}toJSON(){const i=super.toJSON();return this.oldRange&&(i.oldRange=this.oldRange.toJSON()),this.newRange&&(i.newRange=this.newRange.toJSON()),delete i._markers,i}static get className(){return"MarkerOperation"}static fromJSON(i,r){return new Wi(i.name,i.oldRange?ee.fromJSON(i.oldRange,r):null,i.newRange?ee.fromJSON(i.newRange,r):null,r.model.markers,i.affectsData,i.baseVersion)}}class ie extends Mo{constructor(i,r,a,c){super(c),this.position=i,this.position.stickiness="toNext",this.oldName=r,this.newName=a}get type(){return"rename"}clone(){return new ie(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new ie(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const i=this.position.nodeAfter;if(!(i instanceof Qt))throw new W.b("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this);if(i.name!==this.oldName)throw new W.b("rename-operation-wrong-name: Element to change has different name than operation's old name.",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const i=super.toJSON();return i.position=this.position.toJSON(),i}static get className(){return"RenameOperation"}static fromJSON(i,r){return new ie(se.fromJSON(i.position,r),i.oldName,i.newName,i.baseVersion)}}class dr extends Mo{constructor(i,r,a,c,d){super(d),this.root=i,this.key=r,this.oldValue=a,this.newValue=c}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new dr(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new dr(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new W.b("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new W.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new W.b("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const i=super.toJSON();return i.root=this.root.toJSON(),i}static get className(){return"RootAttributeOperation"}static fromJSON(i,r){if(!r.getRoot(i.root))throw new W.b("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:i.root});return new dr(r.getRoot(i.root),i.key,i.oldValue,i.newValue,i.baseVersion)}}class ot extends Mo{constructor(i,r,a,c,d){super(d),this.sourcePosition=i.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=r,this.targetPosition=a.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=c.clone()}get type(){return"merge"}get deletionPosition(){return new se(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const i=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ee(this.sourcePosition,i)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const i=this.targetPosition._getTransformedByMergeOperation(this),r=this.sourcePosition.path.slice(0,-1),a=new se(this.sourcePosition.root,r)._getTransformedByMergeOperation(this),c=new Vt(i,this.howMany,this.graveyardPosition,this.baseVersion+1);return c.insertionPosition=a,c}_validate(){const i=this.sourcePosition.parent,r=this.targetPosition.parent;if(!i.parent)throw new W.b("merge-operation-source-position-invalid: Merge source position is invalid.",this);if(!r.parent)throw new W.b("merge-operation-target-position-invalid: Merge target position is invalid.",this);if(this.howMany!=i.maxOffset)throw new W.b("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this)}_execute(){const i=this.sourcePosition.parent;Gu(ee._createIn(i),this.targetPosition),Gu(ee._createOn(i),this.graveyardPosition)}toJSON(){const i=super.toJSON();return i.sourcePosition=i.sourcePosition.toJSON(),i.targetPosition=i.targetPosition.toJSON(),i.graveyardPosition=i.graveyardPosition.toJSON(),i}static get className(){return"MergeOperation"}static fromJSON(i,r){const a=se.fromJSON(i.sourcePosition,r),c=se.fromJSON(i.targetPosition,r),d=se.fromJSON(i.graveyardPosition,r);return new this(a,i.howMany,c,d,i.baseVersion)}}class Vt extends Mo{constructor(i,r,a,c){super(c),this.splitPosition=i.clone(),this.splitPosition.stickiness="toNext",this.howMany=r,this.insertionPosition=Vt.getInsertionPosition(i),this.insertionPosition.stickiness="toNone",this.graveyardPosition=a?a.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const i=this.insertionPosition.path.slice();return i.push(0),new se(this.insertionPosition.root,i)}get movedRange(){const i=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ee(this.splitPosition,i)}clone(){const i=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);return i.insertionPosition=this.insertionPosition,i}getReversed(){const r=new se(this.splitPosition.root.document.graveyard,[0]);return new ot(this.moveTargetPosition,this.howMany,this.splitPosition,r,this.baseVersion+1)}_validate(){const i=this.splitPosition.parent;if(!i||i.maxOffset<this.splitPosition.offset)throw new W.b("split-operation-position-invalid: Split position is invalid.",this);if(!i.parent)throw new W.b("split-operation-split-in-root: Cannot split root element.",this);if(this.howMany!=i.maxOffset-this.splitPosition.offset)throw new W.b("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new W.b("split-operation-graveyard-position-invalid: Graveyard position invalid.",this)}_execute(){const i=this.splitPosition.parent;if(this.graveyardPosition)Gu(ee._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const r=i._clone();rc(this.insertionPosition,r)}Gu(new ee(se._createAt(i,this.splitPosition.offset),se._createAt(i,i.maxOffset)),this.moveTargetPosition)}toJSON(){const i=super.toJSON();return i.splitPosition=this.splitPosition.toJSON(),i.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(i.graveyardPosition=this.graveyardPosition.toJSON()),i}static get className(){return"SplitOperation"}static getInsertionPosition(i){const r=i.path.slice(0,-1);return r[r.length-1]++,new se(i.root,r)}static fromJSON(i,r){const a=se.fromJSON(i.splitPosition,r),c=se.fromJSON(i.insertionPosition,r),d=i.graveyardPosition?se.fromJSON(i.graveyardPosition,r):null,f=new this(a,i.howMany,d,i.baseVersion);return f.insertionPosition=c,f}}class Xs extends Qt{constructor(i,r,a="main"){super(r),this._doc=i,this.rootName=a}get document(){return this._doc}is(i,r){const a=i.replace("model:","");return r?"rootElement"==a&&r==this.name||super.is(i,r):"rootElement"==a||super.is(i)}toJSON(){return this.rootName}}class u1{constructor(i,r){this.model=i,this.batch=r}createText(i,r){return new Ut(i,r)}createElement(i,r){return new Qt(i,r)}createDocumentFragment(){return new Lr}insert(i,r,a=0){if(this._assertWriterUsedCorrectly(),i instanceof Ut&&""==i.data)return;const c=se._createAt(r,a);if(i.parent){if(Mf(i.root,c.root))return void this.move(ee._createOn(i),c);if(i.root.document)throw new W.b("model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree. It is forbidden to move a node that was already in a document outside of it.",this);this.remove(i)}const f=new xn(c,i,c.root.document?c.root.document.version:null);if(i instanceof Ut&&(f.shouldReceiveAttributes=!0),this.batch.addOperation(f),this.model.applyOperation(f),i instanceof Lr)for(const[g,_]of i.markers){const b=se._createAt(_.root,0),y={range:new ee(_.start._getCombined(b,c),_.end._getCombined(b,c)),usingOperation:!0,affectsData:!0};this.model.markers.has(g)?this.updateMarker(g,y):this.addMarker(g,y)}}insertText(i,r,a,c){r instanceof Lr||r instanceof Qt||r instanceof se?this.insert(this.createText(i),r,a):this.insert(this.createText(i,r),a,c)}insertElement(i,r,a,c){r instanceof Lr||r instanceof Qt||r instanceof se?this.insert(this.createElement(i),r,a):this.insert(this.createElement(i,r),a,c)}append(i,r){this.insert(i,r,"end")}appendText(i,r,a){r instanceof Lr||r instanceof Qt?this.insert(this.createText(i),r,"end"):this.insert(this.createText(i,r),a,"end")}appendElement(i,r,a){r instanceof Lr||r instanceof Qt?this.insert(this.createElement(i),r,"end"):this.insert(this.createElement(i,r),a,"end")}setAttribute(i,r,a){if(this._assertWriterUsedCorrectly(),a instanceof ee){const c=a.getMinimalFlatRanges();for(const d of c)s_(this,i,r,d)}else a_(this,i,r,a)}setAttributes(i,r){for(const[a,c]of vt(i))this.setAttribute(a,c,r)}removeAttribute(i,r){if(this._assertWriterUsedCorrectly(),r instanceof ee){const a=r.getMinimalFlatRanges();for(const c of a)s_(this,i,null,c)}else a_(this,i,null,r)}clearAttributes(i){this._assertWriterUsedCorrectly();const r=a=>{for(const c of a.getAttributeKeys())this.removeAttribute(c,a)};if(i instanceof ee)for(const a of i.getItems())r(a);else r(i)}move(i,r,a){if(this._assertWriterUsedCorrectly(),!(i instanceof ee))throw new W.b("writer-move-invalid-range: Invalid range to move.",this);if(!i.isFlat)throw new W.b("writer-move-range-not-flat: Range to move is not flat.",this);const c=se._createAt(r,a);if(c.isEqual(i.start))return;if(this._addOperationForAffectedMarkers("move",i),!Mf(i.root,c.root))throw new W.b("writer-move-different-document: Range is going to be moved between different documents.",this);const f=new St(i.start,i.end.offset-i.start.offset,c,i.root.document?i.root.document.version:null);this.batch.addOperation(f),this.model.applyOperation(f)}remove(i){this._assertWriterUsedCorrectly();const r=(i instanceof ee?i:ee._createOn(i)).getMinimalFlatRanges().reverse();for(const a of r)this._addOperationForAffectedMarkers("move",a),ac(a.start,a.end.offset-a.start.offset,this.batch,this.model)}merge(i){this._assertWriterUsedCorrectly();const r=i.nodeBefore,a=i.nodeAfter;if(this._addOperationForAffectedMarkers("merge",i),!(r instanceof Qt))throw new W.b("writer-merge-no-element-before: Node before merge position must be an element.",this);if(!(a instanceof Qt))throw new W.b("writer-merge-no-element-after: Node after merge position must be an element.",this);i.root.document?this._merge(i):this._mergeDetached(i)}createPositionFromPath(i,r,a){return this.model.createPositionFromPath(i,r,a)}createPositionAt(i,r){return this.model.createPositionAt(i,r)}createPositionAfter(i){return this.model.createPositionAfter(i)}createPositionBefore(i){return this.model.createPositionBefore(i)}createRange(i,r){return this.model.createRange(i,r)}createRangeIn(i){return this.model.createRangeIn(i)}createRangeOn(i){return this.model.createRangeOn(i)}createSelection(i,r,a){return this.model.createSelection(i,r,a)}_mergeDetached(i){const r=i.nodeBefore,a=i.nodeAfter;this.move(ee._createIn(a),se._createAt(r,"end")),this.remove(a)}_merge(i){const r=se._createAt(i.nodeBefore,"end"),a=se._createAt(i.nodeAfter,0),d=new se(i.root.document.graveyard,[0]),g=new ot(a,i.nodeAfter.maxOffset,r,d,i.root.document.version);this.batch.addOperation(g),this.model.applyOperation(g)}rename(i,r){if(this._assertWriterUsedCorrectly(),!(i instanceof Qt))throw new W.b("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this);const a=i.root.document?i.root.document.version:null,c=new ie(se._createBefore(i),i.name,r,a);this.batch.addOperation(c),this.model.applyOperation(c)}split(i,r){this._assertWriterUsedCorrectly();let a,c,d=i.parent;if(!d.parent)throw new W.b("writer-split-element-no-parent: Element with no parent can not be split.",this);if(r||(r=d.parent),!i.parent.getAncestors({includeSelf:!0}).includes(r))throw new W.b("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this);do{const _=new Vt(i,d.maxOffset-i.offset,null,d.root.document?d.root.document.version:null);this.batch.addOperation(_),this.model.applyOperation(_),a||c||(a=d,c=i.parent.nextSibling),d=(i=this.createPositionAfter(i.parent)).parent}while(d!==r);return{position:i,range:new ee(se._createAt(a,"end"),se._createAt(c,0))}}wrap(i,r){if(this._assertWriterUsedCorrectly(),!i.isFlat)throw new W.b("writer-wrap-range-not-flat: Range to wrap is not flat.",this);const a=r instanceof Qt?r:new Qt(r);if(a.childCount>0)throw new W.b("writer-wrap-element-not-empty: Element to wrap with is not empty.",this);if(null!==a.parent)throw new W.b("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this);this.insert(a,i.start);const c=new ee(i.start.getShiftedBy(1),i.end.getShiftedBy(1));this.move(c,se._createAt(a,0))}unwrap(i){if(this._assertWriterUsedCorrectly(),null===i.parent)throw new W.b("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this);this.move(ee._createIn(i),this.createPositionAfter(i)),this.remove(i)}addMarker(i,r){if(this._assertWriterUsedCorrectly(),!r||"boolean"!=typeof r.usingOperation)throw new W.b("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this);const a=r.usingOperation,c=r.range,d=void 0!==r.affectsData&&r.affectsData;if(this.model.markers.has(i))throw new W.b("writer-addMarker-marker-exists: Marker with provided name already exists.",this);if(!c)throw new W.b("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this);return a?(Zs(this,i,null,c,d),this.model.markers.get(i)):this.model.markers._set(i,c,a,d)}updateMarker(i,r){this._assertWriterUsedCorrectly();const a="string"==typeof i?i:i.name,c=this.model.markers.get(a);if(!c)throw new W.b("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this);if(!r)return void this.model.markers._refresh(c);const d="boolean"==typeof r.usingOperation,f="boolean"==typeof r.affectsData,g=f?r.affectsData:c.affectsData;if(!d&&!r.range&&!f)throw new W.b("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this);const _=c.getRange(),b=r.range?r.range:_;d&&r.usingOperation!==c.managedUsingOperations?r.usingOperation?Zs(this,a,null,b,g):(Zs(this,a,_,null,g),this.model.markers._set(a,b,void 0,g)):c.managedUsingOperations?Zs(this,a,_,b,g):this.model.markers._set(a,b,void 0,g)}removeMarker(i){this._assertWriterUsedCorrectly();const r="string"==typeof i?i:i.name;if(!this.model.markers.has(r))throw new W.b("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this);const a=this.model.markers.get(r);a.managedUsingOperations?Zs(this,r,a.getRange(),null,a.affectsData):this.model.markers._remove(r)}setSelection(i,r,a){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(i,r,a)}setSelectionFocus(i,r){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(i,r)}setSelectionAttribute(i,r){if(this._assertWriterUsedCorrectly(),"string"==typeof i)this._setSelectionAttribute(i,r);else for(const[a,c]of vt(i))this._setSelectionAttribute(a,c)}removeSelectionAttribute(i){if(this._assertWriterUsedCorrectly(),"string"==typeof i)this._removeSelectionAttribute(i);else for(const r of i)this._removeSelectionAttribute(r)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(i){this.model.document.selection._restoreGravity(i)}_setSelectionAttribute(i,r){const a=this.model.document.selection;if(a.isCollapsed&&a.anchor.parent.isEmpty){const c=Ei._getStoreAttributeKey(i);this.setAttribute(c,r,a.anchor.parent)}a._setAttribute(i,r)}_removeSelectionAttribute(i){const r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){const a=Ei._getStoreAttributeKey(i);this.removeAttribute(a,r.anchor.parent)}r._removeAttribute(i)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new W.b("writer-incorrect-use: Trying to use a writer outside the change() block.",this)}_addOperationForAffectedMarkers(i,r){for(const a of this.model.markers){if(!a.managedUsingOperations)continue;const c=a.getRange();let d=!1;if("move"==i)d=r.containsPosition(c.start)||r.start.isEqual(c.start)||r.containsPosition(c.end)||r.end.isEqual(c.end);else{const g=r.nodeAfter,b=c.end.parent==g&&0==c.end.offset,y=c.end.nodeAfter==g,k=c.start.nodeAfter==g;d=c.start.parent==r.nodeBefore&&c.start.isAtEnd||b||y||k}d&&this.updateMarker(a.name,{range:c})}}}function s_(u,i,r,a){const c=u.model,d=c.document;let f,g,_,b=a.start;for(const k of a.getWalker({shallow:!0}))_=k.item.getAttribute(i),f&&g!=_&&(g!=r&&y(),b=f),f=k.nextPosition,g=_;function y(){const k=new ee(b,f),F=new Bn(k,i,g,r,k.root.document?d.version:null);u.batch.addOperation(F),c.applyOperation(F)}f instanceof se&&f!=b&&g!=r&&y()}function a_(u,i,r,a){const c=u.model,d=c.document,f=a.getAttribute(i);let g,_;f!=r&&(a.root===a?_=new dr(a,i,f,r,a.document?d.version:null):(g=new ee(se._createBefore(a),u.createPositionAfter(a)),_=new Bn(g,i,f,r,g.root.document?d.version:null)),u.batch.addOperation(_),c.applyOperation(_))}function Zs(u,i,r,a,c){const d=u.model,g=new Wi(i,r,a,d.markers,c,d.document.version);u.batch.addOperation(g),d.applyOperation(g)}function ac(u,i,r,a){let c;if(u.root.document){const d=a.document,f=new se(d.graveyard,[0]);c=new St(u,i,f,d.version)}else c=new r_(u,i);r.addOperation(c),a.applyOperation(c)}function Mf(u,i){return u===i||u instanceof Xs&&i instanceof Xs}class lc{constructor(i){this._markerCollection=i,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(i){if(this._isInInsertedElement(i.parent))return;this._markRemove(i.parent,i.startOffset,i.offsetSize),this._markInsert(i.parent,i.startOffset,i.offsetSize);const r=ee._createOn(i);for(const a of this._markerCollection.getMarkersIntersectingRange(r)){const c=a.getRange();this.bufferMarkerChange(a.name,c,c,a.affectsData)}this._cachedChanges=null}bufferOperation(i){switch(i.type){case"insert":if(this._isInInsertedElement(i.position.parent))return;this._markInsert(i.position.parent,i.position.offset,i.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const r of i.range.getItems({shallow:!0}))this._isInInsertedElement(r.parent)||this._markAttribute(r);break;case"remove":case"move":case"reinsert":{if(i.sourcePosition.isEqual(i.targetPosition)||i.sourcePosition.getShiftedBy(i.howMany).isEqual(i.targetPosition))return;const r=this._isInInsertedElement(i.sourcePosition.parent),a=this._isInInsertedElement(i.targetPosition.parent);r||this._markRemove(i.sourcePosition.parent,i.sourcePosition.offset,i.howMany),a||this._markInsert(i.targetPosition.parent,i.getMovedRangeStart().offset,i.howMany);break}case"rename":{if(this._isInInsertedElement(i.position.parent))return;this._markRemove(i.position.parent,i.position.offset,1),this._markInsert(i.position.parent,i.position.offset,1);const r=ee._createFromPositionAndShift(i.position,1);for(const a of this._markerCollection.getMarkersIntersectingRange(r)){const c=a.getRange();this.bufferMarkerChange(a.name,c,c,a.affectsData)}break}case"split":{const r=i.splitPosition.parent;this._isInInsertedElement(r)||this._markRemove(r,i.splitPosition.offset,i.howMany),this._isInInsertedElement(i.insertionPosition.parent)||this._markInsert(i.insertionPosition.parent,i.insertionPosition.offset,1),i.graveyardPosition&&this._markRemove(i.graveyardPosition.parent,i.graveyardPosition.offset,1);break}case"merge":{const r=i.sourcePosition.parent;this._isInInsertedElement(r.parent)||this._markRemove(r.parent,r.startOffset,1),this._markInsert(i.graveyardPosition.parent,i.graveyardPosition.offset,1);const c=i.targetPosition.parent;this._isInInsertedElement(c)||this._markInsert(c,i.targetPosition.offset,r.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(i,r,a,c){const d=this._changedMarkers.get(i);d?(d.newRange=a,d.affectsData=c,null==d.oldRange&&null==d.newRange&&this._changedMarkers.delete(i)):this._changedMarkers.set(i,{oldRange:r,newRange:a,affectsData:c})}getMarkersToRemove(){const i=[];for(const[r,a]of this._changedMarkers)null!=a.oldRange&&i.push({name:r,range:a.oldRange});return i}getMarkersToAdd(){const i=[];for(const[r,a]of this._changedMarkers)null!=a.newRange&&i.push({name:r,range:a.newRange});return i}getChangedMarkers(){return Array.from(this._changedMarkers).map(i=>({name:i[0],data:{oldRange:i[1].oldRange,newRange:i[1].newRange}}))}hasDataChanges(){for(const[,i]of this._changedMarkers)if(i.affectsData)return!0;return this._changesInElement.size>0}getChanges(i={includeChangesInGraveyard:!1}){if(this._cachedChanges)return i.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();const r=[];for(const a of this._changesInElement.keys()){const c=this._changesInElement.get(a).sort((y,k)=>y.offset===k.offset?y.type!=k.type?"remove"==y.type?-1:1:0:y.offset<k.offset?-1:1),d=this._elementSnapshots.get(a),f=l_(a.getChildren()),g=c_(d.length,c);let _=0,b=0;for(const y of g)if("i"===y)r.push(this._getInsertDiff(a,_,f[_].name)),_++;else if("r"===y)r.push(this._getRemoveDiff(a,_,d[b].name)),b++;else if("a"===y){const k=f[_].attributes,S=d[b].attributes;let F;if("$text"==f[_].name)F=new ee(se._createAt(a,_),se._createAt(a,_+1));else{const $=a.offsetToIndex(_);F=new ee(se._createAt(a,_),se._createAt(a.getChild($),0))}r.push(...this._getAttributesDiff(F,S,k)),_++,b++}else _++,b++}r.sort((a,c)=>a.position.root!=c.position.root?a.position.root.rootName<c.position.root.rootName?-1:1:a.position.isEqual(c.position)?a.changeCount-c.changeCount:a.position.isBefore(c.position)?-1:1);for(let a=1;a<r.length;a++){const c=r[a-1],d=r[a],f="remove"==c.type&&"remove"==d.type&&"$text"==c.name&&"$text"==d.name&&c.position.isEqual(d.position),g="insert"==c.type&&"insert"==d.type&&"$text"==c.name&&"$text"==d.name&&c.position.parent==d.position.parent&&c.position.offset+c.length==d.position.offset,_="attribute"==c.type&&"attribute"==d.type&&c.position.parent==d.position.parent&&c.range.isFlat&&d.range.isFlat&&c.position.offset+c.length==d.position.offset&&c.attributeKey==d.attributeKey&&c.attributeOldValue==d.attributeOldValue&&c.attributeNewValue==d.attributeNewValue;(f||g||_)&&(r[a-1].length++,_&&(r[a-1].range.end=r[a-1].range.end.getShiftedBy(1)),r.splice(a,1),a--)}for(const a of r)delete a.changeCount,"attribute"==a.type&&(delete a.position,delete a.length);return this._changeCount=0,this._cachedChangesWithGraveyard=r.slice(),this._cachedChanges=r.slice().filter(cc),i.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(i,r,a){const c={type:"insert",offset:r,howMany:a,count:this._changeCount++};this._markChange(i,c)}_markRemove(i,r,a){const c={type:"remove",offset:r,howMany:a,count:this._changeCount++};this._markChange(i,c),this._removeAllNestedChanges(i,r,a)}_markAttribute(i){const r={type:"attribute",offset:i.startOffset,howMany:i.offsetSize,count:this._changeCount++};this._markChange(i.parent,r)}_markChange(i,r){this._makeSnapshot(i);const a=this._getChangesForElement(i);this._handleChange(r,a),a.push(r);for(let c=0;c<a.length;c++)a[c].howMany<1&&(a.splice(c,1),c--)}_getChangesForElement(i){let r;return this._changesInElement.has(i)?r=this._changesInElement.get(i):(r=[],this._changesInElement.set(i,r)),r}_makeSnapshot(i){this._elementSnapshots.has(i)||this._elementSnapshots.set(i,l_(i.getChildren()))}_handleChange(i,r){i.nodesToHandle=i.howMany;for(const a of r){const c=i.offset+i.howMany,d=a.offset+a.howMany;if("insert"==i.type&&("insert"==a.type&&(i.offset<=a.offset?a.offset+=i.howMany:i.offset<d&&(a.howMany+=i.nodesToHandle,i.nodesToHandle=0)),"remove"==a.type&&i.offset<a.offset&&(a.offset+=i.howMany),"attribute"==a.type))if(i.offset<=a.offset)a.offset+=i.howMany;else if(i.offset<d){const f=a.howMany;a.howMany=i.offset-a.offset,r.unshift({type:"attribute",offset:c,howMany:f-a.howMany,count:this._changeCount++})}if("remove"==i.type){if("insert"==a.type)if(c<=a.offset)a.offset-=i.howMany;else if(c<=d)if(i.offset<a.offset){const f=c-a.offset;a.offset=i.offset,a.howMany-=f,i.nodesToHandle-=f}else a.howMany-=i.nodesToHandle,i.nodesToHandle=0;else if(i.offset<=a.offset)i.nodesToHandle-=a.howMany,a.howMany=0;else if(i.offset<d){const f=d-i.offset;a.howMany-=f,i.nodesToHandle-=f}if("remove"==a.type&&(c<=a.offset?a.offset-=i.howMany:i.offset<a.offset&&(i.nodesToHandle+=a.howMany,a.howMany=0)),"attribute"==a.type)if(c<=a.offset)a.offset-=i.howMany;else if(i.offset<a.offset){const f=c-a.offset;a.offset=i.offset,a.howMany-=f}else if(i.offset<d)if(c<=d){const f=a.howMany;a.howMany=i.offset-a.offset,r.unshift({type:"attribute",offset:i.offset,howMany:f-a.howMany-i.nodesToHandle,count:this._changeCount++})}else a.howMany-=d-i.offset}if("attribute"==i.type){if("insert"==a.type)if(i.offset<a.offset&&c>a.offset){if(c>d){const f={type:"attribute",offset:d,howMany:c-d,count:this._changeCount++};this._handleChange(f,r),r.push(f)}i.nodesToHandle=a.offset-i.offset,i.howMany=i.nodesToHandle}else i.offset>=a.offset&&i.offset<d&&(c>d?(i.nodesToHandle=c-d,i.offset=d):i.nodesToHandle=0);if("remove"==a.type&&i.offset<a.offset&&c>a.offset){const f={type:"attribute",offset:a.offset,howMany:c-a.offset,count:this._changeCount++};this._handleChange(f,r),r.push(f),i.nodesToHandle=a.offset-i.offset,i.howMany=i.nodesToHandle}"attribute"==a.type&&(i.offset>=a.offset&&c<=d?(i.nodesToHandle=0,i.howMany=0,i.offset=0):i.offset<=a.offset&&c>=d&&(a.howMany=0))}}i.howMany=i.nodesToHandle,delete i.nodesToHandle}_getInsertDiff(i,r,a){return{type:"insert",position:se._createAt(i,r),name:a,length:1,changeCount:this._changeCount++}}_getRemoveDiff(i,r,a){return{type:"remove",position:se._createAt(i,r),name:a,length:1,changeCount:this._changeCount++}}_getAttributesDiff(i,r,a){const c=[];a=new Map(a);for(const[d,f]of r){const g=a.has(d)?a.get(d):null;g!==f&&c.push({type:"attribute",position:i.start,range:i.clone(),length:1,attributeKey:d,attributeOldValue:f,attributeNewValue:g,changeCount:this._changeCount++}),a.delete(d)}for(const[d,f]of a)c.push({type:"attribute",position:i.start,range:i.clone(),length:1,attributeKey:d,attributeOldValue:null,attributeNewValue:f,changeCount:this._changeCount++});return c}_isInInsertedElement(i){const r=i.parent;if(!r)return!1;const a=this._changesInElement.get(r),c=i.startOffset;if(a)for(const d of a)if("insert"==d.type&&c>=d.offset&&c<d.offset+d.howMany)return!0;return this._isInInsertedElement(r)}_removeAllNestedChanges(i,r,a){const c=new ee(se._createAt(i,r),se._createAt(i,r+a));for(const d of c.getItems({shallow:!0}))d.is("element")&&(this._elementSnapshots.delete(d),this._changesInElement.delete(d),this._removeAllNestedChanges(d,0,d.maxOffset))}}function l_(u){const i=[];for(const r of u)if(r.is("text"))for(let a=0;a<r.data.length;a++)i.push({name:"$text",attributes:new Map(r.getAttributes())});else i.push({name:r.name,attributes:new Map(r.getAttributes())});return i}function c_(u,i){const r=[];let a=0,c=0;for(const d of i){if(d.offset>a){for(let f=0;f<d.offset-a;f++)r.push("e");c+=d.offset-a}if("insert"==d.type){for(let f=0;f<d.howMany;f++)r.push("i");a=d.offset+d.howMany}else if("remove"==d.type){for(let f=0;f<d.howMany;f++)r.push("r");a=d.offset,c+=d.howMany}else r.push(..."a".repeat(d.howMany).split("")),a=d.offset+d.howMany,c+=d.howMany}if(c<u)for(let d=0;d<u-c-a;d++)r.push("e");return r}function cc(u){return!(u.position&&"$graveyard"==u.position.root.rootName||u.range&&"$graveyard"==u.range.root.rootName)}class qu{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(i){this._operations.includes(i)||this._operations.push(i)}getOperations(i=0,r=Number.POSITIVE_INFINITY){return i<0?[]:this._operations.slice(i,r)}getOperation(i){return this._operations[i]}setOperationAsUndone(i,r){this._undoPairs.set(r,i),this._undoneOperations.add(i)}isUndoingOperation(i){return this._undoPairs.has(i)}isUndoneOperation(i){return this._undoneOperations.has(i)}getUndoneOperation(i){return this._undoPairs.get(i)}}function Sf(u,i){return!!(r=u.charAt(i-1))&&1==r.length&&/[\ud800-\udbff]/.test(r)&&!!(a=u.charAt(i))&&1==a.length&&/[\udc00-\udfff]/.test(a);var a,r}function u_(u,i){return!!(r=u.charAt(i))&&1==r.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(r);var r}class d_{constructor(i){this.model=i,this.version=0,this.history=new qu(this),this.selection=new Ei(this),this.roots=new Ni({idProperty:"rootName"}),this.differ=new lc(i.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(i,"applyOperation",(r,a)=>{const c=a[0];if(c.isDocumentOperation&&c.baseVersion!==this.version)throw new W.b("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",this,{operation:c})},{priority:"highest"}),this.listenTo(i,"applyOperation",(r,a)=>{const c=a[0];c.isDocumentOperation&&this.differ.bufferOperation(c)},{priority:"high"}),this.listenTo(i,"applyOperation",(r,a)=>{const c=a[0];c.isDocumentOperation&&(this.version++,this.history.addOperation(c))},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(i.markers,"update",(r,a,c,d)=>{this.differ.bufferMarkerChange(a.name,c,d,a.affectsData),null===c&&a.on("change",(f,g)=>{this.differ.bufferMarkerChange(a.name,g,a.getRange(),a.affectsData)})})}get graveyard(){return this.getRoot("$graveyard")}createRoot(i="$root",r="main"){if(this.roots.get(r))throw new W.b("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:r});const a=new Xs(this,i,r);return this.roots.add(a),a}destroy(){this.selection.destroy(),this.stopListening()}getRoot(i="main"){return this.roots.get(i)}getRootNames(){return Array.from(this.roots,i=>i.rootName).filter(i=>"$graveyard"!=i)}registerPostFixer(i){this._postFixers.add(i)}toJSON(){const i=It(this);return i.selection="[engine.model.DocumentSelection]",i.model="[engine.model.Model]",i}_handleChangeBlock(i){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(i),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",i.batch):this.fire("change",i.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const i of this.roots)if(i!==this.graveyard)return i;return this.graveyard}_getDefaultRange(){const i=this._getDefaultRoot(),r=this.model,a=r.schema,c=r.createPositionFromPath(i,[0]);return a.getNearestSelectionRange(c)||r.createRange(c)}_validateSelectionRange(i){return ea(i.start)&&ea(i.end)}_callPostFixers(i){let r=!1;do{for(const a of this._postFixers)if(this.selection.refresh(),r=a(i),r)break}while(r)}}function ea(u){const i=u.textNode;if(i){const r=i.data,a=u.offset-i.startOffset;return!Sf(r,a)&&!u_(r,a)}return!0}Fe(d_,Re);class za{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(i){return this._markers.has(i)}get(i){return this._markers.get(i)||null}_set(i,r,a=!1,c=!1){const d=i instanceof uc?i.name:i,f=this._markers.get(d);if(f){const b=f.getRange();let y=!1;return b.isEqual(r)||(f._attachLiveRange(Yo.fromRange(r)),y=!0),a!=f.managedUsingOperations&&(f._managedUsingOperations=a,y=!0),"boolean"==typeof c&&c!=f.affectsData&&(f._affectsData=c,y=!0),y&&this.fire("update:"+d,f,b,r),f}const g=Yo.fromRange(r),_=new uc(d,g,a,c);return this._markers.set(d,_),this.fire("update:"+d,_,null,r),_}_remove(i){const r=i instanceof uc?i.name:i,a=this._markers.get(r);return!!a&&(this._markers.delete(r),this.fire("update:"+r,a,a.getRange(),null),this._destroyMarker(a),!0)}_refresh(i){const r=i instanceof uc?i.name:i,a=this._markers.get(r);if(!a)throw new W.b("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this);const c=a.getRange();this.fire("update:"+r,a,c,c,a.managedUsingOperations,a.affectsData)}*getMarkersAtPosition(i){for(const r of this)r.getRange().containsPosition(i)&&(yield r)}*getMarkersIntersectingRange(i){for(const r of this)null!==r.getRange().getIntersection(i)&&(yield r)}destroy(){for(const i of this._markers.values())this._destroyMarker(i);this._markers=null,this.stopListening()}*getMarkersGroup(i){for(const r of this._markers.values())r.name.startsWith(i+":")&&(yield r)}_destroyMarker(i){i.stopListening(),i._detachLiveRange()}}Fe(za,Re);class uc{constructor(i,r,a,c){this.name=i,this._liveRange=this._attachLiveRange(r),this._managedUsingOperations=a,this._affectsData=c}get managedUsingOperations(){if(!this._liveRange)throw new W.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new W.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._affectsData}getStart(){if(!this._liveRange)throw new W.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new W.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new W.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.toRange()}is(i){return"marker"==i||"model:marker"==i}_attachLiveRange(i){return this._liveRange&&this._detachLiveRange(),i.delegate("change:range").to(this),i.delegate("change:content").to(this),this._liveRange=i,i}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Fe(uc,Re);class oi extends Mo{get type(){return"noop"}clone(){return new oi(this.baseVersion)}getReversed(){return new oi(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const So={};So[Bn.className]=Bn,So[xn.className]=xn,So[Wi.className]=Wi,So[St.className]=St,So[oi.className]=oi,So[Mo.className]=Mo,So[ie.className]=ie,So[dr.className]=dr,So[Vt.className]=Vt,So[ot.className]=ot;class ho extends se{constructor(i,r,a="toNone"){if(super(i,r,a),!this.root.is("rootElement"))throw new W.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",i);KE.call(this)}detach(){this.stopListening()}is(i){return"livePosition"==i||"model:livePosition"==i||super.is(i)}toPosition(){return new se(this.root,this.path.slice(),this.stickiness)}static fromPosition(i,r){return new this(i.root,i.path.slice(),r||i.stickiness)}}function KE(){this.listenTo(this.root.document.model,"applyOperation",(u,i)=>{const r=i[0];r.isDocumentOperation&&d1.call(this,r)},{priority:"low"})}function d1(u){const i=this.getTransformedByOperation(u);if(!this.isEqual(i)){const r=this.toPosition();this.path=i.path,this.root=i.root,this.fire("change",r)}}Fe(ho,Re);class h1{constructor(i,r,a){this.model=i,this.writer=r,this.position=a,this.canMergeWith=new Set([this.position.parent]),this.schema=i.schema,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(i,r){i=Array.from(i);for(let a=0;a<i.length;a++)this._handleNode(i[a],{isFirst:0===a&&r.isFirst,isLast:a===i.length-1&&r.isLast});this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}getSelectionRange(){return this.nodeToSelect?ee._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new ee(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(i,r){this.schema.isObject(i)?this._handleObject(i,r):this._checkAndSplitToAllowedPosition(i,r)?(this._insert(i),this._mergeSiblingsOf(i,r)):this._handleDisallowedNode(i,r)}_handleObject(i,r){this._checkAndSplitToAllowedPosition(i)?this._insert(i):this._tryAutoparagraphing(i,r)}_handleDisallowedNode(i,r){i.is("element")?this.handleNodes(i.getChildren(),r):this._tryAutoparagraphing(i,r)}_insert(i){if(!this.schema.checkChild(this.position,i))throw new W.b("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:i,position:this.position});const r=ho.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this.writer.insert(i,this.position),this.position=r.toPosition(),r.detach(),this.nodeToSelect=this.schema.isObject(i)&&!this.schema.checkChild(this.position,"$text")?i:null,this._filterAttributesOf.push(i)}_setAffectedBoundaries(i){this._affectedStart||(this._affectedStart=ho.fromPosition(i,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(i)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=ho.fromPosition(i,"toNext"))}_mergeSiblingsOf(i,r){if(!(i instanceof Qt))return;const a=this._canMergeLeft(i,r),c=this._canMergeRight(i,r),d=ho._createBefore(i);d.stickiness="toNext";const f=ho._createAfter(i);if(f.stickiness="toNext",a){const g=ho.fromPosition(this.position);g.stickiness="toNext",this._affectedStart.isEqual(d)&&(this._affectedStart.detach(),this._affectedStart=ho._createAt(d.nodeBefore,"end","toPrevious")),this.writer.merge(d),d.isEqual(this._affectedEnd)&&r.isLast&&(this._affectedEnd.detach(),this._affectedEnd=ho._createAt(d.nodeBefore,"end","toNext")),this.position=g.toPosition(),g.detach()}if(c){if(!this.position.isEqual(f))throw new W.b("insertcontent-invalid-insertion-position",this);this.position=se._createAt(f.nodeBefore,"end");const g=ho.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(f)&&(this._affectedEnd.detach(),this._affectedEnd=ho._createAt(f.nodeBefore,"end","toNext")),this.writer.merge(f),f.getShiftedBy(-1).isEqual(this._affectedStart)&&r.isFirst&&(this._affectedStart.detach(),this._affectedStart=ho._createAt(f.nodeBefore,0,"toPrevious")),this.position=g.toPosition(),g.detach()}(a||c)&&this._filterAttributesOf.push(this.position.parent),d.detach(),f.detach()}_canMergeLeft(i,r){const a=i.previousSibling;return r.isFirst&&a instanceof Qt&&this.canMergeWith.has(a)&&this.model.schema.checkMerge(a,i)}_canMergeRight(i,r){const a=i.nextSibling;return r.isLast&&a instanceof Qt&&this.canMergeWith.has(a)&&this.model.schema.checkMerge(i,a)}_tryAutoparagraphing(i,r){const a=this.writer.createElement("paragraph");this._getAllowedIn(a,this.position.parent)&&this.schema.checkChild(a,i)&&(a._appendChild(i),this._handleNode(a,r))}_checkAndSplitToAllowedPosition(i){const r=this._getAllowedIn(i,this.position.parent);if(!r)return!1;for(;r!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){const a=this.position.parent;this.position=this.writer.createPositionBefore(a),a.isEmpty&&a.parent===r&&this.writer.remove(a)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const a=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=a,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(i,r){return this.schema.checkChild(r,i)?r:r.parent?this._getAllowedIn(i,r.parent):null}}function dc(u,i,r){const a=u.createElement("paragraph");u.insert(a,i),Wu(u,r,u.createPositionAt(a,0))}function Wu(u,i,r){i instanceof Ei?u.setSelection(r):i.setTo(r)}function p1(u,i){if("text"==i.type)return"word"===u.unit?function(r,a){let c=r.position.textNode;if(c){let d=r.position.offset-c.startOffset;for(;!JE(c.data,d,a)&&!f_(c,d,a);){r.next();const f=a?r.position.nodeAfter:r.position.nodeBefore;if(f&&f.is("text")){const g=f.data.charAt(a?0:f.data.length-1);' ,.?!:;"-()'.includes(g)||(r.next(),c=r.position.textNode)}d=r.position.offset-c.startOffset}}return r.position}(u.walker,u.isForward):function(r,a){const c=r.position.textNode;if(c){const d=c.data;let f=r.position.offset-c.startOffset;for(;Sf(d,f)||"character"==a&&u_(d,f);)r.next(),f=r.position.offset-c.startOffset}return r.position}(u.walker,u.unit);if(i.type==(u.isForward?"elementStart":"elementEnd")){if(u.schema.isObject(i.item))return se._createAt(i.item,u.isForward?"after":"before");if(u.schema.checkChild(i.nextPosition,"$text"))return i.nextPosition}else{if(u.schema.isLimit(i.item))return void u.walker.skip(()=>!0);if(u.schema.checkChild(i.nextPosition,"$text"))return i.nextPosition}}function h_(u,i){const a=se._createAt(u.root,i?"end":0);return i?new ee(u,a):new ee(a,u)}function JE(u,i,r){return' ,.?!:;"-()'.includes(u.charAt(i+(r?0:-1)))}function f_(u,i,r){return i===(r?u.endOffset:0)}function g1(u,i){const r=[];Array.from(u.getItems({direction:"backward"})).map(a=>i.createRangeOn(a)).filter(a=>(a.start.isAfter(u.start)||a.start.isEqual(u.start))&&(a.end.isBefore(u.end)||a.end.isEqual(u.end))).forEach(a=>{r.push(a.start.parent),i.remove(a)}),r.forEach(a=>{let c=a;for(;c.parent&&c.isEmpty;){const d=i.createRangeOn(c);c=c.parent,i.remove(d)}})}function _1(u,i){return u.isCollapsed?function(r,a){const c=r.start,d=a.getNearestSelectionRange(c);if(!d)return null;if(!d.isCollapsed)return d;const f=d.start;return c.isEqual(f)?null:new ee(f)}(u,i):function(r,a){const c=r.start,d=r.end,f=a.checkChild(c,"$text"),g=a.checkChild(d,"$text"),_=a.getLimitElement(c),b=a.getLimitElement(d);if(_===b){if(f&&g)return null;if(function(S,F,$){const G=S.nodeAfter&&!$.isLimit(S.nodeAfter)||$.checkChild(S,"$text"),Y=F.nodeBefore&&!$.isLimit(F.nodeBefore)||$.checkChild(F,"$text");return G||Y}(c,d,a)){const S=c.nodeAfter&&a.isObject(c.nodeAfter)?null:a.getNearestSelectionRange(c,"forward"),F=d.nodeBefore&&a.isObject(d.nodeBefore)?null:a.getNearestSelectionRange(d,"backward");return new ee(S?S.start:c,F?F.start:d)}}const y=_&&!_.is("rootElement"),k=b&&!b.is("rootElement");if(y||k){const S=c.nodeAfter&&d.nodeBefore&&c.nodeAfter.parent===d.nodeBefore.parent,F=y&&(!S||!v1(c.nodeAfter,a)),$=k&&(!S||!v1(d.nodeBefore,a));let G=c,Y=d;return F&&(G=se._createBefore(Ku(_,a))),$&&(Y=se._createAfter(Ku(b,a))),new ee(G,Y)}return null}(u,i)}function Ku(u,i){let r=u,a=r;for(;i.isLimit(a)&&a.parent;)r=a,a=a.parent;return r}function v1(u,i){return u&&i.isObject(u)}class b1{constructor(){this.markers=new za,this.document=new d_(this),this.schema=new ur,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(i=>this.decorate(i)),this.on("applyOperation",(i,r)=>{r[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker"),this.schema.addChildCheck((i,r)=>{if("$marker"===r.name)return!0}),function m1(u){u.document.registerPostFixer(i=>function(r,a){const c=a.document.selection,d=a.schema,f=[];let g=!1;for(const _ of c.getRanges()){const b=_1(_,d);b?(f.push(b),g=!0):f.push(_)}g&&r.setSelection(function(_){const b=[];b.push(_.shift());for(const y of _){const k=b.pop();if(y.isIntersecting(k)){const S=k.start.isAfter(y.start)?y.start:k.start,F=k.end.isAfter(y.end)?k.end:y.end,$=new ee(S,F);b.push($)}else b.push(k),b.push(y)}return b}(f),{backward:c.isBackward})}(i,u))}(this)}change(i){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Uu,callback:i}),this._runPendingChanges()[0]):i(this._currentWriter)}catch(r){W.b.rethrowUnexpectedError(r,this)}}enqueueChange(i,r){try{"string"==typeof i?i=new Uu(i):"function"==typeof i&&(r=i,i=new Uu),this._pendingChanges.push({batch:i,callback:r}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(a){W.b.rethrowUnexpectedError(a,this)}}applyOperation(i){i._execute()}insertContent(i,r,a){return d=i,f=r,g=a,(c=this).change(_=>{let b;b=f?f instanceof cr||f instanceof Ei?f:_.createSelection(f,g):c.document.selection;const y=b.getFirstPosition();b.isCollapsed||c.deleteContent(b,{doNotAutoparagraph:!0});const k=new h1(c,_,y);let S;S=d.is("documentFragment")?d.getChildren():[d],k.handleNodes(S,{isFirst:!0,isLast:!0});const F=k.getSelectionRange();F&&(b instanceof Ei?_.setSelection(F):b.setTo(F));const $=k.getAffectedRange()||c.createRange(y);return k.destroy(),$});var c,d,f,g}deleteContent(i,r){!function f1(u,i,r={}){if(i.isCollapsed)return;const a=i.getFirstRange();if("$graveyard"==a.root.rootName)return;const c=u.schema;u.change(d=>{if(!r.doNotResetEntireContent&&function(_,b){const y=_.getLimitElement(b);if(!b.containsEntireContent(y))return!1;const k=b.getFirstRange();return k.start.parent!=k.end.parent&&_.checkChild(y,"paragraph")}(c,i))return void function(_,b){const y=_.model.schema.getLimitElement(b);_.remove(_.createRangeIn(y)),dc(_,_.createPositionAt(y,0),b)}(d,i);const f=a.start,g=ho.fromPosition(a.end,"toNext");if(a.start.isTouching(a.end)||d.remove(a),r.leaveUnmerged||(function _(b,y,k){const S=y.parent,F=k.parent;if(S!=F&&!b.model.schema.isLimit(S)&&!b.model.schema.isLimit(F)&&function($,G,Y){const oe=new ee($,G);for(const ue of oe.getWalker())if(Y.isLimit(ue.item))return!1;return!0}(y,k,b.model.schema)){for(y=b.createPositionAfter(S),(k=b.createPositionBefore(F)).isEqual(y)||b.insert(F,y),b.merge(y);k.parent.isEmpty;){const $=k.parent;k=b.createPositionBefore($),b.remove($)}_(b,y,k)}}(d,f,g),c.removeDisallowedAttributes(f.parent.getChildren(),d)),Wu(d,i,f),function(_,b){const y=_.checkChild(b,"$text"),k=_.checkChild(b,"paragraph");return!y&&k}(c,f)){const _=c.getNearestSelectionRange(f);r.doNotAutoparagraph&&_?Wu(d,i,_):dc(d,f,i)}g.detach()})}(this,i,r)}modifySelection(i,r){!function(a,c,d={}){const f=a.schema,g="backward"!=d.direction,_=d.unit?d.unit:"character",y=new Do({boundaries:h_(c.focus,g),singleCharacters:!0,direction:g?"forward":"backward"}),k={walker:y,schema:f,isForward:g,unit:_};let S;for(;S=y.next();){if(S.done)return;const F=p1(k,S.value);if(F)return void(c instanceof Ei?a.change($=>{$.setSelectionFocus(F)}):c.setFocus(F))}}(this,i,r)}getSelectedContent(i){return function(r,a){return r.change(c=>{const d=c.createDocumentFragment(),f=a.getFirstRange();if(!f||f.isCollapsed)return d;const g=f.start.root,_=f.start.getCommonPath(f.end),b=g.getNodeByPath(_);let y;y=f.start.parent==f.end.parent?f:c.createRange(c.createPositionAt(b,f.start.path[_.length]),c.createPositionAt(b,f.end.path[_.length]+1));const k=y.end.offset-y.start.offset;for(const S of y.getItems({shallow:!0}))S.is("textProxy")?c.appendText(S.data,S.getAttributes(),d):c.append(S._clone(!0),d);if(y!=f){const S=f._getTransformedByMove(y.start,c.createPositionAt(d,0),k)[0],F=c.createRange(c.createPositionAt(d,0),S.start);g1(c.createRange(S.end,c.createPositionAt(d,"end")),c),g1(F,c)}return d})}(this,i)}hasContent(i,r){const a=i instanceof Qt?ee._createIn(i):i;if(a.isCollapsed)return!1;for(const d of this.markers.getMarkersIntersectingRange(a))if(d.affectsData)return!0;const{ignoreWhitespaces:c=!1}=r||{};for(const d of a.getItems())if(d.is("textProxy")){if(!c||-1!==d.data.search(/\S/))return!0}else if(this.schema.isObject(d))return!0;return!1}createPositionFromPath(i,r,a){return new se(i,r,a)}createPositionAt(i,r){return se._createAt(i,r)}createPositionAfter(i){return se._createAfter(i)}createPositionBefore(i){return se._createBefore(i)}createRange(i,r){return new ee(i,r)}createRangeIn(i){return ee._createIn(i)}createRangeOn(i){return ee._createOn(i)}createSelection(i,r,a){return new cr(i,r,a)}createBatch(i){return new Uu(i)}createOperationFromJSON(i){return class{static fromJSON(r,a){return So[r.__className].fromJSON(r,a)}}.fromJSON(i,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const i=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){this._currentWriter=new u1(this,this._pendingChanges[0].batch);const a=this._pendingChanges[0].callback(this._currentWriter);i.push(a),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),i}}Fe(b1,On);class hr{constructor(){this._listener=Object.create(Fa)}listenTo(i){this._listener.listenTo(i,"keydown",(r,a)=>{this._listener.fire("_keydown:"+Nr(a),a)})}set(i,r,a={}){const c=Eu(i);this._listener.listenTo(this._listener,"_keydown:"+c,(f,g)=>{r(g,()=>{g.preventDefault(),g.stopPropagation(),f.stop()}),f.return=!0},{priority:a.priority})}press(i){return!!this._listener.fire("_keydown:"+Nr(i),i)}destroy(){this._listener.stopListening()}}class YE extends hr{constructor(i){super(),this.editor=i}set(i,r,a={}){if("string"==typeof r){const c=r;r=(d,f)=>{this.editor.execute(c),f()}}super.set(i,r,a)}}class y1{constructor(i={}){this._context=i.context||new Mm({language:i.language}),this._context._addEditor(this,!i.context);const r=Array.from(this.constructor.builtinPlugins||[]);this.config=new Pe(i,this.constructor.defaultConfig),this.config.define("plugins",r),this.config.define(this._context._getEditorConfig()),this.plugins=new zo(this,r,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new GE,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.set("isReadOnly",!1),this.model=new b1,this.data=new Tf(this.model),this.editing=new ja(this.model),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new c1([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new YE(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const i=this.config,r=i.get("plugins"),a=i.get("removePlugins")||[],c=i.get("extraPlugins")||[];return this.plugins.init(r.concat(c),a)}destroy(){let i=Promise.resolve();return"initializing"==this.state&&(i=new Promise(r=>this.once("ready",r))),i.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(...i){try{this.commands.execute(...i)}catch(r){W.b.rethrowUnexpectedError(r,this)}}}Fe(y1,On);var QE={setData(u){this.data.set(u)},getData(u){return this.data.get(u)}};function w1(u,i){u instanceof HTMLTextAreaElement&&(u.value=i),u.innerHTML=i}var XE={updateSourceElement(){if(!this.sourceElement)throw new W.b("editor-missing-sourceelement: Cannot update the source element of a detached editor.",this);w1(this.sourceElement,this.data.get())}};class p_{getHtml(i){const r=document.implementation.createHTMLDocument("").createElement("div");return r.appendChild(i),r.innerHTML}}class hc{constructor(){this._domParser=new DOMParser,this._domConverter=new Kl({blockFillerMode:"nbsp"}),this._htmlWriter=new p_}toData(i){const r=this._domConverter.viewToDom(i,document);return this._htmlWriter.getHtml(r)}toView(i){const r=this._toDom(i);return this._domConverter.domToView(r)}_toDom(i){const r=this._domParser.parseFromString(i,"text/html"),a=r.createDocumentFragment(),c=r.body.childNodes;for(;c.length>0;)a.appendChild(c[0]);return a}}class Af{constructor(i){this.editor=i,this._components=new Map}*names(){for(const i of this._components.values())yield i.originalName}add(i,r){if(this.has(i))throw new W.b("componentfactory-item-exists: The item already exists in the component factory.",this,{name:i});this._components.set(Ju(i),{callback:r,originalName:i})}create(i){if(!this.has(i))throw new W.b("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:i});return this._components.get(Ju(i)).callback(this.editor.locale)}has(i){return this._components.has(Ju(i))}}function Ju(u){return String(u).toLowerCase()}class Ao{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(i){if(this._elements.has(i))throw new W.b("focusTracker-add-element-already-exist",this);this.listenTo(i,"focus",()=>this._focus(i),{useCapture:!0}),this.listenTo(i,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(i)}remove(i){i===this.focusedElement&&this._blur(i),this._elements.has(i)&&(this.stopListening(i),this._elements.delete(i))}destroy(){this.stopListening()}_focus(i){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=i,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}Fe(Ao,Fa),Fe(Ao,On);class Of{constructor(i){this.editor=i,this.componentFactory=new Af(i),this.focusTracker=new Ao,this._editableElementsMap=new Map,this.listenTo(i.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const i of this._editableElementsMap.values())i.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(i,r){this._editableElementsMap.set(i,r),r.ckeditorInstance||(r.ckeditorInstance=this.editor)}getEditableElement(i="main"){return this._editableElementsMap.get(i)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}Fe(Of,Re),T(15);const ri=new WeakMap;function g_(u){const{view:i,element:r,text:a,isDirectHost:c=!0}=u,d=i.document;ri.has(d)||(ri.set(d,new Map),d.registerPostFixer(f=>m_(d,f))),ri.get(d).set(r,{text:a,isDirectHost:c}),i.change(f=>m_(d,f))}function m_(u,i){const r=ri.get(u);let a=!1;for(const[c,d]of r)__(i,c,d)&&(a=!0);return a}function __(u,i,r){const{text:a,isDirectHost:c}=r,d=c?i:function(g){if(1===g.childCount){const _=g.getChild(0);if(_.is("element")&&!_.is("uiElement"))return _}return null}(i);let f=!1;return!!d&&(r.hostElement=d,d.getAttribute("data-placeholder")!==a&&(u.setAttribute("data-placeholder",a,d),f=!0),function(g){const _=g.document;if(!_)return!1;const b=!Array.from(g.getChildren()).some(k=>!k.is("uiElement"));if(!_.isFocused&&b)return!0;const y=_.selection.anchor;return!(!b||!y||y.parent===g)}(d)?(g=u,!(_=d).hasClass("ck-placeholder")&&(g.addClass("ck-placeholder",_),!0)&&(f=!0)):function C1(u,i){return!!i.hasClass("ck-placeholder")&&(u.removeClass("ck-placeholder",i),!0)}(u,d)&&(f=!0),f);var g,_}class Pf extends Of{constructor(i,r){var a;super(i),this.view=r,this._toolbarConfig=(a=i.config.get("toolbar"),Array.isArray(a)?{items:a}:a?Object.assign({items:[]},a):{items:[]})}get element(){return this.view.editable.element}init(){const r=this.view,a=this.editor.editing.view,c=r.editable,d=a.document.getRoot();c.name=d.rootName,r.render();const f=c.element;this.setEditableElement(c.name,f),this.focusTracker.add(f),c.bind("isFocused").to(this.focusTracker),a.attachDomRoot(f),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const i=this.view;this.editor.editing.view.detachDomRoot(i.editable.name),i.destroy(),super.destroy()}_initToolbar(){const i=this.editor,r=this.view,a=r.editable.element,c=i.editing.view,d=r.toolbar;r.panel.bind("isVisible").to(this.focusTracker,"isFocused"),this._toolbarConfig.viewportTopOffset&&(r.viewportTopOffset=this._toolbarConfig.viewportTopOffset),r.listenTo(i.ui,"update",()=>{r.panel.isVisible&&r.panel.pin({target:a,positions:r.panelPositions})}),d.fillFromConfig(this._toolbarConfig.items,this.componentFactory),function({origin:f,originKeystrokeHandler:g,originFocusTracker:_,toolbar:b,beforeFocus:y,afterBlur:k}){_.add(b.element),g.set("Alt+F10",(S,F)=>{_.isFocused&&!b.focusTracker.isFocused&&(y&&y(),b.focus(),F())}),b.keystrokes.set("Esc",(S,F)=>{b.focusTracker.isFocused&&(f.focus(),k&&k(),F())})}({origin:c,originFocusTracker:this.focusTracker,originKeystrokeHandler:i.keystrokes,toolbar:d})}_initPlaceholder(){const i=this.editor,r=i.editing.view,a=r.document.getRoot(),c=i.sourceElement,d=i.config.get("placeholder")||c&&"textarea"===c.tagName.toLowerCase()&&c.getAttribute("placeholder");d&&g_({view:r,element:a,text:d,isDirectHost:!1})}}class Yu extends Ni{constructor(i){super({idProperty:"viewUid"}),this.on("add",(r,a,c)=>{a.isRendered||a.render(),a.element&&this._parentElement&&this._parentElement.insertBefore(a.element,this._parentElement.children[c])}),this.on("remove",(r,a)=>{a.element&&this._parentElement&&a.element.remove()}),this.locale=i,this._parentElement=null}destroy(){this.map(i=>i.destroy())}setParent(i){this._parentElement=i}delegate(...i){if(!i.length||!i.every(r=>"string"==typeof r))throw new W.b("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this);return{to:r=>{for(const a of this)for(const c of i)a.delegate(c).to(r);this.on("add",(a,c)=>{for(const d of i)c.delegate(d).to(r)}),this.on("remove",(a,c)=>{for(const d of i)c.stopDelegating(d,r)})}}}}class fr{constructor(i){Object.assign(this,$a(si(i))),this._isRendered=!1,this._revertData=null}render(){const i=this._renderNode({intoFragment:!0});return this._isRendered=!0,i}apply(i){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:i,isApplying:!0,revertData:this._revertData}),i}revert(i){if(!this._revertData)throw new W.b("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,i]);this._revertTemplateFromNode(i,this._revertData)}*getViews(){yield*function*i(r){if(r.children)for(const a of r.children)Xu(a)?yield a:Zu(a)&&(yield*i(a))}(this)}static bind(i,r){return{to:(a,c)=>new v_({eventNameOrFunction:a,attribute:a,observable:i,emitter:r,callback:c}),if:(a,c,d)=>new b_({observable:i,emitter:r,attribute:a,valueIfTrue:c,callback:d})}}static extend(i,r){if(i._isRendered)throw new W.b("template-extend-render: Attempting to extend a template which has already been rendered.",[this,i]);!function a(c,d){if(d.attributes&&(c.attributes||(c.attributes={}),C_(c.attributes,d.attributes)),d.eventListeners&&(c.eventListeners||(c.eventListeners={}),C_(c.eventListeners,d.eventListeners)),d.text&&c.text.push(...d.text),d.children&&d.children.length){if(c.children.length!=d.children.length)throw new W.b("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",c);let f=0;for(const g of d.children)a(c.children[f++],g)}}(i,$a(si(r)))}_renderNode(i){let r;if(r=i.node?this.tag&&this.text:this.tag?this.text:!this.text,r)throw new W.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this);return this.text?this._renderText(i):this._renderElement(i)}_renderElement(i){let r=i.node;return r||(r=i.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(i),this._renderElementChildren(i),this._setUpListeners(i),r}_renderText(i){let r=i.node;return r?i.revertData.text=r.textContent:r=i.node=document.createTextNode(""),Qu(this.text)?this._bindToObservable({schema:this.text,updater:Nf(r),data:i}):r.textContent=this.text.join(""),r}_renderAttributes(i){let r,a,c,d;if(!this.attributes)return;const f=i.node,g=i.revertData;for(r in this.attributes)if(c=f.getAttribute(r),a=this.attributes[r],g&&(g.attributes[r]=c),d=$n(a[0])&&a[0].ns?a[0].ns:null,Qu(a)){const _=d?a[0].value:a;g&&Lf(r)&&_.unshift(c),this._bindToObservable({schema:_,updater:y_(f,r,d),data:i})}else"style"==r&&"string"!=typeof a[0]?this._renderStyleAttribute(a[0],i):(g&&c&&Lf(r)&&a.unshift(c),a=a.map(_=>_&&_.value||_).reduce((_,b)=>_.concat(b),[]).reduce(w_,""),ta(a)||f.setAttributeNS(d,r,a))}_renderStyleAttribute(i,r){const a=r.node;for(const c in i){const d=i[c];Qu(d)?this._bindToObservable({schema:[d],updater:If(a,c),data:r}):a.style[c]=d}}_renderElementChildren(i){const r=i.node,a=i.intoFragment?document.createDocumentFragment():r,c=i.isApplying;let d=0;for(const f of this.children)if(Ff(f)){if(!c){f.setParent(r);for(const g of f)a.appendChild(g.element)}}else if(Xu(f))c||(f.isRendered||f.render(),a.appendChild(f.element));else if(Hs(f))a.appendChild(f);else if(c){const g={children:[],bindings:[],attributes:{}};i.revertData.children.push(g),f._renderNode({node:a.childNodes[d++],isApplying:!0,revertData:g})}else a.appendChild(f.render());i.intoFragment&&r.appendChild(a)}_setUpListeners(i){if(this.eventListeners)for(const r in this.eventListeners){const a=this.eventListeners[r].map(c=>{const[d,f]=r.split("@");return c.activateDomEventListener(d,f,i)});i.revertData&&i.revertData.bindings.push(a)}}_bindToObservable({schema:i,updater:r,data:a}){const c=a.revertData;Ti(i,r,a);const d=i.filter(f=>!ta(f)).filter(f=>f.observable).map(f=>f.activateAttributeListener(i,r,a));c&&c.bindings.push(d)}_revertTemplateFromNode(i,r){for(const a of r.bindings)for(const c of a)c();if(r.text)i.textContent=r.text;else{for(const a in r.attributes){const c=r.attributes[a];null===c?i.removeAttribute(a):i.setAttribute(a,c)}for(let a=0;a<r.children.length;++a)this._revertTemplateFromNode(i.childNodes[a],r.children[a])}}}Fe(fr,Re);class fc{constructor(i){Object.assign(this,i)}getValue(i){const r=this.observable[this.attribute];return this.callback?this.callback(r,i):r}activateAttributeListener(i,r,a){const c=()=>Ti(i,r,a);return this.emitter.listenTo(this.observable,"change:"+this.attribute,c),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,c)}}}class v_ extends fc{activateDomEventListener(i,r,a){const c=(d,f)=>{r&&!f.target.matches(r)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(f):this.observable.fire(this.eventNameOrFunction,f))};return this.emitter.listenTo(a.node,i,c),()=>{this.emitter.stopListening(a.node,i,c)}}}class b_ extends fc{getValue(i){return!ta(super.getValue(i))&&(this.valueIfTrue||!0)}}function Qu(u){return!!u&&(u.value&&(u=u.value),Array.isArray(u)?u.some(Qu):u instanceof fc)}function Ti(u,i,{node:r}){let a=(d=r,u.map(f=>f instanceof fc?f.getValue(d):f));var d;a=1==u.length&&u[0]instanceof b_?a[0]:a.reduce(w_,""),ta(a)?i.remove():i.set(a)}function Nf(u){return{set(i){u.textContent=i},remove(){u.textContent=""}}}function y_(u,i,r){return{set(a){u.setAttributeNS(r,i,a)},remove(){u.removeAttributeNS(r,i)}}}function If(u,i){return{set(r){u.style[i]=r},remove(){u.style[i]=null}}}function si(u){return Qh(u,i=>{if(i&&(i instanceof fc||Zu(i)||Xu(i)||Ff(i)))return i})}function $a(u){if("string"==typeof u?u=function(i){return{text:[i]}}(u):u.text&&function(i){Array.isArray(i.text)||(i.text=[i.text])}(u),u.on&&(u.eventListeners=function(i){for(const r in i)Rf(i,r);return i}(u.on),delete u.on),!u.text){u.attributes&&function(r){for(const a in r)r[a].value&&(r[a].value=[].concat(r[a].value)),Rf(r,a)}(u.attributes);const i=[];if(u.children)if(Ff(u.children))i.push(u.children);else for(const r of u.children)Zu(r)||Xu(r)||Hs(r)?i.push(r):i.push(new fr(r));u.children=i}return u}function Rf(u,i){Array.isArray(u[i])||(u[i]=[u[i]])}function w_(u,i){return ta(i)?u:ta(u)?i:`${u} ${i}`}function C_(u,i){for(const r in i)u[r]?u[r].push(...i[r]):u[r]=i[r]}function ta(u){return!u&&0!==u}function Xu(u){return u instanceof st}function Zu(u){return u instanceof fr}function Ff(u){return u instanceof Yu}function Lf(u){return"class"==u||"style"==u}T(17);class st{constructor(i){this.element=null,this.isRendered=!1,this.locale=i,this.t=i&&i.t,this._viewCollections=new Ni,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(r,a)=>{a.locale=i}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=fr.bind(this,this)}createCollection(){const i=new Yu;return this._viewCollections.add(i),i}registerChild(i){Jt(i)||(i=[i]);for(const r of i)this._unboundChildren.add(r)}deregisterChild(i){Jt(i)||(i=[i]);for(const r of i)this._unboundChildren.remove(r)}setTemplate(i){this.template=new fr(i)}extendTemplate(i){fr.extend(this.template,i)}render(){if(this.isRendered)throw new W.b("ui-view-render-already-rendered: This View has already been rendered.",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(i=>i.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}Fe(st,Fa),Fe(st,On);var k_=function(u){return"string"==typeof u||!vi(u)&&qt(u)&&"[object String]"==et(u)};class Bf extends Yu{attachToDom(){this._bodyCollectionContainer=new fr({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let i=document.querySelector(".ck-body-wrapper");i||(i=function(r,a,c={},d=[]){const f=c&&c.xmlns,g=f?r.createElementNS(f,a):r.createElement(a);for(const _ in c)g.setAttribute(_,c[_]);!k_(d)&&Jt(d)||(d=[d]);for(let _ of d)k_(_)&&(_=r.createTextNode(_)),g.appendChild(_);return g}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(i)),i.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const i=document.querySelector(".ck-body-wrapper");i&&0==i.childElementCount&&i.remove()}}T(19);class Vf extends st{constructor(i){super(i),this.body=new Bf(i)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class k1 extends st{constructor(i,r,a){super(i),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:i.contentLanguage,dir:i.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=a,this._hasExternalElement=!!this._editableElement,this._editingView=r}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const i=this._editingView;function r(a){i.change(c=>{const d=i.document.getRoot(a.name);c.addClass(a.isFocused?"ck-focused":"ck-blurred",d),c.removeClass(a.isFocused?"ck-blurred":"ck-focused",d)})}i.isRenderingInProgress?function a(c){i.once("change:isRenderingInProgress",(d,f,g)=>{g?a(c):r(c)})}(this):r(this)}}class x_ extends k1{constructor(i,r,a){super(i,r,a),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const i=this._editingView,r=this.t;i.change(a=>{const c=i.document.getRoot(this.name);a.setAttribute("aria-label",r("dx",[this.name]),c)})}}function E_({element:u,target:i,positions:r,limiter:a,fitInViewport:c}){Ms(i)&&(i=i()),Ms(a)&&(a=a());const d=function(S){for(;S&&"html"!=S.tagName.toLowerCase();){if("static"!=ln.window.getComputedStyle(S).position)return S;S=S.parentElement}return null}(u.parentElement),f=new Yt(u),g=new Yt(i);let _,b;if(a||c){const S=a&&new Yt(a).getVisible(),F=c&&new Yt(ln.window);[b,_]=function($,G,Y,oe,ue){let we,qe,Nn=0,Gt=0;const vr=Y.getArea();return $.some(nr=>{const[Yi,wt]=na(nr,G,Y);let Io,br;if(oe)if(ue){const aa=oe.getIntersection(ue);Io=aa?aa.getIntersectionArea(wt):0}else Io=oe.getIntersectionArea(wt);function bs(){Gt=br,Nn=Io,we=wt,qe=Yi}return ue&&(br=ue.getIntersectionArea(wt)),ue&&!oe?br>Gt&&bs():!ue&&oe?Io>Nn&&bs():(br>Gt&&Io>=Nn||br>=Gt&&Io>Nn)&&bs(),Io===vr}),we?[qe,we]:null}(r,g,f,S,F)||na(r[0],g,f)}else[b,_]=na(r[0],g,f);let{left:y,top:k}=T_(_);if(d){const S=T_(new Yt(d)),F=Wm(d);y-=S.left,k-=S.top,y+=d.scrollLeft,k+=d.scrollTop,y-=F.left,k-=F.top}return{left:y,top:k,name:b}}function na(u,i,r){const{left:a,top:c,name:d}=u(i,r);return[d,r.clone().moveTo(a,c)]}function T_({left:u,top:i}){const{scrollX:r,scrollY:a}=ln.window;return{left:u+r,top:i+a}}function D_(u){return i=>i+u}T(21);const ed=D_("px"),td=ln.document.body;class cn extends st{constructor(i){super(i);const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",r.to("position",a=>`ck-balloon-panel_${a}`),r.if("isVisible","ck-balloon-panel_visible"),r.if("withArrow","ck-balloon-panel_with-arrow"),r.to("class")],style:{top:r.to("top",ed),left:r.to("left",ed)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(i){this.show();const r=cn.defaultPositions,a=Object.assign({},{element:this.element,positions:[r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast],limiter:td,fitInViewport:!0},i),c=cn._getOptimalPosition(a),d=parseInt(c.left),f=parseInt(c.top);Object.assign(this,{top:f,left:d,position:c.name})}pin(i){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(i):this._stopPinning()},this._startPinning(i),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(i){this.attachTo(i);const r=M_(i.target),a=i.limiter?M_(i.limiter):td;this.listenTo(ln.document,"scroll",(c,d)=>{const f=d.target,g=r&&f.contains(r),_=a&&f.contains(a);!g&&!_&&r&&a||this.attachTo(i)},{useCapture:!0}),this.listenTo(ln.window,"resize",()=>{this.attachTo(i)})}_stopPinning(){this.stopListening(ln.document,"scroll"),this.stopListening(ln.window,"resize")}}function M_(u){return ss(u)?u:Rr(u)?u.commonAncestorContainer:"function"==typeof u?M_(u()):null}function Ki(u,i){return u.top-i.height-cn.arrowVerticalOffset}function Qo(u){return u.bottom+cn.arrowVerticalOffset}cn.arrowHorizontalOffset=25,cn.arrowVerticalOffset=10,cn._getOptimalPosition=E_,cn.defaultPositions={northArrowSouth:(u,i)=>({top:Ki(u,i),left:u.left+u.width/2-i.width/2,name:"arrow_s"}),northArrowSouthEast:(u,i)=>({top:Ki(u,i),left:u.left+u.width/2-i.width+cn.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(u,i)=>({top:Ki(u,i),left:u.left+u.width/2-cn.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouth:(u,i)=>({top:Ki(u,i),left:u.left-i.width/2,name:"arrow_s"}),northWestArrowSouthWest:(u,i)=>({top:Ki(u,i),left:u.left-cn.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthEast:(u,i)=>({top:Ki(u,i),left:u.left-i.width+cn.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouth:(u,i)=>({top:Ki(u,i),left:u.right-i.width/2,name:"arrow_s"}),northEastArrowSouthEast:(u,i)=>({top:Ki(u,i),left:u.right-i.width+cn.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(u,i)=>({top:Ki(u,i),left:u.right-cn.arrowHorizontalOffset,name:"arrow_sw"}),southArrowNorth:(u,i)=>({top:Qo(u),left:u.left+u.width/2-i.width/2,name:"arrow_n"}),southArrowNorthEast:(u,i)=>({top:Qo(u),left:u.left+u.width/2-i.width+cn.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(u,i)=>({top:Qo(u),left:u.left+u.width/2-cn.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorth:(u,i)=>({top:Qo(u),left:u.left-i.width/2,name:"arrow_n"}),southWestArrowNorthWest:(u,i)=>({top:Qo(u),left:u.left-cn.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthEast:(u,i)=>({top:Qo(u),left:u.left-i.width+cn.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorth:(u,i)=>({top:Qo(u),left:u.right-i.width/2,name:"arrow_n"}),southEastArrowNorthEast:(u,i)=>({top:Qo(u),left:u.right-i.width+cn.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(u,i)=>({top:Qo(u),left:u.right-cn.arrowHorizontalOffset,name:"arrow_nw"})};class Ua{constructor(i){if(Object.assign(this,i),i.actions&&i.keystrokeHandler)for(const r in i.actions){let a=i.actions[r];"string"==typeof a&&(a=[a]);for(const c of a)i.keystrokeHandler.set(c,(d,f)=>{this[r](),f()})}}get first(){return this.focusables.find(jf)||null}get last(){return this.focusables.filter(jf).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let i=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((r,a)=>{const c=r.element===this.focusTracker.focusedElement;return c&&(i=a),c}),i)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(i){i&&i.focus()}_getFocusableItem(i){const r=this.current,a=this.focusables.length;if(!a)return null;if(null===r)return this[1===i?"first":"last"];let c=(r+a+i)%a;do{const d=this.focusables.get(c);if(jf(d))return d;c=(c+a+i)%a}while(c!==r);return null}}function jf(u){return!(!u.focus||"none"==ln.window.getComputedStyle(u.element).display)}class pc extends st{constructor(i){super(i),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class gn{constructor(i,r){gn._observerInstance||gn._createObserver(),this._element=i,this._callback=r,gn._addElementCallback(i,r),gn._observerInstance.observe(i)}destroy(){gn._deleteElementCallback(this._element,this._callback)}static _addElementCallback(i,r){gn._elementCallbacks||(gn._elementCallbacks=new Map);let a=gn._elementCallbacks.get(i);a||(a=new Set,gn._elementCallbacks.set(i,a)),a.add(r)}static _deleteElementCallback(i,r){const a=gn._getElementCallbacks(i);a&&(a.delete(r),a.size||(gn._elementCallbacks.delete(i),gn._observerInstance.unobserve(i))),gn._elementCallbacks&&!gn._elementCallbacks.size&&(gn._observerInstance=null,gn._elementCallbacks=null)}static _getElementCallbacks(i){return gn._elementCallbacks?gn._elementCallbacks.get(i):null}static _createObserver(){let i;i="function"==typeof ln.window.ResizeObserver?ln.window.ResizeObserver:S_,gn._observerInstance=new i(r=>{for(const a of r){const c=gn._getElementCallbacks(a.target);if(c)for(const d of c)d(a)}})}}gn._observerInstance=null,gn._elementCallbacks=null;class S_{constructor(i){this._callback=i,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(i){this._elements.add(i),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(i){this._elements.delete(i),this._previousRects.delete(i),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const i=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(i,100)};this.listenTo(ln.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(i,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const i=[];for(const r of this._elements)this._hasRectChanged(r)&&i.push({target:r,contentRect:this._previousRects.get(r)});i.length&&this._callback(i)}_hasRectChanged(i){if(!i.ownerDocument.body.contains(i))return!1;const r=new Yt(i),a=this._previousRects.get(i),c=!a||!a.isEqual(r);return this._previousRects.set(i,r),c}}Fe(S_,Fa);class x1 extends st{constructor(i){super(i);const r=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",r.to("position",a=>`ck-dropdown__panel_${a}`),r.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:r.to(a=>a.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const i=this.children.last;"function"==typeof i.focusLast?i.focusLast():i.focus()}}}T(23);class Ga extends st{constructor(i,r,a){super(i);const c=this.bindTemplate;this.buttonView=r,this.panelView=a,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.focusTracker=new Ao,this.keystrokes=new hr,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",c.to("class"),c.if("isEnabled","ck-disabled",d=>!d)],id:c.to("id"),"aria-describedby":c.to("ariaDescribedById")},children:[r,a]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{this.isOpen&&(this.panelView.position="auto"===this.panelPosition?Ga._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelPosition)}),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);const i=(r,a)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,a())};this.keystrokes.set("arrowdown",(r,a)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,a())}),this.keystrokes.set("arrowright",(r,a)=>{this.isOpen&&a()}),this.keystrokes.set("arrowleft",i),this.keystrokes.set("esc",i)}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:i,southWest:r,northEast:a,northWest:c}=Ga.defaultPanelPositions;return"ltr"===this.locale.uiLanguageDirection?[i,r,a,c]:[r,i,c,a]}}Ga.defaultPanelPositions={southEast:u=>({top:u.bottom,left:u.left,name:"se"}),southWest:(u,i)=>({top:u.bottom,left:u.left-i.width+u.width,name:"sw"}),northEast:(u,i)=>({top:u.top-i.height,left:u.left,name:"ne"}),northWest:(u,i)=>({top:u.bottom-i.height,left:u.left-i.width+u.width,name:"nw"})},Ga._getOptimalPosition=E_,T(25);class Hf extends st{constructor(){super();const i=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:i.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const i=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=i.getAttribute("viewBox");for(r&&(this.viewBox=r),this.element.innerHTML="";i.childNodes.length>0;)this.element.appendChild(i.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(i=>{i.style.fill=this.fillColor})}}T(27);class E1 extends st{constructor(i){super(i),this.set("text",""),this.set("position","s");const r=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",r.to("position",a=>"ck-tooltip_"+a),r.if("text","ck-hidden",a=>!a.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:r.to("text")}]}]})}}T(29);class Lt extends st{constructor(i){super(i);const r=this.bindTemplate,a=bi();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(a),this.iconView=new Hf,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",r.to("class"),r.if("isEnabled","ck-disabled",c=>!c),r.if("isVisible","ck-hidden",c=>!c),r.to("isOn",c=>c?"ck-on":"ck-off"),r.if("withText","ck-button_with-text"),r.if("withKeystroke","ck-button_with-keystroke")],type:r.to("type",c=>c||"button"),tabindex:r.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${a}`,"aria-disabled":r.if("isEnabled",!0,c=>!c),"aria-pressed":r.to("isOn",c=>!!this.isToggleable&&String(c))},children:this.children,on:{mousedown:r.to(c=>{c.preventDefault()}),click:r.to(c=>{this.isEnabled?this.fire("execute"):c.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const i=new E1;return i.bind("text").to(this,"_tooltipString"),i.bind("position").to(this,"tooltipPosition"),i}_createLabelView(i){const r=new st;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:this.bindTemplate.to("labelStyle"),id:`ck-editor__aria-label_${i}`},children:[{text:this.bindTemplate.to("label")}]}),r}_createKeystrokeView(){const i=new st;return i.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",r=>Bs(r))}]}),i}_getTooltipString(i,r,a){return i?"string"==typeof i?i:(a&&(a=Bs(a)),i instanceof Function?i(r,a):`${r}${a?` (${a})`:""}`):""}}var nd='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 111.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 111.06 1.06l-3.549 3.55a.75.75 0 01-1.168-.136L.941 4.523z"/></svg>';class zf extends Lt{constructor(i){super(i),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const i=new Hf;return i.content=nd,i.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),i}}T(31);class $f extends st{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new Ao,this.keystrokes=new hr,this._focusCycler=new Ua({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const i of this.items)this.focusTracker.add(i.element);this.items.on("add",(i,r)=>{this.focusTracker.add(r.element)}),this.items.on("remove",(i,r)=>{this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class T1 extends st{constructor(i){super(i),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class D1 extends st{constructor(i){super(i),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}T(33);class Uf extends Lt{constructor(i){super(i),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const i=new st;return i.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),i}}function Gf({emitter:u,activator:i,callback:r,contextElements:a}){u.listenTo(document,"mousedown",(c,{target:d})=>{if(i()){for(const f of a)if(f.contains(d))return;r()}})}function Di(u,i=zf){const r=new i(u),a=new x1(u),c=new Ga(u,r,a);return r.bind("isEnabled").to(c),r instanceof zf?r.bind("isOn").to(c,"isOpen"):r.arrowView.bind("isOn").to(c,"isOpen"),(f=d=c).on("render",()=>{Gf({emitter:f,activator:()=>f.isOpen,callback:()=>{f.isOpen=!1},contextElements:[f.element]})}),function(f){f.on("execute",g=>{g.source instanceof Uf||(f.isOpen=!1)})}(d),function(f){f.keystrokes.set("arrowdown",(g,_)=>{f.isOpen&&(f.panelView.focus(),_())}),f.keystrokes.set("arrowup",(g,_)=>{f.isOpen&&(f.panelView.focusLast(),_())})}(d),c;var d,f}function id(u,i){const r=u.locale,a=r.t,c=u.toolbarView=new qf(r);c.set("ariaLabel",a("co")),u.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),i.map(d=>c.items.add(d)),u.panelView.children.add(c),c.items.delegate("execute").to(u)}function gc(u,i){const r=u.locale,a=u.listView=new $f(r);a.items.bindTo(i).using(({type:c,model:d})=>{if("separator"===c)return new D1(r);if("button"===c||"switchbutton"===c){const f=new T1(r);let g;return g="button"===c?new Lt(r):new Uf(r),g.bind(...Object.keys(d)).to(d),g.delegate("execute").to(f),f.children.add(g),f}}),u.panelView.children.add(a),a.items.delegate("execute").to(u)}T(35),T(37),T(39);class qf extends st{constructor(i,r){super(i);const a=this.bindTemplate,c=this.t;var d;this.options=r||{},this.set("ariaLabel",c("cp")),this.items=this.createCollection(),this.focusTracker=new Ao,this.keystrokes=new hr,this.set("class"),this.set("isCompact",!1),this.itemsView=new ZE(i),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection(),this._focusCycler=new Ua({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar",a.to("class"),a.if("isCompact","ck-toolbar_compact")],role:"toolbar","aria-label":a.to("ariaLabel")},children:this.children,on:{mousedown:(d=this,d.bindTemplate.to(f=>{f.target===d.element&&f.preventDefault()}))}}),this._behavior=this.options.shouldGroupWhenFull?new M1(this):new od(this)}render(){super.render();for(const i of this.items)this.focusTracker.add(i.element);this.items.on("add",(i,r)=>{this.focusTracker.add(r.element)}),this.items.on("remove",(i,r)=>{this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(i,r){i.map(a=>{"|"==a?this.items.add(new pc):r.has(a)?this.items.add(r.create(a)):console.warn(Object(W.a)("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:a})})}}class ZE extends st{constructor(i){super(i),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class od{constructor(i){const r=i.bindTemplate;i.set("isVertical",!1),i.itemsView.children.bindTo(i.items).using(a=>a),i.focusables.bindTo(i.items).using(a=>a),i.extendTemplate({attributes:{class:[r.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class M1{constructor(i){this.viewChildren=i.children,this.viewFocusables=i.focusables,this.viewItemsView=i.itemsView,this.viewFocusTracker=i.focusTracker,this.viewLocale=i.locale,this.ungroupedItems=i.createCollection(),this.groupedItems=i.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,i.itemsView.children.bindTo(this.ungroupedItems).using(r=>r),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),i.children.on("add",this._updateFocusCycleableItems.bind(this)),i.children.on("remove",this._updateFocusCycleableItems.bind(this)),i.items.on("add",(r,a,c)=>{c>this.ungroupedItems.length?this.groupedItems.add(a,c-this.ungroupedItems.length):this.ungroupedItems.add(a,c),this._updateGrouping()}),i.items.on("remove",(r,a,c)=>{c>this.ungroupedItems.length?this.groupedItems.remove(a):this.ungroupedItems.remove(a),this._updateGrouping()}),i.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(i){this.viewElement=i.element,this._enableGroupingOnResize()}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;let i;for(;this._areItemsOverflowing;)this._groupLastItem(),i=!0;if(!i&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const i=this.viewElement,r=this.viewLocale.uiLanguageDirection,a=new Yt(i.lastChild),c=new Yt(i);if(!this.cachedPadding){const d=ln.window.getComputedStyle(i);this.cachedPadding=Number.parseInt(d["ltr"===r?"paddingRight":"paddingLeft"])}return"ltr"===r?a.right>c.right-this.cachedPadding:a.left<c.left+this.cachedPadding}_enableGroupingOnResize(){let i;this.resizeObserver=new gn(this.viewElement,r=>{i&&i===r.contentRect.width||(this._updateGrouping(),i=r.contentRect.width)}),this._updateGrouping()}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new pc),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const i=this.viewLocale,r=i.t,a=Di(i);return a.class="ck-toolbar__grouped-dropdown",a.panelPosition="ltr"===i.uiLanguageDirection?"sw":"se",id(a,[]),a.buttonView.set({label:r("cq"),tooltip:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}),a.toolbarView.items.bindTo(this.groupedItems).using(c=>c),a}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(i=>{this.viewFocusables.add(i)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class A_ extends Vf{constructor(i,r,a){super(i),this.toolbar=new qf(i),this.set("viewportTopOffset",0),this.toolbar.extendTemplate({attributes:{class:["ck-toolbar_floating"]}}),this.panel=new cn(i),this.panel.withArrow=!1,this.panelPositions=this._getPanelPositions(),this.panel.extendTemplate({attributes:{class:"ck-toolbar-container"}}),this.editable=new x_(i,r,a)}render(){super.render(),this.body.add(this.panel),this.registerChild(this.editable),this.panel.content.add(this.toolbar)}_getPanelPositionTop(i,r){let a;return a=i.top>r.height+this.viewportTopOffset?i.top-r.height:i.bottom>r.height+this.viewportTopOffset+50?this.viewportTopOffset:i.bottom,a}_getPanelPositions(){const i=[(r,a)=>({top:this._getPanelPositionTop(r,a),left:r.left,name:"toolbar_west"}),(r,a)=>({top:this._getPanelPositionTop(r,a),left:r.left+r.width-a.width,name:"toolbar_east"})];return"ltr"===this.locale.uiLanguageDirection?i:i.reverse()}}class rd extends y1{constructor(i,r){super(r),this.data.processor=new hc,this.model.document.createRoot(),ss(i)&&(this.sourceElement=i,function(c){const d=c.sourceElement;if(d){if(d.ckeditorInstance)throw new W.b("editor-source-element-already-used: The DOM element cannot be used to create multiple editor instances.",c);d.ckeditorInstance=c,c.once("destroy",()=>{delete d.ckeditorInstance})}}(this));const a=new A_(this.locale,this.editing.view,this.sourceElement);this.ui=new Pf(this,a),function(c){if(!Ms(c.updateSourceElement))throw new W.b("attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.",c);const d=c.sourceElement;if(d&&"textarea"===d.tagName.toLowerCase()&&d.form){let f;const g=d.form,_=()=>c.updateSourceElement();Ms(g.submit)&&(f=g.submit,g.submit=()=>{_(),f.apply(g)}),g.addEventListener("submit",_),c.on("destroy",()=>{g.removeEventListener("submit",_),f&&(g.submit=f)})}}(this)}destroy(){const i=this.getData();return this.ui.destroy(),super.destroy().then(()=>{this.sourceElement&&w1(this.sourceElement,i)})}static create(i,r={}){return new Promise(a=>{const c=ss(i);if(c&&"TEXTAREA"===i.tagName)throw new W.b("editor-wrong-element: This type of editor cannot be initialized inside <textarea> element.",null);const d=new this(i,r);a(d.initPlugins().then(()=>{d.ui.init()}).then(()=>{if(!c&&r.initialData)throw new W.b("editor-create-initial-data: The config.initialData option cannot be used together with initial data passed in Editor.create().",null);const f=r.initialData||(ss(g=i)?(_=g)instanceof HTMLTextAreaElement?_.value:_.innerHTML:g);var g,_;return d.data.init(f)}).then(()=>d.fire("ready")).then(()=>d))})}}Fe(rd,QE),Fe(rd,XE);class le{constructor(i){this.editor=i,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(i){this._disableStack.add(i),1==this._disableStack.size&&(this.on("set:isEnabled",sd,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(i){this._disableStack.delete(i),0==this._disableStack.size&&(this.off("set:isEnabled",sd),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function sd(u){u.return=!1,u.stop()}Fe(le,On);class O_{constructor(i){this.files=function(r){const a=r.files?Array.from(r.files):[],c=r.items?Array.from(r.items):[];return a.length?a:c.filter(d=>"file"===d.kind).map(d=>d.getAsFile())}(i),this._native=i}get types(){return this._native.types}getData(i){return this._native.getData(i)}setData(i,r){this._native.setData(i,r)}}class ad extends zs{constructor(i){super(i);const r=this.document;function a(c,d){d.preventDefault();const f=d.dropRange?[d.dropRange]:Array.from(r.selection.getRanges()),g=new Nl(r,"clipboardInput");r.fire(g,{dataTransfer:d.dataTransfer,targetRanges:f}),g.stop.called&&d.stopPropagation()}this.domEventType=["paste","copy","cut","drop","dragover"],this.listenTo(r,"paste",a,{priority:"low"}),this.listenTo(r,"drop",a,{priority:"low"})}onDomEvent(i){const r={dataTransfer:new O_(i.clipboardData?i.clipboardData:i.dataTransfer)};"drop"==i.type&&(r.dropRange=function(a,c){const d=c.target.ownerDocument,f=c.clientX,g=c.clientY;let _;return d.caretRangeFromPoint&&d.caretRangeFromPoint(f,g)?_=d.caretRangeFromPoint(f,g):c.rangeParent&&(_=d.createRange(),_.setStart(c.rangeParent,c.rangeOffset),_.collapse(!0)),_?a.domConverter.domRangeToView(_):a.document.selection.getFirstRange()}(this.view,i)),this.fire(i.type,i,r)}}const mc=["figcaption","li"];class _c extends le{static get pluginName(){return"Clipboard"}init(){const i=this.editor,r=i.model.document,a=i.editing.view,c=a.document;function d(f,g){const _=g.dataTransfer;g.preventDefault();const b=i.data.toView(i.model.getSelectedContent(r.selection));c.fire("clipboardOutput",{dataTransfer:_,content:b,method:f.name})}this._htmlDataProcessor=new hc,a.addObserver(ad),this.listenTo(c,"clipboardInput",f=>{i.isReadOnly&&f.stop()},{priority:"highest"}),this.listenTo(c,"clipboardInput",(f,g)=>{const _=g.dataTransfer;let b="";var y;_.getData("text/html")?b=_.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(S,F)=>1==F.length?" ":F):_.getData("text/plain")&&((y=(y=_.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(y=`<p>${y}</p>`),b=y),b=this._htmlDataProcessor.toView(b),this.fire("inputTransformation",{content:b,dataTransfer:_}),a.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(f,g)=>{if(!g.content.isEmpty){const b=this.editor.model,y=this.editor.data.toModel(g.content,"$clipboardHolder");if(0==y.childCount)return;b.insertContent(y)}},{priority:"low"}),this.listenTo(c,"copy",d,{priority:"low"}),this.listenTo(c,"cut",(f,g)=>{i.isReadOnly?g.preventDefault():d(f,g)},{priority:"low"}),this.listenTo(c,"clipboardOutput",(f,g)=>{g.content.isEmpty||(g.dataTransfer.setData("text/html",this._htmlDataProcessor.toData(g.content)),g.dataTransfer.setData("text/plain",function _(b){let y="";if(b.is("text")||b.is("textProxy"))y=b.data;else if(b.is("img")&&b.hasAttribute("alt"))y=b.getAttribute("alt");else{let k=null;for(const S of b.getChildren()){const F=_(S);k&&(k.is("containerElement")||S.is("containerElement"))&&(mc.includes(k.name)||mc.includes(S.name)?y+="\n":y+="\n\n"),y+=F,k=S}}return y}(g.content))),"cut"==g.method&&i.model.deleteContent(r.selection)},{priority:"low"})}}class yt{constructor(i){this.editor=i,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",r=>{this.isEnabled||r.stop()},{priority:"high"}),this.listenTo(i,"change:isReadOnly",(r,a,c)=>{c?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(i){this._disableStack.add(i),1==this._disableStack.size&&(this.on("set:isEnabled",ld,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(i){this._disableStack.delete(i),0==this._disableStack.size&&(this.off("set:isEnabled",ld),this.refresh())}execute(){}destroy(){this.stopListening()}}function ld(u){u.return=!1,u.stop()}function*cd(u,i){for(const r of i)r&&u.getAttributeProperties(r[0]).copyOnEnter&&(yield r)}Fe(yt,On);class vc extends yt{execute(){const i=this.editor.model,r=i.document;i.change(a=>{(function(c,d,f,g){const _=f.isCollapsed,b=f.getFirstRange(),y=b.start.parent,k=b.end.parent;if(g.isLimit(y)||g.isLimit(k))_||y!=k||c.deleteContent(f);else if(_){const S=cd(d.model.schema,f.getAttributes());P_(d,b.start),d.setSelectionAttribute(S)}else{const S=!(b.start.isAtStart&&b.end.isAtEnd),F=y==k;c.deleteContent(f,{leaveUnmerged:S}),S&&(F?P_(d,f.focus):d.setSelection(k,0))}})(this.editor.model,a,r.selection,i.schema),this.fire("afterExecute",{writer:a})})}}function P_(u,i){u.split(i),u.setSelection(i.parent.nextSibling,0)}class Wf extends Ir{constructor(i){super(i);const r=this.document;r.on("keydown",(a,c)=>{if(this.isEnabled&&c.keyCode==ct.enter){let d;r.once("enter",f=>d=f,{priority:"highest"}),r.fire("enter",new Fu(r,c.domEvent,{isSoft:c.shiftKey})),d&&d.stop.called&&a.stop()}})}observe(){}}class S1 extends le{static get pluginName(){return"Enter"}init(){const i=this.editor,r=i.editing.view,a=r.document;r.addObserver(Wf),i.commands.add("enter",new vc(i)),this.listenTo(a,"enter",(c,d)=>{d.preventDefault(),d.isSoft||(i.execute("enter"),r.scrollToTheSelection())},{priority:"low"})}}class A1 extends yt{execute(){const i=this.editor.model,r=i.document;i.change(a=>{(function(c,d,f){const g=f.isCollapsed,_=f.getFirstRange(),y=_.end.parent,k=_.start.parent==y;if(g){const S=cd(c.schema,f.getAttributes());Kf(c,d,_.end),d.removeSelectionAttribute(f.getAttributeKeys()),d.setSelectionAttribute(S)}else{const S=!(_.start.isAtStart&&_.end.isAtEnd);c.deleteContent(f,{leaveUnmerged:S}),k?Kf(c,d,f.focus):S&&d.setSelection(y,0)}})(i,a,r.selection),this.fire("afterExecute",{writer:a})})}refresh(){const i=this.editor.model;this.isEnabled=function(a,c){if(c.rangeCount>1)return!1;const d=c.anchor;if(!d||!a.checkChild(d,"softBreak"))return!1;const f=c.getFirstRange(),g=f.start.parent,_=f.end.parent;return!((bc(g,a)||bc(_,a))&&g!==_)}(i.schema,i.document.selection)}}function Kf(u,i,r){const a=i.createElement("softBreak");u.insertContent(a,r),i.setSelection(a,"after")}function bc(u,i){return!u.is("rootElement")&&(i.isLimit(u)||bc(u.parent,i))}class ud extends le{static get pluginName(){return"ShiftEnter"}init(){const i=this.editor,a=i.conversion,c=i.editing.view,d=c.document;i.model.schema.register("softBreak",{allowWhere:"$text",isInline:!0}),a.for("upcast").elementToElement({model:"softBreak",view:"br"}),a.for("downcast").elementToElement({model:"softBreak",view:(f,g)=>g.createEmptyElement("br")}),c.addObserver(Wf),i.commands.add("shiftEnter",new A1(i)),this.listenTo(d,"enter",(f,g)=>{g.preventDefault(),g.isSoft&&(i.execute("shiftEnter"),c.scrollToTheSelection())},{priority:"low"})}}class dd{constructor(i,r=20){this.model=i,this.size=0,this.limit=r,this.isLocked=!1,this._changeCallback=(a,c)=>{"transparent"!=c.type&&c!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(i){this.size+=i,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(i){this.isLocked&&!i||(this._batch=null,this.size=0)}}class ia extends yt{constructor(i,r){super(i),this._buffer=new dd(i.model,r),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(i={}){const r=this.editor.model,a=r.document,c=i.text||"",d=c.length,f=i.range||a.selection.getFirstRange(),g=i.resultRange;r.enqueueChange(this._buffer.batch,_=>{const b=f.isCollapsed;this._buffer.lock(),r.deleteContent(r.createSelection(f)),c&&r.insertContent(_.createText(c,a.selection.getAttributes()),f.start),g?_.setSelection(g):b&&_.setSelection(f.start.getShiftedBy(d)),this._buffer.unlock(),this._buffer.input(d),this._batches.add(this._buffer.batch)})}}const N_=[Nr("arrowUp"),Nr("arrowRight"),Nr("arrowDown"),Nr("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let u=112;u<=135;u++)N_.push(u);function P1(u){if(u.newChildren.length-u.oldChildren.length!=1)return;const i=function(a,c){const d=[];let f,g=0;return a.forEach(y=>{"equal"==y?(_(),g++):"insert"==y?(b("insert")?f.values.push(c[g]):(_(),f={type:"insert",index:g,values:[c[g]]}),g++):b("delete")?f.howMany++:(_(),f={type:"delete",index:g,howMany:1})}),_(),d;function _(){f&&(d.push(f),f=null)}function b(y){return f&&f.type==y}}(Vs(u.oldChildren,u.newChildren,N1),u.newChildren);if(i.length>1)return;const r=i[0];return r.values[0]&&r.values[0].is("text")?r:void 0}function N1(u,i){return u&&u.is("text")&&i&&i.is("text")?u.data===i.data:u===i}class Jf{constructor(i){this.editor=i,this.editing=this.editor.editing}handle(i,r){if(function(a){if(0==a.length)return!1;for(const c of a)if("children"===c.type&&!P1(c))return!0;return!1}(i))this._handleContainerChildrenMutations(i,r);else for(const a of i)this._handleTextMutation(a,r),this._handleTextNodeInsertion(a)}_handleContainerChildrenMutations(i,r){const a=function(Gt){const vr=Gt.map(nr=>nr.node).reduce((nr,Yi)=>nr.getCommonAncestor(Yi,{includeSelf:!0}));if(vr)return vr.getAncestors({includeSelf:!0,parentFirst:!0}).find(nr=>nr.is("containerElement")||nr.is("rootElement"))}(i);if(!a)return;const c=this.editor.editing.view.domConverter.mapViewToDom(a),d=new Kl,f=this.editor.data.toModel(d.domToView(c)).getChild(0),g=this.editor.editing.mapper.toModelElement(a);if(!g)return;const _=Array.from(f.getChildren()),b=Array.from(g.getChildren()),y=_[_.length-1],k=b[b.length-1];y&&y.is("softBreak")&&k&&!k.is("softBreak")&&_.pop();const S=this.editor.model.schema;if(!I_(_,S)||!I_(b,S))return;const F=_.map(Gt=>Gt.is("text")?Gt.data:"@").join("").replace(/\u00A0/g," "),$=b.map(Gt=>Gt.is("text")?Gt.data:"@").join("").replace(/\u00A0/g," ");if($===F)return;const G=Vs($,F),{firstChangeAt:Y,insertions:oe,deletions:ue}=Yf(G);let we=null;r&&(we=this.editing.mapper.toModelRange(r.getFirstRange()));const qe=F.substr(Y,oe),Nn=this.editor.model.createRange(this.editor.model.createPositionAt(g,Y),this.editor.model.createPositionAt(g,Y+ue));this.editor.execute("input",{text:qe,range:Nn,resultRange:we})}_handleTextMutation(i,r){if("text"!=i.type)return;const a=i.newText.replace(/\u00A0/g," "),c=i.oldText.replace(/\u00A0/g," ");if(c===a)return;const d=Vs(c,a),{firstChangeAt:f,insertions:g,deletions:_}=Yf(d);let b=null;r&&(b=this.editing.mapper.toModelRange(r.getFirstRange()));const y=this.editing.view.createPositionAt(i.node,f),k=this.editing.mapper.toModelPosition(y),S=this.editor.model.createRange(k,k.getShiftedBy(_)),F=a.substr(f,g);this.editor.execute("input",{text:F,range:S,resultRange:b})}_handleTextNodeInsertion(i){if("children"!=i.type)return;const r=P1(i),a=this.editing.view.createPositionAt(i.node,r.index),c=this.editing.mapper.toModelPosition(a);this.editor.execute("input",{text:r.values[0].data.replace(/\u00A0/g," "),range:this.editor.model.createRange(c)})}}function I_(u,i){return u.every(r=>i.isInline(r))}function Yf(u){let i=null,r=null;for(let d=0;d<u.length;d++)"equal"!=u[d]&&(i=null===i?d:i,r=d);let a=0,c=0;for(let d=i;d<=r;d++)"insert"!=u[d]&&a++,"delete"!=u[d]&&c++;return{insertions:c,deletions:a,firstChangeAt:i}}class hd extends le{static get pluginName(){return"Input"}init(){const i=this.editor,r=new ia(i,i.config.get("typing.undoStep")||20);var a;i.commands.add("input",r),function O1(u){let i=null;const r=u.model,a=u.editing.view,c=u.commands.get("input");function f(){const g=c.buffer;g.lock(),r.enqueueChange(g.batch,()=>{r.deleteContent(r.document.selection)}),g.unlock()}a.document.on(To_isAndroid?"beforeinput":"keydown",(g,_)=>function d(g){const _=r.document,b=a.document.isComposing,y=i&&i.isEqual(_.selection);var k;i=null,c.isEnabled&&((k=g).ctrlKey||N_.includes(k.keyCode)||_.selection.isCollapsed||b&&229===g.keyCode||!b&&229===g.keyCode&&y||f())}(_),{priority:"lowest"}),a.document.on("compositionstart",function(){const g=r.document,_=1!==g.selection.rangeCount||g.selection.getFirstRange().isFlat;g.selection.isCollapsed||_||f()},{priority:"lowest"}),a.document.on("compositionend",()=>{i=r.createSelection(r.document.selection)},{priority:"lowest"})}(i),(a=i).editing.view.document.on("mutations",(c,d,f)=>{new Jf(a).handle(d,f)})}isInput(i){return this.editor.commands.get("input")._batches.has(i)}}class fd extends yt{constructor(i,r){super(i),this.direction=r,this._buffer=new dd(i.model,i.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(i={}){const r=this.editor.model,a=r.document;r.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const d=c.createSelection(i.selection||a.selection),f=d.isCollapsed;if(d.isCollapsed&&r.modifySelection(d,{direction:this.direction,unit:i.unit}),this._shouldEntireContentBeReplacedWithParagraph(i.sequence||1))return void this._replaceEntireContentWithParagraph(c);if(d.isCollapsed)return;let g=0;d.getFirstRange().getMinimalFlatRanges().forEach(_=>{g+=cf(_.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),r.deleteContent(d,{doNotResetEntireContent:f}),this._buffer.input(g),c.setSelection(d),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(i){if(i>1)return!1;const r=this.editor.model,a=r.document.selection,c=r.schema.getLimitElement(a);if(!a.isCollapsed||!a.containsEntireContent(c)||!r.schema.checkChild(c,"paragraph"))return!1;const d=c.getChild(0);return!d||"paragraph"!==d.name}_replaceEntireContentWithParagraph(i){const r=this.editor.model,c=r.schema.getLimitElement(r.document.selection),d=i.createElement("paragraph");i.remove(i.createRangeIn(c)),i.insert(d,c),i.setSelection(d,0)}}class R_ extends Ir{constructor(i){super(i);const r=i.document;let a=0;function c(d,f,g){let _;r.once("delete",b=>_=b,{priority:Number.POSITIVE_INFINITY}),r.fire("delete",new Fu(r,f,g)),_&&_.stop.called&&d.stop()}r.on("keyup",(d,f)=>{f.keyCode!=ct.delete&&f.keyCode!=ct.backspace||(a=0)}),r.on("keydown",(d,f)=>{const g={};if(f.keyCode==ct.delete)g.direction="forward",g.unit="character";else{if(f.keyCode!=ct.backspace)return;g.direction="backward",g.unit="codePoint"}g.unit=(To_isMac?f.altKey:f.ctrlKey)?"word":g.unit,g.sequence=++a,c(d,f.domEvent,g)}),To_isAndroid&&r.on("beforeinput",(d,f)=>{if("deleteContentBackward"!=f.domEvent.inputType)return;const g={unit:"codepoint",direction:"backward",sequence:1},_=f.domTarget.ownerDocument.defaultView.getSelection();_.anchorNode==_.focusNode&&_.anchorOffset+1!=_.focusOffset&&(g.selectionToRemove=i.domConverter.domSelectionToView(_)),c(d,f.domEvent,g)})}observe(){}}class F_ extends le{static get pluginName(){return"Delete"}init(){const i=this.editor,r=i.editing.view,a=r.document;if(r.addObserver(R_),i.commands.add("forwardDelete",new fd(i,"forward")),i.commands.add("delete",new fd(i,"backward")),this.listenTo(a,"delete",(c,d)=>{const f={unit:d.unit,sequence:d.sequence};if(d.selectionToRemove){const g=i.model.createSelection(),_=[];for(const b of d.selectionToRemove.getRanges())_.push(i.editing.mapper.toModelRange(b));g.setTo(_),f.selection=g}i.execute("forward"==d.direction?"forwardDelete":"delete",f),d.preventDefault(),r.scrollToTheSelection()}),To_isAndroid){let c=null;this.listenTo(a,"delete",(d,f)=>{const g=f.domTarget.ownerDocument.defaultView.getSelection();c={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}},{priority:"lowest"}),this.listenTo(a,"keyup",(d,f)=>{if(c){const g=f.domTarget.ownerDocument.defaultView.getSelection();g.collapse(c.anchorNode,c.anchorOffset),g.extend(c.focusNode,c.focusOffset),c=null}})}}}class Qf extends le{static get requires(){return[hd,F_]}static get pluginName(){return"Typing"}}const Br=new Map;function At(u,i,r){let a=Br.get(u);a||(a=new Map,Br.set(u,a)),a.set(i,r)}function I1(u){return[u]}function L_(u,i,r={}){const a=function(c,d){const f=Br.get(c);return f&&f.has(d)?f.get(d):I1}(u.constructor,i.constructor);try{return a(u=u.clone(),i,r)}catch(c){throw c}}function R1(u,i,r){u=u.slice(),i=i.slice();const a=new F1(r.document,r.useRelations,r.forceWeakRemove);a.setOriginalOperations(u),a.setOriginalOperations(i);const c=a.originalOperations;if(0==u.length||0==i.length)return{operationsA:u,operationsB:i,originalOperations:c};const d=new WeakMap;for(const _ of u)d.set(_,0);const f={nextBaseVersionA:u[u.length-1].baseVersion+1,nextBaseVersionB:i[i.length-1].baseVersion+1,originalOperationsACount:u.length,originalOperationsBCount:i.length};let g=0;for(;g<u.length;){const _=u[g],b=d.get(_);if(b==i.length){g++;continue}const y=i[b],k=L_(_,y,a.getContext(_,y,!0)),S=L_(y,_,a.getContext(y,_,!1));a.updateRelation(_,y),a.setOriginalOperations(k,_),a.setOriginalOperations(S,y);for(const F of k)d.set(F,b+S.length);u.splice(g,1,...k),i.splice(b,1,...S)}if(r.padWithNoOps){const _=u.length-f.originalOperationsACount,b=i.length-f.originalOperationsBCount;Xo(u,b-_),Xo(i,_-b)}return Ji(u,f.nextBaseVersionB),Ji(i,f.nextBaseVersionA),{operationsA:u,operationsB:i,originalOperations:c}}class F1{constructor(i,r,a=!1){this.originalOperations=new Map,this._history=i.history,this._useRelations=r,this._forceWeakRemove=!!a,this._relations=new Map}setOriginalOperations(i,r=null){const a=r?this.originalOperations.get(r):null;for(const c of i)this.originalOperations.set(c,a||c)}updateRelation(i,r){switch(i.constructor){case St:switch(r.constructor){case ot:i.targetPosition.isEqual(r.sourcePosition)||r.movedRange.containsPosition(i.targetPosition)?this._setRelation(i,r,"insertAtSource"):i.targetPosition.isEqual(r.deletionPosition)?this._setRelation(i,r,"insertBetween"):i.targetPosition.isAfter(r.sourcePosition)&&this._setRelation(i,r,"moveTargetAfter");break;case St:i.targetPosition.isEqual(r.sourcePosition)||i.targetPosition.isBefore(r.sourcePosition)?this._setRelation(i,r,"insertBefore"):this._setRelation(i,r,"insertAfter")}break;case Vt:switch(r.constructor){case ot:i.splitPosition.isBefore(r.sourcePosition)&&this._setRelation(i,r,"splitBefore");break;case St:(i.splitPosition.isEqual(r.sourcePosition)||i.splitPosition.isBefore(r.sourcePosition))&&this._setRelation(i,r,"splitBefore")}break;case ot:switch(r.constructor){case ot:i.targetPosition.isEqual(r.sourcePosition)||this._setRelation(i,r,"mergeTargetNotMoved"),i.sourcePosition.isEqual(r.targetPosition)&&this._setRelation(i,r,"mergeSourceNotMoved"),i.sourcePosition.isEqual(r.sourcePosition)&&this._setRelation(i,r,"mergeSameElement");break;case Vt:i.sourcePosition.isEqual(r.splitPosition)&&this._setRelation(i,r,"splitAtSource")}break;case Wi:{const a=i.newRange;if(!a)return;switch(r.constructor){case St:{const c=ee._createFromPositionAndShift(r.sourcePosition,r.howMany),d=c.containsPosition(a.start)||c.start.isEqual(a.start),f=c.containsPosition(a.end)||c.end.isEqual(a.end);!d&&!f||c.containsRange(a)||this._setRelation(i,r,{side:d?"left":"right",path:d?a.start.path.slice():a.end.path.slice()});break}case ot:{const c=a.start.isEqual(r.targetPosition),d=a.start.isEqual(r.deletionPosition),f=a.end.isEqual(r.deletionPosition),g=a.end.isEqual(r.sourcePosition);(c||d||f||g)&&this._setRelation(i,r,{wasInLeftElement:c,wasStartBeforeMergedElement:d,wasEndBeforeMergedElement:f,wasInRightElement:g});break}}break}}}getContext(i,r,a){return{aIsStrong:a,aWasUndone:this._wasUndone(i),bWasUndone:this._wasUndone(r),abRelation:this._useRelations?this._getRelation(i,r):null,baRelation:this._useRelations?this._getRelation(r,i):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(i){const r=this.originalOperations.get(i);return r.wasUndone||this._history.isUndoneOperation(r)}_getRelation(i,r){const a=this.originalOperations.get(r),c=this._history.getUndoneOperation(a);if(!c)return null;const d=this.originalOperations.get(i),f=this._relations.get(d);return f&&f.get(c)||null}_setRelation(i,r,a){const c=this.originalOperations.get(i),d=this.originalOperations.get(r);let f=this._relations.get(c);f||(f=new Map,this._relations.set(c,f)),f.set(d,a)}}function Ji(u,i){for(const r of u)r.baseVersion=i++}function Xo(u,i){for(let r=0;r<i;r++)u.push(new oi(0))}function B_(u,i,r){const a=u.nodes.getNode(0).getAttribute(i);if(a==r)return null;const c=new ee(u.position,u.position.getShiftedBy(u.howMany));return new Bn(c,i,a,r,0)}function V_(u,i){return null===u.targetPosition._getTransformedByDeletion(i.sourcePosition,i.howMany)}function qa(u,i){const r=[];for(let a=0;a<u.length;a++){const c=u[a],d=new St(c.start,c.end.offset-c.start.offset,i,0);r.push(d);for(let f=a+1;f<u.length;f++)u[f]=u[f]._getTransformedByMove(d.sourcePosition,d.targetPosition,d.howMany)[0];i=i._getTransformedByMove(d.sourcePosition,d.targetPosition,d.howMany)}return r}At(Bn,Bn,(u,i,r)=>{if(u.key===i.key){const a=u.range.getDifference(i.range).map(d=>new Bn(d,u.key,u.oldValue,u.newValue,0)),c=u.range.getIntersection(i.range);return c&&r.aIsStrong&&a.push(new Bn(c,i.key,i.newValue,u.newValue,0)),0==a.length?[new oi(0)]:a}return[u]}),At(Bn,xn,(u,i)=>{if(u.range.start.hasSameParentAs(i.position)&&u.range.containsPosition(i.position)){const r=u.range._getTransformedByInsertion(i.position,i.howMany,!i.shouldReceiveAttributes).map(a=>new Bn(a,u.key,u.oldValue,u.newValue,u.baseVersion));if(i.shouldReceiveAttributes){const a=B_(i,u.key,u.oldValue);a&&r.unshift(a)}return r}return u.range=u.range._getTransformedByInsertion(i.position,i.howMany,!1)[0],[u]}),At(Bn,ot,(u,i)=>{const r=[];u.range.start.hasSameParentAs(i.deletionPosition)&&(u.range.containsPosition(i.deletionPosition)||u.range.start.isEqual(i.deletionPosition))&&r.push(ee._createFromPositionAndShift(i.graveyardPosition,1));const a=u.range._getTransformedByMergeOperation(i);return a.isCollapsed||r.push(a),r.map(c=>new Bn(c,u.key,u.oldValue,u.newValue,u.baseVersion))}),At(Bn,St,(u,i)=>function(r,a){const c=ee._createFromPositionAndShift(a.sourcePosition,a.howMany);let d=null,f=[];c.containsRange(r,!0)?d=r:r.start.hasSameParentAs(c.start)?(f=r.getDifference(c),d=r.getIntersection(c)):f=[r];const g=[];for(let _ of f){_=_._getTransformedByDeletion(a.sourcePosition,a.howMany);const b=a.getMovedRangeStart(),y=_.start.hasSameParentAs(b);_=_._getTransformedByInsertion(b,a.howMany,y),g.push(..._)}return d&&g.push(d._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany,!1)[0]),g}(u.range,i).map(r=>new Bn(r,u.key,u.oldValue,u.newValue,u.baseVersion))),At(Bn,Vt,(u,i)=>{if(u.range.end.isEqual(i.insertionPosition))return i.graveyardPosition||u.range.end.offset++,[u];if(u.range.start.hasSameParentAs(i.splitPosition)&&u.range.containsPosition(i.splitPosition)){const r=u.clone();return r.range=new ee(i.moveTargetPosition.clone(),u.range.end._getCombined(i.splitPosition,i.moveTargetPosition)),u.range.end=i.splitPosition.clone(),u.range.end.stickiness="toPrevious",[u,r]}return u.range=u.range._getTransformedBySplitOperation(i),[u]}),At(xn,Bn,(u,i)=>{const r=[u];if(u.shouldReceiveAttributes&&u.position.hasSameParentAs(i.range.start)&&i.range.containsPosition(u.position)){const a=B_(u,i.key,i.newValue);a&&r.push(a)}return r}),At(xn,xn,(u,i,r)=>(u.position.isEqual(i.position)&&r.aIsStrong||(u.position=u.position._getTransformedByInsertOperation(i)),[u])),At(xn,St,(u,i)=>(u.position=u.position._getTransformedByMoveOperation(i),[u])),At(xn,Vt,(u,i)=>(u.position=u.position._getTransformedBySplitOperation(i),[u])),At(xn,ot,(u,i)=>(u.position=u.position._getTransformedByMergeOperation(i),[u])),At(Wi,xn,(u,i)=>(u.oldRange&&(u.oldRange=u.oldRange._getTransformedByInsertOperation(i)[0]),u.newRange&&(u.newRange=u.newRange._getTransformedByInsertOperation(i)[0]),[u])),At(Wi,Wi,(u,i,r)=>{if(u.name==i.name){if(!r.aIsStrong)return[new oi(0)];u.oldRange=i.newRange?i.newRange.clone():null}return[u]}),At(Wi,ot,(u,i)=>(u.oldRange&&(u.oldRange=u.oldRange._getTransformedByMergeOperation(i)),u.newRange&&(u.newRange=u.newRange._getTransformedByMergeOperation(i)),[u])),At(Wi,St,(u,i,r)=>{if(u.oldRange&&(u.oldRange=ee._createFromRanges(u.oldRange._getTransformedByMoveOperation(i))),u.newRange){if(r.abRelation){const a=ee._createFromRanges(u.newRange._getTransformedByMoveOperation(i));if("left"==r.abRelation.side&&i.targetPosition.isEqual(u.newRange.start))return u.newRange.start.path=r.abRelation.path,u.newRange.end=a.end,[u];if("right"==r.abRelation.side&&i.targetPosition.isEqual(u.newRange.end))return u.newRange.start=a.start,u.newRange.end.path=r.abRelation.path,[u]}u.newRange=ee._createFromRanges(u.newRange._getTransformedByMoveOperation(i))}return[u]}),At(Wi,Vt,(u,i,r)=>{if(u.oldRange&&(u.oldRange=u.oldRange._getTransformedBySplitOperation(i)),u.newRange){if(r.abRelation){const a=u.newRange._getTransformedBySplitOperation(i);return u.newRange.start.isEqual(i.splitPosition)&&r.abRelation.wasStartBeforeMergedElement?u.newRange.start=se._createAt(i.insertionPosition):u.newRange.start.isEqual(i.splitPosition)&&!r.abRelation.wasInLeftElement&&(u.newRange.start=se._createAt(i.moveTargetPosition)),u.newRange.end=u.newRange.end.isEqual(i.splitPosition)&&r.abRelation.wasInRightElement?se._createAt(i.moveTargetPosition):u.newRange.end.isEqual(i.splitPosition)&&r.abRelation.wasEndBeforeMergedElement?se._createAt(i.insertionPosition):a.end,[u]}u.newRange=u.newRange._getTransformedBySplitOperation(i)}return[u]}),At(ot,xn,(u,i)=>(u.sourcePosition.hasSameParentAs(i.position)&&(u.howMany+=i.howMany),u.sourcePosition=u.sourcePosition._getTransformedByInsertOperation(i),u.targetPosition=u.targetPosition._getTransformedByInsertOperation(i),[u])),At(ot,ot,(u,i,r)=>{if(u.sourcePosition.isEqual(i.sourcePosition)&&u.targetPosition.isEqual(i.targetPosition)){if(r.bWasUndone){const a=i.graveyardPosition.path.slice();return a.push(0),u.sourcePosition=new se(i.graveyardPosition.root,a),u.howMany=0,[u]}return[new oi(0)]}if(u.sourcePosition.isEqual(i.sourcePosition)&&!u.targetPosition.isEqual(i.targetPosition)&&!r.bWasUndone&&"splitAtSource"!=r.abRelation){const a="$graveyard"==u.targetPosition.root.rootName,c="$graveyard"==i.targetPosition.root.rootName;if(c&&!a||(!a||c)&&r.aIsStrong){const f=i.targetPosition._getTransformedByMergeOperation(i),g=u.targetPosition._getTransformedByMergeOperation(i);return[new St(f,u.howMany,g,0)]}return[new oi(0)]}return u.sourcePosition.hasSameParentAs(i.targetPosition)&&(u.howMany+=i.howMany),u.sourcePosition=u.sourcePosition._getTransformedByMergeOperation(i),u.targetPosition=u.targetPosition._getTransformedByMergeOperation(i),u.graveyardPosition.isEqual(i.graveyardPosition)&&r.aIsStrong||(u.graveyardPosition=u.graveyardPosition._getTransformedByMergeOperation(i)),[u]}),At(ot,St,(u,i,r)=>{const a=ee._createFromPositionAndShift(i.sourcePosition,i.howMany);return"remove"==i.type&&!r.bWasUndone&&!r.forceWeakRemove&&u.deletionPosition.hasSameParentAs(i.sourcePosition)&&a.containsPosition(u.sourcePosition)?[new oi(0)]:(u.sourcePosition.hasSameParentAs(i.targetPosition)&&(u.howMany+=i.howMany),u.sourcePosition.hasSameParentAs(i.sourcePosition)&&(u.howMany-=i.howMany),u.sourcePosition=u.sourcePosition._getTransformedByMoveOperation(i),u.targetPosition=u.targetPosition._getTransformedByMoveOperation(i),u.graveyardPosition.isEqual(i.targetPosition)||(u.graveyardPosition=u.graveyardPosition._getTransformedByMoveOperation(i)),[u])}),At(ot,Vt,(u,i,r)=>{if(i.graveyardPosition&&(u.graveyardPosition=u.graveyardPosition._getTransformedByDeletion(i.graveyardPosition,1),u.deletionPosition.isEqual(i.graveyardPosition)&&(u.howMany=i.howMany)),u.targetPosition.isEqual(i.splitPosition)){const a=0!=i.howMany,c=i.graveyardPosition&&u.deletionPosition.isEqual(i.graveyardPosition);if(a||c||"mergeTargetNotMoved"==r.abRelation)return u.sourcePosition=u.sourcePosition._getTransformedBySplitOperation(i),[u]}if(u.sourcePosition.isEqual(i.splitPosition)){if("mergeSourceNotMoved"==r.abRelation)return u.howMany=0,u.targetPosition=u.targetPosition._getTransformedBySplitOperation(i),[u];if("mergeSameElement"==r.abRelation||u.sourcePosition.offset>0)return u.sourcePosition=i.moveTargetPosition.clone(),u.targetPosition=u.targetPosition._getTransformedBySplitOperation(i),[u]}return u.sourcePosition.hasSameParentAs(i.splitPosition)&&(u.howMany=i.splitPosition.offset),u.sourcePosition=u.sourcePosition._getTransformedBySplitOperation(i),u.targetPosition=u.targetPosition._getTransformedBySplitOperation(i),[u]}),At(St,xn,(u,i)=>{const r=ee._createFromPositionAndShift(u.sourcePosition,u.howMany)._getTransformedByInsertOperation(i,!1)[0];return u.sourcePosition=r.start,u.howMany=r.end.offset-r.start.offset,u.targetPosition.isEqual(i.position)||(u.targetPosition=u.targetPosition._getTransformedByInsertOperation(i)),[u]}),At(St,St,(u,i,r)=>{const a=ee._createFromPositionAndShift(u.sourcePosition,u.howMany),c=ee._createFromPositionAndShift(i.sourcePosition,i.howMany);let d,f=r.aIsStrong,g=!r.aIsStrong;if("insertBefore"==r.abRelation||"insertAfter"==r.baRelation?g=!0:"insertAfter"!=r.abRelation&&"insertBefore"!=r.baRelation||(g=!1),d=u.targetPosition.isEqual(i.targetPosition)&&g?u.targetPosition._getTransformedByDeletion(i.sourcePosition,i.howMany):u.targetPosition._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),V_(u,i)&&V_(i,u))return[i.getReversed()];if(a.containsPosition(i.targetPosition)&&a.containsRange(c,!0))return a.start=a.start._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),a.end=a.end._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),qa([a],d);if(c.containsPosition(u.targetPosition)&&c.containsRange(a,!0))return a.start=a.start._getCombined(i.sourcePosition,i.getMovedRangeStart()),a.end=a.end._getCombined(i.sourcePosition,i.getMovedRangeStart()),qa([a],d);const _=yi(u.sourcePosition.getParentPath(),i.sourcePosition.getParentPath());if("prefix"==_||"extension"==_)return a.start=a.start._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),a.end=a.end._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany),qa([a],d);"remove"!=u.type||"remove"==i.type||r.aWasUndone||r.forceWeakRemove?"remove"==u.type||"remove"!=i.type||r.bWasUndone||r.forceWeakRemove||(f=!1):f=!0;const b=[],y=a.getDifference(c);for(const S of y){S.start=S.start._getTransformedByDeletion(i.sourcePosition,i.howMany),S.end=S.end._getTransformedByDeletion(i.sourcePosition,i.howMany);const F="same"==yi(S.start.getParentPath(),i.getMovedRangeStart().getParentPath()),$=S._getTransformedByInsertion(i.getMovedRangeStart(),i.howMany,F);b.push(...$)}const k=a.getIntersection(c);return null!==k&&f&&(k.start=k.start._getCombined(i.sourcePosition,i.getMovedRangeStart()),k.end=k.end._getCombined(i.sourcePosition,i.getMovedRangeStart()),0===b.length?b.push(k):1==b.length?c.start.isBefore(a.start)||c.start.isEqual(a.start)?b.unshift(k):b.push(k):b.splice(1,0,k)),0===b.length?[new oi(u.baseVersion)]:qa(b,d)}),At(St,Vt,(u,i,r)=>{let a=u.targetPosition.clone();u.targetPosition.isEqual(i.insertionPosition)&&i.graveyardPosition&&"moveTargetAfter"!=r.abRelation||(a=u.targetPosition._getTransformedBySplitOperation(i));const c=ee._createFromPositionAndShift(u.sourcePosition,u.howMany);if(c.end.isEqual(i.insertionPosition))return i.graveyardPosition||u.howMany++,u.targetPosition=a,[u];if(c.start.hasSameParentAs(i.splitPosition)&&c.containsPosition(i.splitPosition)){let f=new ee(i.splitPosition,c.end);return f=f._getTransformedBySplitOperation(i),qa([new ee(c.start,i.splitPosition),f],a)}u.targetPosition.isEqual(i.splitPosition)&&"insertAtSource"==r.abRelation&&(a=i.moveTargetPosition),u.targetPosition.isEqual(i.insertionPosition)&&"insertBetween"==r.abRelation&&(a=u.targetPosition);const d=[c._getTransformedBySplitOperation(i)];if(i.graveyardPosition){const f=c.start.isEqual(i.graveyardPosition)||c.containsPosition(i.graveyardPosition);u.howMany>1&&f&&!r.aWasUndone&&d.push(ee._createFromPositionAndShift(i.insertionPosition,1))}return qa(d,a)}),At(St,ot,(u,i,r)=>{const a=ee._createFromPositionAndShift(u.sourcePosition,u.howMany);if(i.deletionPosition.hasSameParentAs(u.sourcePosition)&&a.containsPosition(i.sourcePosition))if("remove"!=u.type||r.forceWeakRemove){if(1==u.howMany)return r.bWasUndone?(u.sourcePosition=i.graveyardPosition.clone(),u.targetPosition=u.targetPosition._getTransformedByMergeOperation(i),[u]):[new oi(0)]}else if(!r.aWasUndone){const d=[];let f=i.graveyardPosition.clone(),g=i.targetPosition._getTransformedByMergeOperation(i);u.howMany>1&&(d.push(new St(u.sourcePosition,u.howMany-1,u.targetPosition,0)),f=f._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany-1),g=g._getTransformedByMove(u.sourcePosition,u.targetPosition,u.howMany-1));const _=i.deletionPosition._getCombined(u.sourcePosition,u.targetPosition),b=new St(f,1,_,0),y=b.getMovedRangeStart().path.slice();y.push(0);const k=new se(b.targetPosition.root,y);g=g._getTransformedByMove(f,_,1);const S=new St(g,i.howMany,k,0);return d.push(b),d.push(S),d}const c=ee._createFromPositionAndShift(u.sourcePosition,u.howMany)._getTransformedByMergeOperation(i);return u.sourcePosition=c.start,u.howMany=c.end.offset-c.start.offset,u.targetPosition=u.targetPosition._getTransformedByMergeOperation(i),[u]}),At(ie,xn,(u,i)=>(u.position=u.position._getTransformedByInsertOperation(i),[u])),At(ie,ot,(u,i)=>u.position.isEqual(i.deletionPosition)?(u.position=i.graveyardPosition.clone(),u.position.stickiness="toNext",[u]):(u.position=u.position._getTransformedByMergeOperation(i),[u])),At(ie,St,(u,i)=>(u.position=u.position._getTransformedByMoveOperation(i),[u])),At(ie,ie,(u,i,r)=>{if(u.position.isEqual(i.position)){if(!r.aIsStrong)return[new oi(0)];u.oldName=i.newName}return[u]}),At(ie,Vt,(u,i)=>{if("same"==yi(u.position.path,i.splitPosition.getParentPath())&&!i.graveyardPosition){const r=new ie(u.position.getShiftedBy(1),u.oldName,u.newName,0);return[u,r]}return u.position=u.position._getTransformedBySplitOperation(i),[u]}),At(dr,dr,(u,i,r)=>{if(u.root===i.root&&u.key===i.key){if(!r.aIsStrong||u.newValue===i.newValue)return[new oi(0)];u.oldValue=i.newValue}return[u]}),At(Vt,xn,(u,i)=>(u.splitPosition.hasSameParentAs(i.position)&&u.splitPosition.offset<i.position.offset&&(u.howMany+=i.howMany),u.splitPosition=u.splitPosition._getTransformedByInsertOperation(i),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),[u])),At(Vt,ot,(u,i,r)=>{if(!u.graveyardPosition&&!r.bWasUndone&&u.splitPosition.hasSameParentAs(i.sourcePosition)){const a=i.graveyardPosition.path.slice();a.push(0);const c=new se(i.graveyardPosition.root,a),d=Vt.getInsertionPosition(new se(i.graveyardPosition.root,a)),f=new Vt(c,0,null,0);return f.insertionPosition=d,u.splitPosition=u.splitPosition._getTransformedByMergeOperation(i),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),u.graveyardPosition=f.insertionPosition.clone(),u.graveyardPosition.stickiness="toNext",[f,u]}return u.splitPosition.hasSameParentAs(i.deletionPosition)&&!u.splitPosition.isAfter(i.deletionPosition)&&u.howMany--,u.splitPosition.hasSameParentAs(i.targetPosition)&&(u.howMany+=i.howMany),u.splitPosition=u.splitPosition._getTransformedByMergeOperation(i),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),u.graveyardPosition&&(u.graveyardPosition=u.graveyardPosition._getTransformedByMergeOperation(i)),[u]}),At(Vt,St,(u,i,r)=>{const a=ee._createFromPositionAndShift(i.sourcePosition,i.howMany);if(u.graveyardPosition){const c=a.start.isEqual(u.graveyardPosition)||a.containsPosition(u.graveyardPosition);if(!r.bWasUndone&&c){const d=u.splitPosition._getTransformedByMoveOperation(i),f=u.graveyardPosition._getTransformedByMoveOperation(i),g=f.path.slice();g.push(0);const _=new se(f.root,g);return[new St(d,u.howMany,_,0)]}u.graveyardPosition=u.graveyardPosition._getTransformedByMoveOperation(i)}return u.splitPosition.hasSameParentAs(i.sourcePosition)&&a.containsPosition(u.splitPosition)?(u.howMany-=i.howMany-(u.splitPosition.offset-i.sourcePosition.offset),u.splitPosition.hasSameParentAs(i.targetPosition)&&u.splitPosition.offset<i.targetPosition.offset&&(u.howMany+=i.howMany),u.splitPosition=i.sourcePosition.clone(),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),[u]):!u.splitPosition.isEqual(i.targetPosition)||"insertAtSource"!=r.baRelation&&"splitBefore"!=r.abRelation?(i.sourcePosition.isEqual(i.targetPosition)||(u.splitPosition.hasSameParentAs(i.sourcePosition)&&u.splitPosition.offset<=i.sourcePosition.offset&&(u.howMany-=i.howMany),u.splitPosition.hasSameParentAs(i.targetPosition)&&u.splitPosition.offset<i.targetPosition.offset&&(u.howMany+=i.howMany)),u.splitPosition.stickiness="toNone",u.splitPosition=u.splitPosition._getTransformedByMoveOperation(i),u.splitPosition.stickiness="toNext",u.insertionPosition=u.graveyardPosition?u.insertionPosition._getTransformedByMoveOperation(i):Vt.getInsertionPosition(u.splitPosition),[u]):(u.howMany+=i.howMany,u.splitPosition=u.splitPosition._getTransformedByDeletion(i.sourcePosition,i.howMany),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),[u])}),At(Vt,Vt,(u,i,r)=>{if(u.splitPosition.isEqual(i.splitPosition)){if(!u.graveyardPosition&&!i.graveyardPosition)return[new oi(0)];if(u.graveyardPosition&&i.graveyardPosition&&u.graveyardPosition.isEqual(i.graveyardPosition))return[new oi(0)];if("splitBefore"==r.abRelation)return u.howMany=0,u.graveyardPosition=u.graveyardPosition._getTransformedBySplitOperation(i),[u]}if(u.graveyardPosition&&i.graveyardPosition&&u.graveyardPosition.isEqual(i.graveyardPosition)){const a="$graveyard"==u.splitPosition.root.rootName,c="$graveyard"==i.splitPosition.root.rootName;if(c&&!a||(!a||c)&&r.aIsStrong){const f=[];return i.howMany&&f.push(new St(i.moveTargetPosition,i.howMany,i.splitPosition,0)),u.howMany&&f.push(new St(u.splitPosition,u.howMany,u.moveTargetPosition,0)),f}return[new oi(0)]}if(u.graveyardPosition&&(u.graveyardPosition=u.graveyardPosition._getTransformedBySplitOperation(i)),u.splitPosition.isEqual(i.insertionPosition)&&"splitBefore"==r.abRelation)return u.howMany++,[u];if(i.splitPosition.isEqual(u.insertionPosition)&&"splitBefore"==r.baRelation){const a=i.insertionPosition.path.slice();a.push(0);const c=new se(i.insertionPosition.root,a);return[u,new St(u.insertionPosition,1,c,0)]}return u.splitPosition.hasSameParentAs(i.splitPosition)&&u.splitPosition.offset<i.splitPosition.offset&&(u.howMany-=i.howMany),u.splitPosition=u.splitPosition._getTransformedBySplitOperation(i),u.insertionPosition=Vt.getInsertionPosition(u.splitPosition),[u]});class j_ extends yt{constructor(i){super(i),this._stack=[],this._createdBatches=new WeakSet,this.refresh()}refresh(){this.isEnabled=this._stack.length>0}addBatch(i){const r=this.editor.model.document.selection,a={ranges:r.hasOwnRange?Array.from(r.getRanges()):[],isBackward:r.isBackward};this._stack.push({batch:i,selection:a}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(i,r,a){const c=this.editor.model,d=c.document,f=[];for(const g of i){const _=L1(g,a).find(b=>b.start.root!=d.graveyard);_&&f.push(_)}f.length&&c.change(g=>{g.setSelection(f,{backward:r})})}_undo(i,r){const a=this.editor.model,c=a.document;this._createdBatches.add(r);const d=i.operations.slice().filter(f=>f.isDocumentOperation);d.reverse();for(const f of d){const _=Array.from(c.history.getOperations(f.baseVersion+1)),b=R1([f.getReversed()],_,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const y of b)r.addOperation(y),a.applyOperation(y),c.history.setOperationAsUndone(f,y)}}}function L1(u,i){const r=u.getTransformedByOperations(i);r.sort((a,c)=>a.start.isBefore(c.start)?-1:1);for(let a=1;a<r.length;a++){const c=r[a-1],d=r[a];c.end.isTouching(d.start)&&(c.end=d.end,r.splice(a,1),a--)}return r}class B1 extends j_{execute(i=null){const r=i?this._stack.findIndex(d=>d.batch==i):this._stack.length-1,a=this._stack.splice(r,1)[0],c=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(c,()=>{this._undo(a.batch,c);const d=this.editor.model.document.history.getOperations(a.batch.baseVersion);this._restoreSelection(a.selection.ranges,a.selection.isBackward,d),this.fire("revert",a.batch,c)}),this.refresh()}}class H_ extends j_{execute(){const i=this._stack.pop(),r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,()=>{const c=this.editor.model.document.history.getOperations(i.batch.operations[i.batch.operations.length-1].baseVersion+1);this._restoreSelection(i.selection.ranges,i.selection.isBackward,c),this._undo(i.batch,r)}),this.refresh()}}class V1 extends le{static get pluginName(){return"UndoEditing"}constructor(i){super(i),this._batchRegistry=new WeakSet}init(){const i=this.editor;this._undoCommand=new B1(i),this._redoCommand=new H_(i),i.commands.add("undo",this._undoCommand),i.commands.add("redo",this._redoCommand),this.listenTo(i.model,"applyOperation",(r,a)=>{const c=a[0];if(!c.isDocumentOperation)return;const d=c.batch,f=this._redoCommand._createdBatches.has(d),g=this._undoCommand._createdBatches.has(d);this._batchRegistry.has(d)||"transparent"==d.type&&!f&&!g||(f?this._undoCommand.addBatch(d):g||(this._undoCommand.addBatch(d),this._redoCommand.clearStack()),this._batchRegistry.add(d))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(r,a,c)=>{this._redoCommand.addBatch(c)}),i.keystrokes.set("CTRL+Z","undo"),i.keystrokes.set("CTRL+Y","redo"),i.keystrokes.set("CTRL+SHIFT+Z","redo")}}var z_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 01-.965 1.149l-3.788-3.18a.747.747 0 01-.21-.284.75.75 0 01.17-.945L6.23 4.762a.75.75 0 11.964 1.15L4.863 7.866h8.917A.75.75 0 0114 7.9a4 4 0 11-1.477 7.718l.344-1.489a2.5 2.5 0 101.094-4.73l.008-.032H5.042z"/></svg>',U_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 00.965 1.149l3.788-3.18a.747.747 0 00.21-.284.75.75 0 00-.17-.945L13.77 4.762a.75.75 0 10-.964 1.15l2.331 1.955H6.22A.75.75 0 006 7.9a4 4 0 101.477 7.718l-.344-1.489A2.5 2.5 0 116.039 9.4l-.008-.032h8.927z"/></svg>';class j1 extends le{init(){const i=this.editor,r=i.locale,a=i.t,c="ltr"==r.uiLanguageDirection?z_:U_,d="ltr"==r.uiLanguageDirection?U_:z_;this._addButton("undo",a("do"),"CTRL+Z",c),this._addButton("redo",a("dp"),"CTRL+Y",d)}_addButton(i,r,a,c){const d=this.editor;d.ui.componentFactory.add(i,f=>{const g=d.commands.get(i),_=new Lt(f);return _.set({label:r,icon:c,keystroke:a,tooltip:!0}),_.bind("isEnabled").to(g,"isEnabled"),this.listenTo(_,"execute",()=>{d.execute(i),d.editing.view.focus()}),_})}}class pd extends le{static get requires(){return[V1,j1]}static get pluginName(){return"Undo"}}class Zo{constructor(i){this.context=i}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}Fe(Zo,On);class Wa extends Zo{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Ni({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(i){if("string"!=typeof i)throw new W.b("pendingactions-add-invalid-message: The message must be a string.",this);const r=Object.create(On);return r.set("message",i),this._actions.add(r),this.hasAny=!0,r}remove(i){this._actions.remove(i),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class Xf{constructor(){const i=new window.FileReader;this._reader=i,this._data=void 0,this.set("loaded",0),i.onprogress=r=>{this.loaded=r.loaded}}get error(){return this._reader.error}get data(){return this._data}read(i){const r=this._reader;return this.total=i.size,new Promise((a,c)=>{r.onload=()=>{const d=r.result;this._data=d,a(d)},r.onerror=()=>{c("error")},r.onabort=()=>{c("aborted")},this._reader.readAsDataURL(i)})}abort(){this._reader.abort()}}Fe(Xf,On);class er extends le{static get pluginName(){return"FileRepository"}static get requires(){return[Wa]}init(){this.loaders=new Ni,this.loaders.on("add",()=>this._updatePendingAction()),this.loaders.on("remove",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,r)=>r?i/r*100:0)}getLoader(i){return this._loadersMap.get(i)||null}createLoader(i){if(!this.createUploadAdapter)return console.warn(Object(W.a)("filerepository-no-upload-adapter: Upload adapter is not defined.")),null;const r=new gd(Promise.resolve(i),this.createUploadAdapter);return this.loaders.add(r),this._loadersMap.set(i,r),i instanceof Promise&&r.file.then(a=>{this._loadersMap.set(a,r)}).catch(()=>{}),r.on("change:uploaded",()=>{let a=0;for(const c of this.loaders)a+=c.uploaded;this.uploaded=a}),r.on("change:uploadTotal",()=>{let a=0;for(const c of this.loaders)c.uploadTotal&&(a+=c.uploadTotal);this.uploadTotal=a}),r}destroyLoader(i){const r=i instanceof gd?i:this.getLoader(i);r._destroy(),this.loaders.remove(r),this._loadersMap.forEach((a,c)=>{a===r&&this._loadersMap.delete(c)})}_updatePendingAction(){const i=this.editor.plugins.get(Wa);if(this.loaders.length){if(!this._pendingAction){const r=this.editor.t,a=c=>`${r("e")} ${parseInt(c)}%.`;this._pendingAction=i.add(a(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",a)}}else i.remove(this._pendingAction),this._pendingAction=null}}Fe(er,On);class gd{constructor(i,r){this.id=bi(),this._filePromiseWrapper=this._createFilePromiseWrapper(i),this._adapter=r(this),this._reader=new Xf,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(a,c)=>c?a/c*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(i=>this._filePromiseWrapper?i:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new W.b("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this);return this.status="reading",this.file.then(i=>this._reader.read(i)).then(i=>(this.status="idle",i)).catch(i=>{throw"aborted"===i?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:i)})}upload(){if("idle"!=this.status)throw new W.b("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(i=>(this.uploadResponse=i,this.status="idle",i)).catch(i=>{throw"aborted"===this.status?"aborted":(this.status="error",i)})}abort(){const i=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==i?this._reader.abort():"uploading"==i&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(i){const r={};return r.promise=new Promise((a,c)=>{r.rejecter=c,r.isFulfilled=!1,i.then(d=>{r.isFulfilled=!0,a(d)}).catch(d=>{r.isFulfilled=!0,c(d)})}),r}}Fe(gd,On);class tT{constructor(i,r,a){this.loader=i,this.url=r,this.t=a}upload(){return this.loader.file.then(i=>new Promise((r,a)=>{this._initRequest(),this._initListeners(r,a,i),this._sendRequest(i)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const i=this.xhr=new XMLHttpRequest;i.open("POST",this.url,!0),i.responseType="json"}_initListeners(i,r,a){const c=this.xhr,d=this.loader,f=(0,this.t)("a")+` ${a.name}.`;c.addEventListener("error",()=>r(f)),c.addEventListener("abort",()=>r()),c.addEventListener("load",()=>{const g=c.response;if(!g||!g.uploaded)return r(g&&g.error&&g.error.message?g.error.message:f);i({default:g.url})}),c.upload&&c.upload.addEventListener("progress",g=>{g.lengthComputable&&(d.uploadTotal=g.total,d.uploaded=g.loaded)})}_sendRequest(i){const r=new FormData;r.append("upload",i),r.append("ckCsrfToken",function eT(){let u=function(a){a=a.toLowerCase();const c=document.cookie.split(";");for(const d of c){const f=d.split("=");if(decodeURIComponent(f[0].trim().toLowerCase())===a)return decodeURIComponent(f[1])}return null}("ckCsrfToken");var r;return u&&40==u.length||(u=function(a){let c="";const d=new Uint8Array(40);window.crypto.getRandomValues(d);for(let f=0;f<d.length;f++){const g="abcdefghijklmnopqrstuvwxyz0123456789".charAt(d[f]%36);c+=Math.random()>.5?g.toUpperCase():g}return c}(),r=u,document.cookie=encodeURIComponent("ckCsrfToken")+"="+encodeURIComponent(r)+";path=/"),u}()),this.xhr.send(r)}}class Ka extends yt{constructor(i,r){super(i),this.attributeKey=r}refresh(){const i=this.editor.model,r=i.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=i.schema.checkAttributeInSelection(r.selection,this.attributeKey)}execute(i={}){const r=this.editor.model,a=r.document.selection,c=void 0===i.forceValue?!this.value:i.forceValue;r.change(d=>{if(a.isCollapsed)c?d.setSelectionAttribute(this.attributeKey,!0):d.removeSelectionAttribute(this.attributeKey);else{const f=r.schema.getValidRanges(a.getRanges(),this.attributeKey);for(const g of f)c?d.setAttribute(this.attributeKey,c,g):d.removeAttribute(this.attributeKey,g)}})}_getValueFromFirstAllowedNode(){const i=this.editor.model,r=i.schema,a=i.document.selection;if(a.isCollapsed)return a.hasAttribute(this.attributeKey);for(const c of a.getRanges())for(const d of c.getItems())if(r.checkAttribute(d,this.attributeKey))return d.hasAttribute(this.attributeKey);return!1}}class Zf extends le{static get pluginName(){return"BoldEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"bold"}),i.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",r=>{const a=r.getStyle("font-weight");return a?"bold"==a||Number(a)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),i.commands.add("bold",new Ka(i,"bold")),i.keystrokes.set("CTRL+B","bold")}}class ep extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("bold",a=>{const c=i.commands.get("bold"),d=new Lt(a);return d.set({label:r("f"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 01.808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 01-2.296 3.504 6.1 6.1 0 01-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 00.91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("bold"),i.editing.view.focus()}),d})}}class nT extends le{static get pluginName(){return"ItalicEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"italic"}),i.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),i.commands.add("italic",new Ka(i,"italic")),i.keystrokes.set("CTRL+I","italic")}}class iT extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("italic",a=>{const c=i.commands.get("italic"),d=new Lt(a);return d.set({label:r("g"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 110 1.2H5.304a.6.6 0 010-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 00-.281-.823 1.12 1.12 0 00-.442-.296H8.15a.6.6 0 010-1.2h6.443a.6.6 0 110 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("italic"),i.editing.view.focus()}),d})}}class G_ extends le{static get pluginName(){return"UnderlineEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"underline"}),i.model.schema.setAttributeProperties("underline",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"underline",view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),i.commands.add("underline",new Ka(i,"underline")),i.keystrokes.set("CTRL+U","underline")}}class H1 extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("underline",a=>{const c=i.commands.get("underline"),d=new Lt(a);return d.set({label:r("h"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("underline"),i.editing.view.focus()}),d})}}class z1 extends le{static get pluginName(){return"StrikethroughEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"strikethrough"}),i.model.schema.setAttributeProperties("strikethrough",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"strikethrough",view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),i.commands.add("strikethrough",new Ka(i,"strikethrough")),i.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}class $1 extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("strikethrough",a=>{const c=i.commands.get("strikethrough"),d=new Lt(a);return d.set({label:r("i"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 01-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 01-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9L6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 014.7 0 4 4 0 011.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 00-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("strikethrough"),i.editing.view.focus()}),d})}}class U1 extends le{static get pluginName(){return"SubscriptEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"subscript"}),i.model.schema.setAttributeProperties("subscript",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"subscript",view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),i.commands.add("subscript",new Ka(i,"subscript"))}}class q_ extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("subscript",a=>{const c=i.commands.get("subscript"),d=new Lt(a);return d.set({label:r("j"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.03 10.349l3.818-3.819a.8.8 0 111.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 11-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 11-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 113.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 01.201.413.54.54 0 01-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 01-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 01.288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 00-.554-.917 1.197 1.197 0 00-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 00-.164.39 1.609 1.609 0 01-.258.488c-.096.114-.237.17-.423.17a.558.558 0 01-.405-.156.568.568 0 01-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 011.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 011.004 1.032 1.984 1.984 0 01-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 00-.24.309z"/></svg>',tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("subscript"),i.editing.view.focus()}),d})}}class md extends le{static get pluginName(){return"SuperscriptEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"superscript"}),i.model.schema.setAttributeProperties("superscript",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"superscript",view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),i.commands.add("superscript",new Ka(i,"superscript"))}}class W_ extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("superscript",a=>{const c=i.commands.get("superscript"),d=new Lt(a);return d.set({label:r("k"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 01.201.413.54.54 0 01-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 01-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 01.288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 00-.554-.917 1.197 1.197 0 00-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 00-.164.39 1.609 1.609 0 01-.258.488c-.096.114-.237.17-.423.17a.558.558 0 01-.405-.156.568.568 0 01-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 011.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 011.004 1.032 1.984 1.984 0 01-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 00-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 111.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 11-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 11-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 113.212 6.53l3.818 3.82z"/></svg>',tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("superscript"),i.editing.view.focus()}),d})}}class tp extends le{static get pluginName(){return"CodeEditing"}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"code"}),i.model.schema.setAttributeProperties("code",{isFormatting:!0,copyOnEnter:!0}),i.conversion.attributeToElement({model:"code",view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),i.commands.add("code",new Ka(i,"code"))}}T(11);class G1 extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("code",a=>{const c=i.commands.get("code"),d=new Lt(a);return d.set({label:r("l"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.5 5.7l5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 01.4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 00-.3.1z"/></svg>',tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("code"),i.editing.view.focus()}),d})}}function at(u){const i=u.next();return i.done?null:i.value}class Bt extends yt{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(i={}){const r=this.editor.model,a=r.schema,d=Array.from(r.document.selection.getSelectedBlocks()),f=void 0===i.forceValue?!this.value:i.forceValue;r.change(g=>{if(f){const _=d.filter(b=>_d(b)||np(a,b));this._applyQuote(g,_)}else this._removeQuote(g,d.filter(_d))})}_getValue(){const i=at(this.editor.model.document.selection.getSelectedBlocks());return!(!i||!_d(i))}_checkEnabled(){if(this.value)return!0;const r=this.editor.model.schema,a=at(this.editor.model.document.selection.getSelectedBlocks());return!!a&&np(r,a)}_removeQuote(i,r){vd(i,r).reverse().forEach(a=>{if(a.start.isAtStart&&a.end.isAtEnd)return void i.unwrap(a.start.parent);if(a.start.isAtStart){const d=i.createPositionBefore(a.start.parent);return void i.move(a,d)}a.end.isAtEnd||i.split(a.end);const c=i.createPositionAfter(a.end.parent);i.move(a,c)})}_applyQuote(i,r){const a=[];vd(i,r).reverse().forEach(c=>{let d=_d(c.start);d||(d=i.createElement("blockQuote"),i.wrap(c,d)),a.push(d)}),a.reverse().reduce((c,d)=>c.nextSibling==d?(i.merge(i.createPositionAfter(c)),c):d)}}function _d(u){return"blockQuote"==u.parent.name?u.parent:null}function vd(u,i){let r,a=0;const c=[];for(;a<i.length;){const d=i[a],f=i[a+1];r||(r=u.createPositionBefore(d)),f&&d.nextSibling==f||(c.push(u.createRange(r,u.createPositionAfter(d))),r=null),a++}return c}function np(u,i){const r=u.checkChild(i.parent,"blockQuote"),a=u.checkChild(["$root","blockQuote"],i);return r&&a}class q1 extends le{static get pluginName(){return"BlockQuoteEditing"}init(){const i=this.editor,r=i.model.schema;i.commands.add("blockQuote",new Bt(i)),r.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),r.addChildCheck((a,c)=>{if(a.endsWith("blockQuote")&&"blockQuote"==c.name)return!1}),i.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),i.model.document.registerPostFixer(a=>{const c=i.model.document.differ.getChanges();for(const d of c)if("insert"==d.type){const f=d.position.nodeAfter;if(!f)continue;if(f.is("blockQuote")&&f.isEmpty)return a.remove(f),!0;if(f.is("blockQuote")&&!r.checkChild(d.position,f))return a.unwrap(f),!0;if(f.is("element")){const g=a.createRangeIn(f);for(const _ of g.getItems())if(_.is("blockQuote")&&!r.checkChild(a.createPositionBefore(_),_))return a.unwrap(_),!0}}else if("remove"==d.type){const f=d.position.parent;if(f.is("blockQuote")&&f.isEmpty)return a.remove(f),!0}return!1})}afterInit(){const i=this.editor.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",(r,a)=>{const c=this.editor.model.document,d=c.selection.getLastPosition().parent;c.selection.isCollapsed&&d.isEmpty&&i.value&&(this.editor.execute("blockQuote"),this.editor.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())})}}T(42);class W1 extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("blockQuote",a=>{const c=i.commands.get("blockQuote"),d=new Lt(a);return d.set({label:r("m"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 016.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 016.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(c,"value","isEnabled"),this.listenTo(d,"execute",()=>{i.execute("blockQuote"),i.editing.view.focus()}),d})}}class K1 extends yt{refresh(){const i=this.editor.model,r=at(i.document.selection.getSelectedBlocks());this.value=!!r&&r.is("paragraph"),this.isEnabled=!!r&&K_(r,i.schema)}execute(i={}){const r=this.editor.model,a=r.document;r.change(c=>{const d=(i.selection||a.selection).getSelectedBlocks();for(const f of d)!f.is("paragraph")&&K_(f,r.schema)&&c.rename(f,"paragraph")})}}function K_(u,i){return i.checkChild(u.parent,"paragraph")&&!i.isObject(u)}class Ja extends le{static get pluginName(){return"Paragraph"}init(){const i=this.editor,r=i.model,a=i.data;i.commands.add("paragraph",new K1(i)),r.schema.register("paragraph",{inheritAllFrom:"$block"}),i.conversion.elementToElement({model:"paragraph",view:"p"}),i.conversion.for("upcast").elementToElement({model:(c,d)=>Ja.paragraphLikeElements.has(c.name)?c.isEmpty?null:d.createElement("paragraph"):null,converterPriority:"low"}),a.upcastDispatcher.on("element",(c,d,f)=>{f.consumable.test(d.viewItem,{name:d.viewItem.name})&&Y1(d.viewItem,d.modelCursor,f.schema)&&Object.assign(d,J1(d.viewItem,d.modelCursor,f))},{priority:"low"}),a.upcastDispatcher.on("text",(c,d,f)=>{d.modelRange||Y1(d.viewItem,d.modelCursor,f.schema)&&Object.assign(d,J1(d.viewItem,d.modelCursor,f))},{priority:"lowest"}),r.document.registerPostFixer(c=>this._autoparagraphEmptyRoots(c)),i.data.on("ready",()=>{r.enqueueChange("transparent",c=>this._autoparagraphEmptyRoots(c))},{priority:"lowest"})}_autoparagraphEmptyRoots(i){const r=this.editor.model;for(const a of r.document.getRootNames()){const c=r.document.getRoot(a);if(c.isEmpty&&"$graveyard"!=c.rootName&&r.schema.checkChild(c,"paragraph"))return i.insertElement("paragraph",c),!0}}}function J1(u,i,r){const a=r.writer.createElement("paragraph");return r.writer.insert(a,i),r.convertItem(u,r.writer.createPositionAt(a,0))}function Y1(u,i,r){const a=r.createContext(i);return!!r.checkChild(a,"paragraph")&&!!r.checkChild(a.push("paragraph"),u)}Ja.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);class yc extends yt{constructor(i,r){super(i),this.modelElements=r}refresh(){const i=at(this.editor.model.document.selection.getSelectedBlocks());this.value=!!i&&this.modelElements.includes(i.name)&&i.name,this.isEnabled=!!i&&this.modelElements.some(r=>bd(i,r,this.editor.model.schema))}execute(i){const r=this.editor.model,a=r.document,c=i.value;r.change(d=>{const f=Array.from(a.selection.getSelectedBlocks()).filter(g=>bd(g,c,r.schema));for(const g of f)g.is(c)||d.rename(g,c)})}}function bd(u,i,r){return r.checkChild(u.parent,i)&&!r.isObject(u)}class J_ extends le{static get pluginName(){return"HeadingEditing"}constructor(i){super(i),i.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Ja]}init(){const i=this.editor,r=i.config.get("heading.options"),a=[];for(const c of r)"paragraph"!==c.model&&(i.model.schema.register(c.model,{inheritAllFrom:"$block"}),i.conversion.elementToElement(c),a.push(c.model));this._addDefaultH1Conversion(i),i.commands.add("heading",new yc(i,a))}afterInit(){const i=this.editor,r=i.commands.get("enter"),a=i.config.get("heading.options");r&&this.listenTo(r,"afterExecute",(c,d)=>{const f=i.model.document.selection.getFirstPosition().parent;a.some(g=>f.is(g.model))&&!f.is("paragraph")&&0===f.childCount&&d.writer.rename(f,"paragraph")})}_addDefaultH1Conversion(i){i.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Co.get("low")+1})}}class Ya{constructor(i,r){r&&$l(this,r),i&&this.set(i)}}Fe(Ya,On),T(12);class Y_ extends le{init(){const i=this.editor,r=i.t,a=function(f){const g=f.t,_={Paragraph:g("dq"),"Heading 1":g("dr"),"Heading 2":g("ds"),"Heading 3":g("dt"),"Heading 4":g("du"),"Heading 5":g("dv"),"Heading 6":g("dw")};return f.config.get("heading.options").map(b=>{const y=_[b.title];return y&&y!=b.title&&(b.title=y),b})}(i),c=r("n"),d=r("o");i.ui.componentFactory.add("heading",f=>{const g={},_=new Ni,b=i.commands.get("heading"),y=i.commands.get("paragraph"),k=[b];for(const F of a){const $={type:"button",model:new Ya({label:F.title,class:F.class,withText:!0})};"paragraph"===F.model?($.model.bind("isOn").to(y,"value"),$.model.set("commandName","paragraph"),k.push(y)):($.model.bind("isOn").to(b,"value",G=>G===F.model),$.model.set({commandName:"heading",commandValue:F.model})),_.add($),g[F.model]=F.title}const S=Di(f);return gc(S,_),S.buttonView.set({isOn:!1,withText:!0,tooltip:d}),S.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),S.bind("isEnabled").toMany(k,"isEnabled",(...F)=>F.some($=>$)),S.buttonView.bind("label").to(b,"value",y,"value",(F,$)=>{const G=F||$&&"paragraph";return g[G]?g[G]:c}),this.listenTo(S,"execute",F=>{i.execute(F.source.commandName,F.source.commandValue?{value:F.source.commandValue}:void 0),i.editing.view.focus()}),S})}}class Q1 extends Ir{observe(i){this.listenTo(i,"load",(r,a)=>{"IMG"==a.target.tagName&&this._fireEvents(a)},{useCapture:!0})}_fireEvents(i){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",i))}}function ip(u){return r=>{r.on(`attribute:${u}:image`,i)};function i(r,a,c){if(!c.consumable.consume(a.item,r.name))return;const d=c.writer,f=c.mapper.toViewElement(a.item).getChild(0);null!==a.attributeNewValue?d.setAttribute(a.attributeKey,a.attributeNewValue,f):d.removeAttribute(a.attributeKey,f)}}class op{constructor(){this._stack=[]}add(i,r){const a=this._stack,c=a[0];this._insertDescriptor(i);const d=a[0];c===d||wc(c,d)||this.fire("change:top",{oldDescriptor:c,newDescriptor:d,writer:r})}remove(i,r){const a=this._stack,c=a[0];this._removeDescriptor(i);const d=a[0];c===d||wc(c,d)||this.fire("change:top",{oldDescriptor:c,newDescriptor:d,writer:r})}_insertDescriptor(i){const r=this._stack,a=r.findIndex(d=>d.id===i.id);if(wc(i,r[a]))return;a>-1&&r.splice(a,1);let c=0;for(;r[c]&&oT(r[c],i);)c++;r.splice(c,0,i)}_removeDescriptor(i){const r=this._stack,a=r.findIndex(c=>c.id===i);a>-1&&r.splice(a,1)}}function wc(u,i){return u&&i&&u.priority==i.priority&&yd(u.classes)==yd(i.classes)}function oT(u,i){return u.priority>i.priority||!(u.priority<i.priority)&&yd(u.classes)>yd(i.classes)}function yd(u){return Array.isArray(u)?u.sort().join(","):u}function pr(u){return!!u.is("element")&&!!u.getCustomProperty("widget")}function Qa(u,i,r={}){return To_isEdge||i.setAttribute("contenteditable","false",u),i.addClass("ck-widget",u),i.setCustomProperty("widget",!0,u),u.getFillerOffset=rp,r.label&&i.setCustomProperty("widgetLabel",r.label,u),r.hasSelectionHandle&&function(c,d){const f=d.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(g){const _=this.toDomElement(g),b=new Hf;return b.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 01.5 0H4zm8 0h3.5a.5.5 0 01.5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 01-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 01-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),b.render(),_.appendChild(b.element),_});d.insert(d.createPositionAt(c,0),f),d.addClass(["ck-widget_with-selection-handle"],c)}(u,i),function(c,d,f,g){const _=new op;_.on("change:top",(b,y)=>{y.oldDescriptor&&((c,d,f)=>{f.removeClass(a(d.classes),c)})(c,y.oldDescriptor,y.writer),y.newDescriptor&&((c,d,f)=>{f.addClass(a(d.classes),c)})(c,y.newDescriptor,y.writer)}),d.setCustomProperty("addHighlight",(b,y,k)=>_.add(y,k),c),d.setCustomProperty("removeHighlight",(b,y,k)=>_.remove(y,k),c)}(u,i),u;function a(c){return Array.isArray(c)?c:[c]}}function Q_(u){const i=u.getCustomProperty("widgetLabel");return i?"function"==typeof i?i():i:""}function Vr(u,i){return i.addClass(["ck-editor__editable","ck-editor__nested-editable"],u),To_isEdge||(i.setAttribute("contenteditable",u.isReadOnly?"false":"true",u),u.on("change:isReadOnly",(r,a,c)=>{i.setAttribute("contenteditable",c?"false":"true",u)})),u.on("change:isFocused",(r,a,c)=>{c?i.addClass("ck-editor__nested-editable_focused",u):i.removeClass("ck-editor__nested-editable_focused",u)}),u}function Cc(u,i){const r=u.getSelectedElement();if(r&&i.schema.isBlock(r))return i.createPositionAfter(r);const a=u.getSelectedBlocks().next().value;if(a){if(a.isEmpty)return i.createPositionAt(a,0);const c=i.createPositionAfter(a);return u.focus.isTouching(c)?c:i.createPositionBefore(a)}return u.focus}function rp(){return null}function Xa(u){const i=u.getSelectedElement();return i&&function(r){return!!r.getCustomProperty("image")&&pr(r)}(i)?i:null}function kc(u){return!!u&&u.is("image")}function wd(u,i,r={}){const a=u.createElement("image",r),c=Cc(i.document.selection,i);i.insertContent(a,c),a.parent&&u.setSelection(a,"on")}function xc(u){const i=u.schema,r=u.document.selection;return function(a,c,d){const f=function(g,_){const b=Cc(g,_).parent;return b.isEmpty&&!b.is("$root")?b.parent:b}(a,d);return c.checkChild(f,"image")}(r,i,u)&&!function(a,c){const d=a.getSelectedElement();return d&&c.isObject(d)}(r,i)&&[...r.focus.getAncestors()].every(c=>!c.is("image"))}Fe(op,Re);class gs extends yt{refresh(){this.isEnabled=xc(this.editor.model)}execute(i){const r=this.editor.model;r.change(a=>{const c=Array.isArray(i.source)?i.source:[i.source];for(const d of c)wd(a,r,{src:d})})}}class X_ extends le{static get pluginName(){return"ImageEditing"}init(){const i=this.editor,r=i.model.schema,a=i.t,c=i.conversion;i.editing.view.addObserver(Q1),r.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),c.for("dataDowncast").elementToElement({model:"image",view:(d,f)=>Cd(f)}),c.for("editingDowncast").elementToElement({model:"image",view:(d,f)=>{return g=Cd(f),_=f,b=a("p"),_.setCustomProperty("image",!0,g),Qa(g,_,{label:function(){const y=g.getChild(0).getAttribute("alt");return y?`${y} ${b}`:b}});var g,_,b}}),c.for("downcast").add(ip("src")).add(ip("alt")).add(function(){return f=>{f.on("attribute:srcset:image",d)};function d(f,g,_){if(!_.consumable.consume(g.item,f.name))return;const b=_.writer,y=_.mapper.toViewElement(g.item).getChild(0);if(null===g.attributeNewValue){const k=g.attributeOldValue;k.data&&(b.removeAttribute("srcset",y),b.removeAttribute("sizes",y),k.width&&b.removeAttribute("width",y))}else{const k=g.attributeNewValue;k.data&&(b.setAttribute("srcset",k.data,y),b.setAttribute("sizes","100vw",y),k.width&&b.setAttribute("width",k.width,y))}}}()),c.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:(d,f)=>f.createElement("image",{src:d.getAttribute("src")})}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:d=>{const f={data:d.getAttribute("srcset")};return d.hasAttribute("width")&&(f.width=d.getAttribute("width")),f}}}).add(function(){return f=>{f.on("element:figure",d)};function d(f,g,_){if(!_.consumable.test(g.viewItem,{name:!0,classes:"image"}))return;const b=Array.from(g.viewItem.getChildren()).find(S=>S.is("img"));if(!b||!b.hasAttribute("src")||!_.consumable.test(b,{name:!0}))return;const y=_.convertItem(b,g.modelCursor),k=at(y.modelRange.getItems());k&&(_.convertChildren(g.viewItem,_.writer.createPositionAt(k,0)),g.modelRange=y.modelRange,g.modelCursor=y.modelCursor)}}()),i.commands.add("imageInsert",new gs(i))}}function Cd(u){const i=u.createEmptyElement("img"),r=u.createContainerElement("figure",{class:"image"});return u.insert(u.createPositionAt(r,0),i),r}class X1 extends zs{constructor(i){super(i),this.domEventType="mousedown"}onDomEvent(i){this.fire(i.type,i)}}T(45);const Z1=Eu("Ctrl+A");class kd extends le{static get pluginName(){return"Widget"}init(){const i=this.editor.editing.view,r=i.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(a,c,d)=>{this._clearPreviouslySelectedWidgets(d.writer);const f=d.writer,g=f.document.selection,_=g.getSelectedElement();let b=null;for(const y of g.getRanges())for(const k of y){const S=k.item;pr(S)&&!Za(S,b)&&(f.addClass("ck-widget_selected",S),this._previouslySelected.add(S),b=S,S==_&&f.setSelection(g.getRanges(),{fake:!0,label:Q_(_)}))}},{priority:"low"}),i.addObserver(X1),this.listenTo(r,"mousedown",(...a)=>this._onMousedown(...a)),this.listenTo(r,"keydown",(...a)=>this._onKeydown(...a),{priority:"high"}),this.listenTo(r,"delete",(a,c)=>{this._handleDelete("forward"==c.direction)&&(c.preventDefault(),a.stop())},{priority:"high"})}_onMousedown(i,r){const a=this.editor,c=a.editing.view,d=c.document;let f=r.target;if(function(_){for(;_;){if(_.is("editableElement")&&!_.is("rootElement"))return!0;if(pr(_))return!1;_=_.parent}return!1}(f)){if(To_isSafari&&r.domEvent.detail>=3){const _=a.editing.mapper.toModelElement(f);this.editor.model.change(b=>{r.preventDefault(),b.setSelection(_,"in")})}return}if(!pr(f)&&(f=f.findAncestor(pr),!f))return;r.preventDefault(),d.isFocused||c.focus();const g=a.editing.mapper.toModelElement(f);this._setSelectionOverElement(g)}_onKeydown(i,r){const a=r.keyCode;let f=!1;var g;(g=a)==ct.arrowright||g==ct.arrowleft||g==ct.arrowup||g==ct.arrowdown?f=this._handleArrowKeys(a==ct.arrowdown||a==ct["ltr"===this.editor.locale.contentLanguageDirection?"arrowright":"arrowleft"]):function(g){return Nr(g)==Z1}(r)?f=this._selectAllNestedEditableContent()||this._selectAllContent():a===ct.enter&&(f=this._handleEnterKey(r.shiftKey)),f&&(r.preventDefault(),i.stop())}_handleDelete(i){if(this.editor.isReadOnly)return;const r=this.editor.model.document.selection;if(!r.isCollapsed)return;const a=this._getObjectElementNextToSelection(i);return a?(this.editor.model.change(c=>{let d=r.anchor.parent;for(;d.isEmpty;){const f=d;d=f.parent,c.remove(f)}this._setSelectionOverElement(a)}),!0):void 0}_handleArrowKeys(i){const r=this.editor.model,a=r.schema,c=r.document.selection,d=c.getSelectedElement();if(d&&a.isObject(d)){const g=i?c.getLastPosition():c.getFirstPosition(),_=a.getNearestSelectionRange(g,i?"forward":"backward");return _&&r.change(b=>{b.setSelection(_)}),!0}if(!c.isCollapsed)return;const f=this._getObjectElementNextToSelection(i);return f&&a.isObject(f)?(this._setSelectionOverElement(f),!0):void 0}_handleEnterKey(i){const r=this.editor.model,a=r.document.selection.getSelectedElement();if(d=r.schema,(c=a)&&d.isObject(c)&&!d.isInline(c))return r.change(f=>{let g=f.createPositionAt(a,i?"before":"after");const _=f.createElement("paragraph");if(r.schema.isBlock(a.parent)){const b=r.schema.findAllowedParent(g,_);g=f.split(g,b).position}f.insert(_,g),f.setSelection(_,"in")}),!0;var c,d}_selectAllNestedEditableContent(){const i=this.editor.model,r=i.document.selection,a=i.schema.getLimitElement(r);return r.getFirstRange().root!=a&&(i.change(c=>{c.setSelection(c.createRangeIn(a))}),!0)}_selectAllContent(){const i=this.editor.model,r=this.editor.editing,a=r.view.document.selection.getSelectedElement();if(a&&pr(a)){const c=r.mapper.toModelElement(a.parent);return i.change(d=>{d.setSelection(d.createRangeIn(c))}),!0}return!1}_setSelectionOverElement(i){this.editor.model.change(r=>{r.setSelection(r.createRangeOn(i))})}_getObjectElementNextToSelection(i){const r=this.editor.model,a=r.schema,d=r.createSelection(r.document.selection);r.modifySelection(d,{direction:i?"forward":"backward"});const f=i?d.focus.nodeBefore:d.focus.nodeAfter;return f&&a.isObject(f)?f:null}_clearPreviouslySelectedWidgets(i){for(const r of this._previouslySelected)i.removeClass("ck-widget_selected",r);this._previouslySelected.clear()}}function Za(u,i){return!!i&&Array.from(u.getAncestors()).includes(i)}class ew extends yt{refresh(){const i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=kc(i),this.value=!(!kc(i)||!i.hasAttribute("alt"))&&i.getAttribute("alt")}execute(i){const r=this.editor.model,a=r.document.selection.getSelectedElement();r.change(c=>{c.setAttribute("alt",i.newValue,a)})}}class tw extends le{static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new ew(this.editor))}}T(47);class sp extends st{constructor(i){super(i),this.set("text"),this.set("for"),this.id=`ck-editor__label_${bi()}`;const r=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:r.to("for")},children:[{text:r.to("text")}]})}}T(49);class nw extends st{constructor(i,r){super(i);const a=`ck-input-${bi()}`,c=`ck-status-${bi()}`;this.set("label"),this.set("value"),this.set("isReadOnly",!1),this.set("errorText",null),this.set("infoText",null),this.labelView=this._createLabelView(a),this.inputView=this._createInputView(r,a,c),this.statusView=this._createStatusView(c),this.bind("_statusText").to(this,"errorText",this,"infoText",(f,g)=>f||g),this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input",this.bindTemplate.if("isReadOnly","ck-disabled")]},children:[this.labelView,this.inputView,this.statusView]})}_createLabelView(i){const r=new sp(this.locale);return r.for=i,r.bind("text").to(this,"label"),r}_createInputView(i,r,a){const c=new i(this.locale,a);return c.id=r,c.ariaDescribedById=a,c.bind("value").to(this),c.bind("isReadOnly").to(this),c.bind("hasError").to(this,"errorText",d=>!!d),c.on("input",()=>{this.errorText=null}),c}_createStatusView(i){const r=new st(this.locale),a=this.bindTemplate;return r.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-input__status",a.if("errorText","ck-labeled-input__status_error"),a.if("_statusText","ck-hidden",c=>!c)],id:i,role:a.if("errorText","alert")},children:[{text:a.to("_statusText")}]}),r}select(){this.inputView.select()}focus(){this.inputView.focus()}}T(51);class ap extends st{constructor(i){super(i),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById");const r=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",r.if("hasError","ck-error")],id:r.to("id"),placeholder:r.to("placeholder"),readonly:r.to("isReadOnly"),"aria-invalid":r.if("hasError",!0),"aria-describedby":r.to("ariaDescribedById")},on:{input:r.to("input")}})}render(){super.render();const i=r=>{this.element.value=r||0===r?r:""};i(this.value),this.on("change:value",(r,a,c)=>{i(c)})}select(){this.element.select()}focus(){this.element.focus()}}T(53);class iw extends st{constructor(i){super(i);const r=this.locale.t;this.focusTracker=new Ao,this.keystrokes=new hr,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("cw"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 01-.744-.292l-4.596-4.596a1 1 0 111.414-1.414l3.926 3.926 9.937-9.937a1 1 0 011.414 1.415L7.717 16.323a.997.997 0 01-.745.292z"/></svg>',"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("cx"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 01-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 01-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 015.934 4.52l4.243 4.243 4.242-4.243a1 1 0 111.415 1.414l-4.243 4.243z"/></svg>',"ck-button-cancel","cancel"),this._focusables=new Yu,this._focusCycler=new Ua({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),function({view:i}){i.listenTo(i.element,"submit",(r,a)=>{a.preventDefault(),i.fire("submit")},{useCapture:!0})}({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)})}_createButton(i,r,a,c){const d=new Lt(this.locale);return d.set({label:i,icon:r,tooltip:!0}),d.extendTemplate({attributes:{class:a}}),c&&d.delegate("execute").to(this,c),d}_createLabeledInputView(){const i=this.locale.t,r=new nw(this.locale,ap);return r.label=i("cy"),r.inputView.placeholder=i("cy"),r}}T(55),T(57);const Ec=D_("px");class Z_ extends le{static get pluginName(){return"ContextualBalloon"}constructor(i){super(i),this.positionLimiter=()=>{const r=this.editor.editing.view,a=r.document.selection.editableElement;return a?r.domConverter.mapViewToDom(a.root):null},this.set("visibleView",null),this.view=new cn(i.locale),i.ui.view.body.add(this.view),i.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(i){return Array.from(this._viewToStack.keys()).includes(i)}add(i){if(this.hasView(i.view))throw new W.b("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,i]);const r=i.stackId||"main";if(!this._idToStack.has(r))return this._idToStack.set(r,new Map([[i.view,i]])),this._viewToStack.set(i.view,this._idToStack.get(r)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!i.singleViewMode||this.showStack(r));const a=this._idToStack.get(r);i.singleViewMode&&this.showStack(r),a.set(i.view,i),this._viewToStack.set(i.view,a),a===this._visibleStack&&this._showView(i)}remove(i){if(!this.hasView(i))throw new W.b("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,i]);const r=this._viewToStack.get(i);this._singleViewMode&&this.visibleView===i&&(this._singleViewMode=!1),this.visibleView===i&&(1===r.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(r.values())[r.size-2])),1===r.size?(this._idToStack.delete(this._getStackId(r)),this._numberOfStacks=this._idToStack.size):r.delete(i),this._viewToStack.delete(i)}updatePosition(i){i&&(this._visibleStack.get(this.visibleView).position=i),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(i){this.visibleStack=i;const r=this._idToStack.get(i);if(!r)throw new W.b("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this);this._visibleStack!==r&&this._showView(Array.from(r.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(i){return Array.from(this._idToStack.entries()).find(r=>r[1]===i)[0]}_showNextStack(){const i=Array.from(this._idToStack.values());let r=i.indexOf(this._visibleStack)+1;i[r]||(r=0),this.showStack(this._getStackId(i[r]))}_showPrevStack(){const i=Array.from(this._idToStack.values());let r=i.indexOf(this._visibleStack)-1;i[r]||(r=i.length-1),this.showStack(this._getStackId(i[r]))}_createRotatorView(){const i=new ev(this.editor.locale),r=this.editor.locale.t;return this.view.content.add(i),i.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(a,c)=>!c&&a>1),i.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),i.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(a,c)=>{if(c<2)return"";const d=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return r("cr",[d,c])}),i.buttonNextView.on("execute",()=>{i.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),i.buttonPrevView.on("execute",()=>{i.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),i}_createFakePanelsView(){const i=new rT(this.editor.locale,this.view);return i.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(r,a)=>!a&&r>=2?Math.min(r-1,2):0),i.listenTo(this.view,"change:top",()=>i.updatePosition()),i.listenTo(this.view,"change:left",()=>i.updatePosition()),this.editor.ui.view.body.add(i),i}_showView({view:i,balloonClassName:r="",withArrow:a=!0,singleViewMode:c=!1}){this.view.class=r,this.view.withArrow=a,this._rotatorView.showView(i),this.visibleView=i,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),c&&(this._singleViewMode=!0)}_getBalloonPosition(){let i=Array.from(this._visibleStack.values()).pop().position;return i&&!i.limiter&&(i=Object.assign({},i,{limiter:this.positionLimiter})),i}}class ev extends st{constructor(i){super(i);const r=i.t,a=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Ao,this.buttonPrevView=this._createButtonView(r("cs"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 111.254 1.255L9.16 10l3.557 3.557a.888.888 0 11-1.254 1.255L7.26 10.61a.888.888 0 01.16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(r("ct"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 11-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 111.254-1.255L12.74 9.39a.888.888 0 01-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",a.to("isNavigationVisible",c=>c?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:a.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(i){this.hideView(),this.content.add(i)}hideView(){this.content.clear()}_createButtonView(i,r){const a=new Lt(this.locale);return a.set({label:i,icon:r,tooltip:!0}),a}}class rT extends st{constructor(i,r){super(i);const a=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=r,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",a.to("numberOfPanels",c=>c?"":"ck-hidden")],style:{top:a.to("top",Ec),left:a.to("left",Ec),width:a.to("width",Ec),height:a.to("height",Ec)}},children:this.content}),this.on("change:numberOfPanels",(c,d,f,g)=>{f>g?this._addPanels(f-g):this._removePanels(g-f),this.updatePosition()})}_addPanels(i){for(;i--;){const r=new st;r.setTemplate({tag:"div"}),this.content.add(r),this.registerChild(r)}}_removePanels(i){for(;i--;){const r=this.content.last;this.content.remove(r),this.deregisterChild(r),r.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:i,left:r}=this._balloonPanelView,{width:a,height:c}=new Yt(this._balloonPanelView.element);Object.assign(this,{top:i,left:r,width:a,height:c})}}}function tv(u){const i=u.editing.view,r=cn.defaultPositions;return{target:i.domConverter.viewToDom(i.document.selection.getSelectedElement()),positions:[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast]}}class Tc extends le{static get requires(){return[Z_]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const i=this.editor,r=i.t;i.ui.componentFactory.add("imageTextAlternative",a=>{const c=i.commands.get("imageTextAlternative"),d=new Lt(a);return d.set({label:r("cn"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 111.06-1.06l2.592 2.59A11.094 11.094 0 0110 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 01-.09 1.138.488.488 0 01-.15.084.75.75 0 01-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 00-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 01-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 00-.124.2c-.043.077-.08.158-.108.241a.534.534 0 00-.028.133.29.29 0 00.008.072.927.927 0 00.082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 011.108 5.992l.345.344.046-.018a9.313 9.313 0 002-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 00.036-.12.29.29 0 00.008-.072.492.492 0 00-.028-.133.999.999 0 00-.036-.096 2.165 2.165 0 00-.071-.145 2.917 2.917 0 00-.125-.2 3.592 3.592 0 00-.263-.335 5.444 5.444 0 00-.53-.523 7.955 7.955 0 00-1.054-.768 9.766 9.766 0 00-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 00-.254.097.496.496 0 00-.104.679.498.498 0 00.326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 012.017 1.513c.024.061.043.125.069.185a.494.494 0 00.45.287h.008a.496.496 0 00.35-.158.482.482 0 00.13-.335.638.638 0 00-.048-.219 3.379 3.379 0 00-.36-.723 3.438 3.438 0 00-2.791-1.543l-.028-.001h-.013z"/></svg>',tooltip:!0}),d.bind("isEnabled").to(c,"isEnabled"),this.listenTo(d,"execute",()=>{this._showForm()}),d})}_createForm(){const i=this.editor,r=i.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new iw(i.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{i.execute("imageTextAlternative",{newValue:this._form.labeledInput.inputView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(a,c)=>{this._hideForm(!0),c()}),this.listenTo(i.ui,"update",()=>{Xa(r.selection)?this._isVisible&&function(a){const c=a.plugins.get("ContextualBalloon");if(Xa(a.editing.view.document.selection)){const d=tv(a);c.updatePosition(d)}}(i):this._hideForm(!0)}),Gf({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const i=this.editor,r=i.commands.get("imageTextAlternative"),a=this._form.labeledInput;this._isInBalloon||this._balloon.add({view:this._form,position:tv(i)}),a.value=a.inputView.element.value=r.value||"",this._form.labeledInput.select()}_hideForm(i){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),i&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class ow extends le{static get requires(){return[tw,Tc]}static get pluginName(){return"ImageTextAlternative"}}function ms(u){for(const i of u.getChildren())if(i&&i.is("caption"))return i;return null}function Ot(u){const i=u.parent;return"figcaption"==u.name&&i&&"figure"==i.name&&i.hasClass("image")?{name:!0}:null}T(59);class rw extends le{static get pluginName(){return"ImageCaptionEditing"}init(){const i=this.editor,r=i.editing.view,c=i.data,d=i.editing,f=i.t;i.model.schema.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),i.model.document.registerPostFixer(_=>this._insertMissingModelCaptionElement(_)),i.conversion.for("upcast").elementToElement({view:Ot,model:"caption"}),c.downcastDispatcher.on("insert:caption",sw(_=>_.createContainerElement("figcaption"),!1));const g=(_=r,b=f("v"),y=>{const k=y.createEditableElement("figcaption");return y.setCustomProperty("imageCaption",!0,k),g_({view:_,element:k,text:b}),Vr(k,y)});var _,b;d.downcastDispatcher.on("insert:caption",sw(g)),d.downcastDispatcher.on("insert",this._fixCaptionVisibility(_=>_.item),{priority:"high"}),d.downcastDispatcher.on("remove",this._fixCaptionVisibility(_=>_.position.parent),{priority:"high"}),r.document.registerPostFixer(_=>this._updateCaptionVisibility(_))}_updateCaptionVisibility(i){const r=this.editor.editing.mapper,a=this._lastSelectedCaption;let c;const d=this.editor.model.document.selection,f=d.getSelectedElement();if(f&&f.is("image")){const _=ms(f);c=r.toViewElement(_)}const g=xd(d.getFirstPosition().parent);if(g&&(c=r.toViewElement(g)),c)return a?(a===c||(ai(a,i),this._lastSelectedCaption=c),nv(c,i)):(this._lastSelectedCaption=c,nv(c,i));if(a){const _=ai(a,i);return this._lastSelectedCaption=null,_}return!1}_fixCaptionVisibility(i){return(r,a,c)=>{const d=xd(i(a)),g=c.writer;if(d){const _=this.editor.editing.mapper.toViewElement(d);_&&(d.childCount?g.removeClass("ck-hidden",_):g.addClass("ck-hidden",_))}}}_insertMissingModelCaptionElement(i){const r=this.editor.model,a=r.document.differ.getChanges(),c=[];for(const d of a)if("insert"==d.type&&"$text"!=d.name){const f=d.position.nodeAfter;if(f.is("image")&&!ms(f)&&c.push(f),!f.is("image")&&f.childCount)for(const g of r.createRangeIn(f).getItems())g.is("image")&&!ms(g)&&c.push(g)}for(const d of c)i.appendElement("caption",d);return!!c.length}}function sw(u,i=!0){return(r,a,c)=>{const d=a.item;if((d.childCount||i)&&kc(d.parent)){if(!c.consumable.consume(a.item,"insert"))return;const f=c.mapper.toViewElement(a.range.start.parent),g=u(c.writer),_=c.writer;d.childCount||_.addClass("ck-hidden",g),function(b,y,k,S){const F=S.writer.createPositionAt(k,"end");S.writer.insert(F,b),S.mapper.bindElements(y,b)}(g,a.item,f,c)}}}function xd(u){const i=u.getAncestors({includeSelf:!0}).find(r=>"caption"==r.name);return i&&i.parent&&"image"==i.parent.name?i:null}function ai(u,i){return!u.childCount&&!u.hasClass("ck-hidden")&&(i.addClass("ck-hidden",u),!0)}function nv(u,i){return!!u.hasClass("ck-hidden")&&(i.removeClass("ck-hidden",u),!0)}T(61);class aw extends yt{constructor(i,r){super(i),this.defaultStyle=!1,this.styles=r.reduce((a,c)=>(a[c.name]=c,c.isDefault&&(this.defaultStyle=c.name),a),{})}refresh(){const i=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=kc(i),i)if(i.hasAttribute("imageStyle")){const r=i.getAttribute("imageStyle");this.value=!!this.styles[r]&&r}else this.value=this.defaultStyle;else this.value=!1}execute(i){const r=i.value,a=this.editor.model,c=a.document.selection.getSelectedElement();a.change(d=>{this.styles[r].isDefault?d.removeAttribute("imageStyle",c):d.setAttribute("imageStyle",r,c)})}}function el(u,i){for(const r of i)if(r.name===u)return r}var iv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>',Ed='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',Td='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',lp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';const tl={full:{name:"full",title:"Full size image",icon:iv,isDefault:!0},side:{name:"side",title:"Side image",icon:lp,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Ed,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Td,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:lp,className:"image-style-align-right"}},oa={full:iv,left:Ed,right:lp,center:Td};function ov(u=[]){return u.map(lw)}function lw(u){if("string"==typeof u){const i=u;tl[i]?u=Object.assign({},tl[i]):(console.warn(Object(W.a)("image-style-not-found: There is no such image style of given name."),{name:i}),u={name:i})}else if(tl[u.name]){const i=tl[u.name],r=Object.assign({},u);for(const a in i)u.hasOwnProperty(a)||(r[a]=i[a]);u=r}return"string"==typeof u.icon&&oa[u.icon]&&(u.icon=oa[u.icon]),u}class cw extends le{static get pluginName(){return"ImageStyleEditing"}init(){const i=this.editor,r=i.model.schema,a=i.data,c=i.editing;i.config.define("image.styles",["full","side"]);const d=ov(i.config.get("image.styles"));r.extend("image",{allowAttributes:"imageStyle"});const f=(g=d,(_,b,y)=>{if(!y.consumable.consume(b.item,_.name))return;const k=el(b.attributeNewValue,g),S=el(b.attributeOldValue,g),F=y.mapper.toViewElement(b.item),$=y.writer;S&&$.removeClass(S.className,F),k&&$.addClass(k.className,F)});var g;c.downcastDispatcher.on("attribute:imageStyle:image",f),a.downcastDispatcher.on("attribute:imageStyle:image",f),a.upcastDispatcher.on("element:figure",function(g){const _=g.filter(b=>!b.isDefault);return(b,y,k)=>{if(!y.modelRange)return;const S=y.viewItem,F=at(y.modelRange.getItems());if(k.schema.checkAttribute(F,"imageStyle"))for(const $ of _)k.consumable.consume(S,{classes:$.className})&&k.writer.setAttribute("imageStyle",$.name,F)}}(d),{priority:"low"}),i.commands.add("imageStyle",new aw(i,d))}}T(63);class uw extends le{static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const i=this.editor.t;return{"Full size image":i("q"),"Side image":i("r"),"Left aligned image":i("s"),"Centered image":i("t"),"Right aligned image":i("u")}}init(){const i=function(r,a){for(const c of r)a[c.title]&&(c.title=a[c.title]);return r}(ov(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles);for(const r of i)this._createButton(r)}_createButton(i){const r=this.editor;r.ui.componentFactory.add(`imageStyle:${i.name}`,c=>{const d=r.commands.get("imageStyle"),f=new Lt(c);return f.set({label:i.title,icon:i.icon,tooltip:!0,isToggleable:!0}),f.bind("isEnabled").to(d,"isEnabled"),f.bind("isOn").to(d,"value",g=>g===i.name),this.listenTo(f,"execute",()=>{r.execute("imageStyle",{value:i.name}),r.editing.view.focus()}),f})}}class Dc extends le{static get requires(){return[Z_]}static get pluginName(){return"WidgetToolbarRepository"}init(){const i=this.editor;if(i.plugins.has("BalloonToolbar")){const r=i.plugins.get("BalloonToolbar");this.listenTo(r,"show",a=>{(function(c){const d=c.getSelectedElement();return!(!d||!pr(d))})(i.editing.view.document.selection)&&a.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(i.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(i.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const i of this._toolbarDefinitions.values())i.view.destroy()}register(i,{ariaLabel:r,items:a,getRelatedElement:c,balloonClassName:d="ck-toolbar-container"}){const f=this.editor,g=f.t,_=new qf(f.locale);if(_.ariaLabel=r||g("au"),this._toolbarDefinitions.has(i))throw new W.b("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:i});_.fillFromConfig(a,f.ui.componentFactory),this._toolbarDefinitions.set(i,{view:_,getRelatedElement:c,balloonClassName:d})}_updateToolbarsVisibility(){let i=0,r=null,a=null;for(const c of this._toolbarDefinitions.values()){const d=c.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&d)if(this.editor.ui.focusTracker.isFocused){const f=d.getAncestors().length;f>i&&(i=f,r=d,a=c)}else this._isToolbarVisible(c)&&this._hideToolbar(c);else this._isToolbarInBalloon(c)&&this._hideToolbar(c)}a&&this._showToolbar(a,r)}_hideToolbar(i){this._balloon.remove(i.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(i,r){this._isToolbarVisible(i)?cp(this.editor,r):this._isToolbarInBalloon(i)||(this._balloon.add({view:i.view,position:rv(this.editor,r),balloonClassName:i.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const a of this._toolbarDefinitions.values())if(this._isToolbarVisible(a)){const c=a.getRelatedElement(this.editor.editing.view.document.selection);cp(this.editor,c)}}))}_isToolbarVisible(i){return this._balloon.visibleView===i.view}_isToolbarInBalloon(i){return this._balloon.hasView(i.view)}}function cp(u,i){const r=u.plugins.get("ContextualBalloon"),a=rv(u,i);r.updatePosition(a)}function rv(u,i){const a=cn.defaultPositions;return{target:u.editing.view.domConverter.mapViewToDom(i),positions:[a.northArrowSouth,a.northArrowSouthWest,a.northArrowSouthEast,a.southArrowNorth,a.southArrowNorthWest,a.southArrowNorthEast]}}class nl extends st{constructor(i){super(i),this.buttonView=new Lt(i),this._fileInputView=new jr(i),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class jr extends st{constructor(i){super(i),this.set("acceptedType"),this.set("allowMultipleFiles",!1);const r=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:r.to("acceptedType"),multiple:r.to("allowMultipleFiles")},on:{change:r.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}function sv(u){const i=u.map(r=>r.replace("+","\\+"));return new RegExp(`^image\\/(${i.join("|")})$`)}function dw(u){return new Promise((i,r)=>{const a=u.getAttribute("src");fetch(a).then(c=>c.blob()).then(c=>{const d=(_=a,(g=c).type?g.type:_.match(/data:(image\/\w+);base64/)?_.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"),f=function(g,_,b){try{return new File([g],_,{type:b})}catch{return null}}(c,`image.${d.replace("image/","")}`,d);var g,_;f?i(f):r()}).catch(r)})}class sT extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("imageUpload",a=>{const c=new nl(a),d=i.commands.get("imageUpload"),f=i.config.get("image.upload.types"),g=sv(f);return c.set({acceptedType:f.map(_=>`image/${_}`).join(","),allowMultipleFiles:!0}),c.buttonView.set({label:r("w"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 01.87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 113.4-1.96 1.96 1.96 0 01-3.4 1.96z"/></svg>',tooltip:!0}),c.buttonView.bind("isEnabled").to(d),c.on("done",(_,b)=>{const y=Array.from(b).filter(k=>g.test(k.type));y.length&&i.execute("imageUpload",{file:y})}),c})}}T(65),T(67),T(69);class aT extends le{constructor(i){super(i),this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>')}init(){this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",(...i)=>this.uploadStatusChange(...i))}uploadStatusChange(i,r,a){const c=this.editor,d=r.item,f=d.getAttribute("uploadId");if(!a.consumable.consume(r.item,i.name))return;const g=c.plugins.get(er),_=f?r.attributeNewValue:null,b=this.placeholder,y=c.editing.mapper.toViewElement(d),k=a.writer;if("reading"==_)return up(y,k),void hw(b,y,k);if("uploading"==_){const S=g.loaders.get(f);return up(y,k),void(S?(dp(y,k),function(F,$,G,Y){const oe=function(ue){const we=ue.createUIElement("div",{class:"ck-progress-bar"});return ue.setCustomProperty("progressBar",!0,we),we}($);$.insert($.createPositionAt(F,"end"),oe),G.on("change:uploadedPercent",(ue,we,qe)=>{Y.change(Nn=>{Nn.setStyle("width",qe+"%",oe)})})}(y,k,S,c.editing.view),function(F,$,G){if(G.data){const Y=F.getChild(0);$.setAttribute("src",G.data,Y)}}(y,k,S)):hw(b,y,k))}"complete"==_&&g.loaders.get(f)&&!To_isEdge&&function(S,F,$){const G=F.createUIElement("div",{class:"ck-image-upload-complete-icon"});F.insert(F.createPositionAt(S,"end"),G),setTimeout(()=>{$.change(Y=>Y.remove(Y.createRangeOn(G)))},3e3)}(y,k,c.editing.view),hp(y,k,"progressBar"),dp(y,k),k.removeClass("ck-appear",y)}}function up(u,i){u.hasClass("ck-appear")||i.addClass("ck-appear",u)}function hw(u,i,r){i.hasClass("ck-image-upload-placeholder")||r.addClass("ck-image-upload-placeholder",i);const a=i.getChild(0);a.getAttribute("src")!==u&&r.setAttribute("src",u,a),fw(i,"placeholder")||r.insert(r.createPositionAfter(a),function(c){const d=c.createUIElement("div",{class:"ck-upload-placeholder-loader"});return c.setCustomProperty("placeholder",!0,d),d}(r))}function dp(u,i){u.hasClass("ck-image-upload-placeholder")&&i.removeClass("ck-image-upload-placeholder",u),hp(u,i,"placeholder")}function fw(u,i){for(const r of u.getChildren())if(r.getCustomProperty(i))return r}function hp(u,i,r){const a=fw(u,r);a&&i.remove(i.createRangeOn(a))}class av extends Zo{static get pluginName(){return"Notification"}init(){this.on("show:warning",(i,r)=>{window.alert(r.message)},{priority:"lowest"})}showSuccess(i,r={}){this._showNotification({message:i,type:"success",namespace:r.namespace,title:r.title})}showInfo(i,r={}){this._showNotification({message:i,type:"info",namespace:r.namespace,title:r.title})}showWarning(i,r={}){this._showNotification({message:i,type:"warning",namespace:r.namespace,title:r.title})}_showNotification(i){this.fire(`show:${i.type}`+(i.namespace?`:${i.namespace}`:""),{message:i.message,type:i.type,title:i.title||""})}}class il{createDocumentFragment(i){return new lo(i)}createElement(i,r,a){return new Eo(i,r,a)}createText(i){return new Kt(i)}clone(i,r=!1){return i._clone(r)}appendChild(i,r){return r._appendChild(i)}insertChild(i,r,a){return a._insertChild(i,r)}removeChildren(i,r,a){return a._removeChildren(i,r)}remove(i){const r=i.parent;return r?this.removeChildren(r.getChildIndex(i),1,r):[]}replace(i,r){const a=i.parent;if(a){const c=a.getChildIndex(i);return this.removeChildren(c,1,a),this.insertChild(c,r,a),!0}return!1}unwrapElement(i){const r=i.parent;if(r){const a=r.getChildIndex(i);this.remove(i),this.insertChild(a,i.getChildren(),r)}}rename(i,r){const a=new Eo(i,r.getAttributes(),r.getChildren());return this.replace(r,a)?a:null}setAttribute(i,r,a){a._setAttribute(i,r)}removeAttribute(i,r){r._removeAttribute(i)}addClass(i,r){r._addClass(i)}removeClass(i,r){r._removeClass(i)}setStyle(i,r,a){ht(i)&&void 0===a&&(a=r),a._setStyle(i,r)}removeStyle(i,r){r._removeStyle(i)}setCustomProperty(i,r,a){a._setCustomProperty(i,r)}removeCustomProperty(i,r){return r._removeCustomProperty(i)}createPositionAt(i,r){return fe._createAt(i,r)}createPositionAfter(i){return fe._createAfter(i)}createPositionBefore(i){return fe._createBefore(i)}createRange(i,r){return new Ve(i,r)}createRangeOn(i){return Ve._createOn(i)}createRangeIn(i){return Ve._createIn(i)}createSelection(i,r,a){return new ao(i,r,a)}}class pw extends yt{refresh(){this.isEnabled=xc(this.editor.model)}execute(i){const r=this.editor,a=r.model,c=r.plugins.get(er);a.change(d=>{const f=Array.isArray(i.file)?i.file:[i.file];for(const g of f)gw(d,a,c,g)})}}function gw(u,i,r,a){const c=r.createLoader(a);c&&wd(u,i,{uploadId:c.id})}class tr extends le{static get requires(){return[er,av,_c]}static get pluginName(){return"ImageUploadEditing"}constructor(i){super(i),i.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}})}init(){const i=this.editor,r=i.model.document,a=i.model.schema,c=i.conversion,d=i.plugins.get(er),f=sv(i.config.get("image.upload.types"));a.extend("image",{allowAttributes:["uploadId","uploadStatus"]}),i.commands.add("imageUpload",new pw(i)),c.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(i.editing.view.document,"clipboardInput",(g,_)=>{if(b=_.dataTransfer,Array.from(b.types).includes("text/html")&&""!==b.getData("text/html"))return;var b;const y=Array.from(_.dataTransfer.files).filter(S=>!!S&&f.test(S.type)),k=_.targetRanges.map(S=>i.editing.mapper.toModelRange(S));i.model.change(S=>{S.setSelection(k),y.length&&(g.stop(),i.model.enqueueChange("default",()=>{i.execute("imageUpload",{file:y})}))})}),this.listenTo(i.plugins.get(_c),"inputTransformation",(g,_)=>{const b=Array.from(i.editing.view.createRangeIn(_.content)).filter(k=>{return!(!(S=k.item).is("element","img")||!S.getAttribute("src"))&&(S.getAttribute("src").match(/^data:image\/\w+;base64,/g)||S.getAttribute("src").match(/^blob:/g))&&!k.item.getAttribute("uploadProcessed");var S}).map(k=>({promise:dw(k.item),imageElement:k.item}));if(!b.length)return;const y=new il;for(const k of b){y.setAttribute("uploadProcessed",!0,k.imageElement);const S=d.createLoader(k.promise);S&&(y.setAttribute("src","",k.imageElement),y.setAttribute("uploadId",S.id,k.imageElement))}}),i.editing.view.document.on("dragover",(g,_)=>{_.preventDefault()}),r.on("change",()=>{const g=r.differ.getChanges({includeChangesInGraveyard:!0});for(const _ of g)if("insert"==_.type&&"$text"!=_.name){const b=_.position.nodeAfter,y="$graveyard"==_.position.root.rootName;for(const k of mw(i,b)){const S=k.getAttribute("uploadId");if(!S)continue;const F=d.loaders.get(S);F&&(y?F.abort():"idle"==F.status&&this._readAndUpload(F,k))}}})}_readAndUpload(i,r){const a=this.editor,c=a.model,d=a.locale.t,f=a.plugins.get(er),g=a.plugins.get(av);return c.enqueueChange("transparent",b=>{b.setAttribute("uploadStatus","reading",r)}),i.read().then(()=>{const b=i.upload();if(To_isSafari){const y=a.editing.mapper.toViewElement(r).getChild(0);a.editing.view.once("render",()=>{if(!y.parent)return;const k=a.editing.view.domConverter.mapViewToDom(y.parent);if(!k)return;const S=k.style.display;k.style.display="none",k._ckHack=k.offsetHeight,k.style.display=S})}return c.enqueueChange("transparent",y=>{y.setAttribute("uploadStatus","uploading",r)}),b}).then(b=>{c.enqueueChange("transparent",y=>{y.setAttributes({uploadStatus:"complete",src:b.default},r),this._parseAndSetSrcsetAttributeOnImage(b,r,y)}),_()}).catch(b=>{if("error"!==i.status&&"aborted"!==i.status)throw b;"error"==i.status&&b&&g.showWarning(b,{title:d("x"),namespace:"upload"}),_(),c.enqueueChange("transparent",y=>{y.remove(r)})});function _(){c.enqueueChange("transparent",b=>{b.removeAttribute("uploadId",r),b.removeAttribute("uploadStatus",r)}),f.destroyLoader(i)}}_parseAndSetSrcsetAttributeOnImage(i,r,a){let c=0;const d=Object.keys(i).filter(f=>{const g=parseInt(f,10);if(!isNaN(g))return c=Math.max(c,g),!0}).map(f=>`${i[f]} ${f}w`).join(", ");""!=d&&a.setAttribute("srcset",{data:d,width:c},r)}}function mw(u,i){return Array.from(u.model.createRangeOn(i)).filter(r=>r.item.is("image")).map(r=>r.item)}class fp{constructor(i){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=i,this._referenceCoordinates=null}begin(i,r,a){const c=new Yt(r);this.activeHandlePosition=function(f){const g=["top-left","top-right","bottom-right","bottom-left"];for(const _ of g)if(f.classList.contains(`ck-widget__resizer__handle-${_}`))return _}(i),this._referenceCoordinates=function(f,g){const _=new Yt(f),b=g.split("-"),y={x:"right"==b[1]?_.right:_.left,y:"bottom"==b[0]?_.bottom:_.top};return y.x+=f.ownerDocument.defaultView.scrollX,y.y+=f.ownerDocument.defaultView.scrollY,y}(r,function(f){const g=f.split("-"),_={top:"bottom",bottom:"top",left:"right",right:"left"};return`${_[g[0]]}-${_[g[1]]}`}(this.activeHandlePosition)),this.originalWidth=c.width,this.originalHeight=c.height,this.aspectRatio=c.width/c.height;const d=a.style.width;this.originalWidthPercents=d&&d.match(/^\d+\.?\d*%$/)?parseFloat(d):function(f,g){const _=f.parentElement,b=parseFloat(_.ownerDocument.defaultView.getComputedStyle(_).width);return g.width/b*100}(a,c)}update(i){this.proposedWidth=i.width,this.proposedHeight=i.height,this.proposedWidthPercents=i.widthPercents,this.proposedHandleHostWidth=i.handleHostWidth,this.proposedHandleHostHeight=i.handleHostHeight}}Fe(fp,On);class pp{constructor(i){this._options=i,this._domResizerWrapper=null,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",r=>{this.state.proposedWidth||(this._cleanup(),r.stop())},{priority:"high"})}attach(){const i=this,r=this._options.viewElement;this._options.editor.editing.view.change(a=>{const c=a.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(d){const f=this.toDomElement(d);return i._appendHandles(f),i._appendSizeUI(f),i._domResizerWrapper=f,i.on("change:isEnabled",(g,_,b)=>{f.style.display=b?"":"none"}),f.style.display=i.isEnabled?"":"none",f});a.insert(a.createPositionAt(r,"end"),c),a.addClass("ck-widget_with-resizer",r),this._viewResizerWrapper=c})}begin(i){this.state=new fp(this._options),this._sizeUI.bindToState(this._options,this.state),this.state.begin(i,this._getHandleHost(),this._getResizeHost())}updateSize(i){const r=this._proposeNewSize(i);this._options.editor.editing.view.change(f=>{const g=this._options.unit;f.setStyle("width",("%"===g?r.widthPercents:r.width)+g,this._options.viewElement)});const a=this._getHandleHost(),c=new Yt(a);r.handleHostWidth=Math.round(c.width),r.handleHostHeight=Math.round(c.height);const d=new Yt(a);r.width=Math.round(d.width),r.height=Math.round(d.height),this.redraw(c),this.state.update(r)}commit(){this._options.onCommit(("%"===this._options.unit?this.state.proposedWidthPercents:this.state.proposedWidth)+this._options.unit),this._cleanup()}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(i){const r=this._domResizerWrapper;var a;(a=r)&&a.ownerDocument&&a.ownerDocument.contains(a)&&this._options.editor.editing.view.change(c=>{const d=r.parentElement,f=this._getHandleHost(),g=i||new Yt(f);c.setStyle("width",g.width+"px",this._viewResizerWrapper),c.setStyle("height",g.height+"px",this._viewResizerWrapper);const _=f.offsetLeft,b=f.offsetTop,y=f.offsetHeight,k=f.offsetWidth;d.isSameNode(f)||(c.setStyle("left",_+"px",this._viewResizerWrapper),c.setStyle("top",b+"px",this._viewResizerWrapper),c.setStyle("height",y+"px",this._viewResizerWrapper),c.setStyle("width",k+"px",this._viewResizerWrapper))})}containsHandle(i){return this._domResizerWrapper.contains(i)}static isResizeHandle(i){return i.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeUI.dismiss(),this._sizeUI.isVisible=!1}_proposeNewSize(i){const r=this.state,a_x=(c=i).pageX,a_y=c.pageY;var c;const d=!this._options.isCentered||this._options.isCentered(this),f={x:r._referenceCoordinates.x-(a_x+r.originalWidth),y:a_y-r.originalHeight-r._referenceCoordinates.y};d&&r.activeHandlePosition.endsWith("-right")&&(f.x=a_x-(r._referenceCoordinates.x+r.originalWidth)),d&&(f.x*=2);const g={width:Math.abs(r.originalWidth+f.x),height:Math.abs(r.originalHeight+f.y)};g.dominant=g.width/r.aspectRatio>g.height?"width":"height",g.max=g[g.dominant];const _={width:g.width,height:g.height};return"width"==g.dominant?_.height=_.width/r.aspectRatio:_.width=_.height*r.aspectRatio,{width:Math.round(_.width),height:Math.round(_.height),widthPercents:Math.min(Math.round(r.originalWidthPercents/r.originalWidth*_.width*100)/100,100)}}_getResizeHost(){return this._options.getResizeHost(this._domResizerWrapper.parentElement)}_getHandleHost(){return this._options.getHandleHost(this._domResizerWrapper.parentElement)}_appendHandles(i){const r=["top-left","top-right","bottom-right","bottom-left"];for(const a of r)i.appendChild(new fr({tag:"div",attributes:{class:`ck-widget__resizer__handle ${lv(a)}`}}).render())}_appendSizeUI(i){const r=new _w;r.render(),this._sizeUI=r,i.appendChild(r.element)}_getHandlePosition(i){const r=["top-left","top-right","bottom-right","bottom-left"];for(const a of r)if(i.classList.contains(lv(a)))return a}}Fe(pp,On);class _w extends st{constructor(){super();const i=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",i.to("activeHandlePosition",r=>r?`ck-orientation-${r}`:"")],style:{display:i.if("isVisible","none",r=>!r)}},children:[{text:i.to("label")}]})}bindToState(i,r){this.bind("isVisible").to(r,"proposedWidth",r,"proposedHeight",(a,c)=>null!==a&&null!==c),this.bind("label").to(r,"proposedHandleHostWidth",r,"proposedHandleHostHeight",r,"proposedWidthPercents",(a,c,d)=>"px"===i.unit?`${a}\xd7${c}`:`${d}%`),this.bind("activeHandlePosition").to(r)}dismiss(){this.unbind(),this.isVisible=!1}}function lv(u){return`ck-widget__resizer__handle-${u}`}T(71);class Dd extends le{static get pluginName(){return"WidgetResize"}init(){this.set("_visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map;const i=ln.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0}),this._observer=Object.create(Fa),this._observer.listenTo(i,"mousedown",(d,f)=>{if(!pp.isResizeHandle(f.target))return;const g=f.target;this._activeResizer=this._getResizerByHandle(g),this._activeResizer&&this._activeResizer.begin(g)}),this._observer.listenTo(i,"mousemove",(d,f)=>{this._activeResizer&&this._activeResizer.updateSize(f)}),this._observer.listenTo(i,"mouseup",()=>{this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)});const r=()=>{this._visibleResizer&&this._visibleResizer.redraw()},a=function(u,i,r){var a=!0,c=!0;if("function"!=typeof u)throw new TypeError("Expected a function");return $n(r)&&(a="leading"in r?!!r.leading:a,c="trailing"in r?!!r.trailing:c),La(u,200,{leading:a,maxWait:200,trailing:c})}(r);this.on("change:_visibleResizer",r),this.editor.ui.on("update",a),this._observer.listenTo(ln.window,"resize",a);const c=this.editor.editing.view.document.selection;c.on("change",()=>{const d=c.getSelectedElement();this._visibleResizer=this._getResizerByViewElement(d)||null})}destroy(){this._observer.stopListening()}attachTo(i){const r=new pp(i),a=this.editor.plugins;if(r.attach(),a.has("WidgetToolbarRepository")){const c=a.get("WidgetToolbarRepository");r.on("begin",()=>{c.forceDisabled("resize")},{priority:"lowest"}),r.on("cancel",()=>{c.clearForceDisabled("resize")},{priority:"highest"}),r.on("commit",()=>{c.clearForceDisabled("resize")},{priority:"highest"})}return this._resizers.set(i.viewElement,r),r}_getResizerByHandle(i){for(const r of this._resizers.values())if(r.containsHandle(i))return r}_getResizerByViewElement(i){return this._resizers.get(i)}}Fe(Dd,On);class bw extends yt{refresh(){const i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=kc(i),this.value=i&&i.hasAttribute("width")?{width:i.getAttribute("width"),height:null}:null}execute(i){const r=this.editor.model,a=r.document.selection.getSelectedElement();r.change(c=>{c.setAttribute("width",i.width,a)})}}T(73);class cv extends yt{constructor(i){super(i),this._childCommands=[]}refresh(){}execute(...i){this._getFirstEnabledCommand().execute(i)}registerChildCommand(i){this._childCommands.push(i),i.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find(i=>i.isEnabled)}}class yw extends le{static get pluginName(){return"IndentEditing"}init(){const i=this.editor;i.commands.add("indent",new cv(i)),i.commands.add("outdent",new cv(i))}}var Ge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 100-1.5h-9.5a.75.75 0 00-.75.75zM2.75 16.5h14.5a.75.75 0 100-1.5H2.75a.75.75 0 100 1.5zM1.632 6.95L5.02 9.358a.4.4 0 01-.013.661l-3.39 2.207A.4.4 0 011 11.892V7.275a.4.4 0 01.632-.326z"/></svg>',A='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 100-1.5h-9.5a.75.75 0 00-.75.75zM2.75 16.5h14.5a.75.75 0 100-1.5H2.75a.75.75 0 100 1.5zM4.368 6.95L.98 9.358a.4.4 0 00.013.661l3.39 2.207A.4.4 0 005 11.892V7.275a.4.4 0 00-.632-.326z"/></svg>';class uv extends le{static get pluginName(){return"IndentUI"}init(){const i=this.editor,r=i.locale,a=i.t,c="ltr"==r.uiLanguageDirection?Ge:A,d="ltr"==r.uiLanguageDirection?A:Ge;this._defineButton("indent",a("y"),c),this._defineButton("outdent",a("z"),d)}_defineButton(i,r,a){const c=this.editor;c.ui.componentFactory.add(i,d=>{const f=c.commands.get(i),g=new Lt(d);return g.set({label:r,icon:a,tooltip:!0}),g.bind("isOn","isEnabled").to(f,"value","isEnabled"),this.listenTo(g,"execute",()=>{c.execute(i),c.editing.view.focus()}),g})}}class gp extends yt{constructor(i,r){super(i),this.type=r}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model,a=Array.from(i.document.selection.getSelectedBlocks()).filter(d=>hv(d,i.schema)),c=!0===this.value;i.change(d=>{if(c){let f=a[a.length-1].nextSibling,g=Number.POSITIVE_INFINITY,_=[];for(;f&&"listItem"==f.name&&0!==f.getAttribute("listIndent");){const b=f.getAttribute("listIndent");b<g&&(g=b),_.push({element:f,listIndent:b-g}),f=f.nextSibling}_=_.reverse();for(const b of _)d.setAttribute("listIndent",b.listIndent,b.element)}if(!c){let f=Number.POSITIVE_INFINITY;for(const g of a)g.is("listItem")&&g.getAttribute("listIndent")<f&&(f=g.getAttribute("listIndent"));f=0===f?1:f,dv(a,!0,f),dv(a,!1,f)}for(const f of a.reverse())c&&"listItem"==f.name?d.rename(f,"paragraph"):c||"listItem"==f.name?c||"listItem"!=f.name||f.getAttribute("listType")==this.type||d.setAttribute("listType",this.type,f):(d.setAttributes({listType:this.type,listIndent:0},f),d.rename(f,"listItem"))})}_getValue(){const i=at(this.editor.model.document.selection.getSelectedBlocks());return!!i&&i.is("listItem")&&i.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const r=this.editor.model.schema,a=at(this.editor.model.document.selection.getSelectedBlocks());return!!a&&hv(a,r)}}function dv(u,i,r){const a=i?u[0]:u[u.length-1];if(a.is("listItem")){let c=a[i?"previousSibling":"nextSibling"],d=a.getAttribute("listIndent");for(;c&&c.is("listItem")&&c.getAttribute("listIndent")>=r;)d>c.getAttribute("listIndent")&&(d=c.getAttribute("listIndent")),c.getAttribute("listIndent")==d&&u[i?"unshift":"push"](c),c=c[i?"previousSibling":"nextSibling"]}}function hv(u,i){return i.checkChild(u.parent,"listItem")&&!i.isObject(u)}class mp extends yt{constructor(i,r){super(i),this._indentBy="forward"==r?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const i=this.editor.model;let a=Array.from(i.document.selection.getSelectedBlocks());i.change(c=>{const d=a[a.length-1];let f=d.nextSibling;for(;f&&"listItem"==f.name&&f.getAttribute("listIndent")>d.getAttribute("listIndent");)a.push(f),f=f.nextSibling;this._indentBy<0&&(a=a.reverse());for(const g of a){const _=g.getAttribute("listIndent")+this._indentBy;_<0?c.rename(g,"paragraph"):c.setAttribute("listIndent",_,g)}})}_checkEnabled(){const i=at(this.editor.model.document.selection.getSelectedBlocks());if(!i||!i.is("listItem"))return!1;if(this._indentBy>0){const r=i.getAttribute("listIndent"),a=i.getAttribute("listType");let c=i.previousSibling;for(;c&&c.is("listItem")&&c.getAttribute("listIndent")>=r;){if(c.getAttribute("listIndent")==r)return c.getAttribute("listType")==a;c=c.previousSibling}return!1}return!0}}function _p(u,i,r,a){const c=i.parent,d=r.mapper,f=r.writer;let g=d.toViewPosition(a.createPositionBefore(u));const _=Cw(u.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:u.getAttribute("listIndent")}),b=u.previousSibling;if(_&&_.getAttribute("listIndent")==u.getAttribute("listIndent")){const y=d.toViewElement(_);g=f.breakContainer(f.createPositionAfter(y))}else g=d.toViewPosition(b&&"listItem"==b.name?a.createPositionAt(b,"end"):a.createPositionBefore(u));if(g=fv(g),f.insert(g,c),b&&"listItem"==b.name){const y=d.toViewElement(b),k=f.createRange(f.createPositionAt(y,0),g).getWalker({ignoreElementEnd:!0});for(const S of k)if(S.item.is("li")){const F=f.breakContainer(f.createPositionBefore(S.item)),$=S.item.parent,G=f.createPositionAt(i,"end");Oo(f,G.nodeBefore,G.nodeAfter),f.move(f.createRangeOn($),G),k.position=F}}else{const y=c.nextSibling;if(y&&(y.is("ul")||y.is("ol"))){let k=null;for(const S of y.getChildren()){const F=d.toModelElement(S);if(!(F&&F.getAttribute("listIndent")>u.getAttribute("listIndent")))break;k=S}k&&(f.breakContainer(f.createPositionAfter(k)),f.move(f.createRangeOn(k.parent),f.createPositionAt(i,"end")))}}Oo(f,c,c.nextSibling),Oo(f,c.previousSibling,c)}function Oo(u,i,r){return!i||!r||"ul"!=i.name&&"ol"!=i.name||i.name!=r.name||i.getAttribute("class")!==r.getAttribute("class")?null:u.mergeContainers(u.createPositionAfter(i))}function fv(u){return u.getLastMatchingPosition(i=>i.item.is("uiElement"))}function Cw(u,i){const r=!!i.sameIndent,a=!!i.smallerIndent,c=i.listIndent;let d=u;for(;d&&"listItem"==d.name;){const f=d.getAttribute("listIndent");if(r&&c==f||a&&c>f)return d;d=d.previousSibling}return null}function vp(u,i,r,a){u.ui.componentFactory.add(i,c=>{const d=u.commands.get(i),f=new Lt(c);return f.set({label:r,icon:a,tooltip:!0,isToggleable:!0}),f.bind("isOn","isEnabled").to(d,"value","isEnabled"),f.on("execute",()=>{u.execute(i),u.editing.view.focus()}),f})}function pv(){const u=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||u?0:Ly.call(this)}function Gn(u){return(i,r,a)=>{const c=a.consumable;if(!c.test(r.item,"insert")||!c.test(r.item,"attribute:listType")||!c.test(r.item,"attribute:listIndent"))return;c.consume(r.item,"insert"),c.consume(r.item,"attribute:listType"),c.consume(r.item,"attribute:listIndent");const d=r.item;_p(d,function ww(u,i){const r=i.mapper,a=i.writer,c="numbered"==u.getAttribute("listType")?"ol":"ul",d=function(g){const _=g.createContainerElement("li");return _.getFillerOffset=pv,_}(a),f=a.createContainerElement(c,null);return a.insert(a.createPositionAt(f,0),d),r.bindElements(u,d),d}(d,a),a,u)}}function kw(u,i,r){if(!r.consumable.consume(i.item,"attribute:listType"))return;const a=r.mapper.toViewElement(i.item),c=r.writer;c.breakContainer(c.createPositionBefore(a)),c.breakContainer(c.createPositionAfter(a)),c.rename("numbered"==i.attributeNewValue?"ol":"ul",a.parent)}function bp(u,i,r){const a=r.mapper.toViewElement(i.item).parent,c=r.writer;Oo(c,a,a.nextSibling),Oo(c,a.previousSibling,a);for(const d of i.item.getChildren())r.consumable.consume(d,"insert")}function Md(u,i,r){if("listItem"!=i.item.name){let a=r.mapper.toViewPosition(i.range.start);const c=r.writer,d=[];for(;("ul"==a.parent.name||"ol"==a.parent.name)&&(a=c.breakContainer(a),"li"==a.parent.name);){const f=a,g=c.createPositionAt(a.parent,"end");if(!f.isEqual(g)){const _=c.remove(c.createRange(f,g));d.push(_)}a=c.createPositionAfter(a.parent)}if(d.length>0){for(let f=0;f<d.length;f++){const g=a.nodeBefore;if(a=c.insert(a,d[f]).end,f>0){const _=Oo(c,g,g.nextSibling);_&&_.parent==g&&a.offset--}}Oo(c,a.nodeBefore,a.nodeAfter)}}}function xw(u,i,r){const a=r.mapper.toViewPosition(i.position);Oo(r.writer,a.nodeBefore,a.nodeAfter)}function lT(u,i,r){if(r.consumable.consume(i.viewItem,{name:!0})){const a=r.writer,c=a.createElement("listItem"),d=function(b){let y=0,k=b.parent;for(;k;){if(k.is("li"))y++;else{const S=k.previousSibling;S&&S.is("li")&&y++}k=k.parent}return y}(i.viewItem);a.setAttribute("listIndent",d,c),a.setAttribute("listType",i.viewItem.parent&&"ol"==i.viewItem.parent.name?"numbered":"bulleted",c);const g=r.splitToAllowedParent(c,i.modelCursor);if(!g)return;a.insert(c,g.position);const _=function(b,y,k){const{writer:S,schema:F}=k;let $=S.createPositionAfter(b);for(const G of y)if("ul"==G.name||"ol"==G.name)$=k.convertItem(G,$).modelCursor;else{const Y=k.convertItem(G,S.createPositionAt(b,"end")),oe=Y.modelRange.start.nodeAfter;oe&&oe.is("element")&&!F.checkChild(b,oe.name)&&(b=Y.modelCursor.parent.is("listItem")?Y.modelCursor.parent:uT(Y.modelCursor),$=S.createPositionAfter(b))}return $}(c,i.viewItem.getChildren(),r);i.modelRange=a.createRange(i.modelCursor,_),i.modelCursor=g.cursorParent?a.createPositionAt(g.cursorParent,0):i.modelRange.end}}function Ew(u,i,r){if(r.consumable.test(i.viewItem,{name:!0})){const a=Array.from(i.viewItem.getChildren());for(const c of a)!c.is("li")&&!Po(c)&&c._remove()}}function cT(u,i,r){if(r.consumable.test(i.viewItem,{name:!0})){if(0===i.viewItem.childCount)return;const a=[...i.viewItem.getChildren()];let c=!1,d=!0;for(const f of a)c&&!Po(f)&&f._remove(),f.is("text")?(d&&(f._data=f.data.replace(/^\s+/,"")),f.nextSibling&&!Po(f.nextSibling)||(f._data=f.data.replace(/\s+$/,""))):Po(f)&&(c=!0),d=!1}}function gv(u){return(i,r)=>{if(r.isPhantom)return;const a=r.modelPosition.nodeBefore;if(a&&a.is("listItem")){const c=r.mapper.toViewElement(a),d=c.getAncestors().find(Po),f=u.createPositionAt(c,0).getWalker();for(const g of f){if("elementStart"==g.type&&g.item.is("li")){r.viewPosition=g.previousPosition;break}if("elementEnd"==g.type&&g.item==d){r.viewPosition=g.nextPosition;break}}}}}function mv(u,[i,r]){let a,c=i.is("documentFragment")?i.getChild(0):i;if(a=r?this.createSelection(r):this.document.selection,c&&c.is("listItem")){const d=a.getFirstPosition();let f=null;if(d.parent.is("listItem")?f=d.parent:d.nodeBefore&&d.nodeBefore.is("listItem")&&(f=d.nodeBefore),f){const g=f.getAttribute("listIndent");if(g>0)for(;c&&c.is("listItem");)c._setAttribute("listIndent",c.getAttribute("listIndent")+g),c=c.nextSibling}}}function uT(u){const i=new Do({startPosition:u});let r;do{r=i.next()}while(!r.value.item.is("listItem"));return r.value.item}function _v(u,i,r,a,c,d){const f=Cw(i.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:u,foo:"b"}),g=c.mapper,_=c.writer,b=f?f.getAttribute("listIndent"):null;let y;if(f)if(b==u){const k=g.toViewElement(f).parent;y=_.createPositionAfter(k)}else{const k=d.createPositionAt(f,"end");y=g.toViewPosition(k)}else y=r;y=fv(y);for(const k of[...a.getChildren()])Po(k)&&(y=_.move(_.createRangeOn(k),y).end,Oo(_,k,k.nextSibling),Oo(_,k.previousSibling,k))}function Po(u){return u.is("ol")||u.is("ul")}class Tw extends le{static get pluginName(){return"ListEditing"}static get requires(){return[Ja]}init(){const i=this.editor;i.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const r=i.data,a=i.editing;var c;i.model.document.registerPostFixer(g=>function(_,b){const y=_.document.differ.getChanges(),k=new Map;let S=!1;for(const Y of y)if("insert"==Y.type&&"listItem"==Y.name)F(Y.position);else if("insert"==Y.type&&"listItem"!=Y.name){if("$text"!=Y.name){const oe=Y.position.nodeAfter;oe.hasAttribute("listIndent")&&(b.removeAttribute("listIndent",oe),S=!0),oe.hasAttribute("listType")&&(b.removeAttribute("listType",oe),S=!0);for(const ue of Array.from(_.createRangeIn(oe)).filter(we=>we.item.is("listItem")))F(ue.previousPosition)}F(Y.position.getShiftedBy(Y.length))}else"remove"==Y.type&&"listItem"==Y.name?F(Y.position):("attribute"==Y.type&&"listIndent"==Y.attributeKey||"attribute"==Y.type&&"listType"==Y.attributeKey)&&F(Y.range.start);for(const Y of k.values())$(Y),G(Y);return S;function F(Y){const oe=Y.nodeBefore;if(oe&&oe.is("listItem")){let ue=oe;if(k.has(ue))return;for(;ue.previousSibling&&ue.previousSibling.is("listItem");)if(ue=ue.previousSibling,k.has(ue))return;k.set(Y.nodeBefore,ue)}else{const ue=Y.nodeAfter;ue&&ue.is("listItem")&&k.set(ue,ue)}}function $(Y){let oe=0,ue=null;for(;Y&&Y.is("listItem");){const we=Y.getAttribute("listIndent");if(we>oe){let qe;null===ue?(ue=we-oe,qe=oe):(ue>we&&(ue=we),qe=we-ue),b.setAttribute("listIndent",qe,Y),S=!0}else ue=null,oe=Y.getAttribute("listIndent")+1;Y=Y.nextSibling}}function G(Y){let oe=[],ue=null;for(;Y&&Y.is("listItem");){const we=Y.getAttribute("listIndent");if(ue&&ue.getAttribute("listIndent")>we&&(oe=oe.slice(0,we+1)),0!=we)if(oe[we]){const qe=oe[we];Y.getAttribute("listType")!=qe&&(b.setAttribute("listType",qe,Y),S=!0)}else oe[we]=Y.getAttribute("listType");ue=Y,Y=Y.nextSibling}}}(i.model,g)),a.mapper.registerViewToModelLength("li",Sd),r.mapper.registerViewToModelLength("li",Sd),a.mapper.on("modelToViewPosition",gv(a.view)),a.mapper.on("viewToModelPosition",(c=i.model,(g,_)=>{const b=_.viewPosition,y=b.parent,k=_.mapper;if("ul"==y.name||"ol"==y.name){if(b.isAtEnd){const S=k.toModelElement(b.nodeBefore),F=k.getModelLength(b.nodeBefore);_.modelPosition=c.createPositionBefore(S).getShiftedBy(F)}else{const S=k.toModelElement(b.nodeAfter);_.modelPosition=c.createPositionBefore(S)}g.stop()}else if("li"==y.name&&b.nodeBefore&&("ul"==b.nodeBefore.name||"ol"==b.nodeBefore.name)){const S=k.toModelElement(y);let F=1,$=b.nodeBefore;for(;$&&Po($);)F+=k.getModelLength($),$=$.previousSibling;_.modelPosition=c.createPositionBefore(S).getShiftedBy(F),g.stop()}})),r.mapper.on("modelToViewPosition",gv(a.view)),i.conversion.for("editingDowncast").add(g=>{var _;g.on("insert",Md,{priority:"high"}),g.on("insert:listItem",Gn(i.model)),g.on("attribute:listType:listItem",kw,{priority:"high"}),g.on("attribute:listType:listItem",bp,{priority:"low"}),g.on("attribute:listIndent:listItem",(_=i.model,(b,y,k)=>{if(!k.consumable.consume(y.item,"attribute:listIndent"))return;const S=k.mapper.toViewElement(y.item),F=k.writer;F.breakContainer(F.createPositionBefore(S)),F.breakContainer(F.createPositionAfter(S));const $=S.parent,G=$.previousSibling,Y=F.createRangeOn($);F.remove(Y),G&&G.nextSibling&&Oo(F,G,G.nextSibling),_v(y.attributeOldValue+1,y.range.start,Y.start,S,k,_),_p(y.item,S,k,_);for(const oe of y.item.getChildren())k.consumable.consume(oe,"insert")})),g.on("remove:listItem",function(_){return(b,y,k)=>{const S=k.mapper.toViewPosition(y.position).getLastMatchingPosition(ue=>!ue.item.is("li")).nodeAfter,F=k.writer;F.breakContainer(F.createPositionBefore(S)),F.breakContainer(F.createPositionAfter(S));const $=S.parent,G=$.previousSibling,Y=F.createRangeOn($),oe=F.remove(Y);G&&G.nextSibling&&Oo(F,G,G.nextSibling),_v(k.mapper.toModelElement(S).getAttribute("listIndent")+1,y.position,Y.start,S,k,_);for(const ue of F.createRangeIn(oe).getItems())k.mapper.unbindViewElement(ue);b.stop()}}(i.model)),g.on("remove",xw,{priority:"low"})}),i.conversion.for("dataDowncast").add(g=>{g.on("insert",Md,{priority:"high"}),g.on("insert:listItem",Gn(i.model))}),i.conversion.for("upcast").add(g=>{g.on("element:ul",Ew,{priority:"high"}),g.on("element:ol",Ew,{priority:"high"}),g.on("element:li",cT,{priority:"high"}),g.on("element:li",lT)}),i.model.on("insertContent",mv,{priority:"high"}),i.commands.add("numberedList",new gp(i,"numbered")),i.commands.add("bulletedList",new gp(i,"bulleted")),i.commands.add("indentList",new mp(i,"forward")),i.commands.add("outdentList",new mp(i,"backward"));const d=a.view.document;this.listenTo(d,"enter",(g,_)=>{const b=this.editor.model.document,y=b.selection.getLastPosition().parent;b.selection.isCollapsed&&"listItem"==y.name&&y.isEmpty&&(this.editor.execute("outdentList"),_.preventDefault(),g.stop())}),this.listenTo(d,"delete",(g,_)=>{if("backward"!==_.direction)return;const b=this.editor.model.document.selection;if(!b.isCollapsed)return;const y=b.getFirstPosition();if(!y.isAtStart)return;const k=y.parent;"listItem"===k.name&&(k.previousSibling&&"listItem"===k.previousSibling.name||(this.editor.execute("outdentList"),_.preventDefault(),g.stop()))},{priority:"high"});const f=g=>(_,b)=>{this.editor.commands.get(g).isEnabled&&(this.editor.execute(g),b())};i.keystrokes.set("Tab",f("indentList")),i.keystrokes.set("Shift+Tab",f("outdentList"))}afterInit(){const i=this.editor.commands,r=i.get("indent"),a=i.get("outdent");r&&r.registerChildCommand(i.get("indentList")),a&&a.registerChildCommand(i.get("outdentList"))}}function Sd(u){let i=1;for(const r of u.getChildren())if("ul"==r.name||"ol"==r.name)for(const a of r.getChildren())i+=Sd(a);return i}class Ad extends le{init(){const i=this.editor.t;vp(this.editor,"numberedList",i("aa"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 100-1.5h-9.5a.75.75 0 00-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 10-1.04 0H.302a2 2 0 113.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 01.75-.75h9.5a.75.75 0 110 1.5h-9.5a.75.75 0 01-.75-.75z"/></svg>'),vp(this.editor,"bulletedList",i("ab"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 100-1.5h-9.5a.75.75 0 00-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 100-1.5h-9.5a.75.75 0 00-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>')}}function vv(u){const i={},r=u.getStyle("mso-list");if(r){const a=r.match(/(^|\s+)l(\d+)/i),c=r.match(/\s*lfo(\d+)/i),d=r.match(/\s*level(\d+)/i);a&&c&&d&&(i.id=a[2],i.order=c[1],i.indent=d[1])}return i}const Mw=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class Sw{isActive(i){return Mw.test(i)}execute(i){const r=new il;(function(a,c){for(const d of a.getChildren())if(d.is("b")&&"normal"===d.getStyle("font-weight")){const f=a.getChildIndex(d);c.remove(d),c.insertChild(f,d.getChildren(),a)}})(i.content,r),function(a,c){for(const d of c.createRangeIn(a)){const f=d.item;if(f.is("li")){const g=f.getChild(0);g.is("p")&&c.unwrapElement(g)}}}(i.content,r)}}function bv(u){return u.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(i,r)=>1===r.length?" ":Array(r.length+1).join("\xa0 ").substr(0,r.length))}const yv=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Pw=/xmlns:o="urn:schemas-microsoft-com/i;class wv{isActive(i){return yv.test(i)||Pw.test(i)}execute(i){const{body:r,stylesString:a}=function Aw(u){const i=new DOMParser,r=bv(bv(function(g){const _=g.match(/<\/body>(.*?)(<\/html>|$)/);return _&&_[1]&&(g=g.slice(0,_.index)+g.slice(_.index).replace(_[1],"")),g}(u=u.replace(/<!--\[if gte vml 1]>/g,"")))).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xa0</").replace(/ <o:p><\/o:p>/g,"\xa0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>(\s*[\r\n]\s*)</g,"><"),a=i.parseFromString(r,"text/html");a.querySelectorAll("span[style*=spacerun]").forEach(_=>{const b=_.childNodes&&_.childNodes[0]&&_.childNodes[0].data&&_.childNodes[0].data.length||0;_.innerHTML=Array(b+1).join("\xa0 ").substr(0,b)});const c=a.body.innerHTML,d=function(g){const _=new Kl({blockFillerMode:"nbsp"}),b=g.createDocumentFragment(),y=g.body.childNodes;for(;y.length>0;)b.appendChild(y[0]);return _.domToView(b)}(a),f=function(g){const _=[],b=[],y=Array.from(g.getElementsByTagName("style"));for(const k of y)k.sheet&&k.sheet.cssRules&&k.sheet.cssRules.length&&(_.push(k.sheet),b.push(k.innerHTML));return{styles:_,stylesString:b.join(" ")}}(a);return{body:d,bodyString:c,styles:f.styles,stylesString:f.stylesString}}(i.dataTransfer.getData("text/html"));(function Dw(u,i){if(!u.childCount)return;const r=new il,a=function(d,f){const g=f.createRangeIn(d),_=new wn({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),b=[];for(const y of g)if("elementStart"===y.type&&_.match(y.item)){const k=vv(y.item);b.push({element:y.item,id:k.id,order:k.order,indent:k.indent})}return b}(u,r);if(!a.length)return;let c=null;a.forEach((d,f)=>{if(!c||function(_,b){if(_.id!==b.id)return!0;const y=b.element.previousSibling;return!y||!((k=y).is("ol")||k.is("ul"));var k}(a[f-1],d)){const _=function(b,y){const S=/mso-level-number-format:([^;]*);/gi,F=new RegExp(`@list l${b.id}:level${b.indent}\\s*({[^}]*)`,"gi").exec(y);let $="decimal";if(F&&F[1]){const G=S.exec(F[1]);G&&G[1]&&($=G[1].trim())}return{type:"bullet"!==$&&"image"!==$?"ol":"ul",style:$}}(d,i);c=function(b,y,k){const S=new Eo(b.type),F=y.parent.getChildIndex(y);return k.insertChild(F,S,y.parent),S}(_,d.element,r)}const g=(function(y,k){const S=new wn({name:"span",styles:{"mso-list":"Ignore"}}),F=k.createRangeIn(y);for(const $ of F)"elementStart"===$.type&&S.match($.item)&&k.remove($.item)}(_=d.element,b=r),b.rename("li",_));var _,b;r.appendChild(g,c)})})(r,a),function Ow(u,i){if(!u.childCount)return;const r=new il;(function(c,d,f){const g=f.createRangeIn(d),_=new wn({name:"img"}),b=[];for(const y of g)if(_.match(y.item)){const k=y.item,S=k.getAttribute("v:shapes")?k.getAttribute("v:shapes").split(" "):[];S.length&&S.every(F=>c.indexOf(F)>-1)?b.push(k):k.getAttribute("src")||b.push(k)}for(const y of b)f.remove(y)})(function(c,d){const f=d.createRangeIn(c),g=new wn({name:/v:(.+)/}),_=[];for(const b of f){const y=b.item,k=y.previousSibling&&y.previousSibling.name||null;g.match(y)&&y.getAttribute("o:gfxdata")&&"v:shapetype"!==k&&_.push(b.item.getAttribute("id"))}return _}(u,r),u,r),function(c,d){const f=d.createRangeIn(c),g=new wn({name:/v:(.+)/}),_=[];for(const b of f)g.match(b.item)&&_.push(b.item);for(const b of _)d.remove(b)}(u,r);const a=function(c,d){const f=d.createRangeIn(c),g=new wn({name:"img"}),_=[];for(const b of f)g.match(b.item)&&b.item.getAttribute("src").startsWith("file://")&&_.push(b.item);return _}(u,r);a.length&&function(c,d,f){if(c.length===d.length)for(let _=0;_<c.length;_++){const b=`data:${d[_].type};base64,${g=d[_].hex,btoa(g.match(/\w{2}/g).map(y=>String.fromCharCode(parseInt(y,16))).join(""))}`;f.setAttribute("src",b,c[_])}var g}(a,function(c){if(!c)return[];const d=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,f=new RegExp("(?:("+d.source+"))([\\da-fA-F\\s]+)\\}","g"),g=c.match(f),_=[];if(g)for(const b of g){let y=!1;b.includes("\\pngblip")?y="image/png":b.includes("\\jpegblip")&&(y="image/jpeg"),y&&_.push({hex:b.replace(d,"").replace(/[^\da-fA-F]/g,""),type:y})}return _}(i),r)}(r,i.dataTransfer.getData("text/rtf")),i.content=r}}function Vn(u,i){let r=i.parent;for(;r;){if(r.name===u)return r;r=r.parent}}function Ii(u,i,r,a,c=1){i>c?a.setAttribute(u,i,r):a.removeAttribute(u,r)}function yp(u,i,r={}){const a=u.createElement("tableCell",r);u.insertElement("paragraph",a),u.insert(a,i)}function Cv(u){return i=>{i.on(`element:${u}`,(r,a,c)=>{const d=a.viewItem;if(!c.consumable.test(d,{name:!0}))return;const f=c.writer.createElement("tableCell"),g=c.splitToAllowedParent(f,a.modelCursor);if(!g)return;c.writer.insert(f,g.position),c.consumable.consume(d,{name:!0});const _=c.writer.createPositionAt(f,0);c.convertChildren(d,_),f.childCount||c.writer.insertElement("paragraph",_),a.modelRange=c.writer.createRange(c.writer.createPositionBefore(f),c.writer.createPositionAfter(f)),a.modelCursor=a.modelRange.end})}}function dT(u){let i=0,r=0;const a=Array.from(u.getChildren()).filter(c=>"th"===c.name||"td"===c.name);for(;r<a.length&&"th"===a[r].name;)i+=parseInt(a[r].getAttribute("colspan")||1),r++;return i}class z{constructor(i,r={}){this.table=i,this.startRow=r.startRow||0,this.endRow="number"==typeof r.endRow?r.endRow:void 0,this.includeSpanned=!!r.includeSpanned,this.column="number"==typeof r.column?r.column:void 0,this._skipRows=new Set,this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const i=this.table.getChild(this._row);if(!i||this._isOverEndRow())return{done:!0};let r,a,c;if(this._isSpanned(this._row,this._column))r=this._getSpanned(this._row,this._column),a=!this.includeSpanned||this._shouldSkipRow()||this._shouldSkipColumn(),c=this._formatOutValue(r,this._column,!0);else{if(r=i.getChild(this._cellIndex),!r)return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();const d=parseInt(r.getAttribute("colspan")||1),f=parseInt(r.getAttribute("rowspan")||1);(d>1||f>1)&&this._recordSpans(this._row,this._column,f,d,r),this._nextCellAtColumn=this._column+d,a=this._shouldSkipRow()||this._shouldSkipColumn(),c=this._formatOutValue(r,this._column,!1,f,d)}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,a?this.next():c}skipRow(i){this._skipRows.add(i)}_isOverEndRow(){return void 0!==this.endRow&&this._row>this.endRow}_formatOutValue(i,r,a,c=1,d=1){return{done:!1,value:{cell:i,row:this._row,column:r,isSpanned:a,rowspan:c,colspan:d,cellIndex:this._cellIndex}}}_shouldSkipRow(){const i=this._row<this.startRow,r=this._skipRows.has(this._row);return i||r}_shouldSkipColumn(){return void 0!==this.column&&this.column!=this._column}_isSpanned(i,r){return!!this._spannedCells.has(i)&&this._spannedCells.get(i).has(r)}_getSpanned(i,r){return this._spannedCells.get(i).get(r)}_recordSpans(i,r,a,c,d){for(let f=r+1;f<=r+c-1;f++)this._markSpannedCell(i,f,d);for(let f=i+1;f<i+a;f++)for(let g=r;g<=r+c-1;g++)this._markSpannedCell(f,g,d)}_markSpannedCell(i,r,a){this._spannedCells.has(i)||this._spannedCells.set(i,new Map),this._spannedCells.get(i).set(r,a)}}function Od(u){return!!u.getCustomProperty("table")&&pr(u)}function kv(u){const i=u.getSelectedElement();return i&&Od(i)?i:null}function Pd(u){const i=Vn("table",u.getFirstPosition());return i&&Od(i.parent)?i.parent:null}function No(u={}){return i=>i.on("insert:table",(r,a,c)=>{const d=a.item;if(!c.consumable.consume(d,"insert"))return;c.consumable.consume(d,"attribute:headingRows:table"),c.consumable.consume(d,"attribute:headingColumns:table");const f=u&&u.asWidget,g=c.writer.createContainerElement("figure",{class:"table"}),_=c.writer.createContainerElement("table");let b;var y,k;c.writer.insert(c.writer.createPositionAt(g,0),_),f&&((k=c.writer).setCustomProperty("table",!0,y=g),b=Qa(y,k,{hasSelectionHandle:!0}));const S=new z(d),F={headingRows:d.getAttribute("headingRows")||0,headingColumns:d.getAttribute("headingColumns")||0},$=new Map;for(const Y of S){const{row:oe,cell:ue}=Y,we=ra(Iw(oe,F),_,c),qe=d.getChild(oe),Nn=$.get(oe)||Nw(qe,oe,we,c);$.set(oe,Nn),c.consumable.consume(ue,"insert"),Mc(Y,F,c.writer.createPositionAt(Nn,"end"),c,u)}const G=c.mapper.toViewPosition(a.range.start);c.mapper.bindElements(d,f?b:g),c.writer.insert(G,f?b:g)})}function Cp(u={}){return i=>i.on("insert:tableRow",(r,a,c)=>{const d=a.item;if(!c.consumable.consume(d,"insert"))return;const f=d.parent,g=Ld(c.mapper.toViewElement(f)),_=f.getChildIndex(d),b=new z(f,{startRow:_,endRow:_}),y={headingRows:f.getAttribute("headingRows")||0,headingColumns:f.getAttribute("headingColumns")||0},k=new Map;for(const S of b){const F=ra(Iw(_,y),g,c),$=k.get(_)||Nw(d,_,F,c);k.set(_,$),c.consumable.consume(S.cell,"insert"),Mc(S,y,c.writer.createPositionAt($,"end"),c,u)}})}function xv(u={}){return i=>i.on("insert:tableCell",(r,a,c)=>{const d=a.item;if(!c.consumable.consume(d,"insert"))return;const f=d.parent,g=f.parent,_=g.getChildIndex(f),b=new z(g,{startRow:_,endRow:_}),y={headingRows:g.getAttribute("headingRows")||0,headingColumns:g.getAttribute("headingColumns")||0};for(const k of b)if(k.cell===d){const S=c.mapper.toViewElement(f);return void Mc(k,y,c.writer.createPositionAt(S,f.getChildIndex(d)),c,u)}})}function Nd(u={}){const i=!!u.asWidget;return r=>r.on("attribute:headingRows:table",(a,c,d)=>{const f=c.item;if(!d.consumable.consume(c.item,a.name))return;const g=Ld(d.mapper.toViewElement(f)),_=c.attributeOldValue,b=c.attributeNewValue;if(b>_){const k=Array.from(f.getChildren()).filter(({index:S})=>y(S,_-1,b));Fd(k,ra("thead",g,d),d,"end");for(const S of k)for(const F of S.getChildren())Id(F,"th",d,i);Rd("tbody",g,d)}else{Fd(Array.from(f.getChildren()).filter(({index:F})=>y(F,b-1,_)).reverse(),ra("tbody",g,d),d,0);const k=new z(f,{startRow:b&&b-1,endRow:_-1}),S={headingRows:f.getAttribute("headingRows")||0,headingColumns:f.getAttribute("headingColumns")||0};for(const F of k)kp(F,S,d,i);Rd("thead",g,d)}function y(k,S,F){return k>S&&k<F}})}function gr(u={}){const i=!!u.asWidget;return r=>r.on("attribute:headingColumns:table",(a,c,d)=>{const f=c.item;if(!d.consumable.consume(c.item,a.name))return;const g={headingRows:f.getAttribute("headingRows")||0,headingColumns:f.getAttribute("headingColumns")||0},_=c.attributeOldValue,b=c.attributeNewValue,y=(_>b?_:b)-1;for(const k of new z(f))k.column>y||kp(k,g,d,i)})}function Id(u,i,r,a){const c=r.writer,d=r.mapper.toViewElement(u);if(!d)return;let f;a?(f=Vr(c.createEditableElement(i,d.getAttributes()),c),c.insert(c.createPositionAfter(d),f),c.move(c.createRangeIn(d),c.createPositionAt(f,0)),c.remove(c.createRangeOn(d))):f=c.rename(i,d),r.mapper.unbindViewElement(d),r.mapper.bindElements(u,f)}function kp(u,i,r,a){const{cell:c}=u,d=xp(u,i),f=r.mapper.toViewElement(c);f&&f.name!==d&&Id(c,d,r,a)}function Mc(u,i,r,a,c){const d=c&&c.asWidget,f=xp(u,i),g=d?Vr(a.writer.createEditableElement(f),a.writer):a.writer.createContainerElement(f),_=u.cell,b=_.getChild(0),y=1===_.childCount&&"paragraph"===b.name;if(a.writer.insert(r,g),y&&![...b.getAttributeKeys()].length){const k=_.getChild(0),S=a.writer.createPositionAt(g,"end");if(a.consumable.consume(k,"insert"),c.asWidget){const F=a.writer.createContainerElement("span",{style:"display:inline-block"});a.mapper.bindElements(k,F),a.writer.insert(S,F),a.mapper.bindElements(_,g)}else a.mapper.bindElements(_,g),a.mapper.bindElements(k,g)}else a.mapper.bindElements(_,g)}function Nw(u,i,r,a){a.consumable.consume(u,"insert");const c=a.writer.createContainerElement("tr");a.mapper.bindElements(u,c);const d=u.parent.getAttribute("headingRows")||0,g=a.writer.createPositionAt(r,d>0&&i>=d?i-d:i);return a.writer.insert(g,c),c}function xp(u,i){const{row:r,column:a}=u,{headingColumns:c,headingRows:d}=i;return d&&d>r||c&&c>a?"th":"td"}function Iw(u,i){return u<i.headingRows?"thead":"tbody"}function ra(u,i,r){return Sc(u,i)||function(c,d,f){const g=f.writer.createContainerElement(c),_=f.writer.createPositionAt(d,"tbody"==c?"end":0);return f.writer.insert(_,g),g}(u,i,r)}function Sc(u,i){for(const r of i.getChildren())if(r.name==u)return r}function Rd(u,i,r){const a=Sc(u,i);a&&0===a.childCount&&r.writer.remove(r.writer.createRangeOn(a))}function Fd(u,i,r,a){for(const c of u){const d=r.mapper.toViewElement(c);d&&r.writer.move(r.writer.createRangeOn(d),r.writer.createPositionAt(i,a))}}function Ld(u){for(const i of u.getChildren())if("table"===i.name)return i}class hT extends yt{refresh(){const i=this.editor.model,a=i.schema,c=function(d){const f=d.parent;return f===f.root?f:f.parent}(i.document.selection.getFirstPosition());this.isEnabled=a.checkChild(c,"table")}execute(i={}){const r=this.editor.model,a=r.document.selection,c=this.editor.plugins.get("TableUtils"),d=parseInt(i.rows)||2,f=parseInt(i.columns)||2,g=Cc(a,r);r.change(_=>{const b=c.createTable(_,d,f);r.insertContent(b,g),_.setSelection(_.createPositionAt(b.getNodeByPath([0,0,0]),0))})}}class Ev extends yt{constructor(i,r={}){super(i),this.order=r.order||"below"}refresh(){const i=Vn("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!i}execute(){const i=this.editor,r=i.model.document.selection,a=i.plugins.get("TableUtils"),c=Vn("tableCell",r.getFirstPosition()).parent,d=c.parent,f=d.getChildIndex(c);a.insertRows(d,{rows:1,at:"below"===this.order?f+1:f})}}class Tv extends yt{constructor(i,r={}){super(i),this.order=r.order||"right"}refresh(){const i=Vn("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!i}execute(){const i=this.editor,r=i.model.document.selection,a=i.plugins.get("TableUtils"),c=Vn("tableCell",r.getFirstPosition()),d=c.parent.parent,{column:f}=a.getCellLocation(c);a.insertColumns(d,{columns:1,at:"right"===this.order?f+1:f})}}class Dv extends yt{constructor(i,r={}){super(i),this.direction=r.direction||"horizontally"}refresh(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!i}execute(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition()),r="horizontally"===this.direction,a=this.editor.plugins.get("TableUtils");r?a.splitCellHorizontally(i,2):a.splitCellVertically(i,2)}}class Bd extends yt{constructor(i,r){super(i),this.direction=r.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const i=this._getMergeableCell();this.value=i,this.isEnabled=!!i}execute(){const i=this.editor.model,r=Vn("tableCell",i.document.selection.getFirstPosition()),a=this.value,c=this.direction;i.change(d=>{const f="right"==c||"down"==c,g=f?r:a,_=f?a:r,b=_.parent;var F,$,G;$=g,G=d,Ep(F=_)||(Ep($)&&G.remove(G.createRangeIn($)),G.move(G.createRangeIn(F),G.createPositionAt($,"end"))),G.remove(F);const y=this.isHorizontal?"colspan":"rowspan",k=parseInt(r.getAttribute(y)||1),S=parseInt(a.getAttribute(y)||1);d.setAttribute(y,k+S,g),d.setSelection(d.createRangeIn(g)),b.childCount||function(F,$){const G=F.parent,Y=G.getChildIndex(F);for(const{cell:oe,row:ue,rowspan:we}of new z(G,{endRow:Y}))ue+we-1>=Y&&Ii("rowspan",we-1,oe,$);$.remove(F)}(b,d)})}_getMergeableCell(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition());if(!i)return;const r=this.editor.plugins.get("TableUtils"),a=this.isHorizontal?function(f,g,_){const y="right"==g?f.nextSibling:f.previousSibling,k=f.parent.parent.getAttribute("headingColumns")||0;if(!y)return;const S="right"==g?f:y,F="right"==g?y:f,{column:$}=_.getCellLocation(S),{column:G}=_.getCellLocation(F),Y=parseInt(S.getAttribute("colspan")||1),oe=parseInt(F.getAttribute("colspan")||1);return k&&("right"==g&&G+oe>k||"left"==g&&$+Y>k-1)?void 0:$+Y===G?y:void 0}(i,this.direction,r):function(f,g){const _=f.parent,b=_.parent,y=b.getChildIndex(_);if("down"==g&&y===b.childCount-1||"up"==g&&0===y)return;const k=parseInt(f.getAttribute("rowspan")||1),S=b.getAttribute("headingRows")||0;if(S&&("down"==g&&y+k===S||"up"==g&&y===S))return;const G=parseInt(f.getAttribute("rowspan")||1),Y="down"==g?y+G:y,oe=[...new z(b,{endRow:Y})],ue=oe.find(qe=>qe.cell===f).column,we=oe.find(({row:qe,rowspan:Nn,column:Gt})=>Gt===ue&&("down"==g?qe===Y:Y===qe+Nn));return we&&we.cell}(i,this.direction);if(!a)return;const c=this.isHorizontal?"rowspan":"colspan",d=parseInt(i.getAttribute(c)||1);return parseInt(a.getAttribute(c)||1)===d?a:void 0}}function Ep(u){return 1==u.childCount&&u.getChild(0).is("paragraph")&&u.getChild(0).isEmpty}class fT extends yt{refresh(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!i&&i.parent.parent.childCount>1}execute(){const i=this.editor.model,r=Vn("tableCell",i.document.selection.getFirstPosition()).parent,a=r.parent,c=a.getChildIndex(r),d=a.getAttribute("headingRows")||0;i.change(f=>{d&&c<=d&&Ii("headingRows",d-1,a,f,0);const g=[...new z(a,{endRow:c})],_=new Map;g.filter(({row:S,rowspan:F})=>S===c&&F>1).forEach(({column:S,cell:F,rowspan:$})=>_.set(S,{cell:F,rowspanToSet:$-1})),g.filter(({row:S,rowspan:F})=>S<=c-1&&S+F>c).forEach(({cell:S,rowspan:F})=>Ii("rowspan",F-1,S,f));const b=c+1,y=new z(a,{includeSpanned:!0,startRow:b,endRow:b});let k;for(const{row:S,column:F,cell:$}of[...y])if(_.has(F)){const{cell:G,rowspanToSet:Y}=_.get(F),oe=k?f.createPositionAfter(k):f.createPositionAt(a.getChild(S),0);f.move(f.createRangeOn(G),oe),Ii("rowspan",Y,G,f),k=G}else k=$;f.remove(r)})}}class Rw extends yt{refresh(){const i=this.editor,r=i.model.document.selection,a=i.plugins.get("TableUtils"),c=Vn("tableCell",r.getFirstPosition());this.isEnabled=!!c&&a.getColumns(c.parent.parent)>1}execute(){const i=this.editor.model,r=Vn("tableCell",i.document.selection.getFirstPosition()),a=r.parent,c=a.parent,d=c.getAttribute("headingColumns")||0,f=c.getChildIndex(a),g=[...new z(c)],_=g.find(b=>b.cell===r).column;i.change(b=>{d&&f<=d&&b.setAttribute("headingColumns",d-1,c);for(const{cell:y,column:k,colspan:S}of g)k<=_&&S>1&&k+S>_?Ii("colspan",S-1,y,b):k===_&&b.remove(y)})}}class pT extends yt{refresh(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition()),r=!!i;this.isEnabled=r,this.value=r&&this._isInHeading(i,i.parent.parent)}execute(i={}){const r=this.editor.model,a=Vn("tableCell",r.document.selection.getFirstPosition()).parent,c=a.parent,d=c.getAttribute("headingRows")||0,f=a.index;if(i.forceValue===this.value)return;const g=this.value?f:f+1;r.change(_=>{if(g){const b=function(y,k,S){const F=[],$=new z(y,{startRow:k>S?S:0,endRow:k-1});for(const{row:G,rowspan:Y,cell:oe}of $)Y>1&&G+Y>k&&F.push(oe);return F}(c,g,d);for(const y of b)Mv(y,g,_)}Ii("headingRows",g,c,_,0)})}_isInHeading(i,r){const a=parseInt(r.getAttribute("headingRows")||0);return!!a&&i.parent.index<a}}function Mv(u,i,r){const a=u.parent,c=a.parent,d=i-a.index,f={},g=parseInt(u.getAttribute("rowspan"))-d;g>1&&(f.rowspan=g);const _=parseInt(u.getAttribute("colspan")||1);_>1&&(f.colspan=_);const b=c.getChildIndex(a),y=b+d,k=[...new z(c,{startRow:b,endRow:y,includeSpanned:!0})];let S;for(const{row:F,column:$,cell:G,cellIndex:Y}of k)if(G===u&&void 0===S&&(S=$),void 0!==S&&S===$&&F===y){const oe=c.getChild(F),ue=r.createPositionAt(oe,Y);yp(r,ue,f)}Ii("rowspan",d,u,r)}class Sv extends yt{refresh(){const i=Vn("tableCell",this.editor.model.document.selection.getFirstPosition()),r=!!i;this.isEnabled=r,this.value=r&&this._isInHeading(i,i.parent.parent)}execute(i={}){const r=this.editor.model,a=r.document.selection,c=this.editor.plugins.get("TableUtils"),d=Vn("tableCell",a.getFirstPosition()),f=d.parent.parent,{column:g}=c.getCellLocation(d);if(i.forceValue===this.value)return;const _=this.value?g:g+1;r.change(b=>{Ii("headingColumns",_,f,b,0)})}_isInHeading(i,r){const a=parseInt(r.getAttribute("headingColumns")||0),c=this.editor.plugins.get("TableUtils"),{column:d}=c.getCellLocation(i);return!!a&&d<a}}class Fw extends le{static get pluginName(){return"TableUtils"}getCellLocation(i){const r=i.parent,a=r.parent,c=a.getChildIndex(r),d=new z(a,{startRow:c,endRow:c});for(const{cell:f,row:g,column:_}of d)if(f===i)return{row:g,column:_}}createTable(i,r,a){const c=i.createElement("table");return ol(i,c,0,r,a),c}insertRows(i,r={}){const c=r.at||0,d=r.rows||1;this.editor.model.change(f=>{const g=i.getAttribute("headingRows")||0;if(g>c&&f.setAttribute("headingRows",g+d,i),0===c||c===i.childCount)return void ol(f,i,c,d,this.getColumns(i));const _=new z(i,{endRow:c});let b=0;for(const{row:y,rowspan:k,colspan:S,cell:F}of _){const $=y+k>c;y<c&&$&&f.setAttribute("rowspan",k+d,F),y===c&&(b+=S)}ol(f,i,c,d,b)})}insertColumns(i,r={}){const c=r.at||0,d=r.columns||1;this.editor.model.change(f=>{const g=i.getAttribute("headingColumns");c<g&&f.setAttribute("headingColumns",g+d,i);const _=this.getColumns(i);if(0===c||_===c){for(const y of i.getChildren())Ac(d,f,f.createPositionAt(y,c?"end":0));return}const b=new z(i,{column:c,includeSpanned:!0});for(const{row:y,cell:k,cellIndex:S}of b){const F=parseInt(k.getAttribute("rowspan")||1),$=parseInt(k.getAttribute("colspan")||1);if(k.index!==c&&$>1){if(f.setAttribute("colspan",$+d,k),b.skipRow(y),F>1)for(let G=y+1;G<y+F;G++)b.skipRow(G)}else{const G=f.createPositionAt(i.getChild(y),S);Ac(d,f,G)}}})}splitCellVertically(i,r=2){const a=this.editor.model,c=i.parent.parent,d=parseInt(i.getAttribute("rowspan")||1),f=parseInt(i.getAttribute("colspan")||1);a.change(g=>{if(f>1){const{newCellsSpan:_,updatedSpan:b}=Lw(f,r);Ii("colspan",b,i,g);const y={};_>1&&(y.colspan=_),d>1&&(y.rowspan=d),Ac(f>r?r-1:f-1,g,g.createPositionAfter(i),y)}if(f<r){const _=r-f,b=[...new z(c)],{column:y}=b.find(({cell:$})=>$===i),k=b.filter(({cell:$,colspan:G,column:Y})=>$!==i&&Y===y||Y<y&&Y+G>y);for(const{cell:$,colspan:G}of k)g.setAttribute("colspan",G+_,$);const S={};d>1&&(S.rowspan=d),Ac(_,g,g.createPositionAfter(i),S);const F=c.getAttribute("headingColumns")||0;F>y&&Ii("headingColumns",F+_,c,g)}})}splitCellHorizontally(i,r=2){const a=this.editor.model,c=i.parent,d=c.parent,f=d.getChildIndex(c),g=parseInt(i.getAttribute("rowspan")||1),_=parseInt(i.getAttribute("colspan")||1);a.change(b=>{if(g>1){const y=[...new z(d,{startRow:f,endRow:f+g-1,includeSpanned:!0})],{newCellsSpan:k,updatedSpan:S}=Lw(g,r);Ii("rowspan",S,i,b);const{column:F}=y.find(({cell:G})=>G===i),$={};k>1&&($.rowspan=k),_>1&&($.colspan=_);for(const{column:G,row:Y,cellIndex:oe}of y){const ue=G===F,we=(Y+f+S)%k==0;if(Y>=f+S&&ue&&we){const qe=b.createPositionAt(d.getChild(Y),oe);Ac(1,b,qe,$)}}}if(g<r){const y=r-g,k=[...new z(d,{startRow:0,endRow:f})];for(const{cell:$,rowspan:G,row:Y}of k)$!==i&&Y+G>f&&b.setAttribute("rowspan",G+y,$);const S={};_>1&&(S.colspan=_),ol(b,d,f+1,y,1,S);const F=d.getAttribute("headingRows")||0;F>f&&Ii("headingRows",F+y,d,b)}})}getColumns(i){return[...i.getChild(0).getChildren()].reduce((r,a)=>r+parseInt(a.getAttribute("colspan")||1),0)}}function ol(u,i,r,a,c,d={}){for(let f=0;f<a;f++){const g=u.createElement("tableRow");u.insert(g,i,r),Ac(c,u,u.createPositionAt(g,"end"),d)}}function Ac(u,i,r,a={}){for(let c=0;c<u;c++)yp(i,r,a)}function Lw(u,i){if(u<i)return{newCellsSpan:1,updatedSpan:1};const r=Math.floor(u/i);return{newCellsSpan:r,updatedSpan:u-r*i+r}}function mT(u,i){let r=!1;const a=function(c){const d=parseInt(c.getAttribute("headingRows")||0),f=c.childCount,g=[];for(const{row:_,rowspan:b,cell:y}of new z(c)){if(b<2)continue;const k=_<d?d:f;_+b>k&&g.push({cell:y,rowspan:k-_})}return g}(u);if(a.length){r=!0;for(const c of a)Ii("rowspan",c.rowspan,c.cell,i,1)}return r}function _T(u,i){let r=!1;const a=function(d){const f={};for(const{row:g}of new z(d,{includeSpanned:!0}))f[g]||(f[g]=0),f[g]+=1;return f}(u),c=a[0];if(!Object.values(a).every(d=>d===c)){const d=Object.values(a).reduce((f,g)=>g>f?g:f,0);for(const[f,g]of Object.entries(a)){const _=d-g;if(_){for(let b=0;b<_;b++)yp(i,i.createPositionAt(u.getChild(f),"end"));r=!0}}}return r}function vT(u){const r=u.attributeKey;return"attribute"===u.type&&("headingRows"===r||"colspan"===r||"rowspan"===r)}function yT(u,i){let r=!1;for(const a of u.getChildren())r=Bw(a,i)||r;return r}function Bw(u,i){let r=!1;for(const a of u.getChildren())r=Av(a,i)||r;return r}function Av(u,i){if(0==u.childCount)return i.insertElement("paragraph",u),!0;const r=Array.from(u.getChildren()).filter(a=>a.is("text"));for(const a of r)i.wrap(i.createRangeOn(a),"paragraph");return!!r.length}function _s(u){return!(!u.position||!u.position.parent.is("tableCell"))&&("insert"==u.type&&"$text"==u.name||"remove"==u.type)}function Vw(u,i){if(!Array.from(u.getChildren()).some(r=>r.is("paragraph")))return!1;if("attribute"==i){const r=Array.from(u.getChild(0).getAttributeKeys()).length;return 1===u.childCount&&r<2}return u.childCount<=("insert"==i?2:1)}T(75);class Ov extends le{static get pluginName(){return"TableEditing"}init(){const i=this.editor,r=i.model,a=r.schema,c=i.conversion;a.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isLimit:!0,isObject:!0,isBlock:!0}),a.register("tableRow",{allowIn:"table",isLimit:!0}),a.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0}),a.extend("$block",{allowIn:"tableCell"}),a.addChildCheck((d,f)=>{if("table"==f.name&&Array.from(d.getNames()).includes("table"))return!1}),c.for("upcast").add(function wp(){return u=>{u.on("element:table",(i,r,a)=>{const c=r.viewItem;if(!a.consumable.test(c,{name:!0}))return;const{rows:d,headingRows:f,headingColumns:g}=function(k){const S={headingRows:0,headingColumns:0},F=[],$=[];let G;for(const Y of Array.from(k.getChildren()))if("tbody"===Y.name||"thead"===Y.name||"tfoot"===Y.name){"thead"!==Y.name||G||(G=Y);const oe=Array.from(Y.getChildren()).filter(ue=>ue.is("element","tr"));for(const ue of oe)if("thead"===ue.parent.name&&ue.parent===G)S.headingRows++,F.push(ue);else{$.push(ue);const we=dT(ue);we>S.headingColumns&&(S.headingColumns=we)}}return S.rows=[...F,...$],S}(c),_={};g&&(_.headingColumns=g),f&&(_.headingRows=f);const b=a.writer.createElement("table",_),y=a.splitToAllowedParent(b,r.modelCursor);if(y){if(a.writer.insert(b,y.position),a.consumable.consume(c,{name:!0}),d.length)d.forEach(k=>a.convertItem(k,a.writer.createPositionAt(b,"end")));else{const k=a.writer.createElement("tableRow");a.writer.insert(k,a.writer.createPositionAt(b,"end")),yp(a.writer,a.writer.createPositionAt(k,"end"))}r.modelRange=a.writer.createRange(a.writer.createPositionBefore(b),a.writer.createPositionAfter(b)),r.modelCursor=y.cursorParent?a.writer.createPositionAt(y.cursorParent,0):r.modelRange.end}})}}()),c.for("editingDowncast").add(No({asWidget:!0})),c.for("dataDowncast").add(No()),c.for("upcast").elementToElement({model:"tableRow",view:"tr"}),c.for("editingDowncast").add(Cp({asWidget:!0})),c.for("dataDowncast").add(Cp()),c.for("downcast").add(d=>d.on("remove:tableRow",(f,g,_)=>{f.stop();const b=_.writer,y=_.mapper,k=y.toViewPosition(g.position).getLastMatchingPosition(G=>!G.item.is("tr")).nodeAfter,S=k.parent,F=b.createRangeOn(k),$=b.remove(F);for(const G of b.createRangeIn($).getItems())y.unbindViewElement(G);S.childCount||b.remove(b.createRangeOn(S))},{priority:"higher"})),c.for("upcast").add(Cv("td")),c.for("upcast").add(Cv("th")),c.for("editingDowncast").add(xv({asWidget:!0})),c.for("dataDowncast").add(xv()),c.attributeToAttribute({model:"colspan",view:"colspan"}),c.attributeToAttribute({model:"rowspan",view:"rowspan"}),c.for("editingDowncast").add(gr({asWidget:!0})),c.for("dataDowncast").add(gr()),c.for("editingDowncast").add(Nd({asWidget:!0})),c.for("dataDowncast").add(Nd()),i.commands.add("insertTable",new hT(i)),i.commands.add("insertTableRowAbove",new Ev(i,{order:"above"})),i.commands.add("insertTableRowBelow",new Ev(i,{order:"below"})),i.commands.add("insertTableColumnLeft",new Tv(i,{order:"left"})),i.commands.add("insertTableColumnRight",new Tv(i,{order:"right"})),i.commands.add("removeTableRow",new fT(i)),i.commands.add("removeTableColumn",new Rw(i)),i.commands.add("splitTableCellVertically",new Dv(i,{direction:"vertically"})),i.commands.add("splitTableCellHorizontally",new Dv(i,{direction:"horizontally"})),i.commands.add("mergeTableCellRight",new Bd(i,{direction:"right"})),i.commands.add("mergeTableCellLeft",new Bd(i,{direction:"left"})),i.commands.add("mergeTableCellDown",new Bd(i,{direction:"down"})),i.commands.add("mergeTableCellUp",new Bd(i,{direction:"up"})),i.commands.add("setTableColumnHeader",new Sv(i)),i.commands.add("setTableRowHeader",new pT(i)),function gT(u){u.document.registerPostFixer(i=>function(r,a){const c=a.document.differ.getChanges();let d=!1;const f=new Set;for(const g of c){let _;"table"==g.name&&"insert"==g.type&&(_=g.position.nodeAfter),"tableRow"!=g.name&&"tableCell"!=g.name||(_=Vn("table",g.position)),vT(g)&&(_=Vn("table",g.range.start)),_&&!f.has(_)&&(d=mT(_,r)||d,d=_T(_,r)||d,f.add(_))}return d}(i,u))}(r),function Tp(u){u.document.registerPostFixer(()=>function(i){const r=i.document.differ,a=new Set;for(const c of r.getChanges()){const d="insert"==c.type||"remove"==c.type?c.position.parent:c.range.start.parent;d.is("tableCell")&&Vw(d,c.type)&&a.add(d)}if(a.size){for(const c of a.values())r.refreshItem(c);return!0}return!1}(u))}(r),function bT(u){u.document.registerPostFixer(i=>function(r,a){const c=a.document.differ.getChanges();let d=!1;for(const f of c)"insert"==f.type&&"table"==f.name&&(d=yT(f.position.nodeAfter,r)||d),"insert"==f.type&&"tableRow"==f.name&&(d=Bw(f.position.nodeAfter,r)||d),"insert"==f.type&&"tableCell"==f.name&&(d=Av(f.position.nodeAfter,r)||d),_s(f)&&(d=Av(f.position.parent,r)||d);return d}(i,u))}(r),this.editor.keystrokes.set("Tab",(...d)=>this._handleTabOnSelectedTable(...d),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"})}static get requires(){return[Fw]}_handleTabOnSelectedTable(i,r){const a=this.editor,c=a.model.document.selection;if(!c.isCollapsed&&1===c.rangeCount&&c.getFirstRange().isFlat){const d=c.getSelectedElement();if(!d||!d.is("table"))return;r(),a.model.change(f=>{f.setSelection(f.createRangeIn(d.getChild(0).getChild(0)))})}}_getTabHandler(i){const r=this.editor;return(a,c)=>{const d=Vn("tableCell",r.model.document.selection.getFirstPosition());if(!d)return;c();const f=d.parent,g=f.parent,_=g.getChildIndex(f),b=f.getChildIndex(d),y=0===b;if(!i&&y&&0===_)return;const k=b===f.childCount-1;if(i&&_===g.childCount-1&&k&&(r.execute("insertTableRowBelow"),_===g.childCount-1))return;let F;if(i&&k)F=g.getChild(_+1).getChild(0);else if(!i&&y){const $=g.getChild(_-1);F=$.getChild($.childCount-1)}else F=f.getChild(b+(i?1:-1));r.model.change($=>{$.setSelection($.createRangeIn(F))})}}}T(77);class Dp extends st{constructor(i){super(i);const r=this.bindTemplate;this.items=this.createCollection(),this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(a,c)=>`${c} \xd7 ${a}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:r.to("label")}]}],on:{mousedown:r.to(a=>{a.preventDefault()}),click:r.to(()=>{this.fire("execute")})}});for(let a=0;a<100;a++){const c=new Pv;c.on("over",()=>{const d=Math.floor(a/10),f=a%10;this.set("rows",d+1),this.set("columns",f+1)}),this.items.add(c)}this.on("change:columns",()=>{this._highlightGridBoxes()}),this.on("change:rows",()=>{this._highlightGridBoxes()})}focus(){}focusLast(){}_highlightGridBoxes(){const i=this.rows,r=this.columns;this.items.map((a,c)=>{const d=Math.floor(c/10)<i&&c%10<r;a.set("isOn",d)})}}class Pv extends st{constructor(i){super(i);const r=this.bindTemplate;this.set("isOn",!1),this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",r.if("isOn","ck-on")]},on:{mouseover:r.to("over")}})}}class Mp extends le{init(){const i=this.editor,r=this.editor.t,a="ltr"===i.locale.contentLanguageDirection;i.ui.componentFactory.add("insertTable",c=>{const d=i.commands.get("insertTable"),f=Di(c);let g;return f.bind("isEnabled").to(d),f.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 01-1.5 1.5H3A1.5 1.5 0 011.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:r("ac"),tooltip:!0}),f.on("change:isOpen",()=>{g||(g=new Dp(c),f.panelView.children.add(g),g.delegate("execute").to(f),f.buttonView.on("open",()=>{g.rows=0,g.columns=0}),f.on("execute",()=>{i.execute("insertTable",{rows:g.rows,columns:g.columns}),i.editing.view.focus()}))}),f}),i.ui.componentFactory.add("tableColumn",c=>{const d=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:r("ad"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:a?"insertTableColumnLeft":"insertTableColumnRight",label:r("ae")}},{type:"button",model:{commandName:a?"insertTableColumnRight":"insertTableColumnLeft",label:r("af")}},{type:"button",model:{commandName:"removeTableColumn",label:r("ag")}}];return this._prepareDropdown(r("ah"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0119 2.5v15a1.5 1.5 0 01-1.5 1.5h-15A1.5 1.5 0 011 17.5v-15A1.5 1.5 0 012.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 01-1 1H7a1 1 0 01-1-1V1a1 1 0 011-1h6a1 1 0 011 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',d,c)}),i.ui.componentFactory.add("tableRow",c=>{const d=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:r("ai"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowBelow",label:r("aj")}},{type:"button",model:{commandName:"insertTableRowAbove",label:r("ak")}},{type:"button",model:{commandName:"removeTableRow",label:r("al")}}];return this._prepareDropdown(r("am"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0119 2.5v15a1.5 1.5 0 01-1.5 1.5h-15A1.5 1.5 0 011 17.5v-15A1.5 1.5 0 012.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V7a1 1 0 011-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',d,c)}),i.ui.componentFactory.add("mergeTableCells",c=>{const d=[{type:"button",model:{commandName:"mergeTableCellUp",label:r("an")}},{type:"button",model:{commandName:a?"mergeTableCellRight":"mergeTableCellLeft",label:r("ao")}},{type:"button",model:{commandName:"mergeTableCellDown",label:r("ap")}},{type:"button",model:{commandName:a?"mergeTableCellLeft":"mergeTableCellRight",label:r("aq")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:r("ar")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:r("as")}}];return this._prepareDropdown(r("at"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0119 2.5v15a1.5 1.5 0 01-1.5 1.5h-15A1.5 1.5 0 011 17.5v-15A1.5 1.5 0 012.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 011 1v11a1 1 0 01-1 1H7a1 1 0 01-1-1V8a1 1 0 011-1zm1 2v9h10V9H8z"/></svg>',d,c)})}_prepareDropdown(i,r,a,c){const d=this.editor,f=Di(c),g=[],_=new Ni;for(const b of a)jw(b,d,g,_);return gc(f,_),f.buttonView.set({label:i,icon:r,tooltip:!0}),f.bind("isEnabled").toMany(g,"isEnabled",(...b)=>b.some(y=>y)),this.listenTo(f,"execute",b=>{d.execute(b.source.commandName),d.editing.view.focus()}),f}}function jw(u,i,r,a){const c=u.model=new Ya(u.model),{commandName:d,bindIsOn:f}=u.model;if("button"===u.type||"switchbutton"===u.type){const g=i.commands.get(d);r.push(g),c.set({commandName:d}),c.bind("isEnabled").to(g),f&&c.bind("isOn").to(g,"value")}c.set({withText:!0}),a.add(u)}T(79);const Hr=["left","right","center","justify"];function Sp(u){return Hr.includes(u)}function Nv(u,i){return"rtl"==i.contentLanguageDirection?"right"===u:"left"===u}class Hw extends yt{refresh(){const i=this.editor.locale,r=at(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!r&&this._canBeAligned(r),this.value=this.isEnabled&&r.hasAttribute("alignment")?r.getAttribute("alignment"):"rtl"===i.contentLanguageDirection?"right":"left"}execute(i={}){const r=this.editor,a=r.locale,c=r.model,d=c.document,f=i.value;c.change(g=>{const _=Array.from(d.selection.getSelectedBlocks()).filter(y=>this._canBeAligned(y)),b=_[0].getAttribute("alignment");Nv(f,a)||b===f||!f?function(y,k){for(const S of y)k.removeAttribute("alignment",S)}(_,g):function(y,k,S){for(const F of y)k.setAttribute("alignment",S,F)}(_,g,f)})}_canBeAligned(i){return this.editor.model.schema.checkAttribute(i,"alignment")}}class Iv extends le{static get pluginName(){return"AlignmentEditing"}constructor(i){super(i),i.config.define("alignment",{options:[...Hr]})}init(){const i=this.editor,r=i.locale,a=i.model.schema,c=i.config.get("alignment.options").filter(Sp);a.extend("$block",{allowAttributes:"alignment"}),i.model.schema.setAttributeProperties("alignment",{isFormatting:!0});const d=function(f){const g={model:{key:"alignment",values:f.slice()},view:{}};for(const _ of f)g.view[_]={key:"style",value:{"text-align":_}};return g}(c.filter(f=>!Nv(f,r)));i.conversion.attributeToAttribute(d),i.commands.add("alignment",new Hw(i))}}var Rv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75z"/></svg>',Fv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 01-.75.75H2.75a.75.75 0 110-1.5h14.5a.75.75 0 01.75.75zm0 8a.75.75 0 01-.75.75H2.75a.75.75 0 110-1.5h14.5a.75.75 0 01.75.75zm0 4a.75.75 0 01-.75.75H7.321a.75.75 0 110-1.5h9.929a.75.75 0 01.75.75zm0-8a.75.75 0 01-.75.75H7.321a.75.75 0 110-1.5h9.929a.75.75 0 01.75.75z"/></svg>';const Vd=new Map([["left",Rv],["right",Fv],["center",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 100-1.5H5.036a.75.75 0 00-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 100-1.5H5.036a.75.75 0 00-.75.75z"/></svg>'],["justify",'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 100-1.5H2.75a.75.75 0 00-.75.75z"/></svg>']]);class rl extends le{get localizedOptionTitles(){const i=this.editor.t;return{left:i("ms"),right:i("mt"),center:i("mu"),justify:i("mv")}}static get pluginName(){return"AlignmentUI"}init(){const i=this.editor,r=i.ui.componentFactory,a=i.t,c=i.config.get("alignment.options");c.filter(Sp).forEach(d=>this._addButton(d)),r.add("alignment",d=>{const f=Di(d),g=c.map(b=>r.create(`alignment:${b}`));id(f,g),f.buttonView.set({label:a("mw"),tooltip:!0}),f.toolbarView.isVertical=!0,f.toolbarView.ariaLabel=a("mx"),f.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const _="rtl"===d.contentLanguageDirection?Fv:Rv;return f.buttonView.bind("icon").toMany(g,"isOn",(...b)=>{const y=b.findIndex(k=>k);return y<0?_:g[y].icon}),f.bind("isEnabled").toMany(g,"isEnabled",(...b)=>b.some(y=>y)),f})}_addButton(i){const r=this.editor;r.ui.componentFactory.add(`alignment:${i}`,a=>{const c=r.commands.get("alignment"),d=new Lt(a);return d.set({label:this.localizedOptionTitles[i],icon:Vd.get(i),tooltip:!0,isToggleable:!0}),d.bind("isEnabled").to(c),d.bind("isOn").to(c,"value",f=>f===i),this.listenTo(d,"execute",()=>{r.execute("alignment",{value:i}),r.editing.view.focus()}),d})}}class Ap extends yt{refresh(){this.isEnabled=function(i){const r=i.schema,a=i.document.selection;return function(c,d,f){const g=function(_,b){const y=Cc(_,b).parent;return y.isEmpty&&!y.is("$root")?y.parent:y}(c,f);return d.checkChild(g,"pageBreak")}(a,r,i)&&!function(c,d){const f=c.getSelectedElement();return f&&d.isObject(f)}(a,r)}(this.editor.model)}execute(){const i=this.editor.model;i.change(r=>{const a=r.createElement("pageBreak");i.insertContent(a);let c=a.nextSibling;!(c&&i.schema.checkChild(c,"$text"))&&i.schema.checkChild(a.parent,"paragraph")&&(c=r.createElement("paragraph"),i.insertContent(c,r.createPositionAfter(a))),c&&r.setSelection(c,0)})}}T(81);class sl extends le{static get pluginName(){return"PageBreakEditing"}init(){const i=this.editor,a=i.t,c=i.conversion;i.model.schema.register("pageBreak",{isObject:!0,allowWhere:"$block"}),c.for("dataDowncast").elementToElement({model:"pageBreak",view:(d,f)=>{const g=f.createContainerElement("div",{class:"page-break",style:"page-break-after: always"}),_=f.createContainerElement("span",{style:"display: none"});return f.insert(f.createPositionAt(g,0),_),g}}),c.for("editingDowncast").elementToElement({model:"pageBreak",view:(d,f)=>{const g=a("mq"),_=f.createContainerElement("div"),b=f.createContainerElement("span"),y=f.createText(a("mq"));return f.addClass("page-break",_),f.setCustomProperty("pageBreak",!0,_),f.addClass("page-break__label",b),f.insert(f.createPositionAt(_,0),b),f.insert(f.createPositionAt(b,0),y),F=g,(S=f).setCustomProperty("pageBreak",!0,k=_),Qa(k,S,{label:F});var k,S,F}}),c.for("upcast").elementToElement({view:d=>{if(!d.is("div")||"always"!=d.getStyle("page-break-after")||1!=d.childCount)return;const f=at(d.getChildren());if(!f.is("span")||"none"!=f.getStyle("display")||1!=f.childCount)return;const g=at(f.getChildren());return g.is("text")&&" "===g.data?{name:!0}:void 0},model:"pageBreak"}),i.commands.add("pageBreak",new Ap(i))}}class Op extends le{init(){const i=this.editor,r=i.t;i.ui.componentFactory.add("pageBreak",a=>{const c=i.commands.get("pageBreak"),d=new Lt(a);return d.set({label:r("mq"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>',tooltip:!0}),d.bind("isEnabled").to(c,"isEnabled"),this.listenTo(d,"execute",()=>{i.execute("pageBreak"),i.editing.view.focus()}),d})}}class jd extends st{constructor(i,r){super(i);const a=i.t;this.labelView=new sp(i),this.labelView.text=a("d"),this.groupDropdownView=this._createGroupDropdown(r),this.groupDropdownView.panelPosition="rtl"===i.uiLanguageDirection?"se":"sw",this.setTemplate({tag:"div",attributes:{class:["ck","ck-special-characters-navigation"]},children:[this.labelView,this.groupDropdownView]})}get currentGroupName(){return this.groupDropdownView.value}_createGroupDropdown(i){const r=this.locale,a=r.t,c=Di(r),d=this._getCharacterGroupListItemDefinitions(c,i);return c.set("value",d.first.model.label),c.buttonView.bind("label").to(c,"value"),c.buttonView.set({isOn:!1,withText:!0,tooltip:a("mr")}),c.on("execute",f=>{c.value=f.source.label}),c.delegate("execute").to(this),gc(c,d),c}_getCharacterGroupListItemDefinitions(i,r){const a=new Ni;for(const c of r){const d={type:"button",model:new Ya({label:c,withText:!0})};d.model.bind("isOn").to(i,"value",f=>f===d.model.label),a.add(d)}return a}}T(83);class Lv extends st{constructor(i){super(i),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}})}createTile(i,r){const a=new Lt(this.locale);return a.set({label:i,withText:!0,class:"ck-character-grid__tile"}),a.extendTemplate({attributes:{title:r},on:{mouseover:a.bindTemplate.to("mouseover")}}),a.on("mouseover",()=>{this.fire("tileHover",{name:r,character:i})}),a.on("execute",()=>{this.fire("execute",{name:r,character:i})}),a}}T(85);class Bv extends st{constructor(i){super(i);const r=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",Pp),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:r.to("name",a=>a||"\u200b")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:r.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function Pp(u){return null===u?"":"U+"+("0000"+u.codePointAt(0).toString(16)).slice(-4)}T(87);class Np extends le{init(){const i=this.editor,r=i.t;i.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:r("lg")},{character:"\u20ac",title:r("lh")},{character:"\xa5",title:r("li")},{character:"\xa3",title:r("lj")},{character:"\xa2",title:r("lk")},{character:"\u20a0",title:r("ll")},{character:"\u20a1",title:r("lm")},{character:"\u20a2",title:r("ln")},{character:"\u20a3",title:r("lo")},{character:"\u20a4",title:r("lp")},{character:"\xa4",title:r("lq")},{character:"\u20bf",title:r("lr")},{character:"\u20a5",title:r("ls")},{character:"\u20a6",title:r("lt")},{character:"\u20a7",title:r("lu")},{character:"\u20a8",title:r("lv")},{character:"\u20a9",title:r("lw")},{character:"\u20aa",title:r("lx")},{character:"\u20ab",title:r("ly")},{character:"\u20ad",title:r("lz")},{character:"\u20ae",title:r("ma")},{character:"\u20af",title:r("mb")},{character:"\u20b0",title:r("mc")},{character:"\u20b1",title:r("md")},{character:"\u20b2",title:r("me")},{character:"\u20b3",title:r("mf")},{character:"\u20b4",title:r("mg")},{character:"\u20b5",title:r("mh")},{character:"\u20b6",title:r("mi")},{character:"\u20b7",title:r("mj")},{character:"\u20b8",title:r("mk")},{character:"\u20b9",title:r("ml")},{character:"\u20ba",title:r("mm")},{character:"\u20bb",title:r("mn")},{character:"\u20bc",title:r("mo")},{character:"\u20bd",title:r("mp")}])}}class Vv extends le{init(){const i=this.editor,r=i.t;i.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:r("jo")},{character:">",title:r("jp")},{character:"\u2264",title:r("jq")},{character:"\u2265",title:r("jr")},{character:"\u2013",title:r("js")},{character:"\u2014",title:r("jt")},{character:"\xaf",title:r("ju")},{character:"\u203e",title:r("jv")},{character:"\xb0",title:r("jw")},{character:"\u2212",title:r("jx")},{character:"\xb1",title:r("jy")},{character:"\xf7",title:r("jz")},{character:"\u2044",title:r("ka")},{character:"\xd7",title:r("kb")},{character:"\u0192",title:r("kc")},{character:"\u222b",title:r("kd")},{character:"\u2211",title:r("ke")},{character:"\u221e",title:r("kf")},{character:"\u221a",title:r("kg")},{character:"\u223c",title:r("kh")},{character:"\u2245",title:r("ki")},{character:"\u2248",title:r("kj")},{character:"\u2260",title:r("kk")},{character:"\u2261",title:r("kl")},{character:"\u2208",title:r("km")},{character:"\u2209",title:r("kn")},{character:"\u220b",title:r("ko")},{character:"\u220f",title:r("kp")},{character:"\u2227",title:r("kq")},{character:"\u2228",title:r("kr")},{character:"\xac",title:r("ks")},{character:"\u2229",title:r("kt")},{character:"\u222a",title:r("ku")},{character:"\u2202",title:r("kv")},{character:"\u2200",title:r("kw")},{character:"\u2203",title:r("kx")},{character:"\u2205",title:r("ky")},{character:"\u2207",title:r("kz")},{character:"\u2217",title:r("la")},{character:"\u221d",title:r("lb")},{character:"\u2220",title:r("lc")},{character:"\xbc",title:r("ld")},{character:"\xbd",title:r("le")},{character:"\xbe",title:r("lf")}])}}class Ip extends le{init(){const i=this.editor,r=i.t;i.plugins.get("SpecialCharacters").addItems("Arrows",[{title:r("iw"),character:"\u21d0"},{title:r("ix"),character:"\u21d2"},{title:r("iy"),character:"\u21d1"},{title:r("iz"),character:"\u21d3"},{title:r("ja"),character:"\u21e0"},{title:r("jb"),character:"\u21e2"},{title:r("jc"),character:"\u21e1"},{title:r("jd"),character:"\u21e3"},{title:r("je"),character:"\u21e4"},{title:r("jf"),character:"\u21e5"},{title:r("jg"),character:"\u2912"},{title:r("jh"),character:"\u2913"},{title:r("ji"),character:"\u21a8"},{title:r("jj"),character:"\u{1f519}"},{title:r("jk"),character:"\u{1f51a}"},{title:r("jl"),character:"\u{1f51b}"},{title:r("jm"),character:"\u{1f51c}"},{title:r("jn"),character:"\u{1f51d}"}])}}class zw extends le{init(){const i=this.editor,r=i.t;i.plugins.get("SpecialCharacters").addItems("Latin",[{character:"\u0100",title:r("dy")},{character:"\u0101",title:r("dz")},{character:"\u0102",title:r("ea")},{character:"\u0103",title:r("eb")},{character:"\u0104",title:r("ec")},{character:"\u0105",title:r("ed")},{character:"\u0106",title:r("ee")},{character:"\u0107",title:r("ef")},{character:"\u0108",title:r("eg")},{character:"\u0109",title:r("eh")},{character:"\u010a",title:r("ei")},{character:"\u010b",title:r("ej")},{character:"\u010c",title:r("ek")},{character:"\u010d",title:r("el")},{character:"\u010e",title:r("em")},{character:"\u010f",title:r("en")},{character:"\u0110",title:r("eo")},{character:"\u0111",title:r("ep")},{character:"\u0112",title:r("eq")},{character:"\u0113",title:r("er")},{character:"\u0114",title:r("es")},{character:"\u0115",title:r("et")},{character:"\u0116",title:r("eu")},{character:"\u0117",title:r("ev")},{character:"\u0118",title:r("ew")},{character:"\u0119",title:r("ex")},{character:"\u011a",title:r("ey")},{character:"\u011b",title:r("ez")},{character:"\u011c",title:r("fa")},{character:"\u011d",title:r("fb")},{character:"\u011e",title:r("fc")},{character:"\u011f",title:r("fd")},{character:"\u0120",title:r("fe")},{character:"\u0121",title:r("ff")},{character:"\u0122",title:r("fg")},{character:"\u0123",title:r("fh")},{character:"\u0124",title:r("fi")},{character:"\u0125",title:r("fj")},{character:"\u0126",title:r("fk")},{character:"\u0127",title:r("fl")},{character:"\u0128",title:r("fm")},{character:"\u0129",title:r("fn")},{character:"\u012a",title:r("fo")},{character:"\u012b",title:r("fp")},{character:"\u012c",title:r("fq")},{character:"\u012d",title:r("fr")},{character:"\u012e",title:r("fs")},{character:"\u012f",title:r("ft")},{character:"\u0130",title:r("fu")},{character:"\u0131",title:r("fv")},{character:"\u0132",title:r("fw")},{character:"\u0133",title:r("fx")},{character:"\u0134",title:r("fy")},{character:"\u0135",title:r("fz")},{character:"\u0136",title:r("ga")},{character:"\u0137",title:r("gb")},{character:"\u0138",title:r("gc")},{character:"\u0139",title:r("gd")},{character:"\u013a",title:r("ge")},{character:"\u013b",title:r("gf")},{character:"\u013c",title:r("gg")},{character:"\u013d",title:r("gh")},{character:"\u013e",title:r("gi")},{character:"\u013f",title:r("gj")},{character:"\u0140",title:r("gk")},{character:"\u0141",title:r("gl")},{character:"\u0142",title:r("gm")},{character:"\u0143",title:r("gn")},{character:"\u0144",title:r("go")},{character:"\u0145",title:r("gp")},{character:"\u0146",title:r("gq")},{character:"\u0147",title:r("gr")},{character:"\u0148",title:r("gs")},{character:"\u0149",title:r("gt")},{character:"\u014a",title:r("gu")},{character:"\u014b",title:r("gv")},{character:"\u014c",title:r("gw")},{character:"\u014d",title:r("gx")},{character:"\u014e",title:r("gy")},{character:"\u014f",title:r("gz")},{character:"\u0150",title:r("ha")},{character:"\u0151",title:r("hb")},{character:"\u0152",title:r("hc")},{character:"\u0153",title:r("hd")},{character:"\u0154",title:r("he")},{character:"\u0155",title:r("hf")},{character:"\u0156",title:r("hg")},{character:"\u0157",title:r("hh")},{character:"\u0158",title:r("hi")},{character:"\u0159",title:r("hj")},{character:"\u015a",title:r("hk")},{character:"\u015b",title:r("hl")},{character:"\u015c",title:r("hm")},{character:"\u015d",title:r("hn")},{character:"\u015e",title:r("ho")},{character:"\u015f",title:r("hp")},{character:"\u0160",title:r("hq")},{character:"\u0161",title:r("hr")},{character:"\u0162",title:r("hs")},{character:"\u0163",title:r("ht")},{character:"\u0164",title:r("hu")},{character:"\u0165",title:r("hv")},{character:"\u0166",title:r("hw")},{character:"\u0167",title:r("hx")},{character:"\u0168",title:r("hy")},{character:"\u0169",title:r("hz")},{character:"\u016a",title:r("ia")},{character:"\u016b",title:r("ib")},{character:"\u016c",title:r("ic")},{character:"\u016d",title:r("id")},{character:"\u016e",title:r("ie")},{character:"\u016f",title:r("if")},{character:"\u0170",title:r("ig")},{character:"\u0171",title:r("ih")},{character:"\u0172",title:r("ii")},{character:"\u0173",title:r("ij")},{character:"\u0174",title:r("ik")},{character:"\u0175",title:r("il")},{character:"\u0176",title:r("im")},{character:"\u0177",title:r("in")},{character:"\u0178",title:r("io")},{character:"\u0179",title:r("ip")},{character:"\u017a",title:r("iq")},{character:"\u017b",title:r("ir")},{character:"\u017c",title:r("is")},{character:"\u017d",title:r("it")},{character:"\u017e",title:r("iu")},{character:"\u017f",title:r("iv")}])}}class wT extends le{init(){const i=this.editor,r=i.t;i.plugins.get("SpecialCharacters").addItems("Text",[{character:"\u2039",title:r("bm")},{character:"\u203a",title:r("bn")},{character:"\xab",title:r("bo")},{character:"\xbb",title:r("bp")},{character:"\u2018",title:r("bq")},{character:"\u2019",title:r("br")},{character:"\u201c",title:r("bs")},{character:"\u201d",title:r("bt")},{character:"\u201a",title:r("bu")},{character:"\u201e",title:r("bv")},{character:"\xa1",title:r("bw")},{character:"\xbf",title:r("bx")},{character:"\u2025",title:r("by")},{character:"\u2026",title:r("bz")},{character:"\u2021",title:r("ca")},{character:"\u2030",title:r("cb")},{character:"\u2031",title:r("cc")},{character:"\u203c",title:r("cd")},{character:"\u2048",title:r("ce")},{character:"\u2049",title:r("cf")},{character:"\u2047",title:r("cg")},{character:"\xa9",title:r("ch")},{character:"\xae",title:r("ci")},{character:"\u2122",title:r("cj")},{character:"\xa7",title:r("ck")},{character:"\xb6",title:r("cl")},{character:"\u204b",title:r("cm")}])}}class $w{constructor(i){this.loader=i}upload(){return new Promise((i,r)=>{const a=this.reader=new window.FileReader;a.addEventListener("load",()=>{i({default:a.result})}),a.addEventListener("error",c=>{r(c)}),a.addEventListener("abort",()=>{r()}),this.loader.file.then(c=>{a.readAsDataURL(c)})})}abort(){this.reader.abort()}}class Hd extends yt{constructor(i,r){super(i),this.attributeKey=r}refresh(){const i=this.editor.model,r=i.document;this.value=r.selection.getAttribute(this.attributeKey),this.isEnabled=i.schema.checkAttributeInSelection(r.selection,this.attributeKey)}execute(i={}){const r=this.editor.model,a=r.document.selection,c=i.value;r.change(d=>{if(a.isCollapsed)c?d.setSelectionAttribute(this.attributeKey,c):d.removeSelectionAttribute(this.attributeKey);else{const f=r.schema.getValidRanges(a.getRanges(),this.attributeKey);for(const g of f)c?d.setAttribute(this.attributeKey,c,g):d.removeAttribute(this.attributeKey,g)}})}}class jv extends Lt{constructor(i){super(i);const r=this.bindTemplate;this.set("color"),this.set("hasBorder"),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 010 2.829l-7.778 7.778a2 2 0 01-2.829 0L3.5 13.107a1.999 1.999 0 112.828-2.829l.707.707a1 1 0 001.414 0l5.658-5.657a2 2 0 012.828 0z"/><path d="M14.814 6.035L8.448 12.4a1 1 0 01-1.414 0l-1.413-1.415A1 1 0 104.207 12.4l2.829 2.829a1 1 0 001.414 0l7.778-7.778a1 1 0 10-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:r.to("color")},class:["ck","ck-color-grid__tile",r.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}T(89);class Rp extends st{constructor(i,r){super(i);const a=r&&r.colorDefinitions||[],c={};r&&r.columns&&(c.gridTemplateColumns=`repeat( ${r.columns}, 1fr)`),this.set("selectedColor"),this.items=this.createCollection(),this.focusTracker=new Ao,this.keystrokes=new hr,this._focusCycler=new Ua({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.items.on("add",(d,f)=>{f.isOn=f.color===this.selectedColor}),a.forEach(d=>{const f=new jv;f.set({color:d.color,label:d.label,tooltip:!0,hasBorder:d.options.hasBorder}),f.on("execute",()=>{this.fire("execute",{value:d.color,hasBorder:d.options.hasBorder,label:d.label})}),this.items.add(f)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:c}}),this.on("change:selectedColor",(d,f,g)=>{for(const _ of this.items)_.isOn=_.color===g})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const i of this.items)this.focusTracker.add(i.element);this.items.on("add",(i,r)=>{this.focusTracker.add(r.element)}),this.items.on("remove",(i,r)=>{this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element)}}class Fp extends Ni{constructor(i){super(i),this.set("isEmpty",!0)}add(i,r){this.find(a=>a.color===i.color)||(super.add(i,r),this.set("isEmpty",!1))}remove(i){const r=super.remove(i);return 0===this.length&&this.set("isEmpty",!0),r}hasColor(i){return!!this.find(r=>r.color===i)}}Fe(Fp,On);var Hv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.636 9.531l-2.758 3.94a.5.5 0 00.122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 01-.491-2.786l6.673-9.53a2 2 0 012.785-.49l3.742 2.62a2 2 0 01.491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>';T(91);class fo extends st{constructor(i,{colors:r,columns:a,removeButtonLabel:c,documentColorsLabel:d,documentColorsCount:f}){super(i),this.items=this.createCollection(),this.colorDefinitions=r,this.focusTracker=new Ao,this.keystrokes=new hr,this.set("selectedColor"),this.removeButtonLabel=c,this.columns=a,this.documentColors=new Fp,this.documentColorsCount=f,this._focusCycler=new Ua({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this._documentColorsLabel=d,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._removeColorButton())}updateDocumentColors(i,r){const a=i.document,c=this.documentColorsCount;this.documentColors.clear();for(const d of a.getRootNames()){const f=a.getRoot(d),g=i.createRangeIn(f);for(const _ of g.getItems())if(_.is("textProxy")&&_.hasAttribute(r)&&(this._addColorToDocumentColors(_.getAttribute(r)),this.documentColors.length>=c))return}}updateSelectedColors(){const i=this.documentColorsGrid,a=this.selectedColor;this.staticColorsGrid.selectedColor=a,i&&(i.selectedColor=a)}render(){super.render();for(const i of this.items)this.focusTracker.add(i.element);this.keystrokes.listenTo(this.element)}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){const i=fr.bind(this.documentColors,this.documentColors),r=new sp(this.locale);r.text=this._documentColorsLabel,r.extendTemplate({attributes:{class:["ck","ck-color-grid__label",i.if("isEmpty","ck-hidden")]}}),this.items.add(r),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_removeColorButton(){const i=new Lt;return i.set({withText:!0,icon:Hv,tooltip:!0,label:this.removeButtonLabel}),i.class="ck-color-table__remove-color",i.on("execute",()=>{this.fire("execute",{value:null})}),i}_createStaticColorsGrid(){const i=new Rp(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return i.delegate("execute").to(this),i}_createDocumentColorsGrid(){const i=fr.bind(this.documentColors,this.documentColors),r=new Rp(this.locale,{columns:this.columns});return r.delegate("execute").to(this),r.extendTemplate({attributes:{class:i.if("isEmpty","ck-hidden")}}),r.items.bindTo(this.documentColors).using(a=>{const c=new jv;return c.set({color:a.color,hasBorder:a.options&&a.options.hasBorder}),a.label&&c.set({label:a.label,tooltip:!0}),c.on("execute",()=>{this.fire("execute",{value:a.color})}),c}),this.documentColors.on("change:isEmpty",(a,c,d)=>{d&&(r.selectedColor=null)}),r}_addColorToDocumentColors(i){const r=this.colorDefinitions.find(a=>a.color===i);this.documentColors.add(r?Object.assign({},r):{color:i,label:i,options:{hasBorder:!1}})}}function Lp(u){return i=>i.getStyle(u).replace(/\s/g,"")}function zv(u){return(i,r)=>r.createAttributeElement("span",{style:`${u}:${i}`},{priority:7})}class CT extends Hd{constructor(i){super(i,"fontSize")}}function $v(u){return u.map(Uv).filter(i=>!!i)}const zd={tiny:{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}},small:{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}},big:{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}},huge:{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}};function Uv(u){if("object"==typeof u)return u;if(zd[u])return zd[u];if("default"===u)return{model:void 0,title:"Default"};const i=parseFloat(u);var r;return isNaN(i)?void 0:(r=i,{title:String(r),model:r,view:{name:"span",styles:{"font-size":`${r}px`},priority:7}})}class Uw extends le{static get pluginName(){return"FontSizeEditing"}constructor(i){super(i),i.config.define("fontSize",{options:["tiny","small","default","big","huge"]});const r=function(a,c){const d={model:{key:"fontSize",values:[]},view:{},upcastAlso:{}};for(const f of c)d.model.values.push(f.model),d.view[f.model]=f.view,f.upcastAlso&&(d.upcastAlso[f.model]=f.upcastAlso);return d}(0,$v(this.editor.config.get("fontSize.options")).filter(a=>a.model));i.conversion.attributeToElement(r),i.commands.add("fontSize",new CT(i))}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"fontSize"}),i.model.schema.setAttributeProperties("fontSize",{isFormatting:!0,copyOnEnter:!0})}}T(93);class Gw extends le{init(){const i=this.editor,r=i.t,a=this._getLocalizedOptions(),c=i.commands.get("fontSize");i.ui.componentFactory.add("fontSize",d=>{const f=Di(d);return gc(f,function(g,_){const b=new Ni;for(const y of g){const k={type:"button",model:new Ya({commandName:"fontSize",commandParam:y.model,label:y.title,class:"ck-fontsize-option",withText:!0})};y.view&&y.view.styles&&k.model.set("labelStyle",`font-size:${y.view.styles["font-size"]}`),y.view&&y.view.classes&&k.model.set("class",`${k.model.class} ${y.view.classes}`),k.model.bind("isOn").to(_,"value",S=>S===y.model),b.add(k)}return b}(a,c)),f.buttonView.set({label:r("bg"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),f.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),f.bind("isEnabled").to(c),this.listenTo(f,"execute",g=>{i.execute(g.source.commandName,{value:g.source.commandParam}),i.editing.view.focus()}),f})}_getLocalizedOptions(){const i=this.editor,r=i.t,a={Default:r("bh"),Tiny:r("bi"),Small:r("bj"),Big:r("bk"),Huge:r("bl")};return $v(i.config.get("fontSize").options).map(c=>{const d=a[c.title];return d&&d!=c.title&&(c=Object.assign({},c,{title:d})),c})}}class qw extends Hd{constructor(i){super(i,"fontColor")}}class Gv extends le{static get pluginName(){return"FontColorEditing"}constructor(i){super(i),i.config.define("fontColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),i.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:"fontColor",value:Lp("color")}}),i.conversion.for("downcast").attributeToElement({model:"fontColor",view:zv("color")}),i.commands.add("fontColor",new qw(i)),i.model.schema.extend("$text",{allowAttributes:"fontColor"}),i.model.schema.setAttributeProperties("fontColor",{isFormatting:!0,copyOnEnter:!0})}}function Ww(u){return"string"==typeof u?{model:u.replace(/ /g,""),label:u,hasBorder:!1,view:{name:"span",styles:{color:u}}}:{model:u.color.replace(/ /g,""),label:u.label||u.color,hasBorder:void 0!==u.hasBorder&&u.hasBorder,view:{name:"span",styles:{color:`${u.color}`}}}}class Bp extends le{constructor(i,{commandName:r,icon:a,componentName:c,dropdownLabel:d}){super(i),this.commandName=r,this.componentName=c,this.icon=a,this.dropdownLabel=d,this.columns=i.config.get(`${this.componentName}.columns`)}init(){const i=this.editor,r=i.locale,a=r.t,c=i.commands.get(this.commandName),d=function(g,_){const b=g.t,y={Black:b("cz"),"Dim grey":b("da"),Grey:b("db"),"Light grey":b("dc"),White:b("dd"),Red:b("de"),Orange:b("df"),Yellow:b("dg"),"Light green":b("dh"),Green:b("di"),Aquamarine:b("dj"),Turquoise:b("dk"),"Light blue":b("dl"),Blue:b("dm"),Purple:b("dn")};return _.map(k=>{const S=y[k.label];return S&&S!=k.label&&(k.label=S),k})}(r,i.config.get(this.componentName).colors.map(Ww).filter(g=>!!g)),f=i.config.get(`${this.componentName}.documentColors`);i.ui.componentFactory.add(this.componentName,g=>{const _=Di(g);return this.colorTableView=function({dropdownView:b,colors:y,columns:k,removeButtonLabel:S,documentColorsLabel:F,documentColorsCount:$}){const Y=new fo(b.locale,{colors:y,columns:k,removeButtonLabel:S,documentColorsLabel:F,documentColorsCount:$});return b.colorTableView=Y,b.panelView.children.add(Y),Y.delegate("execute").to(b,"execute"),Y}({dropdownView:_,colors:d.map(b=>({label:b.label,color:b.model,options:{hasBorder:b.hasBorder}})),columns:this.columns,removeButtonLabel:a("cu"),documentColorsLabel:0!==f?a("cv"):void 0,documentColorsCount:void 0===f?this.columns:f}),this.colorTableView.bind("selectedColor").to(c,"value"),_.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),_.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),_.bind("isEnabled").to(c),_.on("execute",(b,y)=>{i.execute(this.commandName,y),i.editing.view.focus()}),_.on("change:isOpen",(b,y,k)=>{_.colorTableView.appendGrids(),k&&(0!==f&&this.colorTableView.updateDocumentColors(i.model,this.componentName),this.colorTableView.updateSelectedColors())}),_})}}class Kw extends Bp{constructor(i){super(i,{commandName:"fontColor",componentName:"fontColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3L10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 010-2h12a1 1 0 010 2z"/></svg>',dropdownLabel:(0,i.locale.t)("bf")})}static get pluginName(){return"FontColorUI"}}class Jw extends Hd{constructor(i){super(i,"fontBackgroundColor")}}class qv extends le{static get pluginName(){return"FontBackgroundColorEditing"}constructor(i){super(i),i.config.define("fontBackgroundColor",{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),i.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:"fontBackgroundColor",value:Lp("background-color")}}),i.conversion.for("downcast").attributeToElement({model:"fontBackgroundColor",view:zv("background-color")}),i.commands.add("fontBackgroundColor",new Jw(i)),i.model.schema.extend("$text",{allowAttributes:"fontBackgroundColor"}),i.model.schema.setAttributeProperties("fontBackgroundColor",{isFormatting:!0,copyOnEnter:!0})}}class Wv extends Bp{constructor(i){super(i,{commandName:"fontBackgroundColor",componentName:"fontBackgroundColor",icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:(0,i.locale.t)("be")})}static get pluginName(){return"FontBackgroundColorUI"}}class Yw extends yt{refresh(){const i=this.editor.model,r=i.document;this.value=r.selection.getAttribute("highlight"),this.isEnabled=i.schema.checkAttributeInSelection(r.selection,"highlight")}execute(i={}){const r=this.editor.model,a=r.document.selection,c=i.value;r.change(d=>{const f=r.schema.getValidRanges(a.getRanges(),"highlight");if(a.isCollapsed){const g=a.getFirstPosition();if(a.hasAttribute("highlight")){const _=S=>S.item.hasAttribute("highlight")&&S.item.getAttribute("highlight")===this.value,b=g.getLastMatchingPosition(_,{direction:"backward"}),y=g.getLastMatchingPosition(_),k=d.createRange(b,y);c&&this.value!==c?(d.setAttribute("highlight",c,k),d.setSelectionAttribute("highlight",c)):(d.removeAttribute("highlight",k),d.removeSelectionAttribute("highlight"))}else c&&d.setSelectionAttribute("highlight",c)}else for(const g of f)c?d.setAttribute("highlight",c,g):d.removeAttribute("highlight",g)})}}class mr extends le{static get pluginName(){return"HighlightEditing"}constructor(i){super(i),i.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const i=this.editor;i.model.schema.extend("$text",{allowAttributes:"highlight"});const r=i.config.get("highlight.options");i.conversion.attributeToElement(function(a){const c={model:{key:"highlight",values:[]},view:{}};for(const d of a)c.model.values.push(d.model),c.view[d.model]={name:"mark",classes:d.class};return c}(r)),i.commands.add("highlight",new Yw(i))}}T(95);class Vp extends st{constructor(i){super(i);const r=this.bindTemplate;this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new hr,this.focusTracker=new Ao,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",r.if("isVisible","ck-hidden",a=>!a),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(i,r)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),r())}),this.keystrokes.set("arrowleft",(i,r)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),r())})}focus(){this.actionView.focus()}_createActionView(){const i=new Lt;return i.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),i.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),i.delegate("execute").to(this),i}_createArrowView(){const i=new Lt,r=i.bindTemplate;return i.icon=nd,i.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":r.to("isOn",a=>String(a))}}),i.bind("isEnabled").to(this),i.delegate("execute").to(this,"open"),i}}T(97);class Qw extends le{get localizedOptionTitles(){const i=this.editor.t;return{"Yellow marker":i("av"),"Green marker":i("aw"),"Pink marker":i("ax"),"Blue marker":i("ay"),"Red pen":i("az"),"Green pen":i("ba")}}static get pluginName(){return"HighlightUI"}init(){const i=this.editor.config.get("highlight.options");for(const r of i)this._addHighlighterButton(r);this._addRemoveHighlightButton(),this._addDropdown(i)}_addRemoveHighlightButton(){this._addButton("removeHighlight",(0,this.editor.t)("bb"),Hv)}_addHighlighterButton(i){const r=this.editor.commands.get("highlight");this._addButton("highlight:"+i.model,i.title,Kv(i.type),i.model,function(a){a.bind("isEnabled").to(r,"isEnabled"),a.bind("isOn").to(r,"value",c=>c===i.model),a.iconView.fillColor=i.color,a.isToggleable=!0})}_addButton(i,r,a,c,d=(()=>{})){const f=this.editor;f.ui.componentFactory.add(i,g=>{const _=new Lt(g);return _.set({label:this.localizedOptionTitles[r]?this.localizedOptionTitles[r]:r,icon:a,tooltip:!0}),_.on("execute",()=>{f.execute("highlight",{value:c}),f.editing.view.focus()}),d(_),_})}_addDropdown(i){const r=this.editor,a=r.t,c=r.ui.componentFactory,d=i[0],f=i.reduce((g,_)=>(g[_.model]=_,g),{});c.add("highlight",g=>{const _=r.commands.get("highlight"),b=Di(g,Vp),y=b.buttonView;y.set({tooltip:a("bc"),lastExecuted:d.model,commandValue:d.model,isToggleable:!0}),y.bind("icon").to(_,"value",F=>Kv(S(F,"type"))),y.bind("color").to(_,"value",F=>S(F,"color")),y.bind("commandValue").to(_,"value",F=>S(F,"model")),y.bind("isOn").to(_,"value",F=>!!F),y.delegate("execute").to(b);const k=i.map(F=>{const $=c.create("highlight:"+F.model);return this.listenTo($,"execute",()=>b.buttonView.set({lastExecuted:F.model})),$});function S(F,$){return f[F&&F!==y.lastExecuted?F:y.lastExecuted][$]}return b.bind("isEnabled").toMany(k,"isEnabled",(...F)=>F.some($=>$)),k.push(new pc),k.push(c.create("removeHighlight")),id(b,k),(F=b).buttonView.actionView.iconView.bind("fillColor").to(F.buttonView,"color"),b.toolbarView.ariaLabel=a("bd"),y.on("execute",()=>{r.execute("highlight",{value:y.commandValue}),r.editing.view.focus()}),b;var F})}}function Kv(u){return"marker"===u?'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59L3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="M2.556 16.727l.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 000-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415l1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656l-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5L9.59 17h9.406v1.5H8.245z"/></svg>':'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268L2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="M4.5 18.088l-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166l-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5L9.59 17h9.406v1.5H8.245z"/></svg>'}class kT extends yt{refresh(){this.isEnabled=function(i){const r=i.schema,a=i.document.selection;return function(c,d,f){const g=function(_,b){const y=Cc(_,b).parent;return y.isEmpty&&!y.is("$root")?y.parent:y}(c,f);return d.checkChild(g,"myControle")}(a,r,i)&&!function(c,d){const f=c.getSelectedElement();return f&&d.isObject(f)}(a,r)}(this.editor.model)}execute(){const i=this.editor.model;i.change(r=>{const a=prompt("Nombre de lignes"),c=r.createElement("myControle");i.insertContent(c),c._setAttribute("lines",a);let d=c.nextSibling;!(d&&i.schema.checkChild(d,"$text"))&&i.schema.checkChild(c.parent,"paragraph")&&(d=r.createElement("paragraph"),i.insertContent(d,r.createPositionAfter(c))),d&&r.setSelection(d,0)})}}T(99);class Jv extends le{static get pluginName(){return"MyControleEditing"}init(){const i=this.editor,a=i.conversion;i.model.schema.register("myControle",{isObject:!0,allowWhere:"$block",allowAttributes:"lines"}),a.for("dataDowncast").elementToElement({model:"myControle",view:(c,d)=>{const f="Bloc de "+c.getAttribute("lines")+" lignes",g=d.createContainerElement("div",{class:"mycontrole-lines"}),_=d.createContainerElement("span",{class:"mycontrole-lines__label"}),b=d.createText(f);return d.insert(d.createPositionAt(g,0),_),d.insert(d.createPositionAt(_,0),b),g}}),a.for("editingDowncast").elementToElement({model:"myControle",view:(c,d)=>{const f="Bloc de "+c.getAttribute("lines")+" lignes",g=d.createContainerElement("div"),_=d.createContainerElement("span"),b=d.createText(f);return d.addClass("mycontrole-lines",g),d.setCustomProperty("myControle",!0,g),d.addClass("mycontrole-lines__label",_),d.insert(d.createPositionAt(g,0),_),d.insert(d.createPositionAt(_,0),b),S=f,(k=d).setCustomProperty("myControle",!0,y=g),Qa(y,k,{label:S});var y,k,S}}),a.for("upcast").elementToElement({view:{name:"div",classes:"mycontrole-lines"},model:(c,d)=>{const f=at(c.getChildren()),g=at(f.getChildren()).data.match(/\d+/g);return d.createElement("myControle",{lines:g})}}),i.commands.add("myControle",new kT(i))}}class Xw extends le{init(){const i=this.editor;i.ui.componentFactory.add("myControle",r=>{const a=i.commands.get("myControle"),c=new Lt(r);return c.set({label:"Bloc de lignes",icon:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   viewBox="0 0 20 20"\n   version="1.1"\n   id="svg835"\n   sodipodi:docname="mycontrole.svg"\n   inkscape:version="0.92.4 (5da689c313, 2019-01-14)">\n  <metadata\n     id="metadata841">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs839" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1920"\n     inkscape:window-height="1137"\n     id="namedview837"\n     showgrid="false"\n     showguides="false"\n     inkscape:zoom="17.111984"\n     inkscape:cx="31.145819"\n     inkscape:cy="-0.35100433"\n     inkscape:window-x="-8"\n     inkscape:window-y="12"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="svg835" />\n  <path\n     d="m 2.3577015,0.687 h 1.5 v 3.5 h -1.5 z m 14.4999995,0 h 1.5 v 3.5 h -1.5 z"\n     id="path829"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="cccccccccc" />\n  <path\n     d="m 18.357701,2.687 v 1.5 H 2.3577015 v -1.5 z M 2.3577015,18.756 h 1.5 v -3.129966 h -1.5 z m 14.4999995,0 h 1.5 v -3.129966 h -1.5 z"\n     id="path831"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="ccccccccccccccc" />\n  <path\n     inkscape:connector-curvature="0"\n     d="m 18.330539,6.7239679 v -1.5 H 2.3305396 v 1.5 z"\n     id="path833-3"\n     sodipodi:nodetypes="ccccc"\n     style="fill:#888888;fill-opacity:1" />\n  <path\n     inkscape:connector-curvature="0"\n     d="m 18.357701,17.126034 v -1.5 H 2.3577015 v 1.5 z"\n     id="path833-3-8"\n     sodipodi:nodetypes="ccccc" />\n  <path\n     inkscape:connector-curvature="0"\n     d="m 18.330539,9.3052623 v -1.5 H 2.3305388 v 1.5 z"\n     id="path833-3-2"\n     sodipodi:nodetypes="ccccc"\n     style="fill:#888888;fill-opacity:1" />\n  <path\n     inkscape:connector-curvature="0"\n     d="M 18.330539,11.886557 V 10.386558 H 2.3305383 v 1.499999 z"\n     id="path833-3-2-6"\n     sodipodi:nodetypes="ccccc"\n     style="fill:#888888;fill-opacity:1" />\n  <path\n     inkscape:connector-curvature="0"\n     d="m 18.330539,14.467853 v -1.5 H 2.3305392 v 1.5 z"\n     id="path833-3-2-6-9"\n     sodipodi:nodetypes="ccccc"\n     style="fill:#888888;fill-opacity:1" />\n  <path\n     style="fill:#888888;fill-opacity:1;stroke:#888888;stroke-width:0.47698542;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:0.47698546, 0.47698546;stroke-dashoffset:0;stroke-opacity:1"\n     d="m 1.3426883,5.21504 v 9.233295"\n     id="path931"\n     inkscape:connector-curvature="0"\n     sodipodi:nodetypes="cc" />\n</svg>\n',tooltip:!0}),c.bind("isEnabled").to(a,"isEnabled"),this.listenTo(c,"execute",()=>{i.execute("myControle"),i.editing.view.focus()}),c})}}class Zw extends zs{constructor(i){super(i),this.domEventType="click"}onDomEvent(i){this.fire(i.type,i)}}class eC{constructor(i={}){this.namespaces=i.namespaces||[],this._domParser=new DOMParser,this._domConverter=new Kl({blockFillerMode:"nbsp"}),this._htmlWriter=new p_}toData(i){const r=this._domConverter.viewToDom(i,document);return this._htmlWriter.getHtml(r)}toView(i){const r=this._toDom(i);return this._domConverter.domToView(r,{keepOriginalCase:!0})}_toDom(i){i=`<xml ${this.namespaces.map(f=>`xmlns:${f}="nsp"`).join(" ")}>${i}</xml>`;const r=this._domParser.parseFromString(i,"text/xml"),a=r.querySelector("parsererror");if(a)throw new Error("Parse error - "+a.textContent);const c=r.createDocumentFragment(),d=r.documentElement.childNodes;for(;d.length>0;)c.appendChild(d[0]);return c}}class Qe{static get safeXmlCharactersEntities(){return{tagOpener:"&laquo;",tagCloser:"&raquo;",doubleQuote:"&uml;",realDoubleQuote:"&quot;"}}static get safeBadBlackboardCharacters(){return{ltElement:"\xabmo\xbb<\xab/mo\xbb",gtElement:"\xabmo\xbb>\xab/mo\xbb",ampElement:"\xabmo\xbb&\xab/mo\xbb"}}static get safeGoodBlackboardCharacters(){return{ltElement:"\xabmo\xbb\xa7lt;\xab/mo\xbb",gtElement:"\xabmo\xbb\xa7gt;\xab/mo\xbb",ampElement:"\xabmo\xbb\xa7amp;\xab/mo\xbb"}}static get xmlCharacters(){return{id:"xmlCharacters",tagOpener:"<",tagCloser:">",doubleQuote:'"',ampersand:"&",quote:"'"}}static get safeXmlCharacters(){return{id:"safeXmlCharacters",tagOpener:"\xab",tagCloser:"\xbb",doubleQuote:"\xa8",ampersand:"\xa7",quote:"`",realDoubleQuote:"\xa8"}}}class jt{static isMathmlInAttribute(i,r){const a=new RegExp("^['\"][\\s]*=[\\s]*[\\w-]+('[\\s]*(\"[^\"]*\"|'[^']*')[\\s]*=[\\s]*[\\w-]+[\\s]*')*[\\s]+gmi<"),c=i.substring(0,r).split("").reverse().join("");return a.test(c)}static safeXmlDecode(i){let{tagOpener:r}=Qe.safeXmlCharactersEntities,{tagCloser:a}=Qe.safeXmlCharactersEntities,{doubleQuote:c}=Qe.safeXmlCharactersEntities,{realDoubleQuote:d}=Qe.safeXmlCharactersEntities;i=(i=(i=(i=i.split(r).join(Qe.safeXmlCharacters.tagOpener)).split(a).join(Qe.safeXmlCharacters.tagCloser)).split(c).join(Qe.safeXmlCharacters.doubleQuote)).split(d).join(Qe.safeXmlCharacters.realDoubleQuote);const{ltElement:f}=Qe.safeBadBlackboardCharacters,{gtElement:g}=Qe.safeBadBlackboardCharacters,{ampElement:_}=Qe.safeBadBlackboardCharacters;"_wrs_blackboard"in window&&window._wrs_blackboard&&(i=(i=(i=i.split(f).join(Qe.safeGoodBlackboardCharacters.ltElement)).split(g).join(Qe.safeGoodBlackboardCharacters.gtElement)).split(_).join(Qe.safeGoodBlackboardCharacters.ampElement)),({tagOpener:r}=Qe.safeXmlCharacters),({tagCloser:a}=Qe.safeXmlCharacters),({doubleQuote:c}=Qe.safeXmlCharacters),({realDoubleQuote:d}=Qe.safeXmlCharacters);const{ampersand:b}=Qe.safeXmlCharacters,{quote:y}=Qe.safeXmlCharacters;i=(i=(i=(i=(i=i.split(r).join(Qe.xmlCharacters.tagOpener)).split(a).join(Qe.xmlCharacters.tagCloser)).split(c).join(Qe.xmlCharacters.doubleQuote)).split(b).join(Qe.xmlCharacters.ampersand)).split(y).join(Qe.xmlCharacters.quote);let k="",S=null;for(let F=0;F<i.length;F+=1){const $=i.charAt(F);null==S?"$"===$?S="":k+=$:";"===$?(k+=`&${S}`,S=null):$.match(/([a-zA-Z0-9#._-] | '-')/)?S+=$:(k+=`$${S}`,S=null,F-=1)}return k}static safeXmlEncode(i){const{tagOpener:r}=Qe.xmlCharacters,{tagCloser:a}=Qe.xmlCharacters,{doubleQuote:c}=Qe.xmlCharacters,{ampersand:d}=Qe.xmlCharacters,{quote:f}=Qe.xmlCharacters;return(i=(i=(i=(i=i.split(r).join(Qe.safeXmlCharacters.tagOpener)).split(a).join(Qe.safeXmlCharacters.tagCloser)).split(c).join(Qe.safeXmlCharacters.doubleQuote)).split(d).join(Qe.safeXmlCharacters.ampersand)).split(f).join(Qe.safeXmlCharacters.quote)}static mathMLEntities(i){let r="";for(let a=0;a<i.length;a+=1){const c=i.charAt(a);if(i.codePointAt(a)>128)r+=`&#${i.codePointAt(a)};`,i.codePointAt(a)>65535&&(a+=1);else if("&"===c){const d=i.indexOf(";",a+1);if(d>=0){const f=document.createElement("span");f.innerHTML=i.substring(a,d+1),r+=`&#${Z.fixedCharCodeAt(f.textContent||f.innerText,0)};`,a=d}else r+=c}else r+=c}return r}static addCustomEditorClassAttribute(i,r){let a="";const c=i.indexOf("<math");if(0===c){const d=i.indexOf(">");if(-1===i.indexOf("class"))return a=`${i.substr(c,d)} class="wrs_${r}">`,a+=i.substr(d+1,i.length),a}return i}static removeCustomEditorClassAttribute(i,r){return-1===i.indexOf("class")||-1===i.indexOf(`wrs_${r}`)?i:-1!==i.indexOf(`class="wrs_${r}"`)?i.replace(`class="wrs_${r}"`,""):i.replace(`wrs_${r}`,"")}static addAnnotation(i,r,a){let c="";if(-1!==i.indexOf("<annotation")){const d=i.indexOf("</semantics>");c=`${i.substring(0,d)}<annotation encoding="${a}">${r}</annotation>${i.substring(d)}`}else if(jt.isEmpty(i)){const d=i.indexOf("/>"),f=i.indexOf(">");c=`${i.substring(0,f===d?d:f)}><semantics><annotation encoding="${a}">${r}</annotation></semantics></math>`}else{const d=i.indexOf(">")+1,f=i.lastIndexOf("</math>"),g=i.substring(d,f);c=`${i.substring(0,d)}<semantics>${g}<annotation encoding="${a}">${r}</annotation></semantics></math>`}return c}static removeAnnotation(i,r){let a=i;const d=i.indexOf(`<annotation encoding="${r}">`);if(-1!==d){let f=!1,g=i.indexOf("<annotation");for(;-1!==g;)g!==d&&(f=!0),g=i.indexOf("<annotation",g+1);if(f){const _=i.indexOf("</annotation>",d)+13;a=i.substring(0,d)+i.substring(_)}else a=jt.removeSemantics(i)}return a}static removeSemantics(i){let r=i;const a=i.indexOf("<semantics>");if(-1!==a){const c=i.indexOf("<annotation",a+11);-1!==c&&(r=i.substring(0,a)+i.substring(a+11,c)+"</math>")}return r}static removeSemanticsOcurrences(i,r=Qe.xmlCharacters){const a=`${r.tagOpener}math`,c=`${r.tagOpener}/math${r.tagCloser}`,d=`/${r.tagCloser}`,{tagCloser:f}=r,g=`${r.tagOpener}semantics${r.tagCloser}`,_=`${r.tagOpener}annotation encoding=`;let b="",y=i.indexOf(a),k=0;for(;-1!==y;){b+=i.substring(k,y);const S=i.indexOf(c,y),F=i.indexOf(d,y),$=i.indexOf(f,y);-1!==S?k=S:F===$-1&&(k=F);const G=i.indexOf(g,y);if(-1!==G){const Y=i.substring(y,G),oe=i.indexOf(_,y);-1!==oe?(b+=Y+i.substring(G+g.length,oe)+c,y=i.indexOf(a,y+a.length),k+=c.length):(k=y,y=i.indexOf(a,y+a.length))}else k=y,y=i.indexOf(a,y+a.length)}return b+=i.substring(k,i.length),b}static containClass(i,r){const a=i.indexOf("class");if(-1===a)return!1;const c=i.indexOf(">",a);return-1!==i.substring(a,c).indexOf(r)}static isEmpty(i){const r=i.indexOf(">"),a=i.indexOf("/>");let c=!1;if(-1!==a&&a===r-1&&(c=!0),!c){const d=new RegExp("</(.+:)?math>").exec(i);d&&(c=r+1===d.index)}return c}static encodeProperties(i){return i.replace(/\w+=".*?"/g,r=>{const a=r.indexOf('"'),c=r.substring(a+1,r.length-1),d=Z.htmlEntities(c);return`${r.substring(0,a+1)}${d}"`})}}let Ce=(()=>{class u{static addConfiguration(r){Object.assign(u.properties,r)}static get properties(){return u._properties}static set properties(r){u._properties=r}static get(r){return Object.prototype.hasOwnProperty.call(u.properties,r)?u.properties[r]:!!Object.prototype.hasOwnProperty.call(u.properties,"_wrs_conf_")&&u.properties[`_wrs_conf_${r}`]}static set(r,a){u.properties[r]=a}static update(r,a){if(u.get(r)){const c=Object.assign(u.get(r),a);u.set(r,c)}else u.set(r,a)}}return u._properties={},u})();class Oc{constructor(){this.cache=[]}populate(i,r){this.cache[i]=r}get(i){return!!Object.prototype.hasOwnProperty.call(this.cache,i)&&this.cache[i]}}class po{constructor(){this.listeners=[]}add(i){this.listeners.push(i)}fire(i,r){for(let a=0;a<this.listeners.length&&!r.cancelled;a+=1)this.listeners[a].eventName===i&&this.listeners[a].callback(r);return r.defaultPrevented}static newListener(i,r){const a={};return a.eventName=i,a.callback=r,a}}class Ae{static get listeners(){return Ae._listeners}static addListener(i){Ae.listeners.add(i)}static fireEvent(i,r){Ae.listeners.fire(i,r)}static get parameters(){return Ae._parameters}static set parameters(i){Ae._parameters=i}static get servicePaths(){return Ae._servicePaths}static set servicePaths(i){Ae._servicePaths=i}static setServicePath(i,r){Ae.servicePaths[i]=r}static getServicePath(i){return Ae.servicePaths[i]}static get integrationPath(){return Ae._integrationPath}static set integrationPath(i){Ae._integrationPath=i}static getServerURL(){const i=window.location.href.split("/");return`${i[0]}//${i[2]}`}static init(i){Ae.parameters=i;let r=Ae.createServiceURI("configurationjs"),a=Ae.createServiceURI("createimage"),c=Ae.createServiceURI("showimage"),d=Ae.createServiceURI("getmathml"),f=Ae.createServiceURI("service");if(0===Ae.parameters.URI.indexOf("/")){const g=Ae.getServerURL();r=g+r,c=g+c,a=g+a,d=g+d,f=g+f}Ae.setServicePath("configurationjs",r),Ae.setServicePath("showimage",c),Ae.setServicePath("createimage",a),Ae.setServicePath("service",f),Ae.setServicePath("getmathml",d),Ae.setServicePath("configurationjs",r),Ae.listeners.fire("onInit",{})}static getUrl(i,r){const a=window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1),c=Z.createHttpRequest();return c?(void 0===r||void 0===r?c.open("GET",i,!1):"/"===i.substr(0,1)||"http://"===i.substr(0,7)||"https://"===i.substr(0,8)?c.open("POST",i,!1):c.open("POST",a+i,!1),void 0!==r&&r?(c.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),c.send(Z.httpBuildQuery(r))):c.send(null),c.responseText):""}static getService(i,r,a){let c;if(!0===a){const d=`${Ae.getServicePath(i)}?${r}`;c=Ae.getUrl(d)}else{const d=Ae.getServicePath(i);c=Ae.getUrl(d,r)}return c}static getServerLanguageFromService(i){return-1!==i.indexOf(".php")?"php":-1!==i.indexOf(".aspx")?"aspx":-1!==i.indexOf("wirispluginengine")?"ruby":"java"}static createServiceURI(i){const r=Ae.serverExtension();return Z.concatenateUrl(Ae.parameters.URI,i)+r}static serverExtension(){return-1!==Ae.parameters.server.indexOf("php")?".php":-1!==Ae.parameters.server.indexOf("aspx")?".aspx":""}}Ae._servicePaths={},Ae._integrationPath="",Ae._listeners=new po,Ae._parameters={};class li{static get cache(){return li._cache}static set cache(i){li._cache=i}static getLatexFromMathML(i){const r=jt.removeSemantics(i),{cache:a}=li,d=JSON.parse(Ae.getService("service",{service:"mathml2latex",mml:r}));let f="";if("ok"===d.status){f=d.result.text;const g=Z.htmlEntities(f),_=jt.addAnnotation(i,g,"LaTeX");a.populate(f,_)}return f}static getMathMLFromLatex(i,r){const a=li.cache;if(li.cache.get(i))return li.cache.get(i);const c={service:"latex2mathml",latex:i};r&&(c.saveLatex="");const d=JSON.parse(Ae.getService("service",c));let f;if("ok"===d.status){let g=d.result.text;g=g.split("\r").join("").split("\n").join(" "),-1===g.indexOf("semantics")&&-1===g.indexOf("annotation")&&(g=jt.addAnnotation(g,i,"LaTeX")),f=g,a.get(i)||a.populate(i,g)}else f=`$$${i}$$`;return f}static parseMathmlToLatex(i,r){let a="";const c=`${r.tagOpener}math`,d=`${r.tagOpener}/math${r.tagCloser}`,f=`${r.tagOpener}annotation encoding=${r.doubleQuote}LaTeX${r.doubleQuote}${r.tagCloser}`,g=`${r.tagOpener}/annotation${r.tagCloser}`;let _,b,y,k=i.indexOf(c),S=0;for(;-1!==k;){if(a+=i.substring(S,k),S=i.indexOf(d,k),-1===S?S=i.length-1:S+=d.length,_=i.substring(k,S),b=_.indexOf(f),-1!==b){b+=f.length,y=_.indexOf(g);let F=_.substring(b,y);r===Qe.safeXmlCharacters&&(F=jt.safeXmlDecode(F)),a+=`$$${F}$$`,li.cache.populate(F,_)}else a+=_;k=i.indexOf(c,S)}return a+=i.substring(S,i.length),a}static getLatexFromTextNode(i,r,a){void 0!==a&&null!=a||(a={open:"$$",close:"$$"});let c,d=i;for(;d.previousSibling&&3===d.previousSibling.nodeType;)d=d.previousSibling;function f(k,S,F){let $=k.nodeValue.indexOf(F,S);for(;-1===$;){if(!(k=k.nextSibling))return null;$=k.nodeValue?k.nodeValue.indexOf(a.close):-1}return{node:k,position:$}}function g(k,S,F,$){if(k===F)return S<=$;for(;k&&k!==F;)k=k.nextSibling;return k===F}let _={node:d,position:0};const b=a.open.length;do{if(c=f(_.node,_.position,a.open),null==c||g(i,r,c.node,c.position)||(_=f(c.node,c.position+b,a.close),null==_))return null;_.position+=b}while(g(_.node,_.position,i,r));let y;if(c.node===_.node)y=c.node.nodeValue.substring(c.position+b,_.position-b);else{y=c.node.nodeValue.substring(c.position+b,c.node.nodeValue.length);let S=c.node;do{S=S.nextSibling,y+=S===_.node?_.node.nodeValue.substring(0,_.position-b):S.nodeValue?S.nodeValue:""}while(S!==_.node)}return{latex:y,startNode:c.node,startPosition:c.position,endNode:_.node,endPosition:_.position}}}li._cache=new Oc;var jp=T(14);class ci{constructor(){throw new Error("Static class StringManager can not be instantiated.")}static get(i){let{language:r}=this;return r.length>2&&(r=r.slice(0,2)),this.strings.hasOwnProperty(r)||(console.warn(`Unknown language ${r} set in StringManager.`),r="en"),this.strings[r].hasOwnProperty(i)?this.strings[r][i]:(console.warn(`Unknown key ${i} for language ${r} in StringManager.`),i)}}ci.strings=jp,ci.language="en";class Z{static fireEvent(i,r){if(document.createEvent){const c=document.createEvent("HTMLEvents");return c.initEvent(r,!0,!0),!i.dispatchEvent(c)}const a=document.createEventObject();return i.fireEvent(`on${r}`,a)}static addEvent(i,r,a){i.addEventListener?i.addEventListener(r,a,!0):i.attachEvent&&i.attachEvent(`on${r}`,a)}static removeEvent(i,r,a){i.removeEventListener?i.removeEventListener(r,a,!0):i.detachEvent&&i.detachEvent(`on${r}`,a)}static addElementEvents(i,r,a,c){r&&Z.addEvent(i,"dblclick",d=>{const f=d||window.event;r(f.srcElement?f.srcElement:f.target,f)}),a&&Z.addEvent(i,"mousedown",d=>{const f=d||window.event;a(f.srcElement?f.srcElement:f.target,f)}),c&&Z.addEvent(i,"mouseup",d=>{const f=d||window.event;c(f.srcElement?f.srcElement:f.target,f)})}static addClass(i,r){Z.containsClass(i,r)||(i.className+=` ${r}`)}static containsClass(i,r){if(null==i||!("className"in i))return!1;const a=i.className.split(" ");for(let c=a.length-1;c>=0;c-=1)if(a[c]===r)return!0;return!1}static removeClass(i,r){let a="";const c=i.className.split(" ");for(let d=0;d<c.length;d+=1)c[d]!==r&&(a+=`${c[d]} `);i.className=a.trim()}static convertOldXmlinitialtextAttribute(i){const r="value=",a=i.indexOf("xmlinitialtext"),c=i.indexOf(r,a),d=i.charAt(c+r.length),f=c+r.length+1,g=i.indexOf(d,f),_=i.substring(f,g);let b=_.split("\xab").join("\xa7lt;");return b=b.split("\xbb").join("\xa7gt;"),b=b.split("&").join("\xa7"),b=b.split("\xa8").join("\xa7quot;"),i.split(_).join(b)}static createElement(i,r,a){let c;void 0===r&&(r={}),void 0===a&&(a=document);try{let d=`<${i}`;Object.keys(r).forEach(f=>{d+=` ${f}="${Z.htmlEntities(r[f])}"`}),d+=">",c=a.createElement(d)}catch{c=a.createElement(i),Object.keys(r).forEach(f=>{c.setAttribute(f,r[f])})}return c}static createObject(i,r){void 0===r&&(r=document),i=(i=(i=(i=i.split("<applet ").join('<span wirisObject="WirisApplet" ').split("<APPLET ").join('<span wirisObject="WirisApplet" ')).split("</applet>").join("</span>").split("</APPLET>").join("</span>")).split("<param ").join('<br wirisObject="WirisParam" ').split("<PARAM ").join('<br wirisObject="WirisParam" ')).split("</param>").join("</br>").split("</PARAM>").join("</br>");const a=Z.createElement("div",{},r);return a.innerHTML=i,function c(d){if(d.getAttribute&&"WirisParam"===d.getAttribute("wirisObject")){const f={};for(let _=0;_<d.attributes.length;_+=1)null!==d.attributes[_].nodeValue&&(f[d.attributes[_].nodeName]=d.attributes[_].nodeValue);const g=Z.createElement("param",f,r);g.NAME&&(g.name=g.NAME,g.value=g.VALUE),g.removeAttribute("wirisObject"),d.parentNode.replaceChild(g,d)}else if(d.getAttribute&&"WirisApplet"===d.getAttribute("wirisObject")){const f={};for(let _=0;_<d.attributes.length;_+=1)null!==d.attributes[_].nodeValue&&(f[d.attributes[_].nodeName]=d.attributes[_].nodeValue);const g=Z.createElement("applet",f,r);g.removeAttribute("wirisObject");for(let _=0;_<d.childNodes.length;_+=1)c(d.childNodes[_]),"param"===d.childNodes[_].nodeName.toLowerCase()&&(g.appendChild(d.childNodes[_]),_-=1);d.parentNode.replaceChild(g,d)}else for(let f=0;f<d.childNodes.length;f+=1)c(d.childNodes[f])}(a),a.firstChild}static createObjectCode(i){if(null==i)return null;if(1===i.nodeType){let r=`<${i.tagName}`;for(let a=0;a<i.attributes.length;a+=1)i.attributes[a].specified&&(r+=` ${i.attributes[a].name}="${Z.htmlEntities(i.attributes[a].value)}"`);if(i.childNodes.length>0){r+=">";for(let a=0;a<i.childNodes.length;a+=1)r+=Z.createObject(i.childNodes[a]);r+=`</${i.tagName}>`}else r+="DIV"===i.nodeName||"SCRIPT"===i.nodeName?`></${i.tagName}>`:"/>";return r}return 3===i.nodeType?Z.htmlEntities(i.nodeValue):""}static concatenateUrl(i,r){let a="";return i.indexOf("/")!==i.length&&0!==r.indexOf("/")&&(a="/"),(i+a+r).replace(/([^:]\/)\/+/g,"$1")}static htmlEntities(i){return i.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")}static htmlEntitiesDecode(i){const r=document.createElement("textarea");return r.innerHTML=i,r.value}static createHttpRequest(){if("file://"===window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1).substr(0,7))throw ci.get("exception_cross_site");if(typeof XMLHttpRequest<"u")return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{return null}}}static httpBuildQuery(i){let r="";return Object.keys(i).forEach(a=>{null!=i[a]&&(r+=`${Z.urlEncode(a)}=${Z.urlEncode(i[a])}&`)}),"&"===r.substring(r.length-1)&&(r=r.substring(0,r.length-1)),r}static propertiesToString(i){const r=[];Object.keys(i).forEach(d=>{Object.prototype.hasOwnProperty.call(i,d)&&r.push(d)});const a=r.length;for(let d=0;d<a;d+=1)for(let f=d+1;f<a;f+=1){const g=r[d],_=r[f];Z.compareStrings(g,_)>0&&(r[d]=_,r[f]=g)}let c="";for(let d=0;d<a;d+=1){const f=r[d];c+=f,c+="=";let g=i[f];g=g.replace("\\","\\\\"),g=g.replace("\n","\\n"),g=g.replace("\r","\\r"),g=g.replace("\t","\\t"),c+=g,c+="\n"}return c}static compareStrings(i,r){let a;const c=i.length,d=r.length,f=c>d?d:c;for(a=0;a<f;a+=1){const g=Z.fixedCharCodeAt(i,a)-Z.fixedCharCodeAt(r,a);if(0!==g)return g}return i.length-r.length}static fixedCharCodeAt(i,r){const a=i.charCodeAt(r=r||0);let c,d;if(a>=55296&&a<=56319){if(c=a,d=i.charCodeAt(r+1),Number.isNaN(d))throw ci.get("exception_high_surrogate");return 1024*(c-55296)+(d-56320)+65536}return!(a>=56320&&a<=57343)&&a}static urlToAssArray(i){let r;if(r=i.indexOf("?"),r>0){const a=i.substring(r+1).split("&"),c={};for(r=0;r<a.length;r+=1){const d=a[r].split("=");d.length>1&&(c[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return c}return{}}static urlEncode(i){let r="";return r=encodeURIComponent(i),r}static getWIRISImageOutput(i,r,a){const c=Z.createObject(i);if(c&&(c.className===Ce.get("imageClassName")||c.getAttribute(Ce.get("imageMathmlAttribute")))){if(!r)return i;const d=c.getAttribute(Ce.get("imageMathmlAttribute"));let f=jt.safeXmlDecode(d);return Ce.get("saveHandTraces")||(f=jt.removeAnnotation(f,"application/json")),null==f&&(f=c.getAttribute("alt")),a?jt.safeXmlEncode(f):f}return i}static getNodeLength(i){if(3===i.nodeType)return i.nodeValue.length;if(1===i.nodeType){let a={IMG:1,BR:1}[i.nodeName.toUpperCase()];void 0===a&&(a=0);for(let c=0;c<i.childNodes.length;c+=1)a+=Z.getNodeLength(i.childNodes[c]);return a}return 0}static getSelectedItem(i,r,a){let c;if(r?(c=i.contentWindow,c.focus()):(c=window,i.focus()),document.selection&&!a){const d=c.document.selection.createRange();if(d.parentElement){if(d.htmlText.length>0)return 0===d.text.length?Z.getSelectedItem(i,r,!0):null;c.document.execCommand("InsertImage",!1,"#");let f,g,_=d.parentElement();return"IMG"!==_.nodeName.toUpperCase()&&(d.pasteHTML('<span id="wrs_openEditorWindow_temporalObject"></span>'),_=c.document.getElementById("wrs_openEditorWindow_temporalObject")),_.nextSibling&&3===_.nextSibling.nodeType?(f=_.nextSibling,g=0):_.previousSibling&&3===_.previousSibling.nodeType?(f=_.previousSibling,g=f.nodeValue.length):(f=c.document.createTextNode(""),_.parentNode.insertBefore(f,_),g=0),_.parentNode.removeChild(_),{node:f,caretPosition:g}}return d.length>1?null:{node:d.item(0)}}if(c.getSelection){let d;const f=c.getSelection();try{d=f.getRangeAt(0)}catch{d=c.document.createRange()}const g=d.startContainer;if(3===g.nodeType)return{node:g,caretPosition:d.startOffset};if(g!==d.endContainer)return null;if(1===g.nodeType){const _=d.startOffset;if(g.childNodes[_])return{node:g.childNodes[_]}}}return null}static getSelectedItemOnTextarea(i){const r=document.createTextNode(i.value),a=li.getLatexFromTextNode(r,i.selectionStart);return null===a?null:{node:r,caretPosition:i.selectionStart,startPosition:a.startPosition,endPosition:a.endPosition}}static getElementsByNameFromString(i,r,a){const c=[];i=i.toLowerCase(),r=r.toLowerCase();let d=i.indexOf(`<${r} `);for(;-1!==d;){let f;f=a?">":`</${r}>`;let g=i.indexOf(f,d);-1!==g?(g+=f.length,c.push({start:d,end:g})):g=d+1,d=i.indexOf(`<${r} `,g)}return c}static decode64(i){const r="+".charCodeAt(0),a="/".charCodeAt(0),c="0".charCodeAt(0),d="a".charCodeAt(0),f="A".charCodeAt(0),g="-".charCodeAt(0),_="_".charCodeAt(0),b=i.charCodeAt(0);return b===r||b===g?62:b===a||b===_?63:b<c?-1:b<c+10?b-c+26+26:b<f+26?b-f:b<d+26?b-d+26:null}static b64ToByteArray(i,r){let a;if(i.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");const c=[];let d,f,g;for(r?d=r:(f="="===i.charAt(i.length-2)?2:"="===i.charAt(i.length-1)?1:0,d=f>0?i.length-4:i.length),g=0;g<d;g+=4)a=Z.decode64(i.charAt(g))<<18|Z.decode64(i.charAt(g+1))<<12|Z.decode64(i.charAt(g+2))<<6|Z.decode64(i.charAt(g+3)),c.push(a>>16&255),c.push(a>>8&255),c.push(255&a);return f&&(2===f?(a=Z.decode64(i.charAt(g))<<2|Z.decode64(i.charAt(g+1))>>4,c.push(255&a)):1===f&&(a=Z.decode64(i.charAt(g))<<10|Z.decode64(i.charAt(g+1))<<4|Z.decode64(i.charAt(g+2))>>2,c.push(a>>8&255),c.push(255&a))),c}static readInt32(i){if(i.length<4)return!1;const r=i.splice(0,4);return r[0]<<24|r[1]<<16|r[2]<<8|r[3]<<0}static readByte(i){return i.shift()<<0}static readBytes(i,r,a){return i.splice(r,a)}static updateTextArea(i,r){if(i&&r)if(i.focus(),null!=i.selectionStart){const{selectionEnd:a}=i,c=i.value.substring(0,i.selectionStart),d=i.value.substring(a,i.value.length);i.value=c+r+d,i.selectionEnd=a+r.length}else document.selection.createRange().text=r}static updateExistingTextOnTextarea(i,r,a,c){i.focus();const d=i.value.substring(0,a);i.value=d+r+i.value.substring(c,i.value.length),i.selectionEnd=a+r.length}static addArgument(i,r,a){let c;return c=i.indexOf("?")>0?"&":"?",`${i+c+r}=${a}`}}class Ri{static removeImgDataAttributes(i){const r=[],{attributes:a}=i;Object.keys(a).forEach(c=>{const d=a[c];0===d.name.indexOf("data-")&&r.push(d.name)}),r.forEach(c=>{i.removeAttribute(c)})}static clone(i,r){const a=Ce.get("imageCustomEditorName");i.hasAttribute(a)||r.removeAttribute(a),[Ce.get("imageMathmlAttribute"),a,"alt","height","width","style","src","role"].forEach(c=>{const d=i.getAttribute(c);d&&r.setAttribute(c,d)})}static setImgSize(i,r,a){let c,d,f,g;if(a)if("svg"===Ce.get("imageFormat"))if("base64"!==Ce.get("saveMode"))c=Ri.getMetricsFromSvgString(r);else{d=i.src.substr(i.src.indexOf("base64,")+7,i.src.length),g="",f=Z.b64ToByteArray(d,d.length);for(let S=0;S<f.length;S+=1)g+=String.fromCharCode(f[S]);c=Ri.getMetricsFromSvgString(g)}else d=i.src.substr(i.src.indexOf("base64,")+7,i.src.length),f=Z.b64ToByteArray(d,88),c=Ri.getMetricsFromBytes(f);else c=Z.urlToAssArray(r);let _=c.cw;if(!_)return;let b=c.ch,y=c.cb;const{dpi:k}=c;k&&(_=96*_/k,b=96*b/k,y=96*y/k),i.width=_,i.height=b,i.style.verticalAlign=`-${b-y}px`}static fixAfterResize(i){if(i.removeAttribute("style"),i.removeAttribute("width"),i.removeAttribute("height"),i.style.maxWidth="none",-1!==i.src.indexOf("data:image"))if("svg"===Ce.get("imageFormat")){const r=decodeURIComponent(i.src.substring(32,i.src.length));Ri.setImgSize(i,r,!0)}else{const r=i.src.substring(22,i.src.length);Ri.setImgSize(i,r,!0)}else Ri.setImgSize(i,i.src)}static getMetricsFromSvgString(i){let r=i.indexOf('height="'),a=i.indexOf('"',r+8,i.length);const c=i.substring(r+8,a);r=i.indexOf('width="'),a=i.indexOf('"',r+7,i.length);const d=i.substring(r+7,a);r=i.indexOf('wrs:baseline="'),a=i.indexOf('"',r+14,i.length);const f=i.substring(r+14,a);if(void 0!==d){const g=[];return g.cw=d,g.ch=c,void 0!==f&&(g.cb=f),g}return[]}static getMetricsFromBytes(i){let r,a,c,d,f;for(Z.readBytes(i,0,8);i.length>=4;)c=Z.readInt32(i),1229472850===c?(r=Z.readInt32(i),a=Z.readInt32(i),Z.readInt32(i),Z.readByte(i)):1650545477===c?d=Z.readInt32(i):1883789683===c&&(f=Z.readInt32(i),f=Math.round(f/39.37),Z.readInt32(i),Z.readByte(i)),Z.readInt32(i);if(void 0!==r){const g=[];return g.cw=r,g.ch=a,g.dpi=f,d&&(g.cb=d),g}return[]}}class _r{static get cache(){return _r._cache}static set cache(i){_r._cache=i}static mathMLToAccessible(i,r,a){void 0===r&&(r="en"),jt.containClass(i,"wrs_chemistry")&&(a.mode="chemistry");let c="";if(_r.cache.get(i))c=_r.cache.get(i);else{a.service="mathml2accessible",a.lang=r;const d=JSON.parse(Ae.getService("service",a));"error"!==d.status?(c=d.result.text,_r.cache.populate(i,c)):c=ci.get("error_convert_accessibility")}return c}}_r._cache=new Oc,T(101);class un{static mathmlToImgObject(i,r,a,c){const d=i.createElement("img");d.align="middle",d.style.maxWidth="none";const f=a||{};if(f.mml=r,f.lang=c,f.metrics="true",f.centerbaseline="false","base64"===Ce.get("saveMode")&&"default"===Ce.get("base64savemode")&&(f.base64=!0),d.className=Ce.get("imageClassName"),-1!==r.indexOf('class="')){let g=r.substring(r.indexOf('class="')+7,r.length);g=g.substring(0,g.indexOf('"')),g=g.substring(4,g.length),d.setAttribute(Ce.get("imageCustomEditorName"),g)}if(!Ce.get("wirisPluginPerformance")||"xml"!==Ce.get("saveMode")&&"safeXml"!==Ce.get("saveMode")){const g=un.createImageSrc(r,f);d.setAttribute(Ce.get("imageMathmlAttribute"),jt.safeXmlEncode(r)),d.src=g,Ri.setImgSize(d,g,"base64"===Ce.get("saveMode")&&"default"===Ce.get("base64savemode")),Ce.get("enableAccessibility")&&(d.alt=_r.mathMLToAccessible(r,c,f))}else{let g=JSON.parse(un.createShowImageSrc(f,c));if("warning"===g.status)try{g=JSON.parse(Ae.getService("showimage",f))}catch{return null}({result:g}=g),d.src="png"===g.format?`data:image/png;base64,${g.content}`:`data:image/svg+xml;charset=utf8,${Z.urlEncode(g.content)}`,d.setAttribute(Ce.get("imageMathmlAttribute"),jt.safeXmlEncode(r)),Ri.setImgSize(d,g.content,!0),Ce.get("enableAccessibility")&&(d.alt=void 0===g.alt?_r.mathMLToAccessible(r,c,f):g.alt)}return void 0!==un.observer&&un.observer.observe(d),d.setAttribute("role","math"),d}static createImageSrc(i,r){"base64"===Ce.get("saveMode")&&"default"===Ce.get("base64savemode")&&(r.base64=!0);let a=Ae.getService("createimage",r);if(-1!==a.indexOf("@BASE@")){const c=Ae.getServicePath("createimage").split("/");c.pop(),a=a.split("@BASE@").join(c.join("/"))}return a}static initParse(i,r){return i=un.initParseSaveMode(i,r),un.initParseEditMode(i)}static initParseSaveMode(i,r){return Ce.get("saveMode")&&(i=li.parseMathmlToLatex(i,Qe.safeXmlCharacters),i=li.parseMathmlToLatex(i,Qe.xmlCharacters),i=un.parseMathmlToImg(i,Qe.safeXmlCharacters,r),i=un.parseMathmlToImg(i,Qe.xmlCharacters,r),"base64"===Ce.get("saveMode")&&"image"===Ce.get("base64savemode")&&(i=un.codeImgTransform(i,"base642showimage"))),i}static initParseEditMode(i){if(-1!==Ce.get("parseModes").indexOf("latex")){const r=Z.getElementsByNameFromString(i,"img",!0),a='encoding="LaTeX">';let c=0;for(let d=0;d<r.length;d+=1){const f=i.substring(r[d].start+c,r[d].end+c);if(-1!==f.indexOf(` class="${Ce.get("imageClassName")}"`)){let g=` ${Ce.get("imageMathmlAttribute")}="`,_=f.indexOf(g);if(-1===_&&(g=' alt="',_=f.indexOf(g)),-1!==_){_+=g.length;const b=f.indexOf('"',_),y=jt.safeXmlDecode(f.substring(_,b));let k=y.indexOf(a);if(-1!==k){k+=a.length;const S=y.indexOf("</annotation>",k),F=y.substring(k,S),$=`$$${Z.htmlEntitiesDecode(F)}$$`,G=i.substring(0,r[d].start+c),Y=i.substring(r[d].end+c);i=G+$+Y,c+=$.length-(r[d].end-r[d].start)}}}}}return i}static endParse(i){const r=un.endParseEditMode(i);return un.endParseSaveMode(r)}static endParseEditMode(i){if(-1!==Ce.get("parseModes").indexOf("latex")){let r="",a=0,c=i.indexOf("$$");for(;-1!==c;){if(r+=i.substring(a,c),a=i.indexOf("$$",c+2),-1!==a){const d=i.substring(c+2,a),f=Z.htmlEntitiesDecode(d);let g=li.getMathMLFromLatex(f,!0);Ce.get("saveHandTraces")||(g=jt.removeAnnotation(g,"application/json")),r+=g,a+=2}else r+="$$",a=c+2;c=i.indexOf("$$",a)}r+=i.substring(a,i.length),i=r}return i}static endParseSaveMode(i){return Ce.get("saveMode")&&("safeXml"===Ce.get("saveMode")||"xml"===Ce.get("saveMode")?i=un.codeImgTransform(i,"img2mathml"):"base64"===Ce.get("saveMode")&&"image"===Ce.get("base64savemode")&&(i=un.codeImgTransform(i,"img264"))),i}static createShowImageSrc(i,r){const a=[],c=["mml","color","centerbaseline","zoom","dpi","fontSize","fontFamily","defaultStretchy","backgroundColor","format"];c.forEach(f=>{const g=c[f];void 0!==i[g]&&(a[g]=i[g])});const d={};return Object.keys(i).forEach(f=>{"mml"!==f&&(d[f]=i[f])}),d.formula=com.wiris.js.JsPluginTools.md5encode(Z.propertiesToString(a)),d.lang=void 0===r?"en":r,d.version=Ce.get("version"),Ae.getService("showimage",Z.httpBuildQuery(d),!0)}static codeImgTransform(i,r){let a="",c=0;const d=/<img/gi,f=d.source.length;for(;d.test(i);){const g=d.lastIndex-f;a+=i.substring(c,g);let _=g+1;for(;_<i.length&&c<=g;){const $=i.charAt(_);if('"'===$||"'"===$){const G=i.indexOf($,_+1);_=-1===G?i.length:G}else">"===$&&(c=_+1);_+=1}if(c<g)return a+=i.substring(g,i.length),a;let b=i.substring(g,c);const y=Z.createObject(b);let k,S,F=y.getAttribute(Ce.get("imageMathmlAttribute"));"base642showimage"===r?(null==F&&(F=y.getAttribute("alt")),F=jt.safeXmlDecode(F),b=un.mathmlToImgObject(document,F,null,null),a+=Z.createObjectCode(b)):"img2mathml"===r?(Ce.get("saveMode")&&("safeXml"===Ce.get("saveMode")?(k=!0,S=!0):"xml"===Ce.get("saveMode")&&(k=!0,S=!1)),a+=Z.getWIRISImageOutput(b,k,S)):"img264"===r&&(null===F&&(F=y.getAttribute("alt")),F=jt.safeXmlDecode(F),b=un.mathmlToImgObject(document,F,{base64:"true"},null),Ri.setImgSize(b,b.src,!0),a+=Z.createObjectCode(b))}return a+=i.substring(c,i.length),a}static parseMathmlToImg(i,r,a){let c="";const d=`${r.tagOpener}math`,f=`${r.tagOpener}/math${r.tagCloser}`;let g=i.indexOf(d),_=0;for(;-1!==g;){c+=i.substring(_,g);const b=i.indexOf(Ce.get("imageMathmlAttribute"));if(_=i.indexOf(f,g),-1===_?_=i.length-1:_+=-1!==b?i.indexOf("/>",g):f.length,jt.isMathmlInAttribute(i,g)||-1!==b)c+=i.substring(g,_);else{let y=i.substring(g,_);y=r.id===Qe.safeXmlCharacters.id?jt.safeXmlDecode(y):jt.mathMLEntities(y),c+=Z.createObjectCode(un.mathmlToImgObject(document,y,null,a))}g=i.indexOf(d,_)}return c+=i.substring(_,i.length),c}}if(typeof MutationObserver<"u"){const u=new MutationObserver(i=>{i.forEach(r=>{r.oldValue===Ce.get("imageClassName")&&"class"===r.attributeName&&-1===r.target.className.indexOf(Ce.get("imageClassName"))&&(r.target.className=Ce.get("imageClassName"))})});un.observer=Object.create(u),un.observer.Config={attributes:!0,attributeOldValue:!0},un.observer.observe=function(i){Object.getPrototypeOf(this).observe(i,this.Config)}}class Hp{constructor(){this.isContentChanged=!1,this.waitingForChanges=!1}setIsContentChanged(i){this.isContentChanged=i}getIsContentChanged(){return this.isContentChanged}setWaitingForChanges(i){this.waitingForChanges=i}caretPositionChanged(i){}clipboardChanged(i){}contentChanged(i){!0===this.waitingForChanges&&!1===this.isContentChanged&&(this.isContentChanged=!0)}styleChanged(i){}transformationReceived(i){}}class ui{constructor(i){if(this.editorAttributes={},!("editorAttributes"in i))throw new Error("ContentManager constructor error: editorAttributes property missed.");if(this.editorAttributes=i.editorAttributes,this.customEditors=null,"customEditors"in i&&(this.customEditors=i.customEditors),this.environment={},!("environment"in i))throw new Error("ContentManager constructor error: environment property missed");if(this.environment=i.environment,this.language="",!("language"in i))throw new Error("ContentManager constructor error: language property missed");this.language=i.language,this.editorListener=new Hp,this.editor=null,this.ua=navigator.userAgent.toLowerCase(),this.deviceProperties={},this.deviceProperties.isAndroid=this.ua.indexOf("android")>-1,this.deviceProperties.isIOS=this.ua.indexOf("ipad")>-1||this.ua.indexOf("iphone")>-1,this.toolbar=null,this.modalDialogInstance=null,this.listeners=new po,this.mathML=null,this.isNewElement=!0,this.integrationModel=null}addListener(i){this.listeners.add(i)}setIntegrationModel(i){this.integrationModel=i}setModalDialogInstance(i){this.modalDialogInstance=i}insert(){this.updateTitle(this.modalDialogInstance),this.insertEditor(this.modalDialogInstance)}insertEditor(){if(ui.isEditorLoaded()){if(this.editor=window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes),this.editor.insertInto(this.modalDialogInstance.contentContainer),this.editor.focus(),this.modalDialogInstance.rtl&&this.editor.action("rtl"),this.editor.getEditorModel().isRTL()&&(this.editor.element.style.direction="rtl"),this.editor.getEditorModel().addEditorListener(this.editorListener),this.modalDialogInstance.deviceProperties.isIOS){setTimeout(function(){this.modalDialogInstance.hideKeyboard()},400);const i=document.getElementsByClassName("wrs_formulaDisplay")[0];Z.addEvent(i,"focus",this.modalDialogInstance.handleOpenedIosSoftkeyboard),Z.addEvent(i,"blur",this.modalDialogInstance.handleClosedIosSoftkeyboard)}this.listeners.fire("onLoad",{})}else setTimeout(ui.prototype.insertEditor.bind(this),100)}init(){ui.isEditorLoaded()||this.addEditorAsExternalDependency()}addEditorAsExternalDependency(){const i=document.createElement("script");i.type="text/javascript";let r=Ce.get("editorUrl");const a=document.createElement("a");ui.setHrefToAnchorElement(a,r),ui.setProtocolToAnchorElement(a),r=ui.getURLFromAnchorElement(a);const c=this.getEditorStats();i.src=`${r}?lang=${this.language}&stats-editor=${c.editor}&stats-mode=${c.mode}&stats-version=${c.version}`,document.getElementsByTagName("head")[0].appendChild(i)}static setHrefToAnchorElement(i,r){i.href=r}static setProtocolToAnchorElement(i){0===window.location.href.indexOf("https://")&&"http:"===i.protocol&&(i.protocol="https:")}static getURLFromAnchorElement(i){if("80"===i.port||"443"===i.port||""===i.port)return`${i.protocol}//${i.hostname}/${i.pathname}`}getEditorStats(){const i={};return i.editor="editor"in this.environment?this.environment.editor:"unknown",i.mode="mode"in this.environment?this.environment.mode:Ce.get("saveMode"),i.version="version"in this.environment?this.environment.version:Ce.get("version"),i}static isEditorLoaded(){return window.com&&window.com.wiris&&window.com.wiris.jsEditor&&window.com.wiris.jsEditor.JsEditor&&window.com.wiris.jsEditor.JsEditor.newInstance}setInitialContent(){this.isNewElement||this.setMathML(this.mathML)}setMathML(i,r){void 0===r&&(r=!1),this.editor.setMathMLWithCallback(i,()=>{this.editorListener.setWaitingForChanges(!0)}),setTimeout(()=>{this.editorListener.setIsContentChanged(!1)},500),r||this.onFocus()}onFocus(){void 0!==this.editor&&null!=this.editor&&this.editor.focus()}submitAction(){if(this.editor.isFormulaEmpty())this.integrationModel.updateFormula(null);else{let i=this.editor.getMathMLWithSemantics();if(null!==this.customEditors.getActiveEditor()){const{toolbar:a}=this.customEditors.getActiveEditor();i=jt.addCustomEditorClassAttribute(i,a)}else Object.keys(this.customEditors.editors).forEach(a=>{i=jt.removeCustomEditorClassAttribute(i,a)});const r=jt.mathMLEntities(i);this.integrationModel.updateFormula(r)}this.customEditors.disable(),this.integrationModel.notifyWindowClosed(),this.setEmptyMathML(),this.customEditors.disable()}setEmptyMathML(){this.deviceProperties.isAndroid||this.deviceProperties.isIOS?this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',!0):this.setMathML('<math><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',!0):this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"/>',!0):this.setMathML("<math/>",!0)}onOpen(){this.isNewElement?this.setEmptyMathML():this.setMathML(this.mathML),this.updateToolbar(),this.onFocus()}updateToolbar(){this.updateTitle(this.modalDialogInstance);const i=this.customEditors.getActiveEditor();if(i){const r=i.toolbar?i.toolbar:_wrs_int_wirisProperties.toolbar;null!=this.toolbar&&this.toolbar===r||this.setToolbar(r)}else{const r=this.getToolbar();null!=this.toolbar&&this.toolbar===r||(this.setToolbar(r),this.customEditors.disable())}}updateTitle(){const i=this.customEditors.getActiveEditor();this.modalDialogInstance.setTitle(i?i.title:"MathType")}getToolbar(){let i="general";return"toolbar"in this.editorAttributes&&({toolbar:i}=this.editorAttributes),"general"===i&&(i=typeof _wrs_int_wirisProperties>"u"||void 0===_wrs_int_wirisProperties.toolbar?"general":_wrs_int_wirisProperties.toolbar),i}setToolbar(i){this.toolbar=i,this.editor.setParams({toolbar:this.toolbar})}hasChanges(){return!this.editor.isFormulaEmpty()&&this.editorListener.getIsContentChanged()}onKeyDown(i){if(void 0!==i.key&&!1===i.repeat)if("Escape"===i.key||"Esc"===i.key){let r=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed");0===r.length&&(r=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed"),0===r.length&&(r=document.getElementsByClassName("wrs_select wrs_pressed"),0===r.length&&(this.modalDialogInstance.cancelAction(),i.stopPropagation(),i.preventDefault())))}else if(i.shiftKey&&"Tab"===i.key)if(document.activeElement===this.modalDialogInstance.submitButton)this.editor.focus(),i.stopPropagation(),i.preventDefault();else{const r=document.querySelector('[title="Manual"]');document.activeElement===r&&(this.modalDialogInstance.cancelButton.focus(),i.stopPropagation(),i.preventDefault())}else"Tab"===i.key&&(document.activeElement===this.modalDialogInstance.cancelButton?(document.querySelector('[title="Manual"]').focus(),i.stopPropagation(),i.preventDefault()):"wrs_formulaDisplay wrs_focused"===document.getElementsByClassName("wrs_formulaDisplay")[0].getAttribute("class")&&(this.modalDialogInstance.submitButton.focus(),i.stopPropagation(),i.preventDefault()))}}class $d{constructor(){this.editors=[],this.activeEditor="default"}addEditor(i,r){const a={};a.name=r.name,a.toolbar=r.toolbar,a.icon=r.icon,a.confVariable=r.confVariable,a.title=r.title,a.tooltip=r.tooltip,this.editors[i]=a}enable(i){this.activeEditor=i}disable(){this.activeEditor="default"}getActiveEditor(){return"default"!==this.activeEditor?this.editors[this.activeEditor]:null}}var Ud={imageCustomEditorName:"data-custom-editor",imageClassName:"Wirisformula",CASClassName:"Wiriscas"};class sa{constructor(){this.cancelled=!1,this.defaultPrevented=!1}cancel(){this.cancelled=!0}preventDefault(){this.defaultPrevented=!0}}class tC{constructor(i){this.overlayElement=i.overlayElement,this.callbacks=i.callbacks,this.overlayWrapper=this.overlayElement.appendChild(document.createElement("div")),this.overlayWrapper.setAttribute("class","wrs_popupmessage_overlay_envolture"),this.message=this.overlayWrapper.appendChild(document.createElement("div")),this.message.id="wrs_popupmessage",this.message.setAttribute("class","wrs_popupmessage_panel"),this.message.setAttribute("role","dialog"),this.message.setAttribute("aria-describedby","description_txt");const r=document.createElement("p"),a=document.createTextNode(i.strings.message);r.appendChild(a),r.id="description_txt",this.message.appendChild(r);const c=this.overlayWrapper.appendChild(document.createElement("div"));c.setAttribute("class","wrs_popupmessage_overlay"),c.addEventListener("click",this.cancelAction.bind(this)),this.buttonArea=this.message.appendChild(document.createElement("div")),this.buttonArea.setAttribute("class","wrs_popupmessage_button_area"),this.buttonArea.id="wrs_popup_button_area",this.closeButton=this.createButton({class:"wrs_button_accept",innerHTML:i.strings.submitString,id:"wrs_popup_accept_button"},this.closeAction.bind(this)),this.buttonArea.appendChild(this.closeButton),this.cancelButton=this.createButton({class:"wrs_button_cancel",innerHTML:i.strings.cancelString,id:"wrs_popup_cancel_button"},this.cancelAction.bind(this)),this.buttonArea.appendChild(this.cancelButton)}createButton(i,r){let a={};return a=document.createElement("button"),a.setAttribute("id",i.id),a.setAttribute("class",i.class),a.innerHTML=i.innerHTML,a.addEventListener("click",r),a}show(){"block"!==this.overlayWrapper.style.display?(document.activeElement.blur(),this.overlayWrapper.style.display="block",this.closeButton.focus()):(this.overlayWrapper.style.display="none",_wrs_modalWindow.focus())}cancelAction(){this.overlayWrapper.style.display="none",void 0!==this.callbacks.cancelCallback&&this.callbacks.cancelCallback()}closeAction(){this.cancelAction(),void 0!==this.callbacks.closeCallback&&this.callbacks.closeCallback()}onKeyDown(i){void 0!==i.key&&("Escape"===i.key||"Esc"===i.key?(this.cancelAction(),i.stopPropagation(),i.preventDefault()):"Tab"===i.key&&(document.activeElement===this.closeButton?this.cancelButton.focus():this.closeButton.focus(),i.stopPropagation(),i.preventDefault()))}}var zp,Pc='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3813"\n   version="1.1">\n  <metadata\n     id="metadata3819">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3817" />\n  <image\n     y="0"\n     x="0"\n     id="image3821"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0\nkoGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rO\nvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJ\nRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n',Gd='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg32"\n   version="1.1">\n  <metadata\n     id="metadata38">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs36" />\n  <image\n     y="0"\n     x="0"\n     id="image40"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\npklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIK\nvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1Bo\nCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26\nb1V6LAAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';class nC{constructor(i){this.attributes=i;const r=navigator.userAgent.toLowerCase(),a=r.indexOf("android")>-1,c=r.indexOf("ipad")>-1||r.indexOf("iphone")>-1;this.iosSoftkeyboardOpened=!1,this.iosMeasureUnit=-1===r.indexOf("crios")?"%":"vh",this.iosDivHeight=`100%${this.iosMeasureUnit}`;const d=window.outerWidth,f=window.outerHeight,g=d>f,k=g&&this.attributes.height>f||d<f&&this.attributes.width>d;this.instanceId=document.getElementsByClassName("wrs_modal_dialogContainer").length,this.deviceProperties={orientation:g?"landscape":"portait",isAndroid:a,isIOS:c,isMobile:k,isDesktop:!k&&!c&&!a},this.properties={created:!1,state:"",previousState:"",position:{bottom:0,right:10},size:{height:338,width:580}},this.websiteBeforeLockParameters=null;let S={class:"wrs_modal_overlay"};S.id=this.getElementId(S.class),this.overlay=Z.createElement("div",S),S={},S.class="wrs_modal_title_bar",S.id=this.getElementId(S.class),this.titleBar=Z.createElement("div",S),S={},S.class="wrs_modal_title",S.id=this.getElementId(S.class),this.title=Z.createElement("div",S),this.title.innerHTML="",S={},S.class="wrs_modal_close_button",S.id=this.getElementId(S.class),S.title=ci.get("close"),S.style={},this.closeDiv=Z.createElement("a",S),this.closeDiv.setAttribute("role","button");let F=`background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3783"\n   version="1.1">\n  <metadata\n     id="metadata3789">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3787" />\n  <image\n     y="0"\n     x="0"\n     id="image3791"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\nvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M\n4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4\nJ/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749R\ngs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5Z\nA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLY\nJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7Jkk\nS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpF\naA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIA\nAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`,$=`background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg2"\n   version="1.1">\n  <metadata\n     id="metadata8">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs6" />\n  <image\n     y="0"\n     x="0"\n     id="image10"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\n2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtE\nQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0\nXawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbz\nFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT9\n6VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0Gko\nNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0\nJryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4\nARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u\n8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`;this.closeDiv.setAttribute("style",F),this.closeDiv.setAttribute("onmouseover",`this.style = "${$}";`),this.closeDiv.setAttribute("onmouseout",`this.style = "${F}";`),S={},S.class="wrs_modal_stack_button",S.id=this.getElementId(S.class),S.title=ci.get("exit_fullscreen"),this.stackDiv=Z.createElement("a",S),this.stackDiv.setAttribute("role","button"),F=`background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3823"\n   version="1.1">\n  <metadata\n     id="metadata3829">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3827" />\n  <image\n     y="0"\n     x="0"\n     id="image3831"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhO\nUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+c\nwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64\ng26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR\n1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQ\niWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYu\nCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZN\nEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAq\nwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`,$=`background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg42"\n   version="1.1">\n  <metadata\n     id="metadata48">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs46" />\n  <image\n     y="0"\n     x="0"\n     id="image50"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQ\nQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4k\nT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeq\nrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqC\nN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW\n3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmc\nuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyT\nIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXD\nbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`,this.stackDiv.setAttribute("style",F),this.stackDiv.setAttribute("onmouseover",`this.style = "${$}";`),this.stackDiv.setAttribute("onmouseout",`this.style = "${F}";`),S={},S.class="wrs_modal_maximize_button",S.id=this.getElementId(S.class),S.title=ci.get("fullscreen"),this.maximizeDiv=Z.createElement("a",S),this.maximizeDiv.setAttribute("role","button"),F=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3793"\n   version="1.1">\n  <metadata\n     id="metadata3799">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3797" />\n  <image\n     y="0"\n     x="0"\n     id="image3801"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJ\nKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQf\nSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7\nns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4t\nKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1\neoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYL\nCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y5\n4+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Y\ng2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`,$=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg12"\n   version="1.1">\n  <metadata\n     id="metadata18">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs16" />\n  <image\n     y="0"\n     x="0"\n     id="image20"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQ\nU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0\nlPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOy\nvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6\nsFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcF\nmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmg\npMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM\n9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n')})`,this.maximizeDiv.setAttribute("style",F),this.maximizeDiv.setAttribute("onmouseover",`this.style = "${$}";`),this.maximizeDiv.setAttribute("onmouseout",`this.style = "${F}";`),S={},S.class="wrs_modal_minimize_button",S.id=this.getElementId(S.class),S.title=ci.get("minimize"),this.minimizeDiv=Z.createElement("a",S),this.minimizeDiv.setAttribute("role","button"),F=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Pc)})`,$=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Gd)})`,this.minimizeDiv.setAttribute("style",F),this.minimizeDiv.setAttribute("onmouseover",`this.style = "${$}";`),this.minimizeDiv.setAttribute("onmouseout",`this.style = "${F}";`),S={},S.class="wrs_modal_dialogContainer",S.id=this.getElementId(S.class),S.role="dialog",this.container=Z.createElement("div",S),this.container.setAttribute("aria-labeledby","wrs_modal_title[0]"),S={},S.class="wrs_modal_wrapper",S.id=this.getElementId(S.class),this.wrapper=Z.createElement("div",S),S={},S.class="wrs_content_container",S.id=this.getElementId(S.class),this.contentContainer=Z.createElement("div",S),S={},S.class="wrs_modal_controls",S.id=this.getElementId(S.class),this.controls=Z.createElement("div",S),S={},S.class="wrs_modal_buttons_container",S.id=this.getElementId(S.class),this.buttonContainer=Z.createElement("div",S),this.submitButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_accept"),class:"wrs_modal_button_accept",innerHTML:ci.get("accept")},this.submitAction.bind(this)),this.cancelButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_cancel"),class:"wrs_modal_button_cancel",innerHTML:ci.get("cancel")},this.cancelAction.bind(this)),this.contentManager=null;const G={cancelString:ci.get("cancel"),submitString:ci.get("close"),message:ci.get("close_modal_warning")};this.popup=new tC({overlayElement:this.container,callbacks:{closeCallback:()=>{this.close()},cancelCallback:()=>{this.focus()}},strings:G}),this.rtl=!1,"rtl"in this.attributes&&(this.rtl=this.attributes.rtl),this.handleOpenedIosSoftkeyboard=this.handleOpenedIosSoftkeyboard.bind(this),this.handleClosedIosSoftkeyboard=this.handleClosedIosSoftkeyboard.bind(this)}setContentManager(i){this.contentManager=i}getContentManager(){return this.contentManager}submitAction(){void 0!==this.contentManager.submitAction&&this.contentManager.submitAction(),this.close()}cancelAction(){void 0===this.contentManager.hasChanges?this.close():this.contentManager.hasChanges()?this.showPopUpMessage():this.close()}createSubmitButton(i,r){return new class{constructor(){this.element=document.createElement("button"),this.element.id=i.id,this.element.className=i.class,this.element.innerHTML=i.innerHTML,Z.addEvent(this.element,"click",r)}getElement(){return this.element}}(i,r).getElement()}create(){this.titleBar.appendChild(this.closeDiv),this.titleBar.appendChild(this.stackDiv),this.titleBar.appendChild(this.maximizeDiv),this.titleBar.appendChild(this.minimizeDiv),this.titleBar.appendChild(this.title),this.deviceProperties.isDesktop&&this.container.appendChild(this.titleBar),this.wrapper.appendChild(this.contentContainer),this.wrapper.appendChild(this.controls),this.controls.appendChild(this.buttonContainer),this.buttonContainer.appendChild(this.submitButton),this.buttonContainer.appendChild(this.cancelButton),this.container.appendChild(this.wrapper),this.recalculateScrollBar(),document.body.appendChild(this.container),document.body.appendChild(this.overlay),this.deviceProperties.isDesktop?(this.createModalWindowDesktop(),this.createResizeButtons(),this.addListeners(),Ce.get("modalWindowFullScreen")&&this.maximize()):this.deviceProperties.isAndroid?this.createModalWindowAndroid():this.deviceProperties.isIOS&&!this.deviceProperties.isMobile&&this.createModalWindowIos(),null!=this.contentManager&&this.contentManager.insert(this),this.properties.open=!0,this.properties.created=!0,this.isRTL()&&(this.container.style.right=window.innerWidth-this.scrollbarWidth-this.container.offsetWidth+"px",this.container.className+=" wrs_modal_rtl")}createResizeButtons(){this.resizerBR=document.createElement("div"),this.resizerBR.className="wrs_bottom_right_resizer",this.resizerBR.innerHTML="\u25e2",this.resizerTL=document.createElement("div"),this.resizerTL.className="wrs_bottom_left_resizer",this.container.appendChild(this.resizerBR),this.titleBar.appendChild(this.resizerTL),Z.addEvent(this.resizerBR,"mousedown",this.activateResizeStateBR.bind(this)),Z.addEvent(this.resizerTL,"mousedown",this.activateResizeStateTL.bind(this))}activateResizeStateBR(i){this.initializeResizeProperties(i,!1)}activateResizeStateTL(i){this.initializeResizeProperties(i,!0)}initializeResizeProperties(i,r){Z.addClass(document.body,"wrs_noselect"),Z.addClass(this.overlay,"wrs_overlay_active"),this.resizeDataObject={x:this.eventClient(i).X,y:this.eventClient(i).Y},this.initialWidth=parseInt(this.container.style.width,10),this.initialHeight=parseInt(this.container.style.height,10),r?this.leftScale=!0:(this.initialRight=parseInt(this.container.style.right,10),this.initialBottom=parseInt(this.container.style.bottom,10)),this.initialRight||(this.initialRight=0),this.initialBottom||(this.initialBottom=0),document.body.style["user-select"]="none"}open(){this.removeClass("wrs_closed");const{isIOS:i}=this.deviceProperties,{isAndroid:r}=this.deviceProperties,{isMobile:a}=this.deviceProperties;if((i||r||a)&&(this.restoreWebsiteScale(),this.lockWebsiteScroll(),setTimeout(()=>{this.hideKeyboard()},400)),this.properties.created?(this.properties.open||(this.properties.open=!0,this.deviceProperties.isAndroid||this.deviceProperties.isIOS||this.restoreState()),this.deviceProperties.isDesktop&&Ce.get("modalWindowFullScreen")&&this.maximize(),this.deviceProperties.isIOS&&(this.iosSoftkeyboardOpened=!1,this.setContainerHeight(`${100+this.iosMeasureUnit}`))):this.create(),ui.isEditorLoaded())this.contentManager.onOpen(this);else{const c=po.newListener("onLoad",()=>{this.contentManager.onOpen(this)});this.contentManager.addListener(c)}}close(){this.removeClass("wrs_maximized"),this.removeClass("wrs_minimized"),this.removeClass("wrs_stack"),this.addClass("wrs_closed"),this.saveModalProperties(),this.unlockWebsiteScroll(),this.properties.open=!1}restoreWebsiteScale(){let i=document.querySelector("meta[name=viewport]");const r=["initial-scale=","minimum-scale=","maximum-scale="],a=["1.0","1.0","1.0"],c=(d,f)=>{const g=d.getAttribute("content");if(g){const _=g.split(",");let b="";const y=[];for(let k=0;k<_.length;k+=1){let S=!1,F=0;for(;!S&&F<f.length;)_[k].indexOf(f[F])&&(S=!0),F+=1;S||y.push(_[k])}for(let k=0;k<f.length;k+=1){const S=f[k]+a[k];b+=0===k?S:`,${S}`}for(let k=0;k<y.length;k+=1)b+=`,${y[k]}`;d.setAttribute("content",b),d.setAttribute("content",""),d.setAttribute("content",g)}else d.setAttribute("content","initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"),d.removeAttribute("content")};i?c(i,r):(i=document.createElement("meta"),document.getElementsByTagName("head")[0].appendChild(i),c(i,r),i.remove())}lockWebsiteScroll(){this.websiteBeforeLockParameters={bodyStylePosition:document.body.style.position?document.body.style.position:"",bodyStyleOverflow:document.body.style.overflow?document.body.style.overflow:"",htmlStyleOverflow:document.documentElement.style.overflow?document.documentElement.style.overflow:"",windowScrollX:window.scrollX,windowScrollY:window.scrollY}}unlockWebsiteScroll(){if(this.websiteBeforeLockParameters){document.body.style.position=this.websiteBeforeLockParameters.bodyStylePosition,document.body.style.overflow=this.websiteBeforeLockParameters.bodyStyleOverflow,document.documentElement.style.overflow=this.websiteBeforeLockParameters.htmlStyleOverflow;const{windowScrollX:i}=this.websiteBeforeLockParameters,{windowScrollY:r}=this.websiteBeforeLockParameters;window.scrollTo(i,r),this.websiteBeforeLockParameters=null}}isIE11(){return navigator.userAgent.search("Msie/")>=0||navigator.userAgent.search("Trident/")>=0||navigator.userAgent.search("Edge/")>=0}isRTL(){return"ar"===this.attributes.language||"he"===this.attributes.language||this.rtl}addClass(i){Z.addClass(this.overlay,i),Z.addClass(this.titleBar,i),Z.addClass(this.overlay,i),Z.addClass(this.container,i),Z.addClass(this.contentContainer,i),Z.addClass(this.stackDiv,i),Z.addClass(this.minimizeDiv,i),Z.addClass(this.maximizeDiv,i),Z.addClass(this.wrapper,i)}removeClass(i){Z.removeClass(this.overlay,i),Z.removeClass(this.titleBar,i),Z.removeClass(this.overlay,i),Z.removeClass(this.container,i),Z.removeClass(this.contentContainer,i),Z.removeClass(this.stackDiv,i),Z.removeClass(this.minimizeDiv,i),Z.removeClass(this.maximizeDiv,i),Z.removeClass(this.wrapper,i)}createModalWindowDesktop(){this.addClass("wrs_modal_desktop"),this.stack()}createModalWindowAndroid(){this.addClass("wrs_modal_android"),window.addEventListener("resize",this.orientationChangeAndroidSoftkeyboard.bind(this))}createModalWindowIos(){this.addClass("wrs_modal_ios"),window.addEventListener("resize",this.orientationChangeIosSoftkeyboard.bind(this))}restoreState(){"maximized"===this.properties.state?this.maximize():"minimized"===this.properties.state?(this.properties.state=this.properties.previousState,this.properties.previousState="",this.minimize()):this.stack()}stack(){this.properties.previousState=this.properties.state,this.properties.state="stack",this.removeClass("wrs_maximized"),this.minimizeDiv.title=ci.get("minimize"),this.removeClass("wrs_minimized"),this.addClass("wrs_stack");const i=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Pc)})`,r=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Gd)})`;this.minimizeDiv.setAttribute("style",i),this.minimizeDiv.setAttribute("onmouseover",`this.style = "${r}";`),this.minimizeDiv.setAttribute("onmouseout",`this.style = "${i}";`),this.restoreModalProperties(),void 0!==this.resizerBR&&void 0!==this.resizerTL&&this.setResizeButtonsVisibility(),this.recalculateScrollBar(),this.recalculatePosition(),this.recalculateScale(),this.focus()}minimize(){if(this.saveModalProperties(),this.title.style.cursor="pointer","minimized"===this.properties.state&&"stack"===this.properties.previousState)this.stack();else if("minimized"===this.properties.state&&"maximized"===this.properties.previousState)this.maximize();else{this.container.style.height="30px",this.container.style.width="250px",this.container.style.bottom="0px",this.container.style.right="10px",this.removeListeners(),this.properties.previousState=this.properties.state,this.properties.state="minimized",this.setResizeButtonsVisibility(),this.minimizeDiv.title=ci.get("maximize"),Z.containsClass(this.overlay,"wrs_stack")?this.removeClass("wrs_stack"):this.removeClass("wrs_maximized"),this.addClass("wrs_minimized");const i=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.44 13.76"\n   height="13.76"\n   width="13.44"\n   id="svg3803"\n   version="1.1">\n  <metadata\n     id="metadata3809">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3807" />\n  <image\n     y="0"\n     x="0"\n     id="image3811"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a\n3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6\nV9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqRO\nEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.44" />\n</svg>\n')})`,r=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.44 13.76"\n   height="13.76"\n   width="13.44"\n   id="svg22"\n   version="1.1">\n  <metadata\n     id="metadata28">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs26" />\n  <image\n     y="0"\n     x="0"\n     id="image30"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+\nyT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBB\nfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+\nX1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.44" />\n</svg>\n')})`;this.minimizeDiv.setAttribute("style",i),this.minimizeDiv.setAttribute("onmouseover",`this.style = "${r}";`),this.minimizeDiv.setAttribute("onmouseout",`this.style = "${i}";`)}}maximize(){this.saveModalProperties(),"maximized"!==this.properties.state&&(this.properties.previousState=this.properties.state,this.properties.state="maximized"),this.setResizeButtonsVisibility(),Z.containsClass(this.overlay,"wrs_minimized")?(this.minimizeDiv.title=ci.get("minimize"),this.removeClass("wrs_minimized")):Z.containsClass(this.overlay,"wrs_stack")&&(this.container.style.left=null,this.container.style.top=null,this.removeClass("wrs_stack")),this.addClass("wrs_maximized");const i=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Pc)})`,r=`background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(Gd)})`;this.minimizeDiv.setAttribute("style",i),this.minimizeDiv.setAttribute("onmouseover",`this.style = "${r}";`),this.minimizeDiv.setAttribute("onmouseout",`this.style = "${i}";`),this.setSize(parseInt(.8*window.innerHeight,10),parseInt(.8*window.innerWidth,10)),this.container.clientHeight>700&&(this.container.style.height="700px"),this.container.clientWidth>1200&&(this.container.style.width="1200px");const{innerHeight:a}=window,{innerWidth:c}=window,{offsetHeight:d}=this.container,{offsetWidth:f}=this.container;this.setPosition(a/2-d/2,c/2-f/2),this.recalculateScale(),this.recalculatePosition(),this.recalculateSize(),this.focus()}reExpand(){"minimized"===this.properties.state&&("maximized"===this.properties.previousState?this.maximize():this.stack(),this.title.style.cursor="")}setSize(i,r){this.container.style.height=`${i}px`,this.container.style.width=`${r}px`,this.recalculateSize()}setPosition(i,r){this.container.style.bottom=`${i}px`,this.container.style.right=`${r}px`}saveModalProperties(){"stack"===this.properties.state&&(this.properties.position.bottom=parseInt(this.container.style.bottom,10),this.properties.position.right=parseInt(this.container.style.right,10),this.properties.size.width=parseInt(this.container.style.width,10),this.properties.size.height=parseInt(this.container.style.height,10))}restoreModalProperties(){"stack"===this.properties.state&&(this.setPosition(this.properties.position.bottom,this.properties.position.right),this.setSize(this.properties.size.height,this.properties.size.width))}recalculateSize(){this.wrapper.style.width=this.container.clientWidth-12+"px",this.wrapper.style.height=this.container.clientHeight-38+"px",this.contentContainer.style.height=`${parseInt(this.wrapper.offsetHeight-50,10)}px`}setResizeButtonsVisibility(){"stack"===this.properties.state?(this.resizerTL.style.visibility="visible",this.resizerBR.style.visibility="visible"):(this.resizerTL.style.visibility="hidden",this.resizerBR.style.visibility="hidden")}addListeners(){this.maximizeDiv.addEventListener("click",this.maximize.bind(this),!0),this.stackDiv.addEventListener("click",this.stack.bind(this),!0),this.minimizeDiv.addEventListener("click",this.minimize.bind(this),!0),this.closeDiv.addEventListener("click",this.cancelAction.bind(this)),this.title.addEventListener("click",this.reExpand.bind(this)),this.overlay.addEventListener("click",this.cancelAction.bind(this)),Z.addEvent(window,"mousedown",this.startDrag.bind(this)),Z.addEvent(window,"mouseup",this.stopDrag.bind(this)),Z.addEvent(window,"mousemove",this.drag.bind(this)),Z.addEvent(window,"resize",this.onWindowResize.bind(this)),Z.addEvent(this.container,"keydown",this.onKeyDown.bind(this))}removeListeners(){Z.removeEvent(window,"mousedown",this.startDrag),Z.removeEvent(window,"mouseup",this.stopDrag),Z.removeEvent(window,"mousemove",this.drag),Z.removeEvent(window,"resize",this.onWindowResize),Z.removeEvent(this.container,"keydown",this.onKeyDown)}eventClient(i){return void 0===i.clientX&&i.changedTouches?{X:i.changedTouches[0].clientX,Y:i.changedTouches[0].clientY}:{X:i.clientX,Y:i.clientY}}startDrag(i){"minimized"!==this.properties.state&&i.target===this.title&&(null!=this.dragDataObject||(this.dragDataObject={x:this.eventClient(i).X,y:this.eventClient(i).Y},this.lastDrag={x:"0px",y:"0px"},""===this.container.style.right&&(this.container.style.right="0px"),""===this.container.style.bottom&&(this.container.style.bottom="0px"),this.isIE11(),Z.addClass(document.body,"wrs_noselect"),Z.addClass(this.overlay,"wrs_overlay_active"),this.limitWindow=this.getLimitWindow()))}drag(i){if(this.dragDataObject){i.preventDefault();let r=Math.min(this.eventClient(i).Y,this.limitWindow.minPointer.y);r=Math.max(this.limitWindow.maxPointer.y,r);let a=Math.min(this.eventClient(i).X,this.limitWindow.minPointer.x);a=Math.max(this.limitWindow.maxPointer.x,a);const c=a-this.dragDataObject.x+"px",d=r-this.dragDataObject.y+"px";this.lastDrag={x:c,y:d},this.container.style.transform=`translate3d(${c},${d},0)`}if(this.resizeDataObject){const{innerWidth:r}=window,{innerHeight:a}=window;let c,d=Math.min(this.eventClient(i).X,r-this.scrollbarWidth-7),f=Math.min(this.eventClient(i).Y,a-7);d<0&&(d=0),f<0&&(f=0),c=this.leftScale?-1:1,this.container.style.width=`${this.initialWidth+c*(d-this.resizeDataObject.x)}px`,this.container.style.height=`${this.initialHeight+c*(f-this.resizeDataObject.y)}px`,this.leftScale||(this.resizeDataObject.x-d-this.initialWidth<-580?this.container.style.right=this.initialRight-(d-this.resizeDataObject.x)+"px":(this.container.style.right=this.initialRight+this.initialWidth-580+"px",this.container.style.width="580px"),this.resizeDataObject.y-f<this.initialHeight-338?this.container.style.bottom=this.initialBottom-(f-this.resizeDataObject.y)+"px":(this.container.style.bottom=this.initialBottom+this.initialHeight-338+"px",this.container.style.height="338px")),this.recalculateScale(),this.recalculatePosition()}}getLimitWindow(){const i=window.innerWidth,r=window.innerHeight,{offsetHeight:a}=this.container,c=parseInt(this.container.style.bottom,10),d=parseInt(this.container.style.right,10),{pageXOffset:f}=window,b=a+c-(r-(this.dragDataObject.y-f)),y=i-this.scrollbarWidth-(this.dragDataObject.x-f)-d;return{minPointer:{x:i-y-this.scrollbarWidth,y:r-this.container.offsetHeight+b},maxPointer:{x:this.container.offsetWidth-y,y:this.title.offsetHeight-(this.title.offsetHeight-b)}}}getScrollBarWidth(){const i=document.createElement("p");i.style.width="100%",i.style.height="200px";const r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(i),document.body.appendChild(r);const a=i.offsetWidth;r.style.overflow="scroll";let c=i.offsetWidth;return a===c&&(c=r.clientWidth),document.body.removeChild(r),a-c}stopDrag(){(this.dragDataObject||this.resizeDataObject)&&(this.container.style.transform="",this.dragDataObject&&(this.container.style.right=parseInt(this.container.style.right,10)-parseInt(this.lastDrag.x,10)+"px",this.container.style.bottom=parseInt(this.container.style.bottom,10)-parseInt(this.lastDrag.y,10)+"px"),this.focus(),document.body.style["user-select"]="",this.isIE11(),Z.removeClass(document.body,"wrs_noselect"),Z.removeClass(this.overlay,"wrs_overlay_active")),this.dragDataObject=null,this.resizeDataObject=null,this.initialWidth=null,this.leftScale=null}onWindowResize(){this.recalculateScrollBar(),this.recalculatePosition(),this.recalculateScale()}onKeyDown(i){void 0!==i.key&&("block"!==this.popup.overlayWrapper.style.display?"Escape"===i.key||"Esc"===i.key?this.properties.open&&this.contentManager.onKeyDown(i):i.shiftKey&&"Tab"===i.key?document.activeElement===this.cancelButton?(this.submitButton.focus(),i.stopPropagation(),i.preventDefault()):this.contentManager.onKeyDown(i):"Tab"===i.key&&(document.activeElement===this.submitButton?(this.cancelButton.focus(),i.stopPropagation(),i.preventDefault()):this.contentManager.onKeyDown(i)):this.popup.onKeyDown(i))}recalculatePosition(){this.container.style.right=`${Math.min(parseInt(this.container.style.right,10),window.innerWidth-this.scrollbarWidth-this.container.offsetWidth)}px`,parseInt(this.container.style.right,10)<0&&(this.container.style.right="0px"),this.container.style.bottom=`${Math.min(parseInt(this.container.style.bottom,10),window.innerHeight-this.container.offsetHeight)}px`,parseInt(this.container.style.bottom,10)<0&&(this.container.style.bottom="0px")}recalculateScale(){let i=!1;parseInt(this.container.style.width,10)>580?(this.container.style.width=`${Math.min(parseInt(this.container.style.width,10),window.innerWidth-this.scrollbarWidth)}px`,i=!0):(this.container.style.width="580px",i=!0),parseInt(this.container.style.height,10)>338?(this.container.style.height=`${Math.min(parseInt(this.container.style.height,10),window.innerHeight)}px`,i=!0):(this.container.style.height="338px",i=!0),i&&this.recalculateSize()}recalculateScrollBar(){this.hasScrollBar=window.innerWidth>document.documentElement.clientWidth,this.scrollbarWidth=this.hasScrollBar?this.getScrollBarWidth():0}hideKeyboard(){const i=document.createElement("input");this.container.appendChild(i),i.focus(),i.blur(),i.remove()}focus(){null!=this.contentManager&&void 0!==this.contentManager.onFocus&&this.contentManager.onFocus()}portraitMode(){return window.innerHeight>window.innerWidth}handleOpenedIosSoftkeyboard(){this.iosSoftkeyboardOpened||null==this.iosDivHeight||this.iosDivHeight!==`100${this.iosMeasureUnit}`||(this.portraitMode()?this.setContainerHeight(`63${this.iosMeasureUnit}`):this.setContainerHeight(`40${this.iosMeasureUnit}`)),this.iosSoftkeyboardOpened=!0}handleClosedIosSoftkeyboard(){this.iosSoftkeyboardOpened=!1,this.setContainerHeight(`100${this.iosMeasureUnit}`)}orientationChangeIosSoftkeyboard(){this.iosSoftkeyboardOpened?this.portraitMode()?this.setContainerHeight(`63${this.iosMeasureUnit}`):this.setContainerHeight(`40${this.iosMeasureUnit}`):this.setContainerHeight(`100${this.iosMeasureUnit}`)}orientationChangeAndroidSoftkeyboard(){this.setContainerHeight("100%")}setContainerHeight(i){this.iosDivHeight=i,this.wrapper.style.height=i}showPopUpMessage(){"minimized"===this.properties.state&&this.stack(),this.popup.show()}setTitle(i){this.title.innerHTML=i}getElementId(i){return`${i}[${this.instanceId}]`}}String.prototype.codePointAt||(zp=function(u){if(null==this)throw TypeError();var i=String(this),r=i.length,a=u?Number(u):0;if(a!=a&&(a=0),!(a<0||a>=r)){var c,d=i.charCodeAt(a);return d>=55296&&d<=56319&&r>a+1&&(c=i.charCodeAt(a+1))>=56320&&c<=57343?1024*(d-55296)+c-56320+65536:d}},Object.defineProperty?Object.defineProperty(String.prototype,"codePointAt",{value:zp,configurable:!0,writable:!0}):String.prototype.codePointAt=zp),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(u,i){if(null==u)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(u),a=1;a<arguments.length;a++){var c=arguments[a];if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(r[d]=c[d])}return r},writable:!0,configurable:!0}),T(102);class Xn{constructor(i){if(this.language="en",this.editMode="images",this.modalDialog=null,this.customEditors=new $d,this.customEditors.addEditor("chemistry",{name:"Chemistry",toolbar:"chemistry",icon:"chem.png",confVariable:"chemEnabled",title:"ChemType",tooltip:"Insert a chemistry formula - ChemType"}),this.environment={},this.editionProperties={},this.editionProperties.isNewElement=!0,this.editionProperties.temporalImage=null,this.editionProperties.latexRange=null,this.editionProperties.range=null,this.integrationModel=null,this.contentManager=null,this.browser=(()=>{const r=navigator.userAgent;let a="none";return r.search("Edge/")>=0?a="EDGE":r.search("Chrome/")>=0?a="CHROME":r.search("Trident/")>=0?a="IE":r.search("Firefox/")>=0?a="FIREFOX":r.search("Safari/")>=0&&(a="SAFARI"),a})(),this.listeners=new po,this.serviceProviderProperties={},!("serviceProviderProperties"in i))throw new Error("serviceProviderProperties property missing.");this.serviceProviderProperties=i.serviceProviderProperties}static get globalListeners(){return Xn._globalListeners}static set globalListeners(i){Xn._globalListeners=i}static get initialized(){return Xn._initialized}static set initialized(i){Xn._initialized=i}setIntegrationModel(i){this.integrationModel=i}setEnvironment(i){"editor"in i&&(this.environment.editor=i.editor),"mode"in i&&(this.environment.mode=i.mode),"version"in i&&(this.environment.version=i.version)}getModalDialog(){return this.modalDialog}init(){if(Xn.initialized)this.listeners.fire("onLoad",{});else{const i=po.newListener("onInit",()=>{const r=Ae.getService("configurationjs","","get"),a=JSON.parse(r);Ce.addConfiguration(a),Ce.addConfiguration(Ud),ci.language=this.language,this.listeners.fire("onLoad",{})});Ae.addListener(i),Ae.init(this.serviceProviderProperties),Xn.initialized=!0}}addListener(i){this.listeners.add(i)}static addGlobalListener(i){Xn.globalListeners.add(i)}beforeUpdateFormula(i,r){const a=new sa;return a.mathml=i,a.wirisProperties={},null!=r&&Object.keys(r).forEach(c=>{a.wirisProperties[c]=r[c]}),a.language=this.language,a.editMode=this.editMode,this.listeners.fire("onBeforeFormulaInsertion",a)||Xn.globalListeners.fire("onBeforeFormulaInsertion",a)?{}:{mathml:a.mathml,wirisProperties:a.wirisProperties}}insertFormula(i,r,a,c){const d={};if(a)if("latex"===this.editMode){if(d.latex=li.getLatexFromMathML(a),this.integrationModel.fillNonLatexNode&&!d.latex){const f=new sa;f.editMode=this.editMode,f.windowTarget=r,f.focusElement=i,f.latex=d.latex,this.integrationModel.fillNonLatexNode(f,r,a)}else d.node=r.document.createTextNode(`$$${d.latex}$$`);this.insertElementOnSelection(d.node,i,r)}else d.node=un.mathmlToImgObject(r.document,a,c,this.language),this.insertElementOnSelection(d.node,i,r);else this.insertElementOnSelection(null,i,r);return d}afterUpdateFormula(i,r,a,c){const d=new sa;return d.editMode=this.editMode,d.windowTarget=r,d.focusElement=i,d.node=a,d.latex=c,this.listeners.fire("onAfterFormulaInsertion",d)||Xn.globalListeners.fire("onAfterFormulaInsertion",d),{}}placeCaretAfterNode(i){this.integrationModel.getSelection();const r=i.ownerDocument;if(void 0!==r.getSelection&&i.parentElement){const a=r.createRange();a.setStartAfter(i),a.collapse(!0);const c=r.getSelection();c.removeAllRanges(),c.addRange(a),r.body.focus()}}insertElementOnSelection(i,r,a){if(this.editionProperties.isNewElement)if(i)if("textarea"===r.type)Z.updateTextArea(r,i.textContent);else if(document.selection&&0===document.getSelection){let c=a.document.selection.createRange();if(a.document.execCommand("InsertImage",!1,i.src),"parentElement"in c||(a.document.execCommand("delete",!1),c=a.document.selection.createRange(),a.document.execCommand("InsertImage",!1,i.src)),"parentElement"in c){const d=c.parentElement();"IMG"===d.nodeName.toUpperCase()?d.parentNode.replaceChild(i,d):c.pasteHTML(Z.createObjectCode(i))}}else{const c=this.integrationModel.getSelection();let d=null;this.editionProperties.range?(({range:d}=this.editionProperties),this.editionProperties.range=null):d=c.getRangeAt(0),d.deleteContents();let f=d.startContainer;const g=d.startOffset;3===f.nodeType?(f=f.splitText(g),f.parentNode.insertBefore(i,f)):1===f.nodeType&&f.insertBefore(i,f.childNodes[g]),this.placeCaretAfterNode(i)}else if("textarea"===r.type)r.focus();else{const c=this.integrationModel.getSelection();if(c.removeAllRanges(),this.editionProperties.range){const{range:d}=this.editionProperties;this.editionProperties.range=null,c.addRange(d)}}else if(this.editionProperties.latexRange)document.selection&&0===document.getSelection?(this.editionProperties.isNewElement=!0,this.editionProperties.latexRange.select(),this.insertElementOnSelection(i,r,a)):(this.editionProperties.latexRange.deleteContents(),this.editionProperties.latexRange.insertNode(i),this.placeCaretAfterNode(i));else if("textarea"===r.type){let c;c=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(r,!1):Z.getSelectedItemOnTextarea(r),Z.updateExistingTextOnTextarea(r,i.textContent,c.startPosition,c.endPosition)}else i&&"img"===i.nodeName.toLowerCase()?(Ri.removeImgDataAttributes(this.editionProperties.temporalImage),Ri.clone(i,this.editionProperties.temporalImage)):this.editionProperties.temporalImage.remove(),this.placeCaretAfterNode(this.editionProperties.temporalImage)}openModalDialog(i,r){this.editMode="images";try{if(r){i.contentWindow.focus();const b=i.contentWindow.getSelection();this.editionProperties.range=b.getRangeAt(0)}else{i.focus();const b=getSelection();this.editionProperties.range=b.getRangeAt(0)}}catch{this.editionProperties.range=null}if(void 0===r&&(r=!0),this.editionProperties.latexRange=null,i){let b;if(b=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(i,r):Z.getSelectedItem(i,r),b){if(!b.caretPosition&&Z.containsClass(b.node,Ce.get("imageClassName")))this.editionProperties.temporalImage=b.node,this.editionProperties.isNewElement=!1;else if(3===b.node.nodeType)if(this.integrationModel.getMathmlFromTextNode){const y=this.integrationModel.getMathmlFromTextNode(b.node,b.caretPosition);y&&(this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(Ce.get("imageMathmlAttribute"),jt.safeXmlEncode(y)))}else{const y=li.getLatexFromTextNode(b.node,b.caretPosition);if(y){const k=li.getMathMLFromLatex(y.latex);this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(Ce.get("imageMathmlAttribute"),jt.safeXmlEncode(k));const S=r?i.contentWindow:window;if("textarea"!==i.tagName.toLowerCase())if(document.selection){let F=0,$=y.startNode.previousSibling;for(;$;)F+=Z.getNodeLength($),$=$.previousSibling;this.editionProperties.latexRange=S.document.selection.createRange(),this.editionProperties.latexRange.moveToElementText(y.startNode.parentNode),this.editionProperties.latexRange.move("character",F+y.startPosition),this.editionProperties.latexRange.moveEnd("character",y.latex.length+4)}else this.editionProperties.latexRange=S.document.createRange(),this.editionProperties.latexRange.setStart(y.startNode,y.startPosition),this.editionProperties.latexRange.setEnd(y.endNode,y.endPosition)}}}else"textarea"===i.tagName.toLowerCase()&&(this.editMode="latex")}const a=Ce.get("editorAttributes").split(", "),c={};for(let b=0,y=a.length;b<y;b+=1){const k=a[b].split("=");c[k[0]]=k[1]}const d={},f=Ce.get("editorParameters"),g=this.integrationModel.editorParameters;Object.assign(d,c,f),Object.assign(d,c,g),d.language=this.language,d.rtl=this.integrationModel.rtl;const _={};if(_.editorAttributes=d,_.language=this.language,_.customEditors=this.customEditors,_.environment=this.environment,null==this.modalDialog){this.modalDialog=new nC(d),this.contentManager=new ui(_);const b=po.newListener("onLoad",()=>{if(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage){const y=jt.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(Ce.get("imageMathmlAttribute")));this.contentManager.mathML=y}});this.contentManager.addListener(b),this.contentManager.init(),this.modalDialog.setContentManager(this.contentManager),this.contentManager.setModalDialogInstance(this.modalDialog)}else if(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage){const b=jt.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(Ce.get("imageMathmlAttribute")));this.contentManager.mathML=b}this.contentManager.setIntegrationModel(this.integrationModel),this.modalDialog.open()}getCustomEditors(){return this.customEditors}}Xn._globalListeners=new po,Xn._initialized=!1;class vs{constructor(i){if(this.language="en",this.serviceProviderProperties={},"serviceProviderProperties"in i&&(this.serviceProviderProperties=i.serviceProviderProperties),this.configurationService="","configurationService"in i&&(this.serviceProviderProperties.URI=i.configurationService,console.warn("Deprecated property configurationService. Use serviceParameters on instead.",[i.configurationService])),this.version="version"in i?i.version:"",this.target=null,!("target"in i))throw new Error("IntegrationModel constructor error: target property missed.");this.target=i.target,"scriptName"in i&&(this.scriptName=i.scriptName),this.callbackMethodArguments={},"callbackMethodArguments"in i&&(this.callbackMethodArguments=i.callbackMethodArguments),this.environment={},"environment"in i&&(this.environment=i.environment),this.isIframe=!1,null!=this.target&&(this.isIframe="IFRAME"===this.target.tagName.toUpperCase()),this.editorObject=null,"editorObject"in i&&(this.editorObject=i.editorObject),this.rtl=!1,"rtl"in i&&(this.rtl=i.rtl),this.managesLanguage=!1,"managesLanguage"in i&&(this.managesLanguage=i.managesLanguage),this.temporalImageResizing=!1,this.core=null,this.listeners=new po,"integrationParameters"in i&&vs.integrationParameters.forEach(r=>{if(r in i.integrationParameters){const a=i.integrationParameters[r];0!==Object.keys(a).length&&(this[r]=a)}})}init(){this.language=this.getLanguage();const i=po.newListener("onLoad",()=>{this.callbackFunction(this.callbackMethodArguments)});if(-1!==this.serviceProviderProperties.URI.indexOf("configuration")){const d=Ae.getServerLanguageFromService(this.serviceProviderProperties.URI);this.serviceProviderProperties.server=d;const f=this.serviceProviderProperties.URI.indexOf("configuration"),g=this.serviceProviderProperties.URI.substring(0,f);this.serviceProviderProperties.URI=g}let r=this.serviceProviderProperties.URI;r=0===r.indexOf("/")||0===r.indexOf("http")?r:Z.concatenateUrl(this.getPath(),r),this.serviceProviderProperties.URI=r;const a={};a.serviceProviderProperties=this.serviceProviderProperties,this.setCore(new Xn(a)),this.core.addListener(i),this.core.language=this.language,this.core.init(),this.core.setEnvironment(this.environment)}getPath(){if(void 0===this.scriptName)throw new Error("scriptName property needed for getPath.");const i=document.getElementsByTagName("script");let r="";for(let a=0;a<i.length;a+=1){const c=i[a].src.lastIndexOf(this.scriptName);c>=0&&(r=i[a].src.substr(0,c-1))}return r}getVersion(){return this.version}setLanguage(i){this.language=i}setCore(i){this.core=i,i.setIntegrationModel(this)}getCore(){return this.core}setTarget(i){this.target=i,this.isIframe="IFRAME"===this.target.tagName.toUpperCase()}setEditorObject(i){this.editorObject=i}openNewFormulaEditor(){this.core.editionProperties.isNewElement=!0,this.core.openModalDialog(this.target,this.isIframe)}openExistingFormulaEditor(){this.core.editionProperties.isNewElement=!1,this.core.openModalDialog(this.target,this.isIframe)}updateFormula(i){let r,a;this.editorParameters&&(i=com.wiris.editor.util.EditorUtils.addAnnotation(i,"application/vnd.wiris.mtweb-params+json",JSON.stringify(this.editorParameters))),this.isIframe?(r=this.target.contentWindow,a=this.target.contentWindow):(r=this.target,a=window);let c=this.core.beforeUpdateFormula(i,null);return c?(c=this.insertFormula(r,a,c.mathml,c.wirisProperties),c?this.core.afterUpdateFormula(c.focusElement,c.windowTarget,c.node,c.latex):""):""}insertFormula(i,r,a,c){return this.core.insertFormula(i,r,a,c)}getSelection(){return this.isIframe?(this.target.contentWindow.focus(),this.target.contentWindow.getSelection()):(this.target.focus(),window.getSelection())}addEvents(){Z.addElementEvents(this.isIframe?this.target.contentWindow.document:this.target,(r,a)=>{this.doubleClickHandler(r,a)},(r,a)=>{this.mousedownHandler(r,a)},(r,a)=>{this.mouseupHandler(r,a)})}doubleClickHandler(i){if("img"===i.nodeName.toLowerCase()){this.core.getCustomEditors().disable();const r=Ce.get("imageCustomEditorName");if(i.hasAttribute(r)){const a=i.getAttribute(r);this.core.getCustomEditors().enable(a)}Z.containsClass(i,Ce.get("imageClassName"))&&(this.core.editionProperties.temporalImage=i,this.core.editionProperties.isNewElement=!0,this.openExistingFormulaEditor())}}mouseupHandler(){this.temporalImageResizing&&setTimeout(()=>{Ri.fixAfterResize(this.temporalImageResizing)},10)}mousedownHandler(i){"img"===i.nodeName.toLowerCase()&&Z.containsClass(i,Ce.get("imageClassName"))&&(this.temporalImageResizing=i)}getLanguage(){return this.getBrowserLanguage()}getBrowserLanguage(){let i="en";return i=navigator.userLanguage?navigator.userLanguage.substring(0,2):navigator.language?navigator.language.substring(0,2):"en",i}callbackFunction(){const i=po.newListener("onTargetReady",()=>{this.addEvents(this.target)});this.listeners.add(i)}notifyWindowClosed(){}getMathmlFromTextNode(i,r){}fillNonLatexNode(i,r,a){}getSelectedItem(i,r){}}vs.prototype.getMathmlFromTextNode=void 0,vs.prototype.fillNonLatexNode=void 0,vs.prototype.getSelectedItem=void 0,vs.integrationParameters=["serviceProviderProperties","editorParameters"];class iC extends vs{constructor(i){const r=i.editorObject;void 0!==r.config&&void 0!==r.config.get("mathTypeParameters")&&(i.integrationParameters=r.config.get("mathTypeParameters")),super(i),this.integrationFolderName="ckeditor_wiris"}getLanguage(){return this.editorObject.config.get("language")}addEditorListeners(){const i=this.editorObject;void 0!==i.config.wirislistenersdisabled&&i.config.wirislistenersdisabled||this.checkElement()}checkElement(){const i=this.editorObject.sourceElement;i.wirisActive||(this.setTarget(i),this.addEvents(),i.wirisActive=!0)}doubleClickHandler(i,r){if("img"==i.nodeName.toLowerCase()&&Z.containsClass(i,Ce.get("imageClassName"))){void 0!==r.stopPropagation?r.stopPropagation():r.returnValue=!1,this.core.getCustomEditors().disable();const a=i.getAttribute(Ce.get("imageCustomEditorName"));a&&this.core.getCustomEditors().enable(a),this.core.editionProperties.temporalImage=i,this.openExistingFormulaEditor()}}getCorePath(){return null}callbackFunction(){super.callbackFunction(),this.addEditorListeners()}openNewFormulaEditor(){return this.core.editionProperties.selection=this.editorObject.editing.view.document.selection,super.openNewFormulaEditor()}insertMathml(i){return this.editorObject.model.change(r=>{const a=this.getCore(),c=r.createElement("mathml",{formula:i});if(a.editionProperties.isNewElement){if(!i)return;let d=this.core.editionProperties.selection||this.editorObject.editing.view.document.selection,f=this.editorObject.editing.mapper.toModelPosition(d.getLastPosition());if(r.insert(c,f),!d.isCollapsed)for(const g of d.getRanges())r.remove(this.editorObject.editing.mapper.toModelRange(g))}else{const f=this.editorObject.editing.view.domConverter.domToView(a.editionProperties.temporalImage).parent,g=this.editorObject.editing.mapper.toModelElement(f),_=this.editorObject.model.createPositionBefore(g);i&&r.insert(c,_),r.remove(g)}return c})}findText(i){let r,a=i;for(;!r;)r=this.editorObject.editing.mapper.toModelElement(this.editorObject.editing.view.domConverter.domToView(a)),a=a.parentElement;const c=this.editorObject.model.createRangeIn(r),d=Array.from(c.getItems());for(const f of d)if(f.is("textProxy")&&f.data==i.data.replace(String.fromCharCode(160)," "))return f.textNode}insertFormula(i,r,a,c){let d={};return a?"latex"==this.core.editMode?(d.latex=li.getLatexFromMathML(a),d.node=r.document.createTextNode("$$"+d.latex+"$$"),this.editorObject.model.change(f=>{const g=this.core.editionProperties.latexRange,_=this.findText(g.startContainer),b=this.findText(g.endContainer),y=f.createPositionAt(_.parent,_.startOffset+g.startOffset),k=f.createPositionAt(b.parent,b.startOffset+g.endOffset),S=f.createRange(y,k);f.remove(S),f.insertText("$$"+d.latex+"$$",_.getAttributes(),y)})):d.node=this.editorObject.editing.view.domConverter.viewToDom(this.editorObject.editing.mapper.toViewElement(this.insertMathml(a)),r.document):this.insertMathml(""),d}notifyWindowClosed(){this.editorObject.editing.view.focus()}}class Yv extends yt{constructor(i){super(i)}execute(i={}){if(!(i.hasOwnProperty("integration")&&i.integration instanceof iC))throw'Must pass a valid CKEditor5Integration instance as attribute "integration" of options';this.integration=i.integration,this.setEditor(),this.openEditor()}setEditor(){this.integration.core.getCustomEditors().disable()}openEditor(){const i=this._getSelectedImage();null!=i&&i.classList.contains(WirisPlugin.Configuration.get("imageClassName"))?(this.integration.core.editionProperties.temporalImage=i,this.integration.openExistingFormulaEditor()):this.integration.openNewFormulaEditor()}_getSelectedImage(){const i=this.editor.editing.view.document.selection;if(i.isCollapsed||1!==i.rangeCount)return;const r=i.getFirstRange();let a;for(const c of r){if("span"!==c.item.name)return;a=c.item.getChild(0);break}return a?this.editor.editing.view.domConverter.mapViewToDom(a):void 0}}class xT extends Yv{setEditor(){this.integration.core.getCustomEditors().enable("chemistry")}}T.d(O,"default",function(){return $p});class $p extends rd{}$p.builtinPlugins=[class extends le{static get requires(){return[_c,S1,ud,Qf,pd]}static get pluginName(){return"Essentials"}},class extends le{static get requires(){return[er]}static get pluginName(){return"CKFinderUploadAdapter"}init(){const u=this.editor.config.get("ckfinder.uploadUrl");u&&(this.editor.plugins.get(er).createUploadAdapter=i=>new tT(i,u,this.editor.t))}},class extends le{static get requires(){return[Zf,ep]}static get pluginName(){return"Bold"}},class extends le{static get requires(){return[nT,iT]}static get pluginName(){return"Italic"}},class extends le{static get requires(){return[G_,H1]}static get pluginName(){return"Underline"}},class extends le{static get requires(){return[z1,$1]}static get pluginName(){return"Strikethrough"}},class extends le{static get requires(){return[U1,q_]}static get pluginName(){return"Subscript"}},class extends le{static get requires(){return[md,W_]}static get pluginName(){return"Superscript"}},class extends le{static get requires(){return[q1,W1]}static get pluginName(){return"BlockQuote"}},class extends le{static get requires(){return[tp,G1]}static get pluginName(){return"Code"}},class extends le{static get requires(){return[J_,Y_]}static get pluginName(){return"Heading"}},class extends le{static get requires(){return[X_,kd,ow]}static get pluginName(){return"Image"}},class extends le{static get requires(){return[rw]}static get pluginName(){return"ImageCaption"}},class extends le{static get requires(){return[cw,uw]}static get pluginName(){return"ImageStyle"}},class extends le{static get requires(){return[Dc]}static get pluginName(){return"ImageToolbar"}afterInit(){const u=this.editor,i=u.t;u.plugins.get(Dc).register("image",{ariaLabel:i("b"),items:u.config.get("image.toolbar")||[],getRelatedElement:Xa})}},class extends le{static get pluginName(){return"ImageUpload"}static get requires(){return[tr,sT,aT]}},class extends le{static get requires(){return[Dd]}static get pluginName(){return"ImageResize"}init(){const u=this.editor,i=new bw(u);this._registerSchema(),this._registerConverters(),u.commands.add("imageResize",i),u.editing.downcastDispatcher.on("insert:image",(r,a,c)=>{const d=c.mapper.toViewElement(a.item),f=u.plugins.get(Dd).attachTo({unit:u.config.get("image.resizeUnit")||"%",modelElement:a.item,viewElement:d,editor:u,getHandleHost:g=>g.querySelector("img"),getResizeHost:g=>g,isCentered(){const g=a.item.getAttribute("imageStyle");return!g||"full"==g||"alignCenter"==g},onCommit(g){u.execute("imageResize",{width:g})}});f.on("updateSize",()=>{d.hasClass("image_resized")||u.editing.view.change(g=>{g.addClass("image_resized",d)})}),f.bind("isEnabled").to(i)},{priority:"low"})}_registerSchema(){this.editor.model.schema.extend("image",{allowAttributes:"width"})}_registerConverters(){const u=this.editor;u.conversion.for("downcast").add(i=>i.on("attribute:width:image",(r,a,c)=>{if(!c.consumable.consume(a.item,r.name))return;const d=c.writer,f=c.mapper.toViewElement(a.item);null!==a.attributeNewValue?(d.setStyle("width",a.attributeNewValue,f),d.addClass("image_resized",f)):(d.removeStyle("width",f),d.removeClass("image_resized",f))})),u.conversion.for("upcast").attributeToAttribute({view:{name:"figure",styles:{width:/.+/}},model:{key:"width",value:i=>i.getStyle("width")}})}},class extends le{static get pluginName(){return"Indent"}static get requires(){return[yw,uv]}},class extends le{static get requires(){return[Tw,Ad]}static get pluginName(){return"List"}},Ja,class extends le{static get pluginName(){return"PasteFromOffice"}static get requires(){return[_c]}init(){const u=this.editor,i=[];i.push(new wv),i.push(new Sw),u.plugins.get("Clipboard").on("inputTransformation",(r,a)=>{if(a.isTransformedWithPasteFromOffice)return;const c=a.dataTransfer.getData("text/html"),d=i.find(f=>f.isActive(c));d&&(d.execute(a),a.isTransformedWithPasteFromOffice=!0)},{priority:"high"})}},class extends le{static get requires(){return[Ov,Mp,kd]}static get pluginName(){return"Table"}},class extends le{static get requires(){return[Dc]}static get pluginName(){return"TableToolbar"}afterInit(){const u=this.editor,i=u.t,r=u.plugins.get(Dc),a=u.config.get("table.contentToolbar"),c=u.config.get("table.tableToolbar");a&&r.register("tableContent",{ariaLabel:i("c"),items:a,getRelatedElement:Pd}),c&&r.register("table",{ariaLabel:i("c"),items:c,getRelatedElement:kv})}},class extends le{static get requires(){return[Iv,rl]}static get pluginName(){return"Alignment"}},class extends le{static get requires(){return[sl,Op]}static get pluginName(){return"PageBreak"}},class extends le{static get requires(){return[Qf]}static get pluginName(){return"SpecialCharacters"}constructor(u){super(u),this._characters=new Map,this._groups=new Map}init(){const u=this.editor,i=u.t,r=u.commands.get("input");u.ui.componentFactory.add("specialCharacters",a=>{const c=Di(a);let d;return c.buttonView.set({label:i("d"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 014.231 1.31 7.268 7.268 0 012.703 3.454 7.128 7.128 0 01.199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 011.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 01-.547.28l-.101.006h-4.695a.517.517 0 01-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 002.492-2.371 5.459 5.459 0 00.552-3.693 5.53 5.53 0 00-1.955-3.2A5.71 5.71 0 0010 4.206 5.708 5.708 0 006.419 5.46 5.527 5.527 0 004.46 8.663a5.457 5.457 0 00.554 3.695 5.6 5.6 0 002.497 2.37.55.55 0 01.317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 01-.614-.25.845.845 0 01-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 011.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 01.199-4.352 7.268 7.268 0 012.703-3.455A7.475 7.475 0 0110 2.5z"/></svg>',tooltip:!0}),c.bind("isEnabled").to(r),c.on("execute",(f,g)=>{u.execute("input",{text:g.character}),u.editing.view.focus()}),c.on("change:isOpen",()=>{d||(d=this._createDropdownPanelContent(a,c),c.panelView.children.add(d.navigationView),c.panelView.children.add(d.gridView),c.panelView.children.add(d.infoView)),d.infoView.set({character:null,name:null})}),c})}addItems(u,i){if("All"===u)throw new W.b('special-character-invalid-group-name: The name "All" is reserved and cannot be used.');const r=this._getGroup(u);for(const a of i)r.add(a.title),this._characters.set(a.title,a.character)}getGroups(){return this._groups.keys()}getCharactersForGroup(u){return"All"===u?new Set(this._characters.keys()):this._groups.get(u)}getCharacter(u){return this._characters.get(u)}_getGroup(u){return this._groups.has(u)||this._groups.set(u,new Set),this._groups.get(u)}_updateGrid(u,i){i.tiles.clear();const r=this.getCharactersForGroup(u);for(const a of r){const c=this.getCharacter(a);i.tiles.add(i.createTile(c,a))}}_createDropdownPanelContent(u,i){const r=[...this.getGroups()];r.unshift("All");const a=new jd(u,r),c=new Lv(u),d=new Bv(u);return c.delegate("execute").to(i),c.on("tileHover",(f,g)=>{d.set(g)}),a.on("execute",()=>{this._updateGrid(a.currentGroupName,c)}),this._updateGrid(a.currentGroupName,c),{navigationView:a,gridView:c,infoView:d}}},class extends le{static get requires(){return[Np,wT,Vv,Ip,zw]}},class extends le{static get requires(){return[er]}static get pluginName(){return"Base64UploadAdapter"}init(){this.editor.plugins.get(er).createUploadAdapter=u=>new $w(u)}},class extends le{static get requires(){return[Uw,Gw]}static get pluginName(){return"FontSize"}},class extends le{static get requires(){return[Gv,Kw]}static get pluginName(){return"FontColor"}},class extends le{static get requires(){return[qv,Wv]}static get pluginName(){return"FontBackgroundColor"}},class extends le{static get requires(){return[mr,Qw]}static get pluginName(){return"Highlight"}},class extends le{static get requires(){return[Jv,Xw]}static get pluginName(){return"MyControle"}},class extends le{static get requires(){return[kd]}static get pluginName(){return"MathType"}init(){const u=this._addIntegration();this._addCommands(),this._addViews(u),this._addSchema(),this._addConverters(),this._exposeWiris()}_addIntegration(){const u=this.editor,i={};let r;return i.environment={},i.environment.editor="CKEditor5",i.editorObject=u,i.serviceProviderProperties={},i.serviceProviderProperties.URI="https://www.wiris.net/demo/plugins/app",i.serviceProviderProperties.server="java",i.target=u.sourceElement,i.scriptName="bundle.js",i.managesLanguage=!0,i.target&&(r=new iC(i),r.init(),r.listeners.fire("onTargetReady",{}),r.checkElement(),this.listenTo(u.editing.view.document,"click",(a,c)=>{2==c.domEvent.detail&&(r.doubleClickHandler(c.domTarget,c.domEvent),a.stop())},{priority:"highest"})),r}_addCommands(){const u=this.editor;u.commands.add("MathType",new Yv(u)),u.commands.add("ChemType",new xT(u))}_addViews(u){const i=this.editor;i.ui.componentFactory.add("MathType",r=>{const a=new Lt(r);return a.bind("isEnabled").to(i.commands.get("MathType"),"isEnabled"),a.set({label:"Insert a math equation - MathType",icon:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 300 261.7" style="enable-background:new 0 0 300 261.7;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#FFFFFF;}\n\t.st1{fill:#EF4A5F;}\n\t.st2{fill:#C8202F;}\n</style>\n<path class="st0" d="M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\n\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8"/>\n<path class="st0" d="M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\n\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\n\tC91.6,257.7,90.9,257.7,90.2,257.7"/>\n<g>\n\t<g>\n\t\t<path class="st1" d="M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\n\t\t\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\n\t\t\tC91.6,257.7,90.9,257.7,90.2,257.7"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path class="st2" d="M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\n\t\t\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8"/>\n\t</g>\n</g>\n</svg>\n',tooltip:!0}),a.on("execute",()=>{i.execute("MathType",{integration:u})}),a}),i.ui.componentFactory.add("ChemType",r=>{const a=new Lt(r);return a.bind("isEnabled").to(i.commands.get("ChemType"),"isEnabled"),a.set({label:"Insert a chemistry formula - ChemType",icon:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 40.3 49.5" style="enable-background:new 0 0 40.3 49.5;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#A4CF61;}\n</style>\n<path class="st0" d="M39.2,12.1c0-1.9-1.1-3.6-2.7-4.4L24.5,0.9l0,0c-0.7-0.4-1.5-0.6-2.4-0.6c-0.9,0-1.7,0.2-2.4,0.6l0,0L2.3,10.8\n\tl0,0C0.9,11.7,0,13.2,0,14.9h0v19.6h0c0,1.7,0.9,3.3,2.3,4.1l0,0l17.4,9.9l0,0c0.7,0.4,1.5,0.6,2.4,0.6c0.9,0,1.7-0.2,2.4-0.6l0,0\n\tl12.2-6.9h0c1.5-0.8,2.6-2.5,2.6-4.3c0-2.7-2.2-4.9-4.9-4.9c-0.9,0-1.8,0.3-2.5,0.7l0,0l-9.7,5.6l-12.3-7V17.8l12.3-7l9.9,5.7l0,0\n\tc0.7,0.4,1.5,0.6,2.4,0.6C37,17,39.2,14.8,39.2,12.1"/>\n</svg>\n',tooltip:!0}),a.on("execute",()=>{i.execute("ChemType",{integration:u})}),a}),i.editing.view.addObserver(Zw)}_addSchema(){this.editor.model.schema.register("mathml",{allowWhere:"$text",isObject:!0,isInline:!0,allowAttributes:["formula"]})}_addConverters(){const u=this.editor;u.conversion.for("upcast").elementToElement({view:{name:"span",classes:"ck-math-widget"},model:(i,r)=>{const a=jt.safeXmlDecode(i.getChild(0).getAttribute("data-mathml"));return r.createElement("mathml",{formula:a})}}),u.data.upcastDispatcher.on("element:math",(i,r,a)=>{const{consumable:c,writer:d}=a,f=r.viewItem;if(!c.test(f,{name:!0}))return;let g=function(G){const Y=G.getChild(0);if(!Y||"semantics"!==Y.name)return!1;for(const oe of Y.getChildren())if("annotation"===oe.name&&"LaTeX"===oe.getAttribute("encoding"))return!0;return!1}(f);const _=new eC(u.editing.view.document),b=new il(u.editing.view.document).createDocumentFragment(f.getChildren()),y=[...f.getAttributes()].map(([G,Y])=>` ${G}="${Y}"`).join("");let k=_.toData(b)||"";k=`<math${y}>${k}</math>`;const S=g?d.createText(un.initParse(k,u.config.get("language"))):d.createElement("mathml",{formula:k}),F=a.splitToAllowedParent(S,r.modelCursor);if(!F)return;a.writer.insert(S,F.position),c.consume(f,{name:!0});const $=a.getSplitParts(S);r.modelRange=d.createRange(a.writer.createPositionBefore(S),a.writer.createPositionAfter($[$.length-1])),r.modelCursor=F.cursorParent?a.writer.createPositionAt(F.cursorParent,0):r.modelRange.end}),u.conversion.for("editingDowncast").elementToElement({model:"mathml",view:function(i,r){const a=r.createContainerElement("span",{class:"ck-math-widget"}),c=function(d,f){const g=new hc(f.document),_=d.getAttribute("formula"),b=un.initParse(_,u.config.get("language")),y=g.toView(b).getChild(0);return f.createEmptyElement("img",y.getAttributes())}(i,r);return r.insert(r.createPositionAt(a,0),c),Qa(a,r)}}),u.conversion.for("dataDowncast").elementToElement({model:"mathml",view:function(i,r){const a=new hc(r.document);let c=un.endParseSaveMode(i.getAttribute("formula"));return Ce.get("saveHandTraces")||(c=jt.removeAnnotation(c,"application/json")),function f(g,_){if(_.is("text"))return g.createText(_.data);if(_.is("element")){if(_.is("emptyElement"))return g.createEmptyElement(_.name,_.getAttributes());{const b=g.createContainerElement(_.name,_.getAttributes());for(const y of _.getChildren())g.insert(g.createPositionAt(b,"end"),f(g,y));return b}}throw new Exception("Given node has unsupported type.")}(r,a.toView(c).getChild(0))}})}_exposeWiris(){window.WirisPlugin={Core:Xn,Parser:un,Image:Ri,MathML:jt,Util:Z,Configuration:Ce,Listeners:po,IntegrationModel:vs,Latex:li}}}],$p.defaultConfig={toolbar:{items:["undo","redo","|","bold","italic","underline","strikethrough","fontSize","fontColor","fontBackgroundColor","|","subscript","superscript","blockQuote","code","|","alignment","indent","outdent","|","bulletedList","numberedList","|","MathType","ChemType","|","myControle","imageUpload","insertTable","pageBreak","specialCharacters","highlight"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"fr"}}]).default},module.exports=O()},203:(E,O,T)=>{"use strict";function P(t){return"function"==typeof t}function w(t){const e=t(o=>{Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const L=w(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((o,s)=>`${s+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function j(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Se{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const l of e)l.remove(this);else e.remove(this);const{initialTeardown:o}=this;if(P(o))try{o()}catch(l){n=l instanceof L?l.errors:[l]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const l of s)try{Sn(l)}catch(h){n=n??[],h instanceof L?n=[...n,...h.errors]:n.push(h)}}if(n)throw new L(n)}}add(n){var e;if(n&&n!==this)if(this.closed)Sn(n);else{if(n instanceof Se){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&j(e,n)}remove(n){const{_finalizers:e}=this;e&&j(e,n),n instanceof Se&&n._removeParent(this)}}Se.EMPTY=(()=>{const t=new Se;return t.closed=!0,t})();const rt=Se.EMPTY;function ut(t){return t instanceof Se||t&&"closed"in t&&P(t.remove)&&P(t.add)&&P(t.unsubscribe)}function Sn(t){P(t)?t():t.unsubscribe()}const dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ze={setTimeout(t,n,...e){const{delegate:o}=ze;return o?.setTimeout?o.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=ze;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function et(t){ze.setTimeout(()=>{const{onUnhandledError:n}=dt;if(!n)throw t;n(t)})}function Fn(){}const Rt=Ze("C",void 0,void 0);function Ze(t,n,e){return{kind:t,value:n,error:e}}let Ne=null;function xt(t){if(dt.useDeprecatedSynchronousErrorHandling){const n=!Ne;if(n&&(Ne={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:o}=Ne;if(Ne=null,e)throw o}}else t()}class ht extends Se{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ut(n)&&n.add(this)):this.destination=dy}static create(n,e,o){return new Dr(n,e,o)}next(n){this.isStopped?Nh(function We(t){return Ze("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Nh(function qt(t){return Ze("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Nh(Rt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const An=Function.prototype.bind;function zi(t,n){return An.call(t,n)}class bo{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(o){Ds(o)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(o){Ds(o)}else Ds(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Ds(e)}}}class Dr extends ht{constructor(n,e,o){let s;if(super(),P(n)||!n)s={next:n??void 0,error:e??void 0,complete:o??void 0};else{let l;this&&dt.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=()=>this.unsubscribe(),s={next:n.next&&zi(n.next,l),error:n.error&&zi(n.error,l),complete:n.complete&&zi(n.complete,l)}):s=n}this.destination=new bo(s)}}function Ds(t){dt.useDeprecatedSynchronousErrorHandling?function sn(t){dt.useDeprecatedSynchronousErrorHandling&&Ne&&(Ne.errorThrown=!0,Ne.error=t)}(t):et(t)}function Nh(t,n){const{onStoppedNotification:e}=dt;e&&ze.setTimeout(()=>e(t,n))}const dy={closed:!0,next:Fn,error:function uy(t){throw t},complete:Fn},rs="function"==typeof Symbol&&Symbol.observable||"@@observable";function yo(t){return t}function om(t){return 0===t.length?yo:1===t.length?t[0]:function(e){return t.reduce((o,s)=>s(o),e)}}let Wt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const o=new t;return o.source=this,o.operator=e,o}subscribe(e,o,s){const l=function sm(t){return t&&t instanceof ht||function $n(t){return t&&P(t.next)&&P(t.error)&&P(t.complete)}(t)&&ut(t)}(e)?e:new Dr(e,o,s);return xt(()=>{const{operator:h,source:p}=this;l.add(h?h.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(e){try{return this._subscribe(e)}catch(o){e.error(o)}}forEach(e,o){return new(o=rm(o))((s,l)=>{const h=new Dr({next:p=>{try{e(p)}catch(m){l(m),h.unsubscribe()}},error:l,complete:s});this.subscribe(h)})}_subscribe(e){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(e)}[rs](){return this}pipe(...e){return om(e)(this)}toPromise(e){return new(e=rm(e))((o,s)=>{let l;this.subscribe(h=>l=h,h=>s(h),()=>o(l))})}}return t.create=n=>new t(n),t})();function rm(t){var n;return null!==(n=t??dt.Promise)&&void 0!==n?n:Promise}const Ms=w(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let mt=(()=>{class t extends Wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const o=new Ih(this,this);return o.operator=e,o}_throwIfClosed(){if(this.closed)throw new Ms}next(e){xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const o of this.currentObservers)o.next(e)}})}error(e){xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:o}=this;for(;o.length;)o.shift().error(e)}})}complete(){xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:o,isStopped:s,observers:l}=this;return o||s?rt:(this.currentObservers=null,l.push(e),new Se(()=>{this.currentObservers=null,j(l,e)}))}_checkFinalizedStatuses(e){const{hasError:o,thrownError:s,isStopped:l}=this;o?e.error(s):l&&e.complete()}asObservable(){const e=new Wt;return e.source=this,e}}return t.create=(n,e)=>new Ih(n,e),t})();class Ih extends mt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===o||o.call(e,n)}error(n){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===o||o.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,o;return null!==(o=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==o?o:rt}}function am(t){return P(t?.lift)}function yn(t){return n=>{if(am(n))return n.lift(function(e){try{return t(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(t,n,e,o,s){return new fy(t,n,e,o,s)}class fy extends ht{constructor(n,e,o,s,l,h){super(n),this.onFinalize=l,this.shouldUnsubscribe=h,this._next=e?function(p){try{e(p)}catch(m){n.error(m)}}:super._next,this._error=s?function(p){try{s(p)}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(p){n.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Be(t,n){return yn((e,o)=>{let s=0;e.subscribe(Et(o,l=>{o.next(t.call(n,l,s++))}))})}function Mr(t,n,e,o){return new(e||(e=Promise))(function(l,h){function p(C){try{v(o.next(C))}catch(D){h(D)}}function m(C){try{v(o.throw(C))}catch(D){h(D)}}function v(C){C.done?l(C.value):function s(l){return l instanceof e?l:new e(function(h){h(l)})}(C.value).then(p,m)}v((o=o.apply(t,n||[])).next())})}function wo(t){return this instanceof wo?(this.v=t,this):new wo(t)}function dm(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,o=e.apply(t,n||[]),l=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(N){o[N]&&(s[N]=function(V){return new Promise(function(U,q){l.push([N,V,U,q])>1||p(N,V)})})}function p(N,V){try{!function m(N){N.value instanceof wo?Promise.resolve(N.value.v).then(v,C):D(l[0][2],N)}(o[N](V))}catch(U){D(l[0][3],U)}}function v(N){p("next",N)}function C(N){p("throw",N)}function D(N,V){N(V),l.shift(),l.length&&p(l[0][0],l[0][1])}}function gy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function um(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],o=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(l){e[l]=t[l]&&function(h){return new Promise(function(p,m){!function s(l,h,p,m){Promise.resolve(m).then(function(v){l({value:v,done:p})},h)}(p,m,(h=t[l](h)).done,h.value)})}}}const Bh=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ss(t){return P(t?.then)}function Ta(t){return P(t[rs])}function hm(t){return Symbol.asyncIterator&&P(t?.[Symbol.asyncIterator])}function Dl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fm=function Vh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function lu(t){return P(t?.[fm])}function As(t){return dm(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:o,done:s}=yield wo(e.read());if(s)return yield wo(void 0);yield yield wo(o)}}finally{e.releaseLock()}})}function pm(t){return P(t?.getReader)}function Yn(t){if(t instanceof Wt)return t;if(null!=t){if(Ta(t))return function gm(t){return new Wt(n=>{const e=t[rs]();if(P(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Bh(t))return function _y(t){return new Wt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Ss(t))return function vy(t){return new Wt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,et)})}(t);if(hm(t))return vi(t);if(lu(t))return function jh(t){return new Wt(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(pm(t))return function Ml(t){return vi(As(t))}(t)}throw Dl(t)}function vi(t){return new Wt(n=>{(function by(t,n){var e,o,s,l;return Mr(this,void 0,void 0,function*(){try{for(e=gy(t);!(o=yield e.next()).done;)if(n.next(o.value),n.closed)return}catch(h){s={error:h}}finally{try{o&&!o.done&&(l=e.return)&&(yield l.call(e))}finally{if(s)throw s.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Ho(t,n,e,o=0,s=!1){const l=n.schedule(function(){e(),s?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(l),!s)return l}function Ke(t,n,e=1/0){return P(n)?Ke((o,s)=>Be((l,h)=>n(o,l,s,h))(Yn(t(o,s))),e):("number"==typeof n&&(e=n),yn((o,s)=>function mm(t,n,e,o,s,l,h,p){const m=[];let v=0,C=0,D=!1;const N=()=>{D&&!m.length&&!v&&n.complete()},V=q=>v<o?U(q):m.push(q),U=q=>{l&&n.next(q),v++;let J=!1;Yn(e(q,C++)).subscribe(Et(n,Q=>{s?.(Q),l?V(Q):n.next(Q)},()=>{J=!0},void 0,()=>{if(J)try{for(v--;m.length&&v<o;){const Q=m.shift();h?Ho(n,h,()=>U(Q)):U(Q)}N()}catch(Q){n.error(Q)}}))};return t.subscribe(Et(n,V,()=>{D=!0,N()})),()=>{p?.()}}(o,s,t,e)))}function Da(t=1/0){return Ke(yo,t)}const no=new Wt(t=>t.complete());function cu(t){return t&&P(t.schedule)}function Hh(t){return t[t.length-1]}function Al(t){return P(Hh(t))?t.pop():void 0}function Ol(t){return cu(Hh(t))?t.pop():void 0}function vm(t,n=0){return yn((e,o)=>{e.subscribe(Et(o,s=>Ho(o,t,()=>o.next(s),n),()=>Ho(o,t,()=>o.complete(),n),s=>Ho(o,t,()=>o.error(s),n)))})}function bm(t,n=0){return yn((e,o)=>{o.add(t.schedule(()=>e.subscribe(o),n))})}function ym(t,n){if(!t)throw new Error("Iterable cannot be null");return new Wt(e=>{Ho(e,n,()=>{const o=t[Symbol.asyncIterator]();Ho(e,n,()=>{o.next().then(s=>{s.done?e.complete():e.next(s.value)})},0,!0)})})}function dn(t,n){return n?function ky(t,n){if(null!=t){if(Ta(t))return function yy(t,n){return Yn(t).pipe(bm(n),vm(n))}(t,n);if(Bh(t))return function $h(t,n){return new Wt(e=>{let o=0;return n.schedule(function(){o===t.length?e.complete():(e.next(t[o++]),e.closed||this.schedule())})})}(t,n);if(Ss(t))return function uu(t,n){return Yn(t).pipe(bm(n),vm(n))}(t,n);if(hm(t))return ym(t,n);if(lu(t))return function wy(t,n){return new Wt(e=>{let o;return Ho(e,n,()=>{o=t[fm](),Ho(e,n,()=>{let s,l;try{({value:s,done:l}=o.next())}catch(h){return void e.error(h)}l?e.complete():e.next(s)},0,!0)}),()=>P(o?.return)&&o.return()})}(t,n);if(pm(t))return function Cy(t,n){return ym(As(t),n)}(t,n)}throw Dl(t)}(t,n):Yn(t)}function Uh(...t){const n=Ol(t),e=function zh(t,n){return"number"==typeof Hh(t)?t.pop():n}(t,1/0),o=t;return o.length?1===o.length?Yn(o[0]):Da(e)(dn(o,n)):no}function Gh(t={}){const{connector:n=(()=>new mt),resetOnError:e=!0,resetOnComplete:o=!0,resetOnRefCountZero:s=!0}=t;return l=>{let h,p,m,v=0,C=!1,D=!1;const N=()=>{p?.unsubscribe(),p=void 0},V=()=>{N(),h=m=void 0,C=D=!1},U=()=>{const q=h;V(),q?.unsubscribe()};return yn((q,J)=>{v++,!D&&!C&&N();const Q=m=m??n();J.add(()=>{v--,0===v&&!D&&!C&&(p=du(U,s))}),Q.subscribe(J),!h&&v>0&&(h=new Dr({next:te=>Q.next(te),error:te=>{D=!0,N(),p=du(V,e,te),Q.error(te)},complete:()=>{C=!0,N(),p=du(V,o),Q.complete()}}),Yn(q).subscribe(h))})(l)}}function du(t,n,...e){if(!0===n)return void t();if(!1===n)return;const o=new Dr({next:()=>{o.unsubscribe(),t()}});return n(...e).subscribe(o)}function tn(t){for(let n in t)if(t[n]===tn)return n;throw Error("Could not find renamed property on target object.")}function hu(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function nn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function fu(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const qh=tn({__forward_ref__:tn});function _t(t){return t.__forward_ref__=_t,t.toString=function(){return nn(this())},t}function Ie(t){return pu(t)?t():t}function pu(t){return"function"==typeof t&&t.hasOwnProperty(qh)&&t.__forward_ref__===_t}class pe extends Error{constructor(n,e){super(function Ma(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}(n,e)),this.code=n}}function Je(t){return"string"==typeof t?t:null==t?"":String(t)}function gu(t,n){throw new pe(-201,!1)}function Ft(t,n,e,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${e} ${o} ${n} <=Actual]`))}function de(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function _u(t){return km(t,$t)||km(t,Qh)}function km(t,n){return t.hasOwnProperty(n)?t[n]:null}function Em(t){return t&&(t.hasOwnProperty(Pl)||t.hasOwnProperty(ss))?t[Pl]:null}const $t=tn({\u0275prov:tn}),Pl=tn({\u0275inj:tn}),Qh=tn({ngInjectableDef:tn}),ss=tn({ngInjectorDef:tn});var Pe=(()=>((Pe=Pe||{})[Pe.Default=0]="Default",Pe[Pe.Host=1]="Host",Pe[Pe.Self=2]="Self",Pe[Pe.SkipSelf=4]="SkipSelf",Pe[Pe.Optional=8]="Optional",Pe))();let vu;function oo(t){const n=vu;return vu=t,n}function Nl(t,n,e){const o=_u(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:e&Pe.Optional?null:void 0!==n?n:void gu(nn(t))}function bi(t){return{toString:t}.toString()}var Co=(()=>((Co=Co||{})[Co.OnPush=0]="OnPush",Co[Co.Default=1]="Default",Co))(),ko=(()=>{return(t=ko||(ko={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ko;var t})();const Re=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ps={},Mt=[],Il=tn({\u0275cmp:tn}),Rl=tn({\u0275dir:tn}),Fe=tn({\u0275pipe:tn}),Ni=tn({\u0275mod:tn}),zo=tn({\u0275fac:tn}),Fl=tn({__NG_ELEMENT_ID__:tn});let Ay=0;function $e(t){return bi(()=>{const e=!0===t.standalone,o={},s={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Co.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ko.Emulated,id:"c"+Ay++,styles:t.styles||Mt,_:null,setInput:null,schemas:t.schemas||null,tView:null},l=t.dependencies,h=t.features;return s.inputs=Kt(t.inputs,o),s.outputs=Kt(t.outputs),h&&h.forEach(p=>p(s)),s.directiveDefs=l?()=>("function"==typeof l?l():l).map(Mm).filter(yi):null,s.pipeDefs=l?()=>("function"==typeof l?l():l).map(wi).filter(yi):null,s})}function Mm(t){return vt(t)||wn(t)}function yi(t){return null!==t}function It(t){return bi(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Kt(t,n){if(null==t)return Ps;const e={};for(const o in t)if(t.hasOwnProperty(o)){let s=t[o],l=s;Array.isArray(s)&&(l=s[1],s=s[0]),e[s]=o,n&&(n[s]=l)}return e}const he=$e;function Jt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function vt(t){return t[Il]||null}function wn(t){return t[Rl]||null}function wi(t){return t[Fe]||null}function ro(t,n){const e=t[Ni]||null;if(!e&&!0===n)throw new Error(`Type ${nn(t)} does not have '\u0275mod' property.`);return e}function Ui(t){return Array.isArray(t)&&"object"==typeof t[1]}function Uo(t){return Array.isArray(t)&&!0===t[1]}function ef(t){return 0!=(8&t.flags)}function wu(t){return 2==(2&t.flags)}function Cu(t){return 1==(1&t.flags)}function Go(t){return null!==t.template}function Sm(t){return 0!=(256&t[2])}function Or(t,n){return t.hasOwnProperty(zo)?t[zo]:null}class ku{constructor(n,e,o){this.previousValue=n,this.currentValue=e,this.firstChange=o}isFirstChange(){return this.firstChange}}function Ln(){return Pm}function Pm(t){return t.type.prototype.ngOnChanges&&(t.setInput=fe),Ls}function Ls(){const t=Ul(this),n=t?.current;if(n){const e=t.previous;if(e===Ps)t.previous=n;else for(let o in n)e[o]=n[o];t.current=null,this.ngOnChanges(n)}}function fe(t,n,e,o){const s=Ul(t)||function cf(t,n){return t[Ve]=n}(t,{previous:Ps,current:null}),l=s.current||(s.current={}),h=s.previous,p=this.declaredInputs[e],m=h[p];l[p]=new ku(m&&m.currentValue,n,h===Ps),t[o]=n}Ln.ngInherit=!0;const Ve="__ngSimpleChanges__";function Ul(t){return t[Ve]||null}function fn(t){for(;Array.isArray(t);)t=t[0];return t}function xu(t,n){return fn(n[t])}function ct(t,n){return fn(n[t.index])}function Eu(t,n){return t.data[n]}function Bs(t,n){return t[n]}function qi(t,n){const e=n[t];return Ui(e)?e:e[0]}function Tu(t){return 64==(64&t[2])}function lo(t,n){return null==n?null:t[n]}function df(t){t[18]=0}function ql(t,n){t[5]+=n;let e=t,o=t[3];for(;null!==o&&(1===n&&1===e[5]||-1===n&&0===e[5]);)o[5]+=n,e=o,o=o[3]}const Ue={lFrame:Bm(null),bindingsEnabled:!0};function Pa(){return Ue.bindingsEnabled}function re(){return Ue.lFrame.lView}function bt(){return Ue.lFrame.tView}function ae(t){return Ue.lFrame.contextLView=t,t[8]}function ne(t){return Ue.lFrame.contextLView=null,t}function Pn(){let t=Du();for(;null!==t&&64===t.type;)t=t.parent;return t}function Du(){return Ue.lFrame.currentTNode}function Wl(){const t=Ue.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function qo(t,n){const e=Ue.lFrame;e.currentTNode=t,e.isParent=n}function Mu(){return Ue.lFrame.isParent}function Su(){Ue.lFrame.isParent=!1}function ki(){const t=Ue.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function lr(){return Ue.lFrame.bindingIndex}function Na(){return Ue.lFrame.bindingIndex++}function ln(t){const n=Ue.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Ia(t){Ue.lFrame.inI18n=t}function qy(t,n){const e=Ue.lFrame;e.bindingIndex=e.bindingRootIndex=t,Jl(n)}function Jl(t){Ue.lFrame.currentDirectiveIndex=t}function mf(){return Ue.lFrame.currentQueryIndex}function Ra(t){Ue.lFrame.currentQueryIndex=t}function Fa(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Ou(t,n,e){if(e&Pe.SkipSelf){let s=n,l=t;for(;!(s=s.parent,null!==s||e&Pe.Host||(s=Fa(l),null===s||(l=l[15],10&s.type))););if(null===s)return!1;n=s,t=l}const o=Ue.lFrame=Ir();return o.currentTNode=n,o.lView=t,!0}function Pu(t){const n=Ir(),e=t[1];Ue.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Ir(){const t=Ue.lFrame,n=null===t?null:t.child;return null===n?Bm(t):n}function Bm(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Vm(){const t=Ue.lFrame;return Ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Yl=Vm;function _f(){const t=Vm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xi(){return Ue.lFrame.selectedIndex}function cs(t){Ue.lFrame.selectedIndex=t}function kn(){const t=Ue.lFrame;return Eu(t.tView,t.selectedIndex)}function Nu(t,n){for(let e=n.directiveStart,o=n.directiveEnd;e<o;e++){const l=t.data[e].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:v,ngOnDestroy:C}=l;h&&(t.contentHooks||(t.contentHooks=[])).push(-e,h),p&&((t.contentHooks||(t.contentHooks=[])).push(e,p),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,p)),m&&(t.viewHooks||(t.viewHooks=[])).push(-e,m),v&&((t.viewHooks||(t.viewHooks=[])).push(e,v),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,v)),null!=C&&(t.destroyHooks||(t.destroyHooks=[])).push(e,C)}}function Ql(t,n,e){Fu(t,n,3,e)}function Iu(t,n,e,o){(3&t[2])===e&&Fu(t,n,e,o)}function Ru(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Fu(t,n,e,o){const l=o??-1,h=n.length-1;let p=0;for(let m=void 0!==o?65535&t[18]:0;m<h;m++)if("number"==typeof n[m+1]){if(p=n[m],null!=o&&p>=o)break}else n[m]<0&&(t[18]+=65536),(p<l||-1==l)&&(zs(t,e,n,m),t[18]=(4294901760&t[18])+m+2),m++}function zs(t,n,e,o){const s=e[o]<0,l=e[o+1],p=t[s?-e[o]:e[o]];if(s){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{l.call(p)}finally{}}}else try{l.call(p)}finally{}}class $s{constructor(n,e,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=o}}function La(t,n,e){let o=0;for(;o<e.length;){const s=e[o];if("number"==typeof s){if(0!==s)break;o++;const l=e[o++],h=e[o++],p=e[o++];t.setAttribute(n,h,p,l)}else{const l=s,h=e[++o];Um(l)?t.setProperty(n,l,h):t.setAttribute(n,l,h),o++}}return o}function $m(t){return 3===t||4===t||6===t}function Um(t){return 64===t.charCodeAt(0)}function Lu(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?e=s:0===e||Gm(t,e,s,null,-1===e||2===e?n[++o]:null)}}return t}function Gm(t,n,e,o,s){let l=0,h=t.length;if(-1===n)h=-1;else for(;l<t.length;){const p=t[l++];if("number"==typeof p){if(p===n){h=-1;break}if(p>n){h=l-1;break}}}for(;l<t.length;){const p=t[l];if("number"==typeof p)break;if(p===e){if(null===o)return void(null!==s&&(t[l+1]=s));if(o===t[l+1])return void(t[l+2]=s)}l++,null!==o&&l++,null!==s&&l++}-1!==h&&(t.splice(h,0,n),l=h+1),t.splice(l++,0,e),null!==o&&t.splice(l++,0,o),null!==s&&t.splice(l++,0,s)}function qm(t){return-1!==t}function Rr(t){return 32767&t}function Us(t,n){let e=function Wm(t){return t>>16}(t),o=n;for(;e>0;)o=o[15],e--;return o}let Yt=!0;function Ba(t){const n=Yt;return Yt=t,n}let Jm=0;const Wo={};function Va(t,n){const e=Zl(t,n);if(-1!==e)return e;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,Bu(o.data,t),Bu(n,null),Bu(o.blueprint,null));const s=ec(t,n),l=t.injectorIndex;if(qm(s)){const h=Rr(s),p=Us(s,n),m=p[1].data;for(let v=0;v<8;v++)n[l+v]=p[h+v]|m[h+v]}return n[l+8]=s,l}function Bu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Zl(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function ec(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,o=null,s=n;for(;null!==s;){if(o=Cf(s),null===o)return-1;if(e++,s=s[15],-1!==o.injectorIndex)return o.injectorIndex|e<<16}return-1}function tc(t,n,e){!function Ym(t,n,e){let o;"string"==typeof e?o=e.charCodeAt(0)||0:e.hasOwnProperty(Fl)&&(o=e[Fl]),null==o&&(o=e[Fl]=Jm++);const s=255&o;n.data[t+(s>>5)]|=1<<s}(t,n,e)}function ds(t,n,e){if(e&Pe.Optional||void 0!==t)return t;gu()}function Ut(t,n,e,o){if(e&Pe.Optional&&void 0===o&&(o=null),0==(e&(Pe.Self|Pe.Host))){const s=t[9],l=oo(void 0);try{return s?s.get(n,o,e&Pe.Optional):Nl(n,o,e&Pe.Optional)}finally{oo(l)}}return ds(o,0,e)}function Ko(t,n,e,o=Pe.Default,s){if(null!==t){if(1024&n[2]){const h=function cr(t,n,e,o,s){let l=t,h=n;for(;null!==l&&null!==h&&1024&h[2]&&!(256&h[2]);){const p=Gs(l,h,e,o|Pe.Self,Wo);if(p!==Wo)return p;let m=l.parent;if(!m){const v=h[21];if(v){const C=v.get(e,Wo,o);if(C!==Wo)return C}m=Cf(h),h=h[15]}l=m}return s}(t,n,e,o,Wo);if(h!==Wo)return h}const l=Gs(t,n,e,o,Wo);if(l!==Wo)return l}return Ut(n,e,o,s)}function Gs(t,n,e,o,s){const l=function se(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Fl)?t[Fl]:void 0;return"number"==typeof n?n>=0?255&n:ju:n}(e);if("function"==typeof l){if(!Ou(n,t,o))return o&Pe.Host?ds(s,0,o):Ut(n,e,o,s);try{const h=l(o);if(null!=h||o&Pe.Optional)return h;gu()}finally{Yl()}}else if("number"==typeof l){let h=null,p=Zl(t,n),m=-1,v=o&Pe.Host?n[16][6]:null;for((-1===p||o&Pe.SkipSelf)&&(m=-1===p?ec(t,n):n[p+8],-1!==m&&Vu(o,!1)?(h=n[1],p=Rr(m),n=Us(m,n)):p=-1);-1!==p;){const C=n[1];if(ee(l,p,C.data)){const D=Qt(p,n,e,h,o,v);if(D!==Wo)return D}m=n[p+8],-1!==m&&Vu(o,n[1].data[p+8]===v)&&ee(l,p,n)?(h=C,p=Rr(m),n=Us(m,n)):p=-1}}return s}function Qt(t,n,e,o,s,l){const h=n[1],p=h.data[t+8],C=Do(p,h,e,null==o?wu(p)&&Yt:o!=h&&0!=(3&p.type),s&Pe.Host&&l===p);return null!==C?Jo(n,h,C,p):Wo}function Do(t,n,e,o,s){const l=t.providerIndexes,h=n.data,p=1048575&l,m=t.directiveStart,C=l>>20,N=s?p+C:t.directiveEnd;for(let V=o?p:p+C;V<N;V++){const U=h[V];if(V<m&&e===U||V>=m&&U.type===e)return V}if(s){const V=h[m];if(V&&Go(V)&&V.type===e)return m}return null}function Jo(t,n,e,o){let s=t[e];const l=n.data;if(function Xy(t){return t instanceof $s}(s)){const h=s;h.resolving&&function Wh(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new pe(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Tt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Je(t)}(l[e]));const p=Ba(h.canSeeViewProviders);h.resolving=!0;const m=h.injectImpl?oo(h.injectImpl):null;Ou(t,o,Pe.Default);try{s=t[e]=h.factory(void 0,l,t,o),n.firstCreatePass&&e>=o.directiveStart&&function Hm(t,n,e){const{ngOnChanges:o,ngOnInit:s,ngDoCheck:l}=n.type.prototype;if(o){const h=Pm(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,h),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,h)}s&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,s),l&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,l),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,l))}(e,l[e],n)}finally{null!==m&&oo(m),Ba(p),h.resolving=!1,Yl()}}return s}function ee(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function Vu(t,n){return!(t&Pe.Self||t&Pe.Host&&n)}class Fr{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,o){return Ko(this._tNode,this._lView,n,o,e)}}function ju(){return new Fr(Pn(),re())}function pn(t){return bi(()=>{const n=t.prototype.constructor,e=n[zo]||wf(n),o=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==o;){const l=s[zo]||wf(s);if(l&&l!==e)return l;s=Object.getPrototypeOf(s)}return l=>new l})}function wf(t){return pu(t)?()=>{const n=wf(Ie(t));return n&&n()}:Or(t)}function Cf(t){const n=t[1],e=n.type;return 2===e?n.declTNode:1===e?t[6]:null}function qs(t){return function Qm(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const o=e.length;let s=0;for(;s<o;){const l=e[s];if($m(l))break;if(0===l)s+=2;else if("number"==typeof l)for(s++;s<o&&"string"==typeof e[s];)s++;else{if(l===n)return e[s+1];s+=2}}}return null}(Pn(),t)}const hs="__parameters__";function Ei(t,n,e){return bi(()=>{const o=function kf(t){return function(...e){if(t){const o=t(...e);for(const s in o)this[s]=o[s]}}}(n);function s(...l){if(this instanceof s)return o.apply(this,l),this;const h=new s(...l);return p.annotation=h,p;function p(m,v,C){const D=m.hasOwnProperty(hs)?m[hs]:Object.defineProperty(m,hs,{value:[]})[hs];for(;D.length<=C;)D.push(null);return(D[C]=D[C]||[]).push(h),m}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}class De{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=de({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function co(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let o=t[e];Array.isArray(o)?(n===t&&(n=t.slice(0,e)),co(o,n)):n!==t&&n.push(o)}return n}function ur(t,n){t.forEach(e=>Array.isArray(e)?ur(e,n):n(e))}function fs(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function $u(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function oc(t,n){const e=[];for(let o=0;o<t;o++)e.push(n);return e}function uo(t,n,e){let o=Ys(t,n);return o>=0?t[1|o]=e:(o=~o,function a1(t,n,e,o){let s=t.length;if(s==n)t.push(e,o);else if(1===s)t.push(o,t[0]),t[0]=e;else{for(s--,t.push(t[s-1],t[s]);s>n;)t[s]=t[s-2],s--;t[n]=e,t[n+1]=o}}(t,o,n,e)),o}function Ef(t,n){const e=Ys(t,n);if(e>=0)return t[1|e]}function Ys(t,n){return function Tf(t,n,e){let o=0,s=t.length>>e;for(;s!==o;){const l=o+(s-o>>1),h=t[l<<e];if(n===h)return l<<e;h>n?s=l:o=l+1}return~(s<<e)}(t,n,1)}const Ha={},Qs="__NG_DI_FLAG__",ps="ngTempTokenPath",o_=/\n/gm,r_="__source";let St;function xn(t){const n=St;return St=t,n}function Wi(t,n=Pe.Default){if(void 0===St)throw new pe(-203,!1);return null===St?Nl(t,void 0,n):St.get(t,n&Pe.Optional?null:void 0,n)}function ie(t,n=Pe.Default){return(function My(){return vu}()||Wi)(Ie(t),n)}function ot(t,n=Pe.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),ie(t,n)}function Vt(t){const n=[];for(let e=0;e<t.length;e++){const o=Ie(t[e]);if(Array.isArray(o)){if(0===o.length)throw new pe(900,!1);let s,l=Pe.Default;for(let h=0;h<o.length;h++){const p=o[h],m=u1(p);"number"==typeof m?-1===m?s=p.token:l|=m:s=p}n.push(ie(s,l))}else n.push(ie(o))}return n}function Xs(t,n){return t[Qs]=n,t.prototype[Qs]=n,t}function u1(t){return t[Qs]}const ac=Xs(Ei("Optional"),8),lc=Xs(Ei("SkipSelf"),4);var ri=(()=>((ri=ri||{})[ri.Important=1]="Important",ri[ri.DashCase=2]="DashCase",ri))();const g_=/^>|^->|<!--|-->|--!>|<!-$/g,C1=/(<|>)/;const Pf=new Map;let Yu=0;const If="__ngContext__";function si(t,n){Ui(n)?(t[If]=n[20],function fc(t){Pf.set(t[20],t)}(n)):t[If]=n}let Bf;function Vf(t,n){return Bf(t,n)}function na(t){const n=t[3];return Uo(n)?n[3]:n}function ed(t){return cn(t[13])}function td(t){return cn(t[4])}function cn(t){for(;null!==t&&!Uo(t);)t=t[4];return t}function Ki(t,n,e,o,s){if(null!=o){let l,h=!1;Uo(o)?l=o:Ui(o)&&(h=!0,o=o[0]);const p=fn(o);0===t&&null!==e?null==s?id(n,e,p):Di(n,e,p,s||null,!0):1===t&&null!==e?Di(n,e,p,s||null,!0):2===t?ld(n,p,h):3===t&&n.destroyNode(p),null!=l&&function S1(t,n,e,o,s){const l=e[7];l!==fn(e)&&Ki(n,t,o,l,s);for(let p=10;p<e.length;p++){const m=e[p];vc(m[1],m,t,n,o,l)}}(n,t,l,e,s)}}function Qo(t,n){return t.createText(n)}function Ua(t,n,e){t.setValue(n,e)}function jf(t,n){return t.createComment(function __(t){return t.replace(g_,n=>n.replace(C1,"\u200b$1\u200b"))}(n))}function pc(t,n,e){return t.createElement(n,e)}function Lt(t,n){const e=t[9],o=e.indexOf(n),s=n[3];512&n[2]&&(n[2]&=-513,ql(s,-1)),e.splice(o,1)}function nd(t,n){if(t.length<=10)return;const e=10+n,o=t[e];if(o){const s=o[17];null!==s&&s!==t&&Lt(s,o),n>0&&(t[e-1][4]=o[4]);const l=$u(t,10+n);!function gn(t,n){vc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const h=l[19];null!==h&&h.detachView(l[1]),o[3]=null,o[4]=null,o[2]&=-65}return o}function zf(t,n){if(!(128&n[2])){const e=n[11];e.destroyNode&&vc(t,n,e,3,null,null),function Ga(t){let n=t[13];if(!n)return $f(t[1],t);for(;n;){let e=null;if(Ui(n))e=n[13];else{const o=n[10];o&&(e=o)}if(!e){for(;n&&!n[4]&&n!==t;)Ui(n)&&$f(n[1],n),n=n[3];null===n&&(n=t),Ui(n)&&$f(n[1],n),e=n&&n[4]}n=e}}(n)}}function $f(t,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function D1(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let o=0;o<e.length;o+=2){const s=n[e[o]];if(!(s instanceof $s)){const l=e[o+1];if(Array.isArray(l))for(let h=0;h<l.length;h+=2){const p=s[l[h]],m=l[h+1];try{m.call(p)}finally{}}else try{l.call(s)}finally{}}}}(t,n),function T1(t,n){const e=t.cleanup,o=n[7];let s=-1;if(null!==e)for(let l=0;l<e.length-1;l+=2)if("string"==typeof e[l]){const h=e[l+1],p="function"==typeof h?h(n):fn(n[h]),m=o[s=e[l+2]],v=e[l+3];"boolean"==typeof v?p.removeEventListener(e[l],m,v):v>=0?o[s=v]():o[s=-v].unsubscribe(),l+=2}else{const h=o[s=e[l+1]];e[l].call(h)}if(null!==o){for(let l=s+1;l<o.length;l++)(0,o[l])();n[7]=null}}(t,n),1===n[1].type&&n[11].destroy();const e=n[17];if(null!==e&&Uo(n[3])){e!==n[3]&&Lt(e,n);const o=n[19];null!==o&&o.detachView(t)}!function b_(t){Pf.delete(t[20])}(n)}}function Uf(t,n,e){return Gf(t,n.parent,e)}function Gf(t,n,e){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return e[0];if(2&o.flags){const s=t.data[o.directiveStart].encapsulation;if(s===ko.None||s===ko.Emulated)return null}return ct(o,e)}function Di(t,n,e,o,s){t.insertBefore(n,e,o,s)}function id(t,n,e){t.appendChild(n,e)}function gc(t,n,e,o,s){null!==o?Di(t,n,e,o,s):id(t,n,e)}function od(t,n){return t.parentNode(n)}function A_(t,n,e){return le(t,n,e)}function rd(t,n,e){return 40&t.type?ct(t,e):null}let sd,ud,Jf,hd,le=rd;function O_(t,n){le=t,sd=n}function ad(t,n,e,o){const s=Uf(t,o,n),l=n[11],p=A_(o.parent||n[6],o,n);if(null!=s)if(Array.isArray(e))for(let m=0;m<e.length;m++)gc(l,s,e[m],p,!1);else gc(l,s,e,p,!1);void 0!==sd&&sd(l,o,n,e,s)}function mc(t,n){if(null!==n){const e=n.type;if(3&e)return ct(n,t);if(4&e)return yt(-1,t[n.index]);if(8&e){const o=n.child;if(null!==o)return mc(t,o);{const s=t[n.index];return Uo(s)?yt(-1,s):fn(s)}}if(32&e)return Vf(n,t)()||fn(t[n.index]);{const o=_c(t,n);return null!==o?Array.isArray(o)?o[0]:mc(na(t[16]),o):mc(t,n.next)}}return null}function _c(t,n){return null!==n?t[16][6].projection[n.projection]:null}function yt(t,n){const e=10+t+1;if(e<n.length){const o=n[e],s=o[1].firstChild;if(null!==s)return mc(o,s)}return n[7]}function ld(t,n,e){const o=od(t,n);o&&function qf(t,n,e,o){t.removeChild(n,e,o)}(t,o,n,e)}function cd(t,n,e,o,s,l,h){for(;null!=e;){const p=o[e.index],m=e.type;if(h&&0===n&&(p&&si(fn(p),o),e.flags|=4),64!=(64&e.flags))if(8&m)cd(t,n,e.child,o,s,l,!1),Ki(n,t,s,p,l);else if(32&m){const v=Vf(e,o);let C;for(;C=v();)Ki(n,t,s,C,l);Ki(n,t,s,p,l)}else 16&m?Wf(t,n,o,e,s,l):Ki(n,t,s,p,l);e=h?e.projectionNext:e.next}}function vc(t,n,e,o,s,l){cd(e,o,t.firstChild,n,s,l,!1)}function Wf(t,n,e,o,s,l){const h=e[16],m=h[6].projection[o.projection];if(Array.isArray(m))for(let v=0;v<m.length;v++)Ki(n,t,s,m[v],l);else cd(t,n,m,h[3],s,l,!0)}function Kf(t,n,e){t.setAttribute(n,"style",e)}function bc(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function ia(t){return function dd(){if(void 0===ud&&(ud=null,Re.trustedTypes))try{ud=Re.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ud}()?.createHTML(t)||t}function Yf(){return void 0!==Jf?Jf:typeof document<"u"?document:void 0}function R_(t){return function fd(){if(void 0===hd&&(hd=null,Re.trustedTypes))try{hd=Re.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hd}()?.createHTML(t)||t}class Br{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class At extends Br{getTypeName(){return"HTML"}}class I1 extends Br{getTypeName(){return"Style"}}class L_ extends Br{getTypeName(){return"Script"}}class R1 extends Br{getTypeName(){return"URL"}}class F1 extends Br{getTypeName(){return"ResourceURL"}}function Ji(t){return t instanceof Br?t.changingThisBreaksApplicationSecurity:t}function Xo(t,n){const e=function B_(t){return t instanceof Br&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function H_(t){const n=new z_(t);return function U_(){try{return!!(new window.DOMParser).parseFromString(ia(""),"text/html")}catch{return!1}}()?new V1(n):n}class V1{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(ia(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class z_{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const o=this.inertDocument.createElement("body");e.appendChild(o)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ia(n),e;const o=this.inertDocument.createElement("body");return o.innerHTML=ia(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const e=n.attributes;for(let s=e.length-1;0<s;s--){const h=e.item(s).name;("xmlns:ns1"===h||0===h.indexOf("ns1:"))&&n.removeAttribute(h)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const j1=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function pd(t){return(t=String(t)).match(j1)?t:"unsafe:"+t}function Zo(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Wa(...t){const n={};for(const e of t)for(const o in e)e.hasOwnProperty(o)&&(n[o]=!0);return n}const Xf=Zo("area,br,col,hr,img,wbr"),er=Zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gd=Zo("rp,rt"),Zf=Wa(Xf,Wa(er,Zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wa(gd,Zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wa(gd,er)),ep=Zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),G_=Wa(ep,Zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),H1=Zo("script,style,template");class z1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,o=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?o=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,o&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=this.checkClobberedElement(e,e.nextSibling);if(s){e=s;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Zf.hasOwnProperty(e))return this.sanitizedSomething=!0,!H1.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const o=n.attributes;for(let s=0;s<o.length;s++){const l=o.item(s),h=l.name,p=h.toLowerCase();if(!G_.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let m=l.value;ep[p]&&(m=pd(m)),this.buf.push(" ",h,'="',q_(m),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Zf.hasOwnProperty(e)&&!Xf.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(q_(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const $1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,U1=/([^\#-~ |!])/g;function q_(t){return t.replace(/&/g,"&amp;").replace($1,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(U1,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let md;function W_(t,n){let e=null;try{md=md||H_(t);let o=n?String(n):"";e=md.getInertBodyElement(o);let s=5,l=o;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,o=l,l=e.innerHTML,e=md.getInertBodyElement(o)}while(o!==l);return ia((new z1).sanitizeChildren(tp(e)||e))}finally{if(e){const o=tp(e)||e;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function tp(t){return"content"in t&&function G1(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var at=(()=>((at=at||{})[at.NONE=0]="NONE",at[at.HTML=1]="HTML",at[at.STYLE=2]="STYLE",at[at.SCRIPT=3]="SCRIPT",at[at.URL=4]="URL",at[at.RESOURCE_URL=5]="RESOURCE_URL",at))();function Bt(t){const n=function yc(){const t=re();return t&&t[12]}();return n?R_(n.sanitize(at.HTML,t)||""):Xo(t,"HTML")?R_(Ji(t)):W_(Yf(),Je(t))}const bd=new De("ENVIRONMENT_INITIALIZER"),J_=new De("INJECTOR",-1),Ya=new De("INJECTOR_DEF_TYPES");class Y_{get(n,e=Ha){if(e===Ha){const o=new Error(`NullInjectorError: No provider for ${nn(n)}!`);throw o.name="NullInjectorError",o}return e}}function Q1(...t){return{\u0275providers:ip(0,t)}}function ip(t,...n){const e=[],o=new Set;let s;return ur(n,l=>{const h=l;wc(h,e,[],o)&&(s||(s=[]),s.push(h))}),void 0!==s&&op(s,e),e}function op(t,n){for(let e=0;e<t.length;e++){const{providers:s}=t[e];ur(s,l=>{n.push(l)})}}function wc(t,n,e,o){if(!(t=Ie(t)))return!1;let s=null,l=Em(t);const h=!l&&vt(t);if(l||h){if(h&&!h.standalone)return!1;s=t}else{const m=t.ngModule;if(l=Em(m),!l)return!1;s=m}const p=o.has(s);if(h){if(p)return!1;if(o.add(s),h.dependencies){const m="function"==typeof h.dependencies?h.dependencies():h.dependencies;for(const v of m)wc(v,n,e,o)}}else{if(!l)return!1;{if(null!=l.imports&&!p){let v;o.add(s);try{ur(l.imports,C=>{wc(C,n,e,o)&&(v||(v=[]),v.push(C))})}finally{}void 0!==v&&op(v,n)}if(!p){const v=Or(s)||(()=>new s);n.push({provide:s,useFactory:v,deps:Mt},{provide:Ya,useValue:s,multi:!0},{provide:bd,useValue:()=>ie(s),multi:!0})}const m=l.providers;null==m||p||ur(m,C=>{n.push(C)})}}return s!==t&&void 0!==t.providers}const yd=tn({provide:String,useValue:tn});function pr(t){return null!==t&&"object"==typeof t&&yd in t}function Vr(t){return"function"==typeof t}const rp=new De("Set Injector scope."),Xa={},kc={};let wd;function xc(){return void 0===wd&&(wd=new Y_),wd}class gs{}class X_ extends gs{constructor(n,e,o,s){super(),this.parent=e,this.source=o,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ap(n,h=>this.processProvider(h)),this.records.set(J_,Za(void 0,this)),s.has("environment")&&this.records.set(gs,Za(void 0,this));const l=this.records.get(rp);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Ya.multi,Mt,Pe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=xn(this),o=oo(void 0);try{return n()}finally{xn(e),oo(o)}}get(n,e=Ha,o=Pe.Default){this.assertNotDestroyed();const s=xn(this),l=oo(void 0);try{if(!(o&Pe.SkipSelf)){let p=this.records.get(n);if(void 0===p){const m=function sp(t){return"function"==typeof t||"object"==typeof t&&t instanceof De}(n)&&_u(n);p=m&&this.injectableDefInScope(m)?Za(Cd(n),Xa):null,this.records.set(n,p)}if(null!=p)return this.hydrate(n,p)}return(o&Pe.Self?xc():this.parent).get(n,e=o&Pe.Optional&&e===Ha?null:e)}catch(h){if("NullInjectorError"===h.name){if((h[ps]=h[ps]||[]).unshift(nn(n)),s)throw h;return function s_(t,n,e,o){const s=t[ps];throw n[r_]&&s.unshift(n[r_]),t.message=function a_(t,n,e,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let s=nn(n);if(Array.isArray(n))s=n.map(nn).join(" -> ");else if("object"==typeof n){let l=[];for(let h in n)if(n.hasOwnProperty(h)){let p=n[h];l.push(h+":"+("string"==typeof p?JSON.stringify(p):nn(p)))}s=`{${l.join(", ")}}`}return`${e}${o?"("+o+")":""}[${s}]: ${t.replace(o_,"\n  ")}`}("\n"+t.message,s,e,o),t.ngTokenPath=s,t[ps]=null,t}(h,n,"R3InjectorError",this.source)}throw h}finally{oo(l),xn(s)}}resolveInjectorInitializers(){const n=xn(this),e=oo(void 0);try{const o=this.get(bd.multi,Mt,Pe.Self);for(const s of o)s()}finally{xn(n),oo(e)}}toString(){const n=[],e=this.records;for(const o of e.keys())n.push(nn(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(n){let e=Vr(n=Ie(n))?n:Ie(n&&n.provide);const o=function Z1(t){return pr(t)?Za(void 0,t.useValue):Za(kd(t),Xa)}(n);if(Vr(n)||!0!==n.multi)this.records.get(e);else{let s=this.records.get(e);s||(s=Za(void 0,Xa,!0),s.factory=()=>Vt(s.multi),this.records.set(e,s)),e=n,s.multi.push(n)}this.records.set(e,o)}hydrate(n,e){return e.value===Xa&&(e.value=kc,e.value=e.factory()),"object"==typeof e.value&&e.value&&function tw(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ie(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Cd(t){const n=_u(t),e=null!==n?n.factory:Or(t);if(null!==e)return e;if(t instanceof De)throw new pe(204,!1);if(t instanceof Function)return function X1(t){const n=t.length;if(n>0)throw oc(n,"?"),new pe(204,!1);const e=function Dy(t){const n=t&&(t[$t]||t[Qh]);if(n){const e=function xm(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new pe(204,!1)}function kd(t,n,e){let o;if(Vr(t)){const s=Ie(t);return Or(s)||Cd(s)}if(pr(t))o=()=>Ie(t.useValue);else if(function Q_(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Vt(t.deps||[]));else if(function Qa(t){return!(!t||!t.useExisting)}(t))o=()=>ie(Ie(t.useExisting));else{const s=Ie(t&&(t.useClass||t.provide));if(!function ew(t){return!!t.deps}(t))return Or(s)||Cd(s);o=()=>new s(...Vt(t.deps))}return o}function Za(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function nw(t){return!!t.\u0275providers}function ap(t,n){for(const e of t)Array.isArray(e)?ap(e,n):nw(e)?ap(e.\u0275providers,n):n(e)}class Ec{}class tv{resolveComponentFactory(n){throw function Z_(t){const n=Error(`No component factory found for ${nn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Tc=(()=>{class t{}return t.NULL=new tv,t})();function ow(){return ms(Pn(),re())}function ms(t,n){return new Ot(ct(t,n))}let Ot=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=ow,t})();function rw(t){return t instanceof Ot?t.nativeElement:t}class xd{}let ai=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function nv(){const t=re(),e=qi(Pn().index,t);return(Ui(e)?e:t)[11]}(),t})(),aw=(()=>{class t{}return t.\u0275prov=de({token:t,providedIn:"root",factory:()=>null}),t})();class el{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const iv=new el("14.2.12"),Ed={};function tl(t){return t.ngOriginalError}class oa{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&tl(n);for(;e&&tl(e);)e=tl(e);return e||null}}function Dc(t){return t.ownerDocument.defaultView}function cp(t){return t.ownerDocument}function jr(t){return t instanceof Function?t():t}function dp(t,n,e){let o=t.length;for(;;){const s=t.indexOf(n,e);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const l=n.length;if(s+l===o||t.charCodeAt(s+l)<=32)return s}e=s+1}}const hp="ng-template";function av(t,n,e){let o=0;for(;o<t.length;){let s=t[o++];if(e&&"class"===s){if(s=t[o],-1!==dp(s.toLowerCase(),n,0))return!0}else if(1===s){for(;o<t.length&&"string"==typeof(s=t[o++]);)if(s.toLowerCase()===n)return!0;return!1}}return!1}function il(t){return 4===t.type&&t.value!==hp}function pw(t,n,e){return n===(4!==t.type||e?t.value:hp)}function gw(t,n,e){let o=4;const s=t.attrs||[],l=function _w(t){for(let n=0;n<t.length;n++)if($m(t[n]))return n;return t.length}(s);let h=!1;for(let p=0;p<n.length;p++){const m=n[p];if("number"!=typeof m){if(!h)if(4&o){if(o=2|1&o,""!==m&&!pw(t,m,e)||""===m&&1===n.length){if(tr(o))return!1;h=!0}}else{const v=8&o?m:n[++p];if(8&o&&null!==t.attrs){if(!av(t.attrs,v,e)){if(tr(o))return!1;h=!0}continue}const D=mw(8&o?"class":m,s,il(t),e);if(-1===D){if(tr(o))return!1;h=!0;continue}if(""!==v){let N;N=D>l?"":s[D+1].toLowerCase();const V=8&o?N:null;if(V&&-1!==dp(V,v,0)||2&o&&v!==N){if(tr(o))return!1;h=!0}}}}else{if(!h&&!tr(o)&&!tr(m))return!1;if(h&&tr(m))continue;h=!1,o=m|1&o}}return tr(o)||h}function tr(t){return 0==(1&t)}function mw(t,n,e,o){if(null===n)return-1;let s=0;if(o||!e){let l=!1;for(;s<n.length;){const h=n[s];if(h===t)return s;if(3===h||6===h)l=!0;else{if(1===h||2===h){let p=n[++s];for(;"string"==typeof p;)p=n[++s];continue}if(4===h)break;if(0===h){s+=4;continue}}s+=l?1:2}return-1}return function lv(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const o=t[e];if("number"==typeof o)return-1;if(o===n)return e;e++}return-1}(n,t)}function fp(t,n,e=!1){for(let o=0;o<n.length;o++)if(gw(t,n[o],e))return!0;return!1}function vw(t,n){e:for(let e=0;e<n.length;e++){const o=n[e];if(t.length===o.length){for(let s=0;s<t.length;s++)if(t[s]!==o[s])continue e;return!0}}return!1}function Dd(t,n){return t?":not("+n.trim()+")":n}function bw(t){let n=t[0],e=1,o=2,s="",l=!1;for(;e<t.length;){let h=t[e];if("string"==typeof h)if(2&o){const p=t[++e];s+="["+h+(p.length>0?'="'+p+'"':"")+"]"}else 8&o?s+="."+h:4&o&&(s+=" "+h);else""!==s&&!tr(h)&&(n+=Dd(l,s),s=""),o=h,l=l||!tr(o);e++}return""!==s&&(n+=Dd(l,s)),n}const Ge={};function A(t){uv(bt(),re(),xi()+t,!1)}function uv(t,n,e,o){if(!o)if(3==(3&n[2])){const l=t.preOrderCheckHooks;null!==l&&Ql(n,l,e)}else{const l=t.preOrderHooks;null!==l&&Iu(n,l,0,e)}cs(e)}function vp(t,n=null,e=null,o){const s=pv(t,n,e,o);return s.resolveInjectorInitializers(),s}function pv(t,n=null,e=null,o,s=new Set){const l=[e||Mt,Q1(t)];return o=o||("object"==typeof t?void 0:nn(t)),new X_(l,n||xc(),o||null,s)}let Gn=(()=>{class t{static create(e,o){if(Array.isArray(e))return vp({name:""},o,e,"");{const s=e.name??"";return vp({name:s},e.parent,e.providers,s)}}}return t.THROW_IF_NOT_FOUND=Ha,t.NULL=new Y_,t.\u0275prov=de({token:t,providedIn:"any",factory:()=>ie(J_)}),t.__NG_ELEMENT_ID__=-1,t})();function z(t,n=Pe.Default){const e=re();return null===e?ie(t,n):Ko(Pn(),e,Ie(t),n)}function Od(){throw new Error("invalid")}function Pd(t,n){return t<<17|n<<2}function No(t){return t>>17&32767}function Nd(t){return 2|t}function gr(t){return(131068&t)>>2}function Id(t,n){return-131069&t|n<<2}function Mc(t){return 1|t}function Iv(t,n){const e=t.contentQueries;if(null!==e)for(let o=0;o<e.length;o+=2){const s=e[o],l=e[o+1];if(-1!==l){const h=t.data[l];Ra(s),h.contentQueries(2,n[l],l)}}}function Vd(t,n,e,o,s,l,h,p,m,v,C){const D=n.blueprint.slice();return D[0]=s,D[2]=76|o,(null!==C||t&&1024&t[2])&&(D[2]|=1024),df(D),D[3]=D[15]=t,D[8]=e,D[10]=h||t&&t[10],D[11]=p||t&&t[11],D[12]=m||t&&t[12]||null,D[9]=v||t&&t[9]||null,D[6]=l,D[20]=function fr(){return Yu++}(),D[21]=C,D[16]=2==n.type?t[16]:D,D}function rl(t,n,e,o,s){let l=t.data[n];if(null===l)l=Ap(t,n,e,o,s),function gf(){return Ue.lFrame.inI18n}()&&(l.flags|=64);else if(64&l.type){l.type=e,l.value=o,l.attrs=s;const h=Wl();l.injectorIndex=null===h?-1:h.injectorIndex}return qo(l,!0),l}function Ap(t,n,e,o,s){const l=Du(),h=Mu(),m=t.data[n]=function jv(t,n,e,o,s,l){return{type:e,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,h?l:l&&l.parent,e,n,o,s);return null===t.firstChild&&(t.firstChild=m),null!==l&&(h?null==l.child&&null!==m.parent&&(l.child=m):null===l.next&&(l.next=m)),m}function sl(t,n,e,o){if(0===e)return-1;const s=n.length;for(let l=0;l<e;l++)n.push(o),t.blueprint.push(o),t.data.push(null);return s}function Op(t,n,e){Pu(n);try{const o=t.viewQuery;null!==o&&jp(1,o,e);const s=t.template;null!==s&&Lv(t,n,s,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Iv(t,n),t.staticViewQueries&&jp(2,t.viewQuery,e);const l=t.components;null!==l&&function Fv(t,n){for(let e=0;e<n.length;e++)jt(t,n[e])}(n,l)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,_f()}}function jd(t,n,e,o){const s=n[2];if(128!=(128&s)){Pu(n);try{df(n),function pf(t){return Ue.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Lv(t,n,e,2,o);const h=3==(3&s);if(h){const v=t.preOrderCheckHooks;null!==v&&Ql(n,v,null)}else{const v=t.preOrderHooks;null!==v&&Iu(n,v,0,null),Ru(n,0)}if(function Zw(t){for(let n=ed(t);null!==n;n=td(n)){if(!n[2])continue;const e=n[9];for(let o=0;o<e.length;o++){const s=e[o],l=s[3];0==(512&s[2])&&ql(l,1),s[2]|=512}}}(n),function Xw(t){for(let n=ed(t);null!==n;n=td(n))for(let e=10;e<n.length;e++){const o=n[e],s=o[1];Tu(o)&&jd(s,o,s.template,o[8])}}(n),null!==t.contentQueries&&Iv(t,n),h){const v=t.contentCheckHooks;null!==v&&Ql(n,v)}else{const v=t.contentHooks;null!==v&&Iu(n,v,1),Ru(n,1)}!function Hw(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let o=0;o<e.length;o++){const s=e[o];if(s<0)cs(~s);else{const l=s,h=e[++o],p=e[++o];qy(h,l),p(2,n[l])}}}finally{cs(-1)}}(t,n);const p=t.components;null!==p&&function Rv(t,n){for(let e=0;e<n.length;e++)eC(t,n[e])}(n,p);const m=t.viewQuery;if(null!==m&&jp(2,m,o),h){const v=t.viewCheckHooks;null!==v&&Ql(n,v)}else{const v=t.viewHooks;null!==v&&Iu(n,v,2),Ru(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,ql(n[3],-1))}finally{_f()}}}function Lv(t,n,e,o,s){const l=xi(),h=2&o;try{cs(-1),h&&n.length>22&&uv(t,n,22,!1),e(o,s)}finally{cs(l)}}function Bv(t,n,e){if(ef(n)){const s=n.directiveEnd;for(let l=n.directiveStart;l<s;l++){const h=t.data[l];h.contentQueries&&h.contentQueries(1,e[l],l)}}}function Pp(t,n,e){!Pa()||(function Gw(t,n,e,o){const s=e.directiveStart,l=e.directiveEnd;t.firstCreatePass||Va(e,n),si(o,n);const h=e.initialInputs;for(let p=s;p<l;p++){const m=t.data[p],v=Go(m);v&&Yw(n,e,m);const C=Jo(n,t,p,e);si(C,n),null!==h&&Qw(0,p-s,C,m,0,h),v&&(qi(e.index,n)[8]=C)}}(t,n,e,ct(e,n)),128==(128&e.flags)&&function qw(t,n,e){const o=e.directiveStart,s=e.directiveEnd,l=e.index,h=function Kl(){return Ue.lFrame.currentDirectiveIndex}();try{cs(l);for(let p=o;p<s;p++){const m=t.data[p],v=n[p];Jl(p),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&Gv(m,v)}}finally{cs(-1),Jl(h)}}(t,n,e))}function Np(t,n,e=ct){const o=n.localNames;if(null!==o){let s=n.index+1;for(let l=0;l<o.length;l+=2){const h=o[l+1],p=-1===h?e(n,t):t[h];t[s++]=p}}}function Vv(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ip(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ip(t,n,e,o,s,l,h,p,m,v){const C=22+o,D=C+s,N=function zw(t,n){const e=[];for(let o=0;o<n;o++)e.push(o<t?null:Ge);return e}(C,D),V="function"==typeof v?v():v;return N[1]={type:t,blueprint:N,template:e,queries:null,viewQuery:p,declTNode:n,data:N.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof h?h():h,firstChild:null,schemas:m,consts:V,incompleteFirstPass:!1}}function Hd(t,n,e,o){const s=Z(n);null===e?s.push(o):(s.push(e),t.firstCreatePass&&Ri(t).push(o,s.length-1))}function Rp(t,n,e){for(let o in t)if(t.hasOwnProperty(o)){const s=t[o];(e=null===e?{}:e).hasOwnProperty(o)?e[o].push(n,s):e[o]=[n,s]}return e}function Fp(t,n){const o=n.directiveEnd,s=t.data,l=n.attrs,h=[];let p=null,m=null;for(let v=n.directiveStart;v<o;v++){const C=s[v],D=C.inputs,N=null===l||il(n)?null:Kv(D,l);h.push(N),p=Rp(D,v,p),m=Rp(C.outputs,v,m)}null!==p&&(p.hasOwnProperty("class")&&(n.flags|=16),p.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=h,n.inputs=p,n.outputs=m}function fo(t,n,e,o,s,l,h,p){const m=ct(n,e);let C,v=n.inputs;!p&&null!=v&&(C=v[o])?(Hp(t,e,C,o,s),wu(n)&&Lp(e,n.index)):3&n.type&&(o=function Hv(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),s=null!=h?h(s,n.value||"",o):s,l.setProperty(m,o,s))}function Lp(t,n){const e=qi(n,t);16&e[2]||(e[2]|=32)}function zd(t,n,e,o){let s=!1;if(Pa()){const l=function Ww(t,n,e){const o=t.directiveRegistry;let s=null;if(o)for(let l=0;l<o.length;l++){const h=o[l];fp(e,h.selectors,!1)&&(s||(s=[]),tc(Va(e,n),t,h.type),Go(h)?(Bp(t,e),s.unshift(h)):s.push(h))}return s}(t,n,e),h=null===o?null:{"":-1};if(null!==l){s=!0,qv(e,t.data.length,l.length);for(let C=0;C<l.length;C++){const D=l[C];D.providersResolver&&D.providersResolver(D)}let p=!1,m=!1,v=sl(t,n,l.length,null);for(let C=0;C<l.length;C++){const D=l[C];e.mergedAttrs=Lu(e.mergedAttrs,D.hostAttrs),Wv(t,e,n,v,D),Jw(v,D,h),null!==D.contentQueries&&(e.flags|=8),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(e.flags|=128);const N=D.type.prototype;!p&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),p=!0),!m&&(N.ngOnChanges||N.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),m=!0),v++}Fp(t,e)}h&&function Kw(t,n,e){if(n){const o=t.localNames=[];for(let s=0;s<n.length;s+=2){const l=e[n[s+1]];if(null==l)throw new pe(-301,!1);o.push(n[s],l)}}}(e,o,h)}return e.mergedAttrs=Lu(e.mergedAttrs,e.attrs),s}function Uv(t,n,e,o,s,l){const h=l.hostBindings;if(h){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const m=~n.index;(function Uw(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(p)!=m&&p.push(m),p.push(o,s,h)}}function Gv(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Bp(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Jw(t,n,e){if(e){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)e[n.exportAs[o]]=t;Go(n)&&(e[""]=t)}}function qv(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function Wv(t,n,e,o,s){t.data[o]=s;const l=s.factory||(s.factory=Or(s.type)),h=new $s(l,Go(s),z);t.blueprint[o]=h,e[o]=h,Uv(t,n,0,o,sl(t,e,s.hostVars,Ge),s)}function Yw(t,n,e){const o=ct(n,t),s=Vv(e),l=t[10],h=Oc(t,Vd(t,s,null,e.onPush?32:16,o,n,l,l.createRenderer(o,e),null,null,null));t[n.index]=h}function Vp(t,n,e,o,s,l,h){if(null==l)t.removeAttribute(n,s,e);else{const p=null==h?Je(l):h(l,o||"",s);t.setAttribute(n,s,p,e)}}function Qw(t,n,e,o,s,l){const h=l[n];if(null!==h){const p=o.setInput;for(let m=0;m<h.length;){const v=h[m++],C=h[m++],D=h[m++];null!==p?o.setInput(e,D,v,C):e[C]=D}}}function Kv(t,n){let e=null,o=0;for(;o<n.length;){const s=n[o];if(0!==s)if(5!==s){if("number"==typeof s)break;t.hasOwnProperty(s)&&(null===e&&(e=[]),e.push(s,t[s],n[o+1])),o+=2}else o+=2;else o+=4}return e}function Jv(t,n,e,o){return new Array(t,!0,!1,n,null,0,o,e,null,null)}function eC(t,n){const e=qi(n,t);if(Tu(e)){const o=e[1];48&e[2]?jd(o,e,o.template,e[8]):e[5]>0&&Qe(e)}}function Qe(t){for(let o=ed(t);null!==o;o=td(o))for(let s=10;s<o.length;s++){const l=o[s];if(Tu(l))if(512&l[2]){const h=l[1];jd(h,l,h.template,l[8])}else l[5]>0&&Qe(l)}const e=t[1].components;if(null!==e)for(let o=0;o<e.length;o++){const s=qi(e[o],t);Tu(s)&&s[5]>0&&Qe(s)}}function jt(t,n){const e=qi(n,t),o=e[1];(function Ce(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(o,e),Op(o,e,e[8])}function Oc(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function po(t){for(;t;){t[2]|=32;const n=na(t);if(Sm(t)&&!n)return t;t=n}return null}function Ae(t,n,e,o=!0){const s=n[10];s.begin&&s.begin();try{jd(t,n,t.template,e)}catch(h){throw o&&un(n,h),h}finally{s.end&&s.end()}}function jp(t,n,e){Ra(0),n(t,e)}function Z(t){return t[7]||(t[7]=[])}function Ri(t){return t.cleanup||(t.cleanup=[])}function un(t,n){const e=t[9],o=e?e.get(oa,null):null;o&&o.handleError(n)}function Hp(t,n,e,o,s){for(let l=0;l<e.length;){const h=e[l++],p=e[l++],m=n[h],v=t.data[h];null!==v.setInput?v.setInput(m,s,o,p):m[p]=s}}function ui(t,n,e){const o=xu(n,t);Ua(t[11],o,e)}function $d(t,n,e){let o=e?t.styles:null,s=e?t.classes:null,l=0;if(null!==n)for(let h=0;h<n.length;h++){const p=n[h];"number"==typeof p?l=p:1==l?s=fu(s,p):2==l&&(o=fu(o,p+": "+n[++h]+";"))}e?t.styles=o:t.stylesWithoutHost=o,e?t.classes=s:t.classesWithoutHost=s}function Ud(t,n,e,o,s=!1){for(;null!==e;){const l=n[e.index];if(null!==l&&o.push(fn(l)),Uo(l))for(let p=10;p<l.length;p++){const m=l[p],v=m[1].firstChild;null!==v&&Ud(m[1],m,v,o)}const h=e.type;if(8&h)Ud(t,n,e.child,o);else if(32&h){const p=Vf(e,n);let m;for(;m=p();)o.push(m)}else if(16&h){const p=_c(n,e);if(Array.isArray(p))o.push(...p);else{const m=na(n[16]);Ud(m[1],m,p,o,!0)}}e=s?e.projectionNext:e.next}return o}class sa{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return Ud(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Uo(n)){const e=n[8],o=e?e.indexOf(this):-1;o>-1&&(nd(n,o),$u(e,o))}this._attachedToViewContainer=!1}zf(this._lView[1],this._lView)}onDestroy(n){Hd(this._lView[1],this._lView,null,n)}markForCheck(){po(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ae(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function x1(t,n){vc(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=n}}class tC extends sa{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Ae(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class Pc extends Tc{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=vt(n);return new Xn(e,this.ngModule)}}function Gd(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class zp{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,o){const s=this.injector.get(n,Ed,o);return s!==Ed||e===Ed?s:this.parentInjector.get(n,e,o)}}class Xn extends Ec{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function cv(t){return t.map(bw).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Gd(this.componentDef.inputs)}get outputs(){return Gd(this.componentDef.outputs)}create(n,e,o,s){let l=(s=s||this.ngModule)instanceof gs?s:s?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const h=l?new zp(n,l):n,p=h.get(xd,null);if(null===p)throw new pe(407,!1);const m=h.get(aw,null),v=p.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",D=o?function $w(t,n,e){return t.selectRootElement(n,e===ko.ShadowDom)}(v,o,this.componentDef.encapsulation):pc(v,C,function nC(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(C)),N=this.componentDef.onPush?288:272,V=Ip(0,null,null,1,0,null,null,null,null,null),U=Vd(null,V,null,N,null,null,p,v,m,h,null);let q,J;Pu(U);try{const Q=function $p(t,n,e,o,s,l){const h=e[1];e[22]=t;const m=rl(h,22,2,"#host",null),v=m.mergedAttrs=n.hostAttrs;null!==v&&($d(m,v,!0),null!==t&&(La(s,t,v),null!==m.classes&&bc(s,t,m.classes),null!==m.styles&&Kf(s,t,m.styles)));const C=o.createRenderer(t,n),D=Vd(e,Vv(n),null,n.onPush?32:16,e[22],m,o,C,l||null,null,null);return h.firstCreatePass&&(tc(Va(m,e),h,n.type),Bp(h,m),qv(m,e.length,1)),Oc(e,D),e[22]=D}(D,this.componentDef,U,p,v);if(D)if(o)La(v,D,["ng-version",iv.full]);else{const{attrs:te,classes:X}=function yw(t){const n=[],e=[];let o=1,s=2;for(;o<t.length;){let l=t[o];if("string"==typeof l)2===s?""!==l&&n.push(l,t[++o]):8===s&&e.push(l);else{if(!tr(s))break;s=l}o++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);te&&La(v,D,te),X&&X.length>0&&bc(v,D,X.join(" "))}if(J=Eu(V,22),void 0!==e){const te=J.projection=[];for(let X=0;X<this.ngContentSelectors.length;X++){const ce=e[X];te.push(null!=ce?Array.from(ce):null)}}q=function u(t,n,e,o){const s=e[1],l=function $v(t,n,e){const o=Pn();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Wv(t,o,n,sl(t,n,1,null),e),Fp(t,o));const s=Jo(n,t,o.directiveStart,o);si(s,n);const l=ct(o,n);return l&&si(l,n),s}(s,e,n);if(t[8]=e[8]=l,null!==o)for(const p of o)p(l,n);if(n.contentQueries){const p=Pn();n.contentQueries(1,l,p.directiveStart)}const h=Pn();return!s.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(cs(h.index),Uv(e[1],h,0,h.directiveStart,h.directiveEnd,n),Gv(n,l)),l}(Q,this.componentDef,U,[i]),Op(V,U,null)}finally{_f()}return new Yv(this.componentType,q,ms(J,U),U,J)}}class Yv extends class iw{}{constructor(n,e,o,s,l){super(),this.location=o,this._rootLView=s,this._tNode=l,this.instance=e,this.hostView=this.changeDetectorRef=new tC(s),this.componentType=n}setInput(n,e){const o=this._tNode.inputs;let s;if(null!==o&&(s=o[n])){const l=this._rootLView;Hp(l[1],l,s,n,e),Lp(l,this._tNode.index)}}get injector(){return new Fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function i(){const t=Pn();Nu(re()[1],t)}function a(t){let n=function r(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const o=[t];for(;n;){let s;if(Go(t))s=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new pe(903,!1);s=n.\u0275dir}if(s){if(e){o.push(s);const h=t;h.inputs=d(t.inputs),h.declaredInputs=d(t.declaredInputs),h.outputs=d(t.outputs);const p=s.hostBindings;p&&_(t,p);const m=s.viewQuery,v=s.contentQueries;if(m&&f(t,m),v&&g(t,v),hu(t.inputs,s.inputs),hu(t.declaredInputs,s.declaredInputs),hu(t.outputs,s.outputs),Go(s)&&s.data.animation){const C=t.data;C.animation=(C.animation||[]).concat(s.data.animation)}}const l=s.features;if(l)for(let h=0;h<l.length;h++){const p=l[h];p&&p.ngInherit&&p(t),p===a&&(e=!1)}}n=Object.getPrototypeOf(n)}!function c(t){let n=0,e=null;for(let o=t.length-1;o>=0;o--){const s=t[o];s.hostVars=n+=s.hostVars,s.hostAttrs=Lu(s.hostAttrs,e=Lu(e,s.hostAttrs))}}(o)}function d(t){return t===Ps?{}:t===Mt?[]:t}function f(t,n){const e=t.viewQuery;t.viewQuery=e?(o,s)=>{n(o,s),e(o,s)}:n}function g(t,n){const e=t.contentQueries;t.contentQueries=e?(o,s,l)=>{n(o,s,l),e(o,s,l)}:n}function _(t,n){const e=t.hostBindings;t.hostBindings=e?(o,s)=>{n(o,s),e(o,s)}:n}let S=null;function F(){if(!S){const t=Re.Symbol;if(t&&t.iterator)S=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const o=n[e];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(S=o)}}}return S}function G(t){return!!ue(t)&&(Array.isArray(t)||!(t instanceof Map)&&F()in t)}function ue(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function qe(t,n,e){return t[n]=e}function Gt(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function vr(t,n,e,o){const s=Gt(t,n,e);return Gt(t,n+1,o)||s}function wt(t,n,e,o){const s=re();return Gt(s,Na(),n)&&(bt(),function mr(t,n,e,o,s,l){const h=ct(t,n);Vp(n[11],h,l,t.value,e,o,s)}(kn(),s,t,n,e,o)),wt}function br(t,n,e,o){return Gt(t,Na(),e)?n+Je(e)+o:Ge}function bs(t,n,e,o,s,l){const p=vr(t,lr(),e,s);return ln(2),p?n+Je(e)+o+Je(s)+l:Ge}function qd(t,n,e,o,s,l,h,p,m,v){const D=function Yi(t,n,e,o,s,l){const h=vr(t,n,e,o);return vr(t,n+2,s,l)||h}(t,lr(),e,s,h,m);return ln(4),D?n+Je(e)+o+Je(s)+l+Je(h)+p+Je(m)+v:Ge}function H(t,n,e,o,s,l,h,p){const m=re(),v=bt(),C=t+22,D=v.firstCreatePass?function H2(t,n,e,o,s,l,h,p,m){const v=n.consts,C=rl(n,t,4,h||null,lo(v,p));zd(n,e,C,lo(v,m)),Nu(n,C);const D=C.tViews=Ip(2,C,o,s,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,v);return null!==n.queries&&(n.queries.template(n,C),D.queries=n.queries.embeddedTView(C)),C}(C,v,m,n,e,o,s,l,h):v.data[C];qo(D,!1);const N=m[11].createComment("");ad(v,m,N,D),si(N,m),Oc(m,m[C]=Jv(N,m,N,D)),Cu(D)&&Pp(v,m,D),null!=h&&Np(m,D,p)}function Oe(t){return Bs(function Lm(){return Ue.lFrame.contextLView}(),22+t)}function I(t,n,e){const o=re();return Gt(o,Na(),n)&&fo(bt(),kn(),o,t,n,o[11],e,!1),I}function oC(t,n,e,o,s){const h=s?"class":"style";Hp(t,e,n.inputs[h],h,o)}function x(t,n,e,o){const s=re(),l=bt(),h=22+t,p=s[11],m=s[h]=pc(p,n,function Qy(){return Ue.lFrame.currentNamespace}()),v=l.firstCreatePass?function $2(t,n,e,o,s,l,h){const p=n.consts,v=rl(n,t,2,s,lo(p,l));return zd(n,e,v,lo(p,h)),null!==v.attrs&&$d(v,v.attrs,!1),null!==v.mergedAttrs&&$d(v,v.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,v),v}(h,l,s,0,n,e,o):l.data[h];qo(v,!0);const C=v.mergedAttrs;null!==C&&La(p,m,C);const D=v.classes;null!==D&&bc(p,m,D);const N=v.styles;return null!==N&&Kf(p,m,N),64!=(64&v.flags)&&ad(l,s,m,v),0===function Rm(){return Ue.lFrame.elementDepthCount}()&&si(m,s),function Uy(){Ue.lFrame.elementDepthCount++}(),Cu(v)&&(Pp(l,s,v),Bv(l,v,s)),null!==o&&Np(s,v),x}function M(){let t=Pn();Mu()?Su():(t=t.parent,qo(t,!1));const n=t;!function ff(){Ue.lFrame.elementDepthCount--}();const e=bt();return e.firstCreatePass&&(Nu(e,t),ef(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function e1(t){return 0!=(16&t.flags)}(n)&&oC(e,n,re(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function zm(t){return 0!=(32&t.flags)}(n)&&oC(e,n,re(),n.stylesWithoutHost,!1),M}function be(t,n,e,o){return x(t,n,e,o),M(),be}function Ct(t,n,e){const o=re(),s=bt(),l=t+22,h=s.firstCreatePass?function U2(t,n,e,o,s){const l=n.consts,h=lo(l,o),p=rl(n,t,8,"ng-container",h);return null!==h&&$d(p,h,!0),zd(n,e,p,lo(l,s)),null!==n.queries&&n.queries.elementStart(n,p),p}(l,s,o,n,e):s.data[l];qo(h,!0);const p=o[l]=o[11].createComment("");return ad(s,o,p,h),si(p,o),Cu(h)&&(Pp(s,o,h),Bv(s,h,o)),null!=e&&Np(o,h),Ct}function kt(){let t=Pn();const n=bt();return Mu()?Su():(t=t.parent,qo(t,!1)),n.firstCreatePass&&(Nu(n,t),ef(t)&&n.queries.elementEnd(t)),kt}function al(t,n,e){return Ct(t,n,e),kt(),al}function ke(){return re()}function Up(t){return!!t&&"function"==typeof t.then}const rC=function IT(t){return!!t&&"function"==typeof t.subscribe};function K(t,n,e,o){const s=re(),l=bt(),h=Pn();return function FT(t,n,e,o,s,l,h,p){const m=Cu(o),C=t.firstCreatePass&&Ri(t),D=n[8],N=Z(n);let V=!0;if(3&o.type||p){const J=ct(o,n),Q=p?p(J):J,te=N.length,X=p?ve=>p(fn(ve[o.index])):o.index;let ce=null;if(!p&&m&&(ce=function G2(t,n,e,o){const s=t.cleanup;if(null!=s)for(let l=0;l<s.length-1;l+=2){const h=s[l];if(h===e&&s[l+1]===o){const p=n[7],m=s[l+2];return p.length>m?p[m]:null}"string"==typeof h&&(l+=2)}return null}(t,n,s,o.index)),null!==ce)(ce.__ngLastListenerFn__||ce).__ngNextListenerFn__=l,ce.__ngLastListenerFn__=l,V=!1;else{l=BT(o,n,D,l,!1);const ve=e.listen(Q,s,l);N.push(l,ve),C&&C.push(s,X,te,te+1)}}else l=BT(o,n,D,l,!1);const U=o.outputs;let q;if(V&&null!==U&&(q=U[s])){const J=q.length;if(J)for(let Q=0;Q<J;Q+=2){const me=n[q[Q]][q[Q+1]].subscribe(l),it=N.length;N.push(l,me),C&&C.push(s,o.index,it,-(it+1))}}}(l,s,s[11],h,t,n,0,o),K}function LT(t,n,e,o){try{return!1!==e(o)}catch(s){return un(t,s),!1}}function BT(t,n,e,o,s){return function l(h){if(h===Function)return o;po(2&t.flags?qi(t.index,n):n);let m=LT(n,0,o,h),v=l.__ngNextListenerFn__;for(;v;)m=LT(n,0,v,h)&&m,v=v.__ngNextListenerFn__;return s&&!1===m&&(h.preventDefault(),h.returnValue=!1),m}}function B(t=1){return function Wy(t){return(Ue.lFrame.contextLView=function Ky(t,n){for(;t>0;)n=n[15],t--;return n}(t,Ue.lFrame.contextLView))[8]}(t)}function q2(t,n){let e=null;const o=function pp(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let s=0;s<n.length;s++){const l=n[s];if("*"!==l){if(null===o?fp(t,l,!0):vw(o,l))return s}else e=s}return e}function Qd(t){const n=re()[16][6];if(!n.projection){const o=n.projection=oc(t?t.length:1,null),s=o.slice();let l=n.child;for(;null!==l;){const h=t?q2(l,t):0;null!==h&&(s[h]?s[h].projectionNext=l:o[h]=l,s[h]=l),l=l.next}}}function Xd(t,n=0,e){const o=re(),s=bt(),l=rl(s,22+t,16,null,e||null);null===l.projection&&(l.projection=n),Su(),64!=(64&l.flags)&&function P_(t,n,e){Wf(n[11],0,n,e,Uf(t,e,n),A_(e.parent||n[6],e,n))}(s,o,l)}function Zd(t,n,e){return zr(t,"",n,"",e),Zd}function zr(t,n,e,o,s){const l=re(),h=br(l,n,e,o);return h!==Ge&&fo(bt(),kn(),l,t,h,l[11],s,!1),zr}function Gp(t,n,e,o,s,l,h){const p=re(),m=bs(p,n,e,o,s,l);return m!==Ge&&fo(bt(),kn(),p,t,m,p[11],h,!1),Gp}function qT(t,n,e,o,s){const l=t[e+1],h=null===n;let p=o?No(l):gr(l),m=!1;for(;0!==p&&(!1===m||h);){const C=t[p+1];J2(t[p],n)&&(m=!0,t[p+1]=o?Mc(C):Nd(C)),p=o?No(C):gr(C)}m&&(t[e+1]=o?Nd(l):Mc(l))}function J2(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ys(t,n)>=0}const di={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WT(t){return t.substring(di.key,di.keyEnd)}function KT(t,n){const e=di.textEnd;return e===n?-1:(n=di.keyEnd=function Z2(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,di.key=n,e),eh(t,n,e))}function eh(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function qp(t,n,e){return $r(t,n,e,!1),qp}function Xt(t,n){return $r(t,n,null,!0),Xt}function la(t){Ur(uo,ws,t,!0)}function ws(t,n){for(let e=function Q2(t){return function YT(t){di.key=0,di.keyEnd=0,di.value=0,di.valueEnd=0,di.textEnd=t.length}(t),KT(t,eh(t,0,di.textEnd))}(n);e>=0;e=KT(n,e))uo(t,WT(n),!0)}function $r(t,n,e,o){const s=re(),l=bt(),h=ln(2);l.firstUpdatePass&&eD(l,t,h,o),n!==Ge&&Gt(s,h,n)&&nD(l,l.data[xi()],s,s[11],t,s[h+1]=function cR(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=nn(Ji(t)))),t}(n,e),o,h)}function Ur(t,n,e,o){const s=bt(),l=ln(2);s.firstUpdatePass&&eD(s,null,l,o);const h=re();if(e!==Ge&&Gt(h,l,e)){const p=s.data[xi()];if(oD(p,o)&&!ZT(s,l)){let m=o?p.classesWithoutHost:p.stylesWithoutHost;null!==m&&(e=fu(m,e||"")),oC(s,p,h,e,o)}else!function lR(t,n,e,o,s,l,h,p){s===Ge&&(s=Mt);let m=0,v=0,C=0<s.length?s[0]:null,D=0<l.length?l[0]:null;for(;null!==C||null!==D;){const N=m<s.length?s[m+1]:void 0,V=v<l.length?l[v+1]:void 0;let q,U=null;C===D?(m+=2,v+=2,N!==V&&(U=D,q=V)):null===D||null!==C&&C<D?(m+=2,U=C):(v+=2,U=D,q=V),null!==U&&nD(t,n,e,o,U,q,h,p),C=m<s.length?s[m]:null,D=v<l.length?l[v]:null}}(s,p,h,h[11],h[l+1],h[l+1]=function aR(t,n,e){if(null==e||""===e)return Mt;const o=[],s=Ji(e);if(Array.isArray(s))for(let l=0;l<s.length;l++)t(o,s[l],!0);else if("object"==typeof s)for(const l in s)s.hasOwnProperty(l)&&t(o,l,s[l]);else"string"==typeof s&&n(o,s);return o}(t,n,e),o,l)}}function ZT(t,n){return n>=t.expandoStartIndex}function eD(t,n,e,o){const s=t.data;if(null===s[e+1]){const l=s[xi()],h=ZT(t,e);oD(l,o)&&null===n&&!h&&(n=!1),n=function iR(t,n,e,o){const s=function Au(t){const n=Ue.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let l=o?n.residualClasses:n.residualStyles;if(null===s)0===(o?n.classBindings:n.styleBindings)&&(e=Wp(e=sC(null,t,n,e,o),n.attrs,o),l=null);else{const h=n.directiveStylingLast;if(-1===h||t[h]!==s)if(e=sC(s,t,n,e,o),null===l){let m=function oR(t,n,e){const o=e?n.classBindings:n.styleBindings;if(0!==gr(o))return t[No(o)]}(t,n,o);void 0!==m&&Array.isArray(m)&&(m=sC(null,t,n,m[1],o),m=Wp(m,n.attrs,o),function rR(t,n,e,o){t[No(e?n.classBindings:n.styleBindings)]=o}(t,n,o,m))}else l=function sR(t,n,e){let o;const s=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<s;l++)o=Wp(o,t[l].hostAttrs,e);return Wp(o,n.attrs,e)}(t,n,o)}return void 0!==l&&(o?n.residualClasses=l:n.residualStyles=l),e}(s,l,n,o),function W2(t,n,e,o,s,l){let h=l?n.classBindings:n.styleBindings,p=No(h),m=gr(h);t[o]=e;let C,v=!1;if(Array.isArray(e)){const D=e;C=D[1],(null===C||Ys(D,C)>0)&&(v=!0)}else C=e;if(s)if(0!==m){const N=No(t[p+1]);t[o+1]=Pd(N,p),0!==N&&(t[N+1]=Id(t[N+1],o)),t[p+1]=function xv(t,n){return 131071&t|n<<17}(t[p+1],o)}else t[o+1]=Pd(p,0),0!==p&&(t[p+1]=Id(t[p+1],o)),p=o;else t[o+1]=Pd(m,0),0===p?p=o:t[m+1]=Id(t[m+1],o),m=o;v&&(t[o+1]=Nd(t[o+1])),qT(t,C,o,!0),qT(t,C,o,!1),function K2(t,n,e,o,s){const l=s?t.residualClasses:t.residualStyles;null!=l&&"string"==typeof n&&Ys(l,n)>=0&&(e[o+1]=Mc(e[o+1]))}(n,C,t,o,l),h=Pd(p,m),l?n.classBindings=h:n.styleBindings=h}(s,l,n,e,h,o)}}function sC(t,n,e,o,s){let l=null;const h=e.directiveEnd;let p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<h&&(l=n[p],o=Wp(o,l.hostAttrs,s),l!==t);)p++;return null!==t&&(e.directiveStylingLast=p),o}function Wp(t,n,e){const o=e?1:2;let s=-1;if(null!==n)for(let l=0;l<n.length;l++){const h=n[l];"number"==typeof h?s=h:s===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),uo(t,h,!!e||n[++l]))}return void 0===t?null:t}function nD(t,n,e,o,s,l,h,p){if(!(3&n.type))return;const m=t.data,v=m[p+1];Qv(function kp(t){return 1==(1&t)}(v)?iD(m,n,e,s,gr(v),h):void 0)||(Qv(l)||function Cp(t){return 2==(2&t)}(v)&&(l=iD(m,null,e,s,p,h)),function A1(t,n,e,o,s){if(n)s?t.addClass(e,o):t.removeClass(e,o);else{let l=-1===o.indexOf("-")?void 0:ri.DashCase;null==s?t.removeStyle(e,o,l):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),l|=ri.Important),t.setStyle(e,o,s,l))}}(o,h,xu(xi(),e),s,l))}function iD(t,n,e,o,s,l){const h=null===n;let p;for(;s>0;){const m=t[s],v=Array.isArray(m),C=v?m[1]:m,D=null===C;let N=e[s+1];N===Ge&&(N=D?Mt:void 0);let V=D?Ef(N,o):C===o?N:void 0;if(v&&!Qv(V)&&(V=Ef(m,o)),Qv(V)&&(p=V,h))return p;const U=t[s+1];s=h?No(U):gr(U)}if(null!==n){let m=l?n.residualClasses:n.residualStyles;null!=m&&(p=Ef(m,o))}return p}function Qv(t){return void 0!==t}function oD(t,n){return 0!=(t.flags&(n?16:32))}function R(t,n=""){const e=re(),o=bt(),s=t+22,l=o.firstCreatePass?rl(o,s,1,n,null):o.data[s],h=e[s]=Qo(e[11],n);ad(o,e,h,l),qo(l,!1)}function ge(t){return Pt("",t,""),ge}function Pt(t,n,e){const o=re(),s=br(o,t,n,e);return s!==Ge&&ui(o,xi(),s),Pt}function hi(t,n,e,o,s){const l=re(),h=bs(l,t,n,e,o,s);return h!==Ge&&ui(l,xi(),h),hi}function ca(t,n,e){const o=re();return Gt(o,Na(),n)&&fo(bt(),kn(),o,t,n,o[11],e,!0),ca}const Nc=void 0;var MR=["en",[["a","p"],["AM","PM"],Nc],[["AM","PM"],Nc,Nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nc,"{1} 'at' {0}",Nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DR(t){const e=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===o?1:5}];let th={};function go(t){const n=function AR(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=xD(n);if(e)return e;const o=n.split("-")[0];if(e=xD(o),e)return e;if("en"===o)return MR;throw new pe(701,!1)}function xD(t){return t in th||(th[t]=Re.ng&&Re.ng.common&&Re.ng.common.locales&&Re.ng.common.locales[t]),th[t]}var ye=(()=>((ye=ye||{})[ye.LocaleId=0]="LocaleId",ye[ye.DayPeriodsFormat=1]="DayPeriodsFormat",ye[ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",ye[ye.DaysFormat=3]="DaysFormat",ye[ye.DaysStandalone=4]="DaysStandalone",ye[ye.MonthsFormat=5]="MonthsFormat",ye[ye.MonthsStandalone=6]="MonthsStandalone",ye[ye.Eras=7]="Eras",ye[ye.FirstDayOfWeek=8]="FirstDayOfWeek",ye[ye.WeekendRange=9]="WeekendRange",ye[ye.DateFormat=10]="DateFormat",ye[ye.TimeFormat=11]="TimeFormat",ye[ye.DateTimeFormat=12]="DateTimeFormat",ye[ye.NumberSymbols=13]="NumberSymbols",ye[ye.NumberFormats=14]="NumberFormats",ye[ye.CurrencyCode=15]="CurrencyCode",ye[ye.CurrencySymbol=16]="CurrencySymbol",ye[ye.CurrencyName=17]="CurrencyName",ye[ye.Currencies=18]="Currencies",ye[ye.Directionality=19]="Directionality",ye[ye.PluralCase=20]="PluralCase",ye[ye.ExtraData=21]="ExtraData",ye))();const OR=["zero","one","two","few","many"],nh="en-US",Xv={marker:"element"},Zv={marker:"ICU"};var qn=(()=>((qn=qn||{})[qn.SHIFT=2]="SHIFT",qn[qn.APPEND_EAGERLY=1]="APPEND_EAGERLY",qn[qn.COMMENT=2]="COMMENT",qn))();let ED=nh;function TD(t){(function $i(t,n){null==t&&Ft(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(ED=t.toLowerCase().replace(/_/g,"-"))}function DD(t,n,e){const o=n.insertBeforeIndex,s=Array.isArray(o)?o[0]:o;return null===s?rd(t,0,e):fn(e[s])}function MD(t,n,e,o,s){const l=n.insertBeforeIndex;if(Array.isArray(l)){let h=o,p=null;if(3&n.type||(p=h,h=s),null!==h&&0==(2&n.flags))for(let m=1;m<l.length;m++)Di(t,h,e[l[m]],p,!1)}}function SD(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const o=t[e];AD(o)||RR(o,n)&&null===FR(o)&&LR(o,n.index)}}function AD(t){return!(64&t.type)}function RR(t,n){return AD(n)||t.index>n.index}function FR(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function LR(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(O_(DD,MD),t.insertBeforeIndex=n)}function Kp(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function jR(t,n,e){const o=Ap(t,e,64,null,null);return SD(n,o),o}function eb(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function OD(t){return t>>>17}function PD(t){return(131070&t)>>>1}let Jp=0,Yp=0;function ID(t,n,e,o){const s=e[11];let h,l=null;for(let p=0;p<n.length;p++){const m=n[p];if("string"==typeof m){const v=n[++p];null===e[v]&&(e[v]=Qo(s,m))}else if("number"==typeof m)switch(1&m){case 0:const v=OD(m);let C,D;if(null===l&&(l=v,h=od(s,o)),v===l?(C=o,D=h):(C=null,D=fn(e[v])),null!==D){const q=PD(m);Di(s,D,e[q],C,!1);const Q=Kp(t,q);if(null!==Q&&"object"==typeof Q){const te=eb(Q,e);null!==te&&ID(t,Q.create[te],e,e[Q.anchorIdx])}}break;case 1:const V=n[++p],U=n[++p];Vp(s,xu(m>>>1,e),null,null,V,U,null)}else switch(m){case Zv:const v=n[++p],C=n[++p];null===e[C]&&si(e[C]=jf(s,v),e);break;case Xv:const D=n[++p],N=n[++p];null===e[N]&&si(e[N]=pc(s,D,null),e)}}}function RD(t,n,e,o,s){for(let l=0;l<e.length;l++){const h=e[l],p=e[++l];if(h&s){let m="";for(let v=l+1;v<=l+p;v++){const C=e[v];if("string"==typeof C)m+=C;else if("number"==typeof C)if(C<0)m+=Je(n[o-C]);else{const D=C>>>2;switch(3&C){case 1:const N=e[++v],V=e[++v],U=t.data[D];"string"==typeof U?Vp(n[11],n[D],null,U,N,m,V):fo(t,U,n,N,m,n[11],V,!1);break;case 0:const q=n[D];null!==q&&Ua(n[11],q,m);break;case 2:GR(t,Kp(t,D),n,m);break;case 3:FD(t,Kp(t,D),o,n)}}}}else{const m=e[l+1];if(m>0&&3==(3&m)){const C=Kp(t,m>>>2);n[C.currentCaseLViewIndex]<0&&FD(t,C,o,n)}}l+=p}}function FD(t,n,e,o){let s=o[n.currentCaseLViewIndex];if(null!==s){let l=Jp;s<0&&(s=o[n.currentCaseLViewIndex]=~s,l=-1),RD(t,o,n.update[s],e,l)}}function GR(t,n,e,o){const s=function qR(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const o=function PR(t,n){const e=function kD(t){return go(t)[ye.PluralCase]}(n)(parseInt(t,10)),o=OR[e];return void 0!==o?o:"other"}(n,function IR(){return ED}());e=t.cases.indexOf(o),-1===e&&"other"!==o&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,o);if(eb(n,e)!==s&&(LD(t,n,e),e[n.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const h=e[n.anchorIdx];h&&ID(t,n.create[s],e,h)}}function LD(t,n,e){let o=eb(n,e);if(null!==o){const s=n.remove[o];for(let l=0;l<s.length;l++){const h=s[l];if(h>0){const p=xu(h,e);null!==p&&ld(e[11],p)}else LD(t,Kp(t,~h),e)}}}function WR(){const t=[];let e,o,n=-1;function l(p,m){n=0;const v=eb(p,m);o=null!==v?p.remove[v]:Mt}function h(){if(n<o.length){const p=o[n++];return p>0?e[p]:(t.push(n,o),l(e[1].data[~p],e),h())}return 0===t.length?null:(o=t.pop(),n=t.pop(),h())}return function s(p,m){for(e=m;t.length;)t.pop();return l(p.value,m),h}}const tb=/\ufffd(\d+):?\d*\ufffd/gi,JR=/\ufffd(\d+)\ufffd/,VD=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,YR=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,QR=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,XR=/\uE500/g;function jD(t,n,e,o,s,l,h){const p=sl(t,o,1,null);let m=p<<qn.SHIFT,v=Wl();n===v&&(v=null),null===v&&(m|=qn.APPEND_EAGERLY),h&&(m|=qn.COMMENT,function k1(t){void 0===Bf&&(Bf=t())}(WR)),s.push(m,null===l?"":l);const C=Ap(t,p,h?32:1,null===l?"":l,null);SD(e,C);const D=C.index;return qo(C,!1),null!==v&&n!==v&&function VR(t,n){let e=t.insertBeforeIndex;null===e?(O_(DD,MD),e=t.insertBeforeIndex=[null,n]):(function Oi(t,n,e){t!=n&&Ft(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(v,D),C}function t3(t,n,e,o,s,l,h){const p=h.match(tb),m=jD(t,n,e,l,o,p?null:h,!1);p&&Xp(s,h,m.index,null,0,null)}function Xp(t,n,e,o,s,l){const h=t.length,p=h+1;t.push(null,null);const m=h+2,v=n.split(tb);let C=0;for(let D=0;D<v.length;D++){const N=v[D];if(1&D){const V=s+parseInt(N,10);t.push(-1-V),C|=HD(V)}else""!==N&&t.push(N)}return t.push(e<<2|(o?1:0)),o&&t.push(o,l),t[h]=C,t[p]=t.length-m,C}function HD(t){return 1<<Math.min(t,31)}function zD(t){let n,l,e="",o=0,s=!1;for(;null!==(n=YR.exec(t));)s?n[0]===`\ufffd/*${l}\ufffd`&&(o=n.index,s=!1):(e+=t.substring(o,n.index+n[0].length),l=n[1],s=!0);return e+=t.slice(o),e}function $D(t,n,e,o,s,l){let h=0;const p={type:s.type,currentCaseLViewIndex:sl(t,n,1,null),anchorIdx:l,cases:[],create:[],remove:[],update:[]};(function c3(t,n,e){t.push(HD(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,s,l),function BR(t,n,e){const o=t.data[n];null===o?t.data[n]=e:o.value=e}(t,l,p);const m=s.values;for(let v=0;v<m.length;v++){const C=m[v],D=[];for(let N=0;N<C.length;N++){const V=C[N];if("string"!=typeof V){const U=D.push(V)-1;C[N]=`\x3c!--\ufffd${U}\ufffd--\x3e`}}h=a3(t,p,n,e,o,s.cases[v],C.join(""),D)|h}h&&function u3(t,n,e){t.push(n,1,e<<2|3)}(e,h,l)}function s3(t){const n=[],e=[];let o=1,s=0;const l=aC(t=t.replace(VD,function(h,p,m){return o="select"===m?0:1,s=parseInt(p.slice(1),10),""}));for(let h=0;h<l.length;){let p=l[h++].trim();1===o&&(p=p.replace(/\s*(?:=)?(\w+)\s*/,"$1")),p.length&&n.push(p);const m=aC(l[h++]);n.length>e.length&&e.push(m)}return{type:o,mainBinding:s,cases:n,values:e}}function aC(t){if(!t)return[];let n=0;const e=[],o=[],s=/[{}]/g;let l;for(s.lastIndex=0;l=s.exec(t);){const p=l.index;if("}"==l[0]){if(e.pop(),0==e.length){const m=t.substring(n,p);VD.test(m)?o.push(s3(m)):o.push(m),n=p+1}}else{if(0==e.length){const m=t.substring(n,p);o.push(m),n=p+1}e.push("{")}}const h=t.substring(n);return o.push(h),o}function a3(t,n,e,o,s,l,h,p){const m=[],v=[],C=[];n.cases.push(l),n.create.push(m),n.remove.push(v),n.update.push(C);const N=H_(Yf()).getInertBodyElement(h),V=tp(N)||N;return V?UD(t,n,e,o,m,v,C,V,s,p,0):0}function UD(t,n,e,o,s,l,h,p,m,v,C){let D=0,N=p.firstChild;for(;N;){const V=sl(t,e,1,null);switch(N.nodeType){case Node.ELEMENT_NODE:const U=N,q=U.tagName.toLowerCase();if(Zf.hasOwnProperty(q)){lC(s,Xv,q,m,V),t.data[V]=q;const X=U.attributes;for(let ce=0;ce<X.length;ce++){const ve=X.item(ce),me=ve.name.toLowerCase();ve.value.match(tb)?G_.hasOwnProperty(me)&&Xp(h,ve.value,V,ve.name,0,ep[me]?pd:null):d3(s,V,ve)}D=UD(t,n,e,o,s,l,h,N,V,v,C+1)|D,GD(l,V,C)}break;case Node.TEXT_NODE:const J=N.textContent||"",Q=J.match(tb);lC(s,null,Q?"":J,m,V),GD(l,V,C),Q&&(D=Xp(h,J,V,null,0,null)|D);break;case Node.COMMENT_NODE:const te=JR.exec(N.textContent||"");if(te){const ce=v[parseInt(te[1],10)];lC(s,Zv,"",m,V),$D(t,e,o,m,ce,V),l3(l,V,C)}}N=N.nextSibling}return D}function GD(t,n,e){0===e&&t.push(n)}function l3(t,n,e){0===e&&(t.push(~n),t.push(n))}function lC(t,n,e,o,s){null!==n&&t.push(n),t.push(e,s,function HR(t,n,e){return t|n<<17|e<<1}(0,o,s))}function d3(t,n,e){t.push(n<<1|1,e.name,e.value)}function WD(t,n,e=-1){const o=bt(),s=re(),l=22+t,h=lo(o.consts,n),p=Wl();o.firstCreatePass&&function e3(t,n,e,o,s,l){const h=Wl(),p=[],m=[],v=[[]];s=function r3(t,n){if(function o3(t){return-1===t}(n))return zD(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,o=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return zD(t.substring(e,o))}}(s,l);const C=function ZR(t){return t.replace(XR," ")}(s).split(QR);for(let D=0;D<C.length;D++){let N=C[D];if(0==(1&D)){const V=aC(N);for(let U=0;U<V.length;U++){let q=V[U];if(0==(1&U)){const J=q;""!==J&&t3(t,h,v[0],p,m,e,J)}else{const J=q;if("object"!=typeof J)throw new Error(`Unable to parse ICU expression in "${s}" message.`);$D(t,e,m,n,J,jD(t,h,v[0],e,p,"",!0).index)}}}else{const V=47===N.charCodeAt(0),q=(N.charCodeAt(V?1:0),22+Number.parseInt(N.substring(V?2:1)));if(V)v.shift(),qo(Wl(),!1);else{const J=jR(t,v[0],q);v.unshift([]),qo(J,!0)}}}t.data[o]={create:p,update:m}}(o,null===p?0:p.index,s,l,h,e);const m=o.data[l],C=Gf(o,p===s[6]?null:p,s);(function UR(t,n,e,o){const s=t[11];for(let l=0;l<n.length;l++){const h=n[l++],p=n[l],m=(h&qn.COMMENT)===qn.COMMENT,v=(h&qn.APPEND_EAGERLY)===qn.APPEND_EAGERLY,C=h>>>qn.SHIFT;let D=t[C];null===D&&(D=t[C]=m?s.createComment(p):Qo(s,p)),v&&null!==e&&Di(s,e,D,o,!1)}})(s,m.create,C,p&&8&p.type?s[p.index]:null),Ia(!0)}function ua(t,n,e){WD(t,n,e),function KD(){Ia(!1)}()}function nb(t){return function zR(t){t&&(Jp|=1<<Math.min(Yp,31)),Yp++}(Gt(re(),Na(),t)),nb}function uC(t,n,e,o,s){if(t=Ie(t),Array.isArray(t))for(let l=0;l<t.length;l++)uC(t[l],n,e,o,s);else{const l=bt(),h=re();let p=Vr(t)?t:Ie(t.provide),m=kd(t);const v=Pn(),C=1048575&v.providerIndexes,D=v.directiveStart,N=v.providerIndexes>>20;if(Vr(t)||!t.multi){const V=new $s(m,s,z),U=hC(p,n,s?C:C+N,D);-1===U?(tc(Va(v,h),l,p),dC(l,t,n.length),n.push(p),v.directiveStart++,v.directiveEnd++,s&&(v.providerIndexes+=1048576),e.push(V),h.push(V)):(e[U]=V,h[U]=V)}else{const V=hC(p,n,C+N,D),U=hC(p,n,C,C+N),q=V>=0&&e[V],J=U>=0&&e[U];if(s&&!J||!s&&!q){tc(Va(v,h),l,p);const Q=function E3(t,n,e,o,s){const l=new $s(t,e,z);return l.multi=[],l.index=n,l.componentProviders=0,JD(l,s,o&&!e),l}(s?x3:k3,e.length,s,o,m);!s&&J&&(e[U].providerFactory=Q),dC(l,t,n.length,0),n.push(p),v.directiveStart++,v.directiveEnd++,s&&(v.providerIndexes+=1048576),e.push(Q),h.push(Q)}else dC(l,t,V>-1?V:U,JD(e[s?U:V],m,!s&&o));!s&&o&&J&&e[U].componentProviders++}}}function dC(t,n,e,o){const s=Vr(n),l=function Cc(t){return!!t.useClass}(n);if(s||l){const m=(l?Ie(n.useClass):n).prototype.ngOnDestroy;if(m){const v=t.destroyHooks||(t.destroyHooks=[]);if(!s&&n.multi){const C=v.indexOf(e);-1===C?v.push(e,[o,m]):v[C+1].push(o,m)}else v.push(e,m)}}}function JD(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function hC(t,n,e,o){for(let s=e;s<o;s++)if(n[s]===t)return s;return-1}function k3(t,n,e,o){return fC(this.multi,[])}function x3(t,n,e,o){const s=this.multi;let l;if(this.providerFactory){const h=this.providerFactory.componentProviders,p=Jo(e,e[1],this.providerFactory.index,o);l=p.slice(0,h),fC(s,l);for(let m=h;m<p.length;m++)l.push(p[m])}else l=[],fC(s,l);return l}function fC(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function on(t,n=[]){return e=>{e.providersResolver=(o,s)=>function C3(t,n,e){const o=bt();if(o.firstCreatePass){const s=Go(t);uC(e,o.data,o.blueprint,s,!0),uC(n,o.data,o.blueprint,s,!1)}}(o,s?s(t):t,n)}}class Ic{}class YD{}class QD extends Ic{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pc(this);const o=ro(n);this._bootstrapComponents=jr(o.bootstrap),this._r3Injector=pv(n,e,[{provide:Ic,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver}],nn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class pC extends YD{constructor(n){super(),this.moduleType=n}create(n){return new QD(this.moduleType,n)}}class D3 extends Ic{constructor(n,e,o){super(),this.componentFactoryResolver=new Pc(this),this.instance=null;const s=new X_([...n,{provide:Ic,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver}],e||xc(),o,new Set(["environment"]));this.injector=s,s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function ib(t,n,e=null){return new D3(t,n,e).injector}let M3=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const o=ip(0,e.type),s=o.length>0?ib([o],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,s)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=de({token:t,providedIn:"environment",factory:()=>new t(ie(gs))}),t})();function XD(t){t.getStandaloneInjector=n=>n.get(M3).getOrCreateStandaloneInjector(t)}function da(t,n,e){const o=ki()+t,s=re();return s[o]===Ge?qe(s,o,e?n.call(e):n()):function Nn(t,n){return t[n]}(s,o)}function Ee(t,n,e,o){return rM(re(),ki(),t,n,e,o)}function Cs(t,n,e,o,s){return sM(re(),ki(),t,n,e,o,s)}function ih(t,n,e,o,s,l){return aM(re(),ki(),t,n,e,o,s,l)}function Zp(t,n){const e=t[n];return e===Ge?void 0:e}function rM(t,n,e,o,s,l){const h=n+e;return Gt(t,h,s)?qe(t,h+1,l?o.call(l,s):o(s)):Zp(t,h+1)}function sM(t,n,e,o,s,l,h){const p=n+e;return vr(t,p,s,l)?qe(t,p+2,h?o.call(h,s,l):o(s,l)):Zp(t,p+2)}function aM(t,n,e,o,s,l,h,p){const m=n+e;return function nr(t,n,e,o,s){const l=vr(t,n,e,o);return Gt(t,n+2,s)||l}(t,m,s,l,h)?qe(t,m+3,p?o.call(p,s,l,h):o(s,l,h)):Zp(t,m+3)}function xe(t,n){const e=bt();let o;const s=t+22;e.firstCreatePass?(o=function $3(t,n){if(n)for(let e=n.length-1;e>=0;e--){const o=n[e];if(t===o.name)return o}}(n,e.pipeRegistry),e.data[s]=o,o.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(s,o.onDestroy)):o=e.data[s];const l=o.factory||(o.factory=Or(o.type)),h=oo(z);try{const p=Ba(!1),m=l();return Ba(p),function z2(t,n,e,o){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=o}(e,re(),s,m),m}finally{oo(h)}}function je(t,n,e){const o=t+22,s=re(),l=Bs(s,o);return eg(s,o)?rM(s,ki(),n,l.transform,e,l):l.transform(e)}function Gr(t,n,e,o){const s=t+22,l=re(),h=Bs(l,s);return eg(l,s)?sM(l,ki(),n,h.transform,e,o,h):h.transform(e,o)}function oh(t,n,e,o,s){const l=t+22,h=re(),p=Bs(h,l);return eg(h,l)?aM(h,ki(),n,p.transform,e,o,s,p):p.transform(e,o,s)}function eg(t,n){return t[1].data[n].pure}function mC(t){return n=>{setTimeout(t,void 0,n)}}const Te=class q3 extends mt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,o){let s=n,l=e||(()=>null),h=o;if(n&&"object"==typeof n){const m=n;s=m.next?.bind(m),l=m.error?.bind(m),h=m.complete?.bind(m)}this.__isAsync&&(l=mC(l),s&&(s=mC(s)),h&&(h=mC(h)));const p=super.subscribe({next:s,error:l,complete:h});return n instanceof Se&&n.add(p),p}};function W3(){return this._results[F()]()}class _C{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=F(),o=_C.prototype;o[e]||(o[e]=W3)}get changes(){return this._changes||(this._changes=new Te)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const o=this;o.dirty=!1;const s=co(n);(this._changesDetected=!function ic(t,n,e){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let s=t[o],l=n[o];if(e&&(s=e(s),l=e(l)),l!==s)return!1}return!0}(o._results,s,e))&&(o._results=s,o.length=s.length,o.last=s[this.length-1],o.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let En=(()=>{class t{}return t.__NG_ELEMENT_ID__=Y3,t})();const K3=En,J3=class extends K3{constructor(n,e,o){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=o}createEmbeddedView(n,e){const o=this._declarationTContainer.tViews,s=Vd(this._declarationLView,o,n,16,null,o.declTNode,null,null,null,null,e||null);s[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(s[19]=h.createEmbeddedView(o)),Op(o,s,n),new sa(s)}};function Y3(){return ob(Pn(),re())}function ob(t,n){return 4&t.type?new J3(n,t,ms(t,n)):null}let Ro=(()=>{class t{}return t.__NG_ELEMENT_ID__=Q3,t})();function Q3(){return hM(Pn(),re())}const X3=Ro,uM=class extends X3{constructor(n,e,o){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=o}get element(){return ms(this._hostTNode,this._hostLView)}get injector(){return new Fr(this._hostTNode,this._hostLView)}get parentInjector(){const n=ec(this._hostTNode,this._hostLView);if(qm(n)){const e=Us(n,this._hostLView),o=Rr(n);return new Fr(e[1].data[o+8],e)}return new Fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=dM(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,o){let s,l;"number"==typeof o?s=o:null!=o&&(s=o.index,l=o.injector);const h=n.createEmbeddedView(e||{},l);return this.insert(h,s),h}createComponent(n,e,o,s,l){const h=n&&!function ja(t){return"function"==typeof t}(n);let p;if(h)p=e;else{const D=e||{};p=D.index,o=D.injector,s=D.projectableNodes,l=D.environmentInjector||D.ngModuleRef}const m=h?n:new Xn(vt(n)),v=o||this.parentInjector;if(!l&&null==m.ngModule){const N=(h?v:this.parentInjector).get(gs,null);N&&(l=N)}const C=m.create(v,s,void 0,l);return this.insert(C.hostView,p),C}insert(n,e){const o=n._lView,s=o[1];if(function zy(t){return Uo(t[3])}(o)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const D=o[3],N=new uM(D,D[6],D[3]);N.detach(N.indexOf(n))}}const l=this._adjustIndex(e),h=this._lContainer;!function Hf(t,n,e,o){const s=10+o,l=e.length;o>0&&(e[s-1][4]=n),o<l-10?(n[4]=e[s],fs(e,10+o,n)):(e.push(n),n[4]=null),n[3]=e;const h=n[17];null!==h&&e!==h&&function E1(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(h,n);const p=n[19];null!==p&&p.insertView(t),n[2]|=64}(s,o,h,l);const p=yt(l,h),m=o[11],v=od(m,h[7]);return null!==v&&function S_(t,n,e,o,s,l){o[0]=s,o[6]=n,vc(t,o,e,1,s,l)}(s,h[6],m,o,v,p),n.attachToViewContainerRef(),fs(vC(h),l,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=dM(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),o=nd(this._lContainer,e);o&&($u(vC(this._lContainer),e),zf(o[1],o))}detach(n){const e=this._adjustIndex(n,-1),o=nd(this._lContainer,e);return o&&null!=$u(vC(this._lContainer),e)?new sa(o):null}_adjustIndex(n,e=0){return n??this.length+e}};function dM(t){return t[8]}function vC(t){return t[8]||(t[8]=[])}function hM(t,n){let e;const o=n[t.index];if(Uo(o))e=o;else{let s;if(8&t.type)s=fn(o);else{const l=n[11];s=l.createComment("");const h=ct(t,n);Di(l,od(l,h),s,function M1(t,n){return t.nextSibling(n)}(l,h),!1)}n[t.index]=e=Jv(o,n,s,t),Oc(n,e)}return new uM(e,t,n)}class bC{constructor(n){this.queryList=n,this.matches=null}clone(){return new bC(this.queryList)}setDirty(){this.queryList.setDirty()}}class yC{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const o=null!==n.contentQueries?n.contentQueries[0]:e.length,s=[];for(let l=0;l<o;l++){const h=e.getByIndex(l);s.push(this.queries[h.indexInDeclarationView].clone())}return new yC(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==_M(n,e).matches&&this.queries[e].setDirty()}}class fM{constructor(n,e,o=null){this.predicate=n,this.flags=e,this.read=o}}class wC{constructor(n=[]){this.queries=n}elementStart(n,e){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let o=0;o<this.length;o++){const s=null!==e?e.length:0,l=this.getByIndex(o).embeddedTView(n,s);l&&(l.indexInDeclarationView=o,null!==e?e.push(l):e=[l])}return null!==e?new wC(e):null}template(n,e){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class CC{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new CC(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==e;)o=o.parent;return e===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const o=this.metadata.predicate;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=o[s];this.matchTNodeWithReadOption(n,e,tF(e,l)),this.matchTNodeWithReadOption(n,e,Do(e,n,l,!1,!1))}else o===En?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Do(e,n,o,!1,!1))}matchTNodeWithReadOption(n,e,o){if(null!==o){const s=this.metadata.read;if(null!==s)if(s===Ot||s===Ro||s===En&&4&e.type)this.addMatch(e.index,-2);else{const l=Do(e,n,s,!1,!1);null!==l&&this.addMatch(e.index,l)}else this.addMatch(e.index,o)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function tF(t,n){const e=t.localNames;if(null!==e)for(let o=0;o<e.length;o+=2)if(e[o]===n)return e[o+1];return null}function iF(t,n,e,o){return-1===e?function nF(t,n){return 11&t.type?ms(t,n):4&t.type?ob(t,n):null}(n,t):-2===e?function oF(t,n,e){return e===Ot?ms(n,t):e===En?ob(n,t):e===Ro?hM(n,t):void 0}(t,n,o):Jo(t,t[1],e,n)}function pM(t,n,e,o){const s=n[19].queries[o];if(null===s.matches){const l=t.data,h=e.matches,p=[];for(let m=0;m<h.length;m+=2){const v=h[m];p.push(v<0?null:iF(n,l[v],h[m+1],e.metadata.read))}s.matches=p}return s.matches}function kC(t,n,e,o){const s=t.queries.getByIndex(e),l=s.matches;if(null!==l){const h=pM(t,n,s,e);for(let p=0;p<l.length;p+=2){const m=l[p];if(m>0)o.push(h[p/2]);else{const v=l[p+1],C=n[-m];for(let D=10;D<C.length;D++){const N=C[D];N[17]===N[3]&&kC(N[1],N,v,o)}if(null!==C[9]){const D=C[9];for(let N=0;N<D.length;N++){const V=D[N];kC(V[1],V,v,o)}}}}}return o}function Zt(t){const n=re(),e=bt(),o=mf();Ra(o+1);const s=_M(e,o);if(t.dirty&&function Im(t){return 4==(4&t[2])}(n)===(2==(2&s.metadata.flags))){if(null===s.matches)t.reset([]);else{const l=s.crossesNgTemplate?kC(e,n,o,[]):pM(e,n,s,o);t.reset(l,rw),t.notifyOnChanges()}return!0}return!1}function ha(t,n,e){const o=bt();o.firstCreatePass&&(mM(o,new fM(t,n,e),-1),2==(2&n)&&(o.staticViewQueries=!0)),gM(o,re(),n)}function Wn(t,n,e,o){const s=bt();if(s.firstCreatePass){const l=Pn();mM(s,new fM(n,e,o),l.index),function sF(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(s,t),2==(2&e)&&(s.staticContentQueries=!0)}gM(s,re(),e)}function en(){return function rF(t,n){return t[19].queries[n].queryList}(re(),mf())}function gM(t,n,e){const o=new _C(4==(4&e));Hd(t,n,o,o.destroy),null===n[19]&&(n[19]=new yC),n[19].queries.push(new bC(o))}function mM(t,n,e){null===t.queries&&(t.queries=new wC),t.queries.track(new CC(n,e))}function _M(t,n){return t.queries.getByIndex(n)}function Xe(t,n){return ob(t,n)}function sb(...t){}const ab=new De("Application Initializer");let lb=(()=>{class t{constructor(e){this.appInits=e,this.resolve=sb,this.reject=sb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,s)=>{this.resolve=o,this.reject=s})}runInitializers(){if(this.initialized)return;const e=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const l=this.appInits[s]();if(Up(l))e.push(l);else if(rC(l)){const h=new Promise((p,m)=>{l.subscribe({complete:p,error:m})});e.push(h)}}Promise.all(e).then(()=>{o()}).catch(s=>{this.reject(s)}),0===e.length&&o(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ie(ab,8))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ng=new De("AppId",{providedIn:"root",factory:function FM(){return`${MC()}${MC()}${MC()}`}});function MC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LM=new De("Platform Initializer"),cb=new De("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BM=new De("appBootstrapListener");let TF=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const yr=new De("LocaleId",{providedIn:"root",factory:()=>ot(yr,Pe.Optional|Pe.SkipSelf)||function DF(){return typeof $localize<"u"&&$localize.locale||nh}()});class SF{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let SC=(()=>{class t{compileModuleSync(e){return new pC(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const o=this.compileModuleSync(e),l=jr(ro(e).declarations).reduce((h,p)=>{const m=vt(p);return m&&h.push(new Xn(m)),h},[]);return new SF(o,l)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const PF=(()=>Promise.resolve(0))();function AC(t){typeof Zone>"u"?PF.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ht{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const s=this;if(s._nesting=0,s._outer=s._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const l=Zone.AsyncStackTaggingZoneSpec;s._inner=s._inner.fork(new l("Angular"))}Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&e,s.shouldCoalesceRunChangeDetection=o,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function NF(){let t=Re.requestAnimationFrame,n=Re.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function FF(t){const n=()=>{!function RF(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Re,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,PC(t),t.isCheckStableRunning=!0,OC(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),PC(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,o,s,l,h,p)=>{try{return HM(t),e.invokeTask(s,l,h,p)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||t.shouldCoalesceRunChangeDetection)&&n(),zM(t)}},onInvoke:(e,o,s,l,h,p,m)=>{try{return HM(t),e.invoke(s,l,h,p,m)}finally{t.shouldCoalesceRunChangeDetection&&n(),zM(t)}},onHasTask:(e,o,s,l)=>{e.hasTask(s,l),o===s&&("microTask"==l.change?(t._hasPendingMicrotasks=l.microTask,PC(t),OC(t)):"macroTask"==l.change&&(t.hasPendingMacrotasks=l.macroTask))},onHandleError:(e,o,s,l)=>(e.handleError(s,l),t.runOutsideAngular(()=>t.onError.emit(l)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ht.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Ht.isInAngularZone())throw new pe(909,!1)}run(n,e,o){return this._inner.run(n,e,o)}runTask(n,e,o,s){const l=this._inner,h=l.scheduleEventTask("NgZoneEvent: "+s,n,IF,sb,sb);try{return l.runTask(h,e,o)}finally{l.cancelTask(h)}}runGuarded(n,e,o){return this._inner.runGuarded(n,e,o)}runOutsideAngular(n){return this._outer.run(n)}}const IF={};function OC(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function PC(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function HM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zM(t){t._nesting--,OC(t)}class LF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Te,this.onMicrotaskEmpty=new Te,this.onStable=new Te,this.onError=new Te}run(n,e,o){return n.apply(e,o)}runGuarded(n,e,o){return n.apply(e,o)}runOutsideAngular(n){return n()}runTask(n,e,o,s){return n.apply(e,o)}}const $M=new De(""),ub=new De("");let RC,NC=(()=>{class t{constructor(e,o,s){this._ngZone=e,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,RC||(function BF(t){RC=t}(s),s.addToWindow(o)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ht.assertNotInAngularZone(),AC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())AC(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(e)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,o,s){let l=-1;o&&o>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==l),e(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:e,timeoutId:l,updateCb:s})}whenStable(e,o,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,o,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,o,s){return[]}}return t.\u0275fac=function(e){return new(e||t)(ie(Ht),ie(IC),ie(ub))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),IC=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,o){this._applications.set(e,o)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,o=!0){return RC?.findTestabilityInTree(this,e,o)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),ll=null;const UM=new De("AllowMultipleToken"),FC=new De("PlatformDestroyListeners");class GM{constructor(n,e){this.name=n,this.token=e}}function WM(t,n,e=[]){const o=`Platform: ${n}`,s=new De(o);return(l=[])=>{let h=LC();if(!h||h.injector.get(UM,!1)){const p=[...e,...l,{provide:s,useValue:!0}];t?t(p):function HF(t){if(ll&&!ll.get(UM,!1))throw new pe(400,!1);ll=t;const n=t.get(JM);(function qM(t){const n=t.get(LM,null);n&&n.forEach(e=>e())})(t)}(function KM(t=[],n){return Gn.create({name:n,providers:[{provide:rp,useValue:"platform"},{provide:FC,useValue:new Set([()=>ll=null])},...t]})}(p,o))}return function $F(t){const n=LC();if(!n)throw new pe(401,!1);return n}()}}function LC(){return ll?.get(JM)??null}let JM=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,o){const s=function QM(t,n){let e;return e="noop"===t?new LF:("zone.js"===t?void 0:t)||new Ht(n),e}(o?.ngZone,function YM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(o)),l=[{provide:Ht,useValue:s}];return s.run(()=>{const h=Gn.create({providers:l,parent:this.injector,name:e.moduleType.name}),p=e.create(h),m=p.injector.get(oa,null);if(!m)throw new pe(402,!1);return s.runOutsideAngular(()=>{const v=s.onError.subscribe({next:C=>{m.handleError(C)}});p.onDestroy(()=>{db(this._modules,p),v.unsubscribe()})}),function XM(t,n,e){try{const o=e();return Up(o)?o.catch(s=>{throw n.runOutsideAngular(()=>t.handleError(s)),s}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(m,s,()=>{const v=p.injector.get(lb);return v.runInitializers(),v.donePromise.then(()=>(TD(p.injector.get(yr,nh)||nh),this._moduleDoBootstrap(p),p))})})}bootstrapModule(e,o=[]){const s=ZM({},o);return function VF(t,n,e){const o=new pC(e);return Promise.resolve(o)}(0,0,e).then(l=>this.bootstrapModuleFactory(l,s))}_moduleDoBootstrap(e){const o=e.injector.get(Rc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>o.bootstrap(s));else{if(!e.instance.ngDoBootstrap)throw new pe(403,!1);e.instance.ngDoBootstrap(o)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const e=this._injector.get(FC,null);e&&(e.forEach(o=>o()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ie(Gn))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function ZM(t,n){return Array.isArray(n)?n.reduce(ZM,t):{...t,...n}}let Rc=(()=>{class t{constructor(e,o,s){this._zone=e,this._injector=o,this._exceptionHandler=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new Wt(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),h=new Wt(p=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Ht.assertNotInAngularZone(),AC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{Ht.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});this.isStable=Uh(l,h.pipe(Gh()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,o){const s=e instanceof Ec;if(!this._injector.get(lb).done)throw!s&&function Sr(t){const n=vt(t)||wn(t)||wi(t);return null!==n&&n.standalone}(e),new pe(405,false);let h;h=s?e:this._injector.get(Tc).resolveComponentFactory(e),this.componentTypes.push(h.componentType);const p=function jF(t){return t.isBoundToModule}(h)?void 0:this._injector.get(Ic),v=h.create(Gn.NULL,[],o||h.selector,p),C=v.location.nativeElement,D=v.injector.get($M,null);return D?.registerApplication(C),v.onDestroy(()=>{this.detachView(v.hostView),db(this.components,v),D?.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const o=e;this._views.push(o),o.attachToAppRef(this)}detachView(e){const o=e;db(this._views,o),o.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(BM,[]).concat(this._bootstrapListeners).forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>db(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new pe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(ie(Ht),ie(gs),ie(oa))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function db(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let tS=!0,ir=(()=>{class t{}return t.__NG_ELEMENT_ID__=qF,t})();function qF(t){return function WF(t,n,e){if(wu(t)&&!e){const o=qi(t.index,n);return new sa(o,o)}return 47&t.type?new sa(n[16],n):null}(Pn(),re(),16==(16&t))}class sS{constructor(){}supports(n){return G(n)}create(n){return new ZF(n)}}const XF=(t,n)=>n;class ZF{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||XF}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,o=this._removalsHead,s=0,l=null;for(;e||o;){const h=!o||e&&e.currentIndex<lS(o,s,l)?e:o,p=lS(h,s,l),m=h.currentIndex;if(h===o)s--,o=o._nextRemoved;else if(e=e._next,null==h.previousIndex)s++;else{l||(l=[]);const v=p-s,C=m-s;if(v!=C){for(let N=0;N<v;N++){const V=N<l.length?l[N]:l[N]=0,U=V+N;C<=U&&U<v&&(l[N]=V+1)}l[h.previousIndex]=C-v}}p!==m&&n(h,p,m)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!G(n))throw new pe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s,l,h,e=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let p=0;p<this.length;p++)l=n[p],h=this._trackByFn(p,l),null!==e&&Object.is(e.trackById,h)?(o&&(e=this._verifyReinsertion(e,l,h,p)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,h,p),o=!0),e=e._next}else s=0,function oe(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[F()]();let o;for(;!(o=e.next()).done;)n(o.value)}}(n,p=>{h=this._trackByFn(s,p),null!==e&&Object.is(e.trackById,h)?(o&&(e=this._verifyReinsertion(e,p,h,s)),Object.is(e.item,p)||this._addIdentityChange(e,p)):(e=this._mismatch(e,p,h,s),o=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,o,s){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,l,s)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,s))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,l,s)):n=this._addAfter(new e5(e,o),l,s),n}_verifyReinsertion(n,e,o,s){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==l?n=this._reinsertAfter(l,n._prev,s):n.currentIndex!=s&&(n.currentIndex=s,this._addToMoves(n,s)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const s=n._prevRemoved,l=n._nextRemoved;return null===s?this._removalsHead=l:s._nextRemoved=l,null===l?this._removalsTail=s:l._prevRemoved=s,this._insertAfter(n,e,o),this._addToMoves(n,o),n}_moveAfter(n,e,o){return this._unlink(n),this._insertAfter(n,e,o),this._addToMoves(n,o),n}_addAfter(n,e,o){return this._insertAfter(n,e,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,o){const s=null===e?this._itHead:e._next;return n._next=s,n._prev=e,null===s?this._itTail=n:s._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new aS),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,o=n._next;return null===e?this._itHead=o:e._next=o,null===o?this._itTail=e:o._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aS),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class e5{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class t5{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===e||e<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const e=n._prevDup,o=n._nextDup;return null===e?this._head=o:e._nextDup=o,null===o?this._tail=e:o._prevDup=e,null===this._head}}class aS{constructor(){this.map=new Map}put(n){const e=n.trackById;let o=this.map.get(e);o||(o=new t5,this.map.set(e,o)),o.add(n)}get(n,e){const s=this.map.get(n);return s?s.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lS(t,n,e){const o=t.previousIndex;if(null===o)return o;let s=0;return e&&o<e.length&&(s=e[o]),o+n+s}class cS{constructor(){}supports(n){return n instanceof Map||ue(n)}create(){return new n5}}class n5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||ue(n)))throw new pe(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,s)=>{if(e&&e.key===s)this._maybeAddToChanges(e,o),this._appendAfter=e,e=e._next;else{const l=this._getOrCreateRecordForKey(s,o);e=this._insertBeforeOrAppend(e,l)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let o=e;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const o=n._prev;return e._next=n,e._prev=o,n._prev=e,o&&(o._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const s=this._records.get(n);this._maybeAddToChanges(s,e);const l=s._prev,h=s._next;return l&&(l._next=h),h&&(h._prev=l),s._next=null,s._prev=null,s}const o=new i5(n);return this._records.set(n,o),o.currentValue=e,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(o=>e(n[o],o))}}class i5{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uS(){return new pb([new sS])}let pb=(()=>{class t{constructor(e){this.factories=e}static create(e,o){if(null!=o){const s=o.factories.slice();e=e.concat(s)}return new t(e)}static extend(e){return{provide:t,useFactory:o=>t.create(e,o||uS()),deps:[[t,new lc,new ac]]}}find(e){const o=this.factories.find(s=>s.supports(e));if(null!=o)return o;throw new pe(901,!1)}}return t.\u0275prov=de({token:t,providedIn:"root",factory:uS}),t})();function dS(){return new ig([new cS])}let ig=(()=>{class t{constructor(e){this.factories=e}static create(e,o){if(o){const s=o.factories.slice();e=e.concat(s)}return new t(e)}static extend(e){return{provide:t,useFactory:o=>t.create(e,o||dS()),deps:[[t,new lc,new ac]]}}find(e){const o=this.factories.find(s=>s.supports(e));if(o)return o;throw new pe(901,!1)}}return t.\u0275prov=de({token:t,providedIn:"root",factory:dS}),t})();const s5=WM(null,"core",[]);let a5=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(ie(Rc))},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();function zC(t,n){const e=vt(t),o=n.elementInjector||xc();return new Xn(e).create(o,n.projectableNodes,n.hostElement,n.environmentInjector)}let gb=null;function ks(){return gb}const Tn=new De("DocumentToken");let $C=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return function d5(){return ie(hS)}()},providedIn:"platform"}),t})();const h5=new De("Location Initialized");let hS=(()=>{class t extends $C{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ks().getBaseHref(this._doc)}onPopState(e){const o=ks().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=ks().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,s){fS()?this._history.pushState(e,o,s):this.location.hash=s}replaceState(e,o,s){fS()?this._history.replaceState(e,o,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:function(){return function f5(){return new hS(ie(Tn))}()},providedIn:"platform"}),t})();function fS(){return!!window.history.pushState}function UC(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function pS(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function ga(t){return t&&"?"!==t[0]?"?"+t:t}let Lc=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return ot(mS)},providedIn:"root"}),t})();const gS=new De("appBaseHref");let mS=(()=>{class t extends Lc{constructor(e,o){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??ot(Tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return UC(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+ga(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${o}${s}`:o}pushState(e,o,s,l){const h=this.prepareExternalUrl(s+ga(l));this._platformLocation.pushState(e,o,h)}replaceState(e,o,s,l){const h=this.prepareExternalUrl(s+ga(l));this._platformLocation.replaceState(e,o,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(ie($C),ie(gS,8))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p5=(()=>{class t extends Lc{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=UC(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,s,l){let h=this.prepareExternalUrl(s+ga(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(e,o,h)}replaceState(e,o,s,l){let h=this.prepareExternalUrl(s+ga(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(ie($C),ie(gS,8))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),GC=(()=>{class t{constructor(e){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const o=this._locationStrategy.getBaseHref();this._baseHref=pS(_S(o)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+ga(o))}normalize(e){return t.stripTrailingSlash(function m5(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,_S(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,o="",s=null){this._locationStrategy.pushState(s,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ga(o)),s)}replaceState(e,o="",s=null){this._locationStrategy.replaceState(s,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ga(o)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(s=>s(e,o))}subscribe(e,o,s){return this._subject.subscribe({next:e,error:o,complete:s})}}return t.normalizeQueryParams=ga,t.joinWithSlash=UC,t.stripTrailingSlash=pS,t.\u0275fac=function(e){return new(e||t)(ie(Lc))},t.\u0275prov=de({token:t,factory:function(){return function g5(){return new GC(ie(Lc))}()},providedIn:"root"}),t})();function _S(t){return t.replace(/\/index.html$/,"")}var Fo=(()=>((Fo=Fo||{})[Fo.Decimal=0]="Decimal",Fo[Fo.Percent=1]="Percent",Fo[Fo.Currency=2]="Currency",Fo[Fo.Scientific=3]="Scientific",Fo))(),In=(()=>((In=In||{})[In.Format=0]="Format",In[In.Standalone=1]="Standalone",In))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),jn=(()=>((jn=jn||{})[jn.Short=0]="Short",jn[jn.Medium=1]="Medium",jn[jn.Long=2]="Long",jn[jn.Full=3]="Full",jn))(),Le=(()=>((Le=Le||{})[Le.Decimal=0]="Decimal",Le[Le.Group=1]="Group",Le[Le.List=2]="List",Le[Le.PercentSign=3]="PercentSign",Le[Le.PlusSign=4]="PlusSign",Le[Le.MinusSign=5]="MinusSign",Le[Le.Exponential=6]="Exponential",Le[Le.SuperscriptingExponent=7]="SuperscriptingExponent",Le[Le.PerMille=8]="PerMille",Le[Le.Infinity=9]="Infinity",Le[Le.NaN=10]="NaN",Le[Le.TimeSeparator=11]="TimeSeparator",Le[Le.CurrencyDecimal=12]="CurrencyDecimal",Le[Le.CurrencyGroup=13]="CurrencyGroup",Le))();function bS(t,n,e){const o=go(t),l=Cr([o[ye.DaysFormat],o[ye.DaysStandalone]],n);return Cr(l,e)}function qC(t,n,e){const o=go(t),l=Cr([o[ye.MonthsFormat],o[ye.MonthsStandalone]],n);return Cr(l,e)}function mb(t,n){return Cr(go(t)[ye.DateFormat],n)}function _b(t,n){return Cr(go(t)[ye.TimeFormat],n)}function vb(t,n){return Cr(go(t)[ye.DateTimeFormat],n)}function wr(t,n){const e=go(t),o=e[ye.NumberSymbols][n];if(typeof o>"u"){if(n===Le.CurrencyDecimal)return e[ye.NumberSymbols][Le.Decimal];if(n===Le.CurrencyGroup)return e[ye.NumberSymbols][Le.Group]}return o}function WC(t,n){return go(t)[ye.NumberFormats][n]}function yS(t){if(!t[ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Cr(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function KC(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const D5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,og={},M5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var fi=(()=>((fi=fi||{})[fi.Short=0]="Short",fi[fi.ShortGMT=1]="ShortGMT",fi[fi.Long=2]="Long",fi[fi.Extended=3]="Extended",fi))(),He=(()=>((He=He||{})[He.FullYear=0]="FullYear",He[He.Month=1]="Month",He[He.Date=2]="Date",He[He.Hours=3]="Hours",He[He.Minutes=4]="Minutes",He[He.Seconds=5]="Seconds",He[He.FractionalSeconds=6]="FractionalSeconds",He[He.Day=7]="Day",He))(),lt=(()=>((lt=lt||{})[lt.DayPeriods=0]="DayPeriods",lt[lt.Days=1]="Days",lt[lt.Months=2]="Months",lt[lt.Eras=3]="Eras",lt))();function wS(t,n,e,o){let s=function L5(t){if(xS(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[s,l=1,h=1]=t.split("-").map(p=>+p);return bb(s,l-1,h)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let o;if(o=t.match(D5))return function B5(t){const n=new Date(0);let e=0,o=0;const s=t[8]?n.setUTCFullYear:n.setFullYear,l=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),o=Number(t[9]+t[11])),s.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const h=Number(t[4]||0)-e,p=Number(t[5]||0)-o,m=Number(t[6]||0),v=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return l.call(n,h,p,m,v),n}(o)}const n=new Date(t);if(!xS(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=ma(e,n)||n;let p,h=[];for(;n;){if(p=M5.exec(n),!p){h.push(n);break}{h=h.concat(p.slice(1));const C=h.pop();if(!C)break;n=C}}let m=s.getTimezoneOffset();o&&(m=kS(o,m),s=function F5(t,n,e){const o=e?-1:1,s=t.getTimezoneOffset();return function R5(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,o*(kS(n,s)-s))}(s,o,!0));let v="";return h.forEach(C=>{const D=function I5(t){if(YC[t])return YC[t];let n;switch(t){case"G":case"GG":case"GGG":n=mn(lt.Eras,nt.Abbreviated);break;case"GGGG":n=mn(lt.Eras,nt.Wide);break;case"GGGGG":n=mn(lt.Eras,nt.Narrow);break;case"y":n=ei(He.FullYear,1,0,!1,!0);break;case"yy":n=ei(He.FullYear,2,0,!0,!0);break;case"yyy":n=ei(He.FullYear,3,0,!1,!0);break;case"yyyy":n=ei(He.FullYear,4,0,!1,!0);break;case"Y":n=kb(1);break;case"YY":n=kb(2,!0);break;case"YYY":n=kb(3);break;case"YYYY":n=kb(4);break;case"M":case"L":n=ei(He.Month,1,1);break;case"MM":case"LL":n=ei(He.Month,2,1);break;case"MMM":n=mn(lt.Months,nt.Abbreviated);break;case"MMMM":n=mn(lt.Months,nt.Wide);break;case"MMMMM":n=mn(lt.Months,nt.Narrow);break;case"LLL":n=mn(lt.Months,nt.Abbreviated,In.Standalone);break;case"LLLL":n=mn(lt.Months,nt.Wide,In.Standalone);break;case"LLLLL":n=mn(lt.Months,nt.Narrow,In.Standalone);break;case"w":n=JC(1);break;case"ww":n=JC(2);break;case"W":n=JC(1,!0);break;case"d":n=ei(He.Date,1);break;case"dd":n=ei(He.Date,2);break;case"c":case"cc":n=ei(He.Day,1);break;case"ccc":n=mn(lt.Days,nt.Abbreviated,In.Standalone);break;case"cccc":n=mn(lt.Days,nt.Wide,In.Standalone);break;case"ccccc":n=mn(lt.Days,nt.Narrow,In.Standalone);break;case"cccccc":n=mn(lt.Days,nt.Short,In.Standalone);break;case"E":case"EE":case"EEE":n=mn(lt.Days,nt.Abbreviated);break;case"EEEE":n=mn(lt.Days,nt.Wide);break;case"EEEEE":n=mn(lt.Days,nt.Narrow);break;case"EEEEEE":n=mn(lt.Days,nt.Short);break;case"a":case"aa":case"aaa":n=mn(lt.DayPeriods,nt.Abbreviated);break;case"aaaa":n=mn(lt.DayPeriods,nt.Wide);break;case"aaaaa":n=mn(lt.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":n=mn(lt.DayPeriods,nt.Abbreviated,In.Standalone,!0);break;case"bbbb":n=mn(lt.DayPeriods,nt.Wide,In.Standalone,!0);break;case"bbbbb":n=mn(lt.DayPeriods,nt.Narrow,In.Standalone,!0);break;case"B":case"BB":case"BBB":n=mn(lt.DayPeriods,nt.Abbreviated,In.Format,!0);break;case"BBBB":n=mn(lt.DayPeriods,nt.Wide,In.Format,!0);break;case"BBBBB":n=mn(lt.DayPeriods,nt.Narrow,In.Format,!0);break;case"h":n=ei(He.Hours,1,-12);break;case"hh":n=ei(He.Hours,2,-12);break;case"H":n=ei(He.Hours,1);break;case"HH":n=ei(He.Hours,2);break;case"m":n=ei(He.Minutes,1);break;case"mm":n=ei(He.Minutes,2);break;case"s":n=ei(He.Seconds,1);break;case"ss":n=ei(He.Seconds,2);break;case"S":n=ei(He.FractionalSeconds,1);break;case"SS":n=ei(He.FractionalSeconds,2);break;case"SSS":n=ei(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=wb(fi.Short);break;case"ZZZZZ":n=wb(fi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=wb(fi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=wb(fi.Long);break;default:return null}return YC[t]=n,n}(C);v+=D?D(s,e,m):"''"===C?"'":C.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function bb(t,n,e){const o=new Date(0);return o.setFullYear(t,n,e),o.setHours(0,0,0),o}function ma(t,n){const e=function _5(t){return go(t)[ye.LocaleId]}(t);if(og[e]=og[e]||{},og[e][n])return og[e][n];let o="";switch(n){case"shortDate":o=mb(t,jn.Short);break;case"mediumDate":o=mb(t,jn.Medium);break;case"longDate":o=mb(t,jn.Long);break;case"fullDate":o=mb(t,jn.Full);break;case"shortTime":o=_b(t,jn.Short);break;case"mediumTime":o=_b(t,jn.Medium);break;case"longTime":o=_b(t,jn.Long);break;case"fullTime":o=_b(t,jn.Full);break;case"short":const s=ma(t,"shortTime"),l=ma(t,"shortDate");o=yb(vb(t,jn.Short),[s,l]);break;case"medium":const h=ma(t,"mediumTime"),p=ma(t,"mediumDate");o=yb(vb(t,jn.Medium),[h,p]);break;case"long":const m=ma(t,"longTime"),v=ma(t,"longDate");o=yb(vb(t,jn.Long),[m,v]);break;case"full":const C=ma(t,"fullTime"),D=ma(t,"fullDate");o=yb(vb(t,jn.Full),[C,D])}return o&&(og[e][n]=o),o}function yb(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,o){return null!=n&&o in n?n[o]:e})),t}function Wr(t,n,e="-",o,s){let l="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,l=e));let h=String(t);for(;h.length<n;)h="0"+h;return o&&(h=h.slice(h.length-n)),l+h}function ei(t,n,e=0,o=!1,s=!1){return function(l,h){let p=function A5(t,n){switch(t){case He.FullYear:return n.getFullYear();case He.Month:return n.getMonth();case He.Date:return n.getDate();case He.Hours:return n.getHours();case He.Minutes:return n.getMinutes();case He.Seconds:return n.getSeconds();case He.FractionalSeconds:return n.getMilliseconds();case He.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,l);if((e>0||p>-e)&&(p+=e),t===He.Hours)0===p&&-12===e&&(p=12);else if(t===He.FractionalSeconds)return function S5(t,n){return Wr(t,3).substring(0,n)}(p,n);const m=wr(h,Le.MinusSign);return Wr(p,n,m,o,s)}}function mn(t,n,e=In.Format,o=!1){return function(s,l){return function O5(t,n,e,o,s,l){switch(e){case lt.Months:return qC(n,s,o)[t.getMonth()];case lt.Days:return bS(n,s,o)[t.getDay()];case lt.DayPeriods:const h=t.getHours(),p=t.getMinutes();if(l){const v=function C5(t){const n=go(t);return yS(n),(n[ye.ExtraData][2]||[]).map(o=>"string"==typeof o?KC(o):[KC(o[0]),KC(o[1])])}(n),C=function k5(t,n,e){const o=go(t);yS(o);const l=Cr([o[ye.ExtraData][0],o[ye.ExtraData][1]],n)||[];return Cr(l,e)||[]}(n,s,o),D=v.findIndex(N=>{if(Array.isArray(N)){const[V,U]=N,q=h>=V.hours&&p>=V.minutes,J=h<U.hours||h===U.hours&&p<U.minutes;if(V.hours<U.hours){if(q&&J)return!0}else if(q||J)return!0}else if(N.hours===h&&N.minutes===p)return!0;return!1});if(-1!==D)return C[D]}return function v5(t,n,e){const o=go(t),l=Cr([o[ye.DayPeriodsFormat],o[ye.DayPeriodsStandalone]],n);return Cr(l,e)}(n,s,o)[h<12?0:1];case lt.Eras:return function b5(t,n){return Cr(go(t)[ye.Eras],n)}(n,o)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(s,l,t,n,e,o)}}function wb(t){return function(n,e,o){const s=-1*o,l=wr(e,Le.MinusSign),h=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case fi.Short:return(s>=0?"+":"")+Wr(h,2,l)+Wr(Math.abs(s%60),2,l);case fi.ShortGMT:return"GMT"+(s>=0?"+":"")+Wr(h,1,l);case fi.Long:return"GMT"+(s>=0?"+":"")+Wr(h,2,l)+":"+Wr(Math.abs(s%60),2,l);case fi.Extended:return 0===o?"Z":(s>=0?"+":"")+Wr(h,2,l)+":"+Wr(Math.abs(s%60),2,l);default:throw new Error(`Unknown zone width "${t}"`)}}}function CS(t){return bb(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function JC(t,n=!1){return function(e,o){let s;if(n){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,h=e.getDate();s=1+Math.floor((h+l)/7)}else{const l=CS(e),h=function N5(t){const n=bb(t,0,1).getDay();return bb(t,0,1+(n<=4?4:11)-n)}(l.getFullYear()),p=l.getTime()-h.getTime();s=1+Math.round(p/6048e5)}return Wr(s,t,wr(o,Le.MinusSign))}}function kb(t,n=!1){return function(e,o){return Wr(CS(e).getFullYear(),t,wr(o,Le.MinusSign),n)}}const YC={};function kS(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function xS(t){return t instanceof Date&&!isNaN(t.valueOf())}const V5=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function XC(t,n,e,o,s,l,h=!1){let p="",m=!1;if(isFinite(t)){let v=function W5(t){let o,s,l,h,p,n=Math.abs(t)+"",e=0;for((s=n.indexOf("."))>-1&&(n=n.replace(".","")),(l=n.search(/e/i))>0?(s<0&&(s=l),s+=+n.slice(l+1),n=n.substring(0,l)):s<0&&(s=n.length),l=0;"0"===n.charAt(l);l++);if(l===(p=n.length))o=[0],s=1;else{for(p--;"0"===n.charAt(p);)p--;for(s-=l,o=[],h=0;l<=p;l++,h++)o[h]=Number(n.charAt(l))}return s>22&&(o=o.splice(0,21),e=s-1,s=1),{digits:o,exponent:e,integerLen:s}}(t);h&&(v=function q5(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(v));let C=n.minInt,D=n.minFrac,N=n.maxFrac;if(l){const te=l.match(V5);if(null===te)throw new Error(`${l} is not a valid digit info`);const X=te[1],ce=te[3],ve=te[5];null!=X&&(C=ek(X)),null!=ce&&(D=ek(ce)),null!=ve?N=ek(ve):null!=ce&&D>N&&(N=D)}!function K5(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let o=t.digits,s=o.length-t.integerLen;const l=Math.min(Math.max(n,s),e);let h=l+t.integerLen,p=o[h];if(h>0){o.splice(Math.max(t.integerLen,h));for(let D=h;D<o.length;D++)o[D]=0}else{s=Math.max(0,s),t.integerLen=1,o.length=Math.max(1,h=l+1),o[0]=0;for(let D=1;D<h;D++)o[D]=0}if(p>=5)if(h-1<0){for(let D=0;D>h;D--)o.unshift(0),t.integerLen++;o.unshift(1),t.integerLen++}else o[h-1]++;for(;s<Math.max(0,l);s++)o.push(0);let m=0!==l;const v=n+t.integerLen,C=o.reduceRight(function(D,N,V,U){return U[V]=(N+=D)<10?N:N-10,m&&(0===U[V]&&V>=v?U.pop():m=!1),N>=10?1:0},0);C&&(o.unshift(C),t.integerLen++)}(v,D,N);let V=v.digits,U=v.integerLen;const q=v.exponent;let J=[];for(m=V.every(te=>!te);U<C;U++)V.unshift(0);for(;U<0;U++)V.unshift(0);U>0?J=V.splice(U,V.length):(J=V,V=[0]);const Q=[];for(V.length>=n.lgSize&&Q.unshift(V.splice(-n.lgSize,V.length).join(""));V.length>n.gSize;)Q.unshift(V.splice(-n.gSize,V.length).join(""));V.length&&Q.unshift(V.join("")),p=Q.join(wr(e,o)),J.length&&(p+=wr(e,s)+J.join("")),q&&(p+=wr(e,Le.Exponential)+"+"+q)}else p=wr(e,Le.Infinity);return p=t<0&&!m?n.negPre+p+n.negSuf:n.posPre+p+n.posSuf,p}function ZC(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},o=t.split(";"),s=o[0],l=o[1],h=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],p=h[0],m=h[1]||"";e.posPre=p.substring(0,p.indexOf("#"));for(let C=0;C<m.length;C++){const D=m.charAt(C);"0"===D?e.minFrac=e.maxFrac=C+1:"#"===D?e.maxFrac=C+1:e.posSuf+=D}const v=p.split(",");if(e.gSize=v[1]?v[1].length:0,e.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,l){const C=s.length-e.posPre.length-e.posSuf.length,D=l.indexOf("#");e.negPre=l.substring(0,D).replace(/'/g,""),e.negSuf=l.slice(D+C).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function ek(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function MS(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const o=e.indexOf("="),[s,l]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(s.trim()===n)return decodeURIComponent(l)}return null}let Lo=(()=>{class t{constructor(e,o,s,l){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=s,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(G(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${nn(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(s=>{o?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return t.\u0275fac=function(e){return new(e||t)(z(pb),z(ig),z(Ot),z(ai))},t.\u0275dir=he({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class X5{constructor(n,e,o,s){this.$implicit=n,this.ngForOf=e,this.index=o,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _n=(()=>{class t{constructor(e,o,s){this._viewContainer=e,this._template=o,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=this._viewContainer;e.forEachOperation((s,l,h)=>{if(null==s.previousIndex)o.createEmbeddedView(this._template,new X5(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)o.remove(null===l?void 0:l);else if(null!==l){const p=o.get(l);o.move(p,h),OS(p,s)}});for(let s=0,l=o.length;s<l;s++){const p=o.get(s).context;p.index=s,p.count=l,p.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{OS(o.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,o){return!0}}return t.\u0275fac=function(e){return new(e||t)(z(Ro),z(En),z(pb))},t.\u0275dir=he({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function OS(t,n){t.context.$implicit=n.item}let zt=(()=>{class t{constructor(e,o){this._viewContainer=e,this._context=new eL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){PS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){PS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return t.\u0275fac=function(e){return new(e||t)(z(Ro),z(En))},t.\u0275dir=he({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class eL{constructor(){this.$implicit=null,this.ngIf=null}}function PS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${nn(n)}'.`)}class nk{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Eb=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),t})(),NS=(()=>{class t{constructor(e,o,s){this.ngSwitch=s,s._addCase(),this._view=new nk(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(z(Ro),z(En),z(Eb,9))},t.\u0275dir=he({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),t})(),IS=(()=>{class t{constructor(e,o,s){s._addDefault(new nk(e,o))}}return t.\u0275fac=function(e){return new(e||t)(z(Ro),z(En),z(Eb,9))},t.\u0275dir=he({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0}),t})(),cl=(()=>{class t{constructor(e,o,s){this._ngEl=e,this._differs=o,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,o){const[s,l]=e.split("."),h=-1===s.indexOf("-")?void 0:ri.DashCase;null!=o?this._renderer.setStyle(this._ngEl.nativeElement,s,l?`${o}${l}`:o,h):this._renderer.removeStyle(this._ngEl.nativeElement,s,h)}_applyChanges(e){e.forEachRemovedItem(o=>this._setStyle(o.key,null)),e.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),e.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ig),z(ai))},t.\u0275dir=he({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),Kr=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const o=this._viewContainerRef;if(this._viewRef&&o.remove(o.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:l,ngTemplateOutletInjector:h}=this;this._viewRef=o.createEmbeddedView(s,l,h?{injector:h}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(z(Ro))},t.\u0275dir=he({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ln]}),t})();function Jr(t,n){return new pe(2100,!1)}const lL=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let FS=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw Jr();return e.replace(lL,o=>o[0].toUpperCase()+o.slice(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"titlecase",type:t,pure:!0,standalone:!0}),t})();const uL=new De("DATE_PIPE_DEFAULT_TIMEZONE");let sg=(()=>{class t{constructor(e,o){this.locale=e,this.defaultTimezone=o}transform(e,o="mediumDate",s,l){if(null==e||""===e||e!=e)return null;try{return wS(e,o,l||this.locale,s??this.defaultTimezone??void 0)}catch(h){throw Jr()}}}return t.\u0275fac=function(e){return new(e||t)(z(yr,16),z(uL,24))},t.\u0275pipe=Jt({name:"date",type:t,pure:!0,standalone:!0}),t})(),ul=(()=>{class t{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=LS}transform(e,o=LS){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const s=this.differ.diff(e),l=o!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(h=>{this.keyValues.push(function gL(t,n){return{key:t,value:n}}(h.key,h.currentValue))})),(s||l)&&(this.keyValues.sort(o),this.compareFn=o),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(z(ig,16))},t.\u0275pipe=Jt({name:"keyvalue",type:t,pure:!1,standalone:!0}),t})();function LS(t,n){const e=t.key,o=n.key;if(e===o)return 0;if(void 0===e)return 1;if(void 0===o)return-1;if(null===e)return 1;if(null===o)return-1;if("string"==typeof e&&"string"==typeof o)return e<o?-1:1;if("number"==typeof e&&"number"==typeof o)return e-o;if("boolean"==typeof e&&"boolean"==typeof o)return e<o?-1:1;const s=String(e),l=String(o);return s==l?0:s<l?-1:1}let Tb=(()=>{class t{constructor(e){this._locale=e}transform(e,o,s){if(!ik(e))return null;s=s||this._locale;try{return function G5(t,n,e){return XC(t,ZC(WC(n,Fo.Decimal),wr(n,Le.MinusSign)),n,Le.Group,Le.Decimal,e)}(ok(e),s,o)}catch(l){throw Jr()}}}return t.\u0275fac=function(e){return new(e||t)(z(yr,16))},t.\u0275pipe=Jt({name:"number",type:t,pure:!0,standalone:!0}),t})(),BS=(()=>{class t{constructor(e){this._locale=e}transform(e,o,s){if(!ik(e))return null;s=s||this._locale;try{return function U5(t,n,e){return XC(t,ZC(WC(n,Fo.Percent),wr(n,Le.MinusSign)),n,Le.Group,Le.Decimal,e,!0).replace(new RegExp("%","g"),wr(n,Le.PercentSign))}(ok(e),s,o)}catch(l){throw Jr()}}}return t.\u0275fac=function(e){return new(e||t)(z(yr,16))},t.\u0275pipe=Jt({name:"percent",type:t,pure:!0,standalone:!0}),t})();function ik(t){return!(null==t||""===t||t!=t)}function ok(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let VS=(()=>{class t{transform(e,o,s){if(null==e)return null;if(!this.supports(e))throw Jr();return e.slice(o,s)}supports(e){return"string"==typeof e||Array.isArray(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"slice",type:t,pure:!1,standalone:!0}),t})(),Bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();let wL=(()=>{class t{}return t.\u0275prov=de({token:t,providedIn:"root",factory:()=>new CL(ie(Tn),window)}),t})();class CL{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function kL(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const o=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=o.currentNode;for(;s;){const l=s.shadowRoot;if(l){const h=l.getElementById(n)||l.querySelector(`[name="${n}"]`);if(h)return h}s=o.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),o=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(o-l[0],s-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=HS(this.window.history)||HS(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function HS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zS{}class ak extends class HL extends class u5{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function c5(t){gb||(gb=t)}(new ak)}onAndCancel(n,e,o){return n.addEventListener(e,o,!1),()=>{n.removeEventListener(e,o,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function zL(){return lg=lg||document.querySelector("base"),lg?lg.getAttribute("href"):null}();return null==e?null:function $L(t){Mb=Mb||document.createElement("a"),Mb.setAttribute("href",t);const n=Mb.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){lg=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return MS(document.cookie,n)}}let Mb,lg=null;const qS=new De("TRANSITION_ID"),GL=[{provide:ab,useFactory:function UL(t,n,e){return()=>{e.get(lb).donePromise.then(()=>{const o=ks(),s=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let l=0;l<s.length;l++)o.remove(s[l])})}},deps:[qS,Tn,Gn],multi:!0}];let WL=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const Sb=new De("EventManagerPlugins");let Ab=(()=>{class t{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(s=>s.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,s){return this._findPluginFor(o).addEventListener(e,o,s)}addGlobalEventListener(e,o,s){return this._findPluginFor(o).addGlobalEventListener(e,o,s)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const s=this._plugins;for(let l=0;l<s.length;l++){const h=s[l];if(h.supports(e))return this._eventNameToPlugin.set(e,h),h}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(ie(Sb),ie(Ht))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();class WS{constructor(n){this._doc=n}addGlobalEventListener(n,e,o){const s=ks().getGlobalEventTarget(this._doc,n);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,o)}}let KS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),o.add(s))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),cg=(()=>{class t extends KS{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,s){e.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,s.push(o.appendChild(h))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(JS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,s)=>{this._addStylesToHost(e,s,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(JS))}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();function JS(t){ks().remove(t)}const lk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ck=/%COMP%/g;function Ob(t,n,e){for(let o=0;o<n.length;o++){let s=n[o];Array.isArray(s)?Ob(t,s,e):(s=s.replace(ck,t),e.push(s))}return e}function XS(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let uk=(()=>{class t{constructor(e,o,s){this.eventManager=e,this.sharedStylesHost=o,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new dk(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case ko.Emulated:{let s=this.rendererByCompId.get(o.id);return s||(s=new ZL(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,s)),s.applyToHost(e),s}case 1:case ko.ShadowDom:return new e4(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const s=Ob(o.id,o.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(ie(Ab),ie(cg),ie(ng))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();class dk{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(lk[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(eA(n)?n.content:n).appendChild(e)}insertBefore(n,e,o){n&&(eA(n)?n.content:n).insertBefore(e,o)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let o="string"==typeof n?document.querySelector(n):n;if(!o)throw new Error(`The selector "${n}" did not match any elements`);return e||(o.textContent=""),o}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,o,s){if(s){e=s+":"+e;const l=lk[s];l?n.setAttributeNS(l,e,o):n.setAttribute(e,o)}else n.setAttribute(e,o)}removeAttribute(n,e,o){if(o){const s=lk[o];s?n.removeAttributeNS(s,e):n.removeAttribute(`${o}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,o,s){s&(ri.DashCase|ri.Important)?n.style.setProperty(e,o,s&ri.Important?"important":""):n.style[e]=o}removeStyle(n,e,o){o&ri.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,o){n[e]=o}setValue(n,e){n.nodeValue=e}listen(n,e,o){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,XS(o)):this.eventManager.addEventListener(n,e,XS(o))}}function eA(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class ZL extends dk{constructor(n,e,o,s){super(n),this.component=o;const l=Ob(s+"-"+o.id,o.styles,[]);e.addStyles(l),this.contentAttr=function YL(t){return"_ngcontent-%COMP%".replace(ck,t)}(s+"-"+o.id),this.hostAttr=function QL(t){return"_nghost-%COMP%".replace(ck,t)}(s+"-"+o.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const o=super.createElement(n,e);return super.setAttribute(o,this.contentAttr,""),o}}class e4 extends dk{constructor(n,e,o,s){super(n),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ob(s.id,s.styles,[]);for(let h=0;h<l.length;h++){const p=document.createElement("style");p.textContent=l[h],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,o){return super.insertBefore(this.nodeOrShadowRoot(n),e,o)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let t4=(()=>{class t extends WS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,s){return e.addEventListener(o,s,!1),()=>this.removeEventListener(e,o,s)}removeEventListener(e,o,s){return e.removeEventListener(o,s)}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const tA=["alt","control","meta","shift"],n4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let o4=(()=>{class t extends WS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,o,s){const l=t.parseEventName(o),h=t.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ks().onAndCancel(e,l.domEventName,h))}static parseEventName(e){const o=e.toLowerCase().split("."),s=o.shift();if(0===o.length||"keydown"!==s&&"keyup"!==s)return null;const l=t._normalizeKey(o.pop());let h="",p=o.indexOf("code");if(p>-1&&(o.splice(p,1),h="code."),tA.forEach(v=>{const C=o.indexOf(v);C>-1&&(o.splice(C,1),h+=v+".")}),h+=l,0!=o.length||0===l.length)return null;const m={};return m.domEventName=s,m.fullKey=h,m}static matchEventFullKeyCode(e,o){let s=n4[e.key]||e.key,l="";return o.indexOf("code.")>-1&&(s=e.code,l="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),tA.forEach(h=>{h!==s&&(0,i4[h])(e)&&(l+=h+".")}),l+=s,l===o)}static eventCallback(e,o,s){return l=>{t.matchEventFullKeyCode(l,e)&&s.runGuarded(()=>o(l))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const iA=[{provide:cb,useValue:"browser"},{provide:LM,useValue:function r4(){ak.makeCurrent()},multi:!0},{provide:Tn,useFactory:function a4(){return function I_(t){Jf=t}(document),document},deps:[]}],l4=WM(s5,"browser",iA),oA=new De(""),rA=[{provide:ub,useClass:class qL{addToWindow(n){Re.getAngularTestability=(o,s=!0)=>{const l=n.findTestabilityInTree(o,s);if(null==l)throw new Error("Could not find testability for element.");return l},Re.getAllAngularTestabilities=()=>n.getAllTestabilities(),Re.getAllAngularRootElements=()=>n.getAllRootElements(),Re.frameworkStabilizers||(Re.frameworkStabilizers=[]),Re.frameworkStabilizers.push(o=>{const s=Re.getAllAngularTestabilities();let l=s.length,h=!1;const p=function(m){h=h||m,l--,0==l&&o(h)};s.forEach(function(m){m.whenStable(p)})})}findTestabilityInTree(n,e,o){return null==e?null:n.getTestability(e)??(o?ks().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:$M,useClass:NC,deps:[Ht,IC,ub]},{provide:NC,useClass:NC,deps:[Ht,IC,ub]}],sA=[{provide:rp,useValue:"root"},{provide:oa,useFactory:function s4(){return new oa},deps:[]},{provide:Sb,useClass:t4,multi:!0,deps:[Tn,Ht,cb]},{provide:Sb,useClass:o4,multi:!0,deps:[Tn]},{provide:uk,useClass:uk,deps:[Ab,cg,ng]},{provide:xd,useExisting:uk},{provide:KS,useExisting:cg},{provide:cg,useClass:cg,deps:[Tn]},{provide:Ab,useClass:Ab,deps:[Sb,Ht]},{provide:zS,useClass:WL,deps:[]},[]];let c4=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:ng,useValue:e.appId},{provide:qS,useExisting:ng},GL]}}}return t.\u0275fac=function(e){return new(e||t)(ie(oA,12))},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({providers:[...sA,...rA],imports:[Bo,a5]}),t})(),aA=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:function(e){let o=null;return o=e?new e:function d4(){return new aA(ie(Tn))}(),o},providedIn:"root"}),t})();typeof window<"u"&&window;let uA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(e){let o=null;return o=e?new(e||t):ie(dA),o},providedIn:"root"}),t})(),dA=(()=>{class t extends uA{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case at.NONE:return o;case at.HTML:return Xo(o,"HTML")?Ji(o):W_(this._doc,String(o)).toString();case at.STYLE:return Xo(o,"Style")?Ji(o):o;case at.SCRIPT:if(Xo(o,"Script"))return Ji(o);throw new Error("unsafe value used in a script context");case at.URL:return Xo(o,"URL")?Ji(o):pd(String(o));case at.RESOURCE_URL:if(Xo(o,"ResourceURL"))return Ji(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function V_(t){return new At(t)}(e)}bypassSecurityTrustStyle(e){return function qa(t){return new I1(t)}(e)}bypassSecurityTrustScript(e){return function j_(t){return new L_(t)}(e)}bypassSecurityTrustUrl(e){return function L1(t){return new R1(t)}(e)}bypassSecurityTrustResourceUrl(e){return function B1(t){return new F1(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:function(e){let o=null;return o=e?new e:function v4(t){return new dA(t.get(Tn))}(ie(Gn)),o},providedIn:"root"}),t})();const{isArray:b4}=Array,{getPrototypeOf:y4,prototype:w4,keys:C4}=Object;function hA(t){if(1===t.length){const n=t[0];if(b4(n))return{args:n,keys:null};if(function k4(t){return t&&"object"==typeof t&&y4(t)===w4}(n)){const e=C4(n);return{args:e.map(o=>n[o]),keys:e}}}return{args:t,keys:null}}const{isArray:x4}=Array;function pk(t){return Be(n=>function E4(t,n){return x4(n)?t(...n):t(n)}(t,n))}function fA(t,n){return t.reduce((e,o,s)=>(e[o]=n[s],e),{})}let pA=(()=>{class t{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(z(ai),z(Ot))},t.\u0275dir=he({type:t}),t})(),Bc=(()=>{class t extends pA{}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,features:[a]}),t})();const or=new De("NgValueAccessor"),D4={provide:or,useExisting:_t(()=>Pb),multi:!0};let Pb=(()=>{class t extends Bc{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,o){1&e&&K("change",function(l){return o.onChange(l.target.checked)})("blur",function(){return o.onTouched()})},features:[on([D4]),a]}),t})();const M4={provide:or,useExisting:_t(()=>Vc),multi:!0},A4=new De("CompositionEventMode");let Vc=(()=>{class t extends pA{constructor(e,o,s){super(e,o),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S4(){const t=ks()?ks().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(z(ai),z(Ot),z(A4,8))},t.\u0275dir=he({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&K("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[on([M4]),a]}),t})();function hl(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Fi=new De("NgValidators"),fl=new De("NgAsyncValidators");function Nb(t){return null}function xA(t){return null!=t}function EA(t){return Up(t)?dn(t):t}function TA(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function DA(t,n){return n.map(e=>e(t))}function MA(t){return t.map(n=>function N4(t){return!t.validate}(n)?n:e=>n.validate(e))}function gk(t){return null!=t?function SA(t){if(!t)return null;const n=t.filter(xA);return 0==n.length?null:function(e){return TA(DA(e,n))}}(MA(t)):null}function mk(t){return null!=t?function AA(t){if(!t)return null;const n=t.filter(xA);return 0==n.length?null:function(e){return function T4(...t){const n=Al(t),{args:e,keys:o}=hA(t),s=new Wt(l=>{const{length:h}=e;if(!h)return void l.complete();const p=new Array(h);let m=h,v=h;for(let C=0;C<h;C++){let D=!1;Yn(e[C]).subscribe(Et(l,N=>{D||(D=!0,v--),p[C]=N},()=>m--,void 0,()=>{(!m||!D)&&(v||l.next(o?fA(o,p):p),l.complete())}))}});return n?s.pipe(pk(n)):s}(DA(e,n).map(EA)).pipe(Be(TA))}}(MA(t)):null}function OA(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function _k(t){return t?Array.isArray(t)?t:[t]:[]}function Ib(t,n){return Array.isArray(t)?t.includes(n):t===n}function IA(t,n){const e=_k(n);return _k(t).forEach(s=>{Ib(e,s)||e.push(s)}),e}function RA(t,n){return _k(n).filter(e=>!Ib(t,e))}class FA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=gk(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=mk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class _o extends FA{get formDirective(){return null}get path(){return null}}class pl extends FA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let gl=(()=>{class t extends class LA{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(z(pl,2))},t.\u0275dir=he({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&Xt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[a]}),t})();const ug="VALID",Fb="INVALID",ah="PENDING",dg="DISABLED";function VA(t){return Array.isArray(t)?gk(t):t||null}function jA(t){return Array.isArray(t)?mk(t):t||null}function Lb(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function hg(t,n){(function xk(t,n){const e=function PA(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(OA(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const o=function NA(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(OA(o,n.asyncValidator)):"function"==typeof o&&t.setAsyncValidators([o]);const s=()=>t.updateValueAndValidity();jb(n._rawValidators,s),jb(n._rawAsyncValidators,s)})(t,n),n.valueAccessor.writeValue(t.value),t.disabled&&n.valueAccessor.setDisabledState?.(!0),function $4(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&UA(t,n)})}(t,n),function G4(t,n){const e=(o,s)=>{n.valueAccessor.writeValue(o),s&&n.viewToModelUpdate(o)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function U4(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&UA(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function z4(t,n){if(n.valueAccessor.setDisabledState){const e=o=>{n.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function jb(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function UA(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function KA(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function JA(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Z4={provide:pl,useExisting:_t(()=>_a)},ZA=(()=>Promise.resolve())();let _a=(()=>{class t extends pl{constructor(e,o,s,l,h){super(),this._changeDetectorRef=h,this.control=new class extends class $A{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=VA(this._rawValidators),this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===ug}get invalid(){return this.status===Fb}get pending(){return this.status==ah}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=VA(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=jA(n)}addValidators(n){this.setValidators(IA(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(IA(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(RA(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(RA(n,this._rawAsyncValidators))}hasValidator(n){return Ib(this._rawValidators,n)}hasAsyncValidator(n){return Ib(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ah,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=dg,this.errors=null,this._forEachChild(o=>{o.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=ug,this._forEachChild(o=>{o.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ug||this.status===ah)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:ug}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ah,this._hasOwnPendingAsyncValidator=!0;const e=EA(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((o,s)=>o&&o._find(s),this)}getError(n,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?Fb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ah)?ah:this._anyControlsHaveStatus(Fb)?Fb:ug}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Lb(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}{constructor(n=null,e,o){super(function wk(t){return(Lb(t)?t.validators:t)||null}(e),function Ck(t,n){return(Lb(n)?n.asyncValidators:t)||null}(o,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lb(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=JA(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){KA(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){KA(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){JA(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},this._registered=!1,this.update=new Te,this._parent=e,this._setValidators(o),this._setAsyncValidators(s),this.valueAccessor=function Tk(t,n){if(!n)return null;let e,o,s;return Array.isArray(n),n.forEach(l=>{l.constructor===Vc?e=l:function K4(t){return Object.getPrototypeOf(t.constructor)===Bc}(l)?o=l:s=l}),s||o||e||null}(0,l)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const o=e.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Ek(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){ZA.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const o=e.isDisabled.currentValue,s=0!==o&&function pa(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(o);ZA.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Bb(t,n){return[...n.path,t]}(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(z(_o,9),z(Fi,10),z(fl,10),z(or,10),z(ir,8))},t.\u0275dir=he({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[on([Z4]),a,Ln]}),t})();const tB={provide:or,useExisting:_t(()=>zb),multi:!0};let zb=(()=>{class t extends Bc{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=o=>{e(""==o?null:parseFloat(o))}}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,o){1&e&&K("input",function(l){return o.onChange(l.target.value)})("blur",function(){return o.onTouched()})},features:[on([tB]),a]}),t})(),eO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();const uB={provide:or,useExisting:_t(()=>$b),multi:!0};function aO(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let $b=(()=>{class t extends Bc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const s=aO(this._getOptionId(e),e);this.setProperty("value",s)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function dB(t){return t.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&K("change",function(l){return o.onChange(l.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[on([uB]),a]}),t})(),Ok=(()=>{class t{constructor(e,o,s){this._element=e,this._renderer=o,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(aO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ai),z($b,9))},t.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const hB={provide:or,useExisting:_t(()=>Pk),multi:!0};function lO(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Pk=(()=>{class t extends Bc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const s=e.map(l=>this._getOptionId(l));o=(l,h)=>{l._setSelected(s.indexOf(h.toString())>-1)}}else o=(s,l)=>{s._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const s=[],l=o.selectedOptions;if(void 0!==l){const h=l;for(let p=0;p<h.length;p++){const v=this._getOptionValue(h[p].value);s.push(v)}}else{const h=o.options;for(let p=0;p<h.length;p++){const m=h[p];if(m.selected){const v=this._getOptionValue(m.value);s.push(v)}}}this.value=s,e(s)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function fB(t){return t.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&K("change",function(l){return o.onChange(l.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[on([hB]),a]}),t})(),Nk=(()=>{class t{constructor(e,o,s){this._element=e,this._renderer=o,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(lO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(lO(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ai),z(Pk,9))},t.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function uO(t){return"number"==typeof t?t:parseFloat(t)}let jc=(()=>{class t{constructor(){this._validator=Nb}ngOnChanges(e){if(this.inputName in e){const o=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):Nb,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,features:[Ln]}),t})();const pB={provide:Fi,useExisting:_t(()=>Ub),multi:!0};let Ub=(()=>{class t extends jc{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>uO(e),this.createValidator=e=>function _A(t){return n=>{if(hl(n.value)||hl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,o){2&e&&wt("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[on([pB]),a]}),t})();const gB={provide:Fi,useExisting:_t(()=>Gb),multi:!0};let Gb=(()=>{class t extends jc{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>uO(e),this.createValidator=e=>function mA(t){return n=>{if(hl(n.value)||hl(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(e)}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275dir=he({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,o){2&e&&wt("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[on([gB]),a]}),t})(),CB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[eO]}),t})(),Rk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[CB]}),t})();function Me(...t){return dn(t,Ol(t))}function ml(t,n){return P(n)?Ke(t,n,1):Ke(t,1)}function Hn(t,n){return yn((e,o)=>{let s=0;e.subscribe(Et(o,l=>t.call(n,l,s++)&&o.next(l)))})}class mO{}class _O{}class va{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const s=e.slice(0,o),l=s.toLowerCase(),h=e.slice(o+1).trim();this.maybeSetNormalizedName(s,l),this.headers.has(l)?this.headers.get(l).push(h):this.headers.set(l,[h])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(e=>{let o=n[e];const s=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(s,o),this.maybeSetNormalizedName(e,s))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof va?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new va;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof va?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let o=n.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(n.name,e);const s=("a"===n.op?this.headers.get(e):void 0)||[];s.push(...o),this.headers.set(e,s);break;case"d":const l=n.value;if(l){let h=this.headers.get(e);if(!h)return;h=h.filter(p=>-1===l.indexOf(p)),0===h.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,h)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class xB{encodeKey(n){return vO(n)}encodeValue(n){return vO(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const TB=/%(\d[a-f0-9])/gi,DB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vO(t){return encodeURIComponent(t).replace(TB,(n,e)=>DB[e]??n)}function qb(t){return`${t}`}class _l{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new xB,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function EB(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{const l=s.indexOf("="),[h,p]=-1==l?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,l)),n.decodeValue(s.slice(l+1))],m=e.get(h)||[];m.push(p),e.set(h,m)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const o=n.fromObject[e],s=Array.isArray(o)?o.map(qb):[qb(o)];this.map.set(e,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(o=>{const s=n[o];Array.isArray(s)?s.forEach(l=>{e.push({param:o,value:l,op:"a"})}):e.push({param:o,value:s,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new _l({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(qb(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let o=this.map.get(n.param)||[];const s=o.indexOf(qb(n.value));-1!==s&&o.splice(s,1),o.length>0?this.map.set(n.param,o):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class MB{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function bO(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function yO(t){return typeof Blob<"u"&&t instanceof Blob}function wO(t){return typeof FormData<"u"&&t instanceof FormData}class pg{constructor(n,e,o,s){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function SB(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==o?o:null,l=s):l=o,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new va),this.context||(this.context=new MB),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=e;else{const p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+h}}else this.params=new _l,this.urlWithParams=e}serializeBody(){return null===this.body?null:bO(this.body)||yO(this.body)||wO(this.body)||function AB(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _l?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wO(this.body)?null:yO(this.body)?this.body.type||null:bO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _l?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,o=n.url||this.url,s=n.responseType||this.responseType,l=void 0!==n.body?n.body:this.body,h=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,p=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let m=n.headers||this.headers,v=n.params||this.params;const C=n.context??this.context;return void 0!==n.setHeaders&&(m=Object.keys(n.setHeaders).reduce((D,N)=>D.set(N,n.setHeaders[N]),m)),n.setParams&&(v=Object.keys(n.setParams).reduce((D,N)=>D.set(N,n.setParams[N]),v)),new pg(e,o,l,{params:v,headers:m,context:C,reportProgress:p,responseType:s,withCredentials:h})}}var ti=(()=>((ti=ti||{})[ti.Sent=0]="Sent",ti[ti.UploadProgress=1]="UploadProgress",ti[ti.ResponseHeader=2]="ResponseHeader",ti[ti.DownloadProgress=3]="DownloadProgress",ti[ti.Response=4]="Response",ti[ti.User=5]="User",ti))();class Fk{constructor(n,e=200,o="OK"){this.headers=n.headers||new va,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||o,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Lk extends Fk{constructor(n={}){super(n),this.type=ti.ResponseHeader}clone(n={}){return new Lk({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Wb extends Fk{constructor(n={}){super(n),this.type=ti.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Wb({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class CO extends Fk{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Bk(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let kO=(()=>{class t{constructor(e){this.handler=e}request(e,o,s={}){let l;if(e instanceof pg)l=e;else{let m,v;m=s.headers instanceof va?s.headers:new va(s.headers),s.params&&(v=s.params instanceof _l?s.params:new _l({fromObject:s.params})),l=new pg(e,o,void 0!==s.body?s.body:null,{headers:m,context:s.context,params:v,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const h=Me(l).pipe(ml(m=>this.handler.handle(m)));if(e instanceof pg||"events"===s.observe)return h;const p=h.pipe(Hn(m=>m instanceof Wb));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe(Be(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe(Be(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe(Be(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe(Be(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new _l).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,s={}){return this.request("PATCH",e,Bk(s,o))}post(e,o,s={}){return this.request("POST",e,Bk(s,o))}put(e,o,s={}){return this.request("PUT",e,Bk(s,o))}}return t.\u0275fac=function(e){return new(e||t)(ie(mO))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();class xO{constructor(n,e){this.next=n,this.interceptor=e}handle(n){return this.interceptor.intercept(n,this.next)}}const EO=new De("HTTP_INTERCEPTORS");let OB=(()=>{class t{intercept(e,o){return o.handle(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const PB=/^\)\]\}',?\n/;let TO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Wt(o=>{const s=this.xhrFactory.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((V,U)=>s.setRequestHeader(V,U.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const V=e.detectContentTypeHeader();null!==V&&s.setRequestHeader("Content-Type",V)}if(e.responseType){const V=e.responseType.toLowerCase();s.responseType="json"!==V?V:"text"}const l=e.serializeBody();let h=null;const p=()=>{if(null!==h)return h;const V=s.statusText||"OK",U=new va(s.getAllResponseHeaders()),q=function NB(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||e.url;return h=new Lk({headers:U,status:s.status,statusText:V,url:q}),h},m=()=>{let{headers:V,status:U,statusText:q,url:J}=p(),Q=null;204!==U&&(Q=typeof s.response>"u"?s.responseText:s.response),0===U&&(U=Q?200:0);let te=U>=200&&U<300;if("json"===e.responseType&&"string"==typeof Q){const X=Q;Q=Q.replace(PB,"");try{Q=""!==Q?JSON.parse(Q):null}catch(ce){Q=X,te&&(te=!1,Q={error:ce,text:Q})}}te?(o.next(new Wb({body:Q,headers:V,status:U,statusText:q,url:J||void 0})),o.complete()):o.error(new CO({error:Q,headers:V,status:U,statusText:q,url:J||void 0}))},v=V=>{const{url:U}=p(),q=new CO({error:V,status:s.status||0,statusText:s.statusText||"Unknown Error",url:U||void 0});o.error(q)};let C=!1;const D=V=>{C||(o.next(p()),C=!0);let U={type:ti.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(U.total=V.total),"text"===e.responseType&&!!s.responseText&&(U.partialText=s.responseText),o.next(U)},N=V=>{let U={type:ti.UploadProgress,loaded:V.loaded};V.lengthComputable&&(U.total=V.total),o.next(U)};return s.addEventListener("load",m),s.addEventListener("error",v),s.addEventListener("timeout",v),s.addEventListener("abort",v),e.reportProgress&&(s.addEventListener("progress",D),null!==l&&s.upload&&s.upload.addEventListener("progress",N)),s.send(l),o.next({type:ti.Sent}),()=>{s.removeEventListener("error",v),s.removeEventListener("abort",v),s.removeEventListener("load",m),s.removeEventListener("timeout",v),e.reportProgress&&(s.removeEventListener("progress",D),null!==l&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(ie(zS))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();const Vk=new De("XSRF_COOKIE_NAME"),jk=new De("XSRF_HEADER_NAME");class DO{}let IB=(()=>{class t{constructor(e,o,s){this.doc=e,this.platform=o,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=MS(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn),ie(cb),ie(Vk))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),Hk=(()=>{class t{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const s=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||s.startsWith("http://")||s.startsWith("https://"))return o.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),o.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(ie(DO),ie(jk))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),RB=(()=>{class t{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(EO,[]);this.chain=o.reduceRight((s,l)=>new xO(s,l),this.backend)}return this.chain.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(ie(_O),ie(Gn))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),FB=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Hk,useClass:OB}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Vk,useValue:e.cookieName}:[],e.headerName?{provide:jk,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({providers:[Hk,{provide:EO,useExisting:Hk,multi:!0},{provide:DO,useClass:IB},{provide:Vk,useValue:"XSRF-TOKEN"},{provide:jk,useValue:"X-XSRF-TOKEN"}]}),t})(),LB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({providers:[kO,{provide:mO,useClass:RB},TO,{provide:_O,useExisting:TO}],imports:[FB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),t})();const Jn=void 0,VB=["fr",[["AM","PM"],Jn,Jn],Jn,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],Jn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],Jn,[["av. J.-C.","ap. J.-C."],Jn,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xe0' {0}",Jn],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[Jn,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[Jn,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[Jn,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[Jn,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[Jn,"\xa5"],KMF:[Jn,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[Jn,"$C"],NZD:["$NZ","$"],PHP:[Jn,"\u20b1"],RHD:["$RH"],RON:[Jn,"L"],RWF:[Jn,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[Jn,"$T"],TTD:["$TT","$"],TWD:[Jn,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[Jn,"$"],XPF:["FCFP"],ZMW:[Jn,"Kw"]},"ltr",function BB(t){const e=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length,s=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===e||1===e?1:0===s&&0!==e&&e%1e6==0&&0===o||!(s>=0&&s<=5)?4:5}],ba=function jB(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},MO="object"==typeof global&&global&&global.Object===Object&&global;var zB="object"==typeof self&&self&&self.Object===Object&&self;const Yr=MO||zB||Function("return this")(),zk=function(){return Yr.Date.now()};var GB=/\s/;var KB=/^\s+/;const YB=function JB(t){return t&&t.slice(0,function qB(t){for(var n=t.length;n--&&GB.test(t.charAt(n)););return n}(t)+1).replace(KB,"")},lh=Yr.Symbol;var SO=Object.prototype,XB=SO.hasOwnProperty,ZB=SO.toString,gg=lh?lh.toStringTag:void 0;var iV=Object.prototype.toString;var AO=lh?lh.toStringTag:void 0;const Hc=function lV(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":AO&&AO in Object(t)?function eV(t){var n=XB.call(t,gg),e=t[gg];try{t[gg]=void 0;var o=!0}catch{}var s=ZB.call(t);return o&&(n?t[gg]=e:delete t[gg]),s}(t):function oV(t){return iV.call(t)}(t)},vl=function cV(t){return null!=t&&"object"==typeof t};var fV=/^[-+]0x[0-9a-f]+$/i,pV=/^0b[01]+$/i,gV=/^0o[0-7]+$/i,mV=parseInt;const PO=function _V(t){if("number"==typeof t)return t;if(function dV(t){return"symbol"==typeof t||vl(t)&&"[object Symbol]"==Hc(t)}(t))return NaN;if(ba(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=ba(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=YB(t);var e=pV.test(t);return e||gV.test(t)?mV(t.slice(2),e?2:8):fV.test(t)?NaN:+t};var bV=Math.max,yV=Math.min;const EV=function xV(t,n,e){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return ba(e)&&(o="leading"in e?!!e.leading:o,s="trailing"in e?!!e.trailing:s),function wV(t,n,e){var o,s,l,h,p,m,v=0,C=!1,D=!1,N=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function V(me){var it=o,gt=s;return o=s=void 0,v=me,h=t.apply(gt,it)}function U(me){return v=me,p=setTimeout(Q,n),C?V(me):h}function J(me){var it=me-m;return void 0===m||it>=n||it<0||D&&me-v>=l}function Q(){var me=zk();if(J(me))return te(me);p=setTimeout(Q,function q(me){var bn=n-(me-m);return D?yV(bn,l-(me-v)):bn}(me))}function te(me){return p=void 0,N&&o?V(me):(o=s=void 0,h)}function ve(){var me=zk(),it=J(me);if(o=arguments,s=this,m=me,it){if(void 0===p)return U(m);if(D)return clearTimeout(p),p=setTimeout(Q,n),V(m)}return void 0===p&&(p=setTimeout(Q,n)),h}return n=PO(n)||0,ba(e)&&(C=!!e.leading,l=(D="maxWait"in e)?bV(PO(e.maxWait)||0,n):l,N="trailing"in e?!!e.trailing:N),ve.cancel=function X(){void 0!==p&&clearTimeout(p),v=0,o=m=s=p=void 0},ve.flush=function ce(){return void 0===p?h:te(zk())},ve}(t,n,{leading:o,maxWait:n,trailing:s})},NO=function MV(t,n){return t===n||t!=t&&n!=n},Kb=function SV(t,n){for(var e=t.length;e--;)if(NO(t[e][0],n))return e;return-1};var OV=Array.prototype.splice;function ch(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}ch.prototype.clear=function TV(){this.__data__=[],this.size=0},ch.prototype.delete=function PV(t){var n=this.__data__,e=Kb(n,t);return!(e<0||(e==n.length-1?n.pop():OV.call(n,e,1),--this.size,0))},ch.prototype.get=function IV(t){var n=this.__data__,e=Kb(n,t);return e<0?void 0:n[e][1]},ch.prototype.has=function FV(t){return Kb(this.__data__,t)>-1},ch.prototype.set=function BV(t,n){var e=this.__data__,o=Kb(e,t);return o<0?(++this.size,e.push([t,n])):e[o][1]=n,this};const Jb=ch,IO=function XV(t){if(!ba(t))return!1;var n=Hc(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n};var t,ZV=Yr["__core-js_shared__"],RO=(t=/[^.]+$/.exec(ZV&&ZV.keys&&ZV.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var i8=Function.prototype.toString;const zc=function o8(t){if(null!=t){try{return i8.call(t)}catch{}try{return t+""}catch{}}return""};var s8=/^\[object .+?Constructor\]$/,d8=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const f8=function h8(t){return!(!ba(t)||function e8(t){return!!RO&&RO in t}(t))&&(IO(t)?d8:s8).test(zc(t))},$c=function m8(t,n){var e=function p8(t,n){return t?.[n]}(t,n);return f8(e)?e:void 0},mg=$c(Yr,"Map"),_g=$c(Object,"create");var E8=Object.prototype.hasOwnProperty;var S8=Object.prototype.hasOwnProperty;function uh(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}uh.prototype.clear=function b8(){this.__data__=_g?_g(null):{},this.size=0},uh.prototype.delete=function w8(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},uh.prototype.get=function T8(t){var n=this.__data__;if(_g){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return E8.call(n,t)?n[t]:void 0},uh.prototype.has=function A8(t){var n=this.__data__;return _g?void 0!==n[t]:S8.call(n,t)},uh.prototype.set=function N8(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=_g&&void 0===n?"__lodash_hash_undefined__":n,this};const FO=uh,Yb=function V8(t,n){var e=t.__data__;return function L8(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?e["string"==typeof n?"string":"hash"]:e.map};function dh(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}dh.prototype.clear=function R8(){this.size=0,this.__data__={hash:new FO,map:new(mg||Jb),string:new FO}},dh.prototype.delete=function j8(t){var n=Yb(this,t).delete(t);return this.size-=n?1:0,n},dh.prototype.get=function z8(t){return Yb(this,t).get(t)},dh.prototype.has=function U8(t){return Yb(this,t).has(t)},dh.prototype.set=function q8(t,n){var e=Yb(this,t),o=e.size;return e.set(t,n),this.size+=e.size==o?0:1,this};const K8=dh;function hh(t){var n=this.__data__=new Jb(t);this.size=n.size}hh.prototype.clear=function jV(){this.__data__=new Jb,this.size=0},hh.prototype.delete=function zV(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},hh.prototype.get=function UV(t){return this.__data__.get(t)},hh.prototype.has=function qV(t){return this.__data__.has(t)},hh.prototype.set=function Y8(t,n){var e=this.__data__;if(e instanceof Jb){var o=e.__data__;if(!mg||o.length<199)return o.push([t,n]),this.size=++e.size,this;e=this.__data__=new K8(o)}return e.set(t,n),this.size=e.size,this};const X8=hh;var t6=function(){try{var t=$c(Object,"defineProperty");return t({},"",{}),t}catch{}}();const LO=t6,BO=function n6(t,n,e){"__proto__"==n&&LO?LO(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e};var o6=Object.prototype.hasOwnProperty;const VO=function r6(t,n,e){var o=t[n];(!o6.call(t,n)||!NO(o,e)||void 0===e&&!(n in t))&&BO(t,n,e)},Qb=function s6(t,n,e,o){var s=!e;e||(e={});for(var l=-1,h=n.length;++l<h;){var p=n[l],m=o?o(e[p],t[p],p,e,t):void 0;void 0===m&&(m=t[p]),s?BO(e,p,m):VO(e,p,m)}return e},jO=function u6(t){return vl(t)&&"[object Arguments]"==Hc(t)};var HO=Object.prototype,d6=HO.hasOwnProperty,h6=HO.propertyIsEnumerable,f6=jO(function(){return arguments}())?jO:function(t){return vl(t)&&d6.call(t,"callee")&&!h6.call(t,"callee")};const p6=f6,Uk=Array.isArray;var zO="object"==typeof exports&&exports&&!exports.nodeType&&exports,$O=zO&&"object"==typeof module&&module&&!module.nodeType&&module,UO=$O&&$O.exports===zO?Yr.Buffer:void 0;const GO=(UO?UO.isBuffer:void 0)||function m6(){return!1};var C6=/^(?:0|[1-9]\d*)$/;const x6=function k6(t,n){var e=typeof t;return!!(n=n??9007199254740991)&&("number"==e||"symbol"!=e&&C6.test(t))&&t>-1&&t%1==0&&t<n},qO=function T6(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Dn={};Dn["[object Float32Array]"]=Dn["[object Float64Array]"]=Dn["[object Int8Array]"]=Dn["[object Int16Array]"]=Dn["[object Int32Array]"]=Dn["[object Uint8Array]"]=Dn["[object Uint8ClampedArray]"]=Dn["[object Uint16Array]"]=Dn["[object Uint32Array]"]=!0,Dn["[object Arguments]"]=Dn["[object Array]"]=Dn["[object ArrayBuffer]"]=Dn["[object Boolean]"]=Dn["[object DataView]"]=Dn["[object Date]"]=Dn["[object Error]"]=Dn["[object Function]"]=Dn["[object Map]"]=Dn["[object Number]"]=Dn["[object Object]"]=Dn["[object RegExp]"]=Dn["[object Set]"]=Dn["[object String]"]=Dn["[object WeakMap]"]=!1;const Gk=function Z6(t){return function(n){return t(n)}};var WO="object"==typeof exports&&exports&&!exports.nodeType&&exports,vg=WO&&"object"==typeof module&&module&&!module.nodeType&&module,qk=vg&&vg.exports===WO&&MO.process;const fh=function(){try{return vg&&vg.require&&vg.require("util").types||qk&&qk.binding&&qk.binding("util")}catch{}}();var KO=fh&&fh.isTypedArray;const ij=KO?Gk(KO):function Q6(t){return vl(t)&&qO(t.length)&&!!Dn[Hc(t)]};var rj=Object.prototype.hasOwnProperty;const JO=function sj(t,n){var e=Uk(t),o=!e&&p6(t),s=!e&&!o&&GO(t),l=!e&&!o&&!s&&ij(t),h=e||o||s||l,p=h?function a6(t,n){for(var e=-1,o=Array(t);++e<t;)o[e]=n(e);return o}(t.length,String):[],m=p.length;for(var v in t)(n||rj.call(t,v))&&(!h||!("length"==v||s&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||x6(v,m)))&&p.push(v);return p};var aj=Object.prototype;const Wk=function lj(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||aj)},YO=function cj(t,n){return function(e){return t(n(e))}},dj=YO(Object.keys,Object);var fj=Object.prototype.hasOwnProperty;const QO=function mj(t){return null!=t&&qO(t.length)&&!IO(t)},Kk=function _j(t){return QO(t)?JO(t):function pj(t){if(!Wk(t))return dj(t);var n=[];for(var e in Object(t))fj.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)};var kj=Object.prototype.hasOwnProperty;const Ej=function xj(t){if(!ba(t))return function yj(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=Wk(t),e=[];for(var o in t)"constructor"==o&&(n||!kj.call(t,o))||e.push(o);return e},Jk=function Tj(t){return QO(t)?JO(t,!0):Ej(t)};var XO="object"==typeof exports&&exports&&!exports.nodeType&&exports,ZO=XO&&"object"==typeof module&&module&&!module.nodeType&&module,eP=ZO&&ZO.exports===XO?Yr.Buffer:void 0,tP=eP?eP.allocUnsafe:void 0;const nP=function Fj(){return[]};var Bj=Object.prototype.propertyIsEnumerable,iP=Object.getOwnPropertySymbols,Vj=iP?function(t){return null==t?[]:(t=Object(t),function Ij(t,n){for(var e=-1,o=null==t?0:t.length,s=0,l=[];++e<o;){var h=t[e];n(h,e,t)&&(l[s++]=h)}return l}(iP(t),function(n){return Bj.call(t,n)}))}:nP;const Yk=Vj,oP=function zj(t,n){for(var e=-1,o=n.length,s=t.length;++e<o;)t[s+e]=n[e];return t},Qk=YO(Object.getPrototypeOf,Object);var Gj=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)oP(n,Yk(t)),t=Qk(t);return n}:nP;const rP=Gj,sP=function Kj(t,n,e){var o=n(t);return Uk(t)?o:oP(o,e(t))},Yj=function Jj(t){return sP(t,Kk,Yk)},Xj=function Qj(t){return sP(t,Jk,rP)},Xk=$c(Yr,"DataView"),Zk=$c(Yr,"Promise"),ex=$c(Yr,"Set"),tx=$c(Yr,"WeakMap");var aP="[object Map]",lP="[object Promise]",cP="[object Set]",uP="[object WeakMap]",dP="[object DataView]",o7=zc(Xk),r7=zc(mg),s7=zc(Zk),a7=zc(ex),l7=zc(tx),Uc=Hc;(Xk&&Uc(new Xk(new ArrayBuffer(1)))!=dP||mg&&Uc(new mg)!=aP||Zk&&Uc(Zk.resolve())!=lP||ex&&Uc(new ex)!=cP||tx&&Uc(new tx)!=uP)&&(Uc=function(t){var n=Hc(t),e="[object Object]"==n?t.constructor:void 0,o=e?zc(e):"";if(o)switch(o){case o7:return dP;case r7:return aP;case s7:return lP;case a7:return cP;case l7:return uP}return n});const nx=Uc;var u7=Object.prototype.hasOwnProperty;const hP=Yr.Uint8Array,ix=function p7(t){var n=new t.constructor(t.byteLength);return new hP(n).set(new hP(t)),n};var _7=/\w*$/;var fP=lh?lh.prototype:void 0,pP=fP?fP.valueOf:void 0;const U7=function $7(t,n,e){var o=t.constructor;switch(n){case"[object ArrayBuffer]":return ix(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function g7(t,n){var e=n?ix(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function C7(t,n){var e=n?ix(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return function v7(t){var n=new t.constructor(t.source,_7.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function y7(t){return pP?Object(pP.call(t)):{}}(t)}};var gP=Object.create,G7=function(){function t(){}return function(n){if(!ba(n))return{};if(gP)return gP(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const q7=G7;var mP=fh&&fh.isMap;const Z7=mP?Gk(mP):function Y7(t){return vl(t)&&"[object Map]"==nx(t)};var _P=fh&&fh.isSet;const o9=_P?Gk(_P):function t9(t){return vl(t)&&"[object Set]"==nx(t)};var vP="[object Arguments]",bP="[object Function]",yP="[object Object]",vn={};vn[vP]=vn["[object Array]"]=vn["[object ArrayBuffer]"]=vn["[object DataView]"]=vn["[object Boolean]"]=vn["[object Date]"]=vn["[object Float32Array]"]=vn["[object Float64Array]"]=vn["[object Int8Array]"]=vn["[object Int16Array]"]=vn["[object Int32Array]"]=vn["[object Map]"]=vn["[object Number]"]=vn[yP]=vn["[object RegExp]"]=vn["[object Set]"]=vn["[object String]"]=vn["[object Symbol]"]=vn["[object Uint8Array]"]=vn["[object Uint8ClampedArray]"]=vn["[object Uint16Array]"]=vn["[object Uint32Array]"]=!0,vn["[object Error]"]=vn[bP]=vn["[object WeakMap]"]=!1;const O9=function Xb(t,n,e,o,s,l){var h,p=1&n,m=2&n,v=4&n;if(e&&(h=s?e(t,o,s,l):e(t)),void 0!==h)return h;if(!ba(t))return t;var C=Uk(t);if(C){if(h=function d7(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&u7.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!p)return function Pj(t,n){var e=-1,o=t.length;for(n||(n=Array(o));++e<o;)n[e]=t[e];return n}(t,h)}else{var D=nx(t),N=D==bP||"[object GeneratorFunction]"==D;if(GO(t))return function Aj(t,n){if(n)return t.slice();var e=t.length,o=tP?tP(e):new t.constructor(e);return t.copy(o),o}(t,p);if(D==yP||D==vP||N&&!s){if(h=m||N?{}:function W7(t){return"function"!=typeof t.constructor||Wk(t)?{}:q7(Qk(t))}(t),!p)return m?function qj(t,n){return Qb(t,rP(t),n)}(t,function Dj(t,n){return t&&Qb(n,Jk(n),t)}(h,t)):function jj(t,n){return Qb(t,Yk(t),n)}(t,function vj(t,n){return t&&Qb(n,Kk(n),t)}(h,t))}else{if(!vn[D])return s?t:{};h=U7(t,D,p)}}l||(l=new X8);var V=l.get(t);if(V)return V;l.set(t,h),o9(t)?t.forEach(function(J){h.add(Xb(J,n,e,J,t,l))}):Z7(t)&&t.forEach(function(J,Q){h.set(Q,Xb(J,n,e,Q,t,l))});var q=C?void 0:(v?m?Xj:Yj:m?Jk:Kk)(t);return function Z8(t,n){for(var e=-1,o=null==t?0:t.length;++e<o&&!1!==n(t[e],e,t););}(q||t,function(J,Q){q&&(J=t[Q=J]),VO(h,Q,Xb(J,n,e,Q,t,l))}),h};var wP=Function.prototype.toString,V9=Object.prototype.hasOwnProperty,j9=wP.call(Object);const U9=function $9(t){return vl(t)&&1===t.nodeType&&!function H9(t){if(!vl(t)||"[object Object]"!=Hc(t))return!1;var n=Qk(t);if(null===n)return!0;var e=V9.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&wP.call(e)==j9}(t)};function CP(t,n=new Set){const e=[t],o=new Set;let s=0;for(;e.length>s;){const l=e[s++];if(!(o.has(l)||G9(l)||n.has(l)))if(o.add(l),l[Symbol.iterator])try{for(const h of l)e.push(h)}catch{}else for(const h in l)"defaultValue"!==h&&e.push(l[h])}return o}function G9(t){const n=Object.prototype.toString.call(t),e=typeof t;return"number"===e||"boolean"===e||"string"===e||"symbol"===e||"function"===e||"[object Date]"===n||"[object RegExp]"===n||"[object Module]"===n||null==t||t instanceof EventTarget||t instanceof Event}class J9 extends class K9{constructor(n){if(this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof n.crashNumberLimit?n.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof n.minimumNonErrorTimePeriod?n.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const o=e.error||e.reason;o instanceof Error&&this._handleError(o,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(n){this._creator=n}setDestructor(n){this._destructor=n}destroy(){this._stopErrorHandling(),this._listeners={}}on(n,e){this._listeners[n]||(this._listeners[n]=[]),this._listeners[n].push(e)}off(n,e){this._listeners[n]=this._listeners[n].filter(o=>o!==e)}_fire(n,...e){const o=this._listeners[n]||[];for(const s of o)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(n,e){if(this._shouldReactToError(n)){this.crashes.push({message:n.message,stack:n.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,date:this._now()});const o=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:n,causesRestart:o}),o?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(n){return n.is&&n.is("CKEditorError")&&null!=n.context&&"ready"===this.state&&this._isErrorComingFromThisItem(n)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}{constructor(n,e={}){super(e),this._editor=null,this._throttledSave=EV(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),this._creator=(o,s)=>n.create(o,s),this._destructor=o=>o.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(n=>{console.error("An error happened during the editor destroying.",n)}).then(()=>{if("string"==typeof this._elementOrData)return this.create(this._data,this._config,this._config.context);{const n=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,n,n.context)}}).then(()=>{this._fire("restart")})}create(n=this._elementOrData,e=this._config,o){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=n,this._config=this._cloneEditorConfiguration(e)||{},this._config.context=o,this._creator(n,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const n=this._editor;return this._editor=null,n.model.document.off("change:data",this._throttledSave),this._destructor(n)})}_save(){const n=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=n}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(n){this._excludedProps=n}_getData(){const n={};for(const e of this._editor.model.document.getRootNames())n[e]=this._editor.data.get({rootName:e});return n}_isErrorComingFromThisItem(n){return function q9(t,n,e=new Set){if(t===n&&function W9(t){return"object"==typeof t&&null!==t}(t))return!0;const o=CP(t,e),s=CP(n,e);for(const l of o)if(s.has(l))return!0;return!1}(this._editor,n.context,this._excludedProps)}_cloneEditorConfiguration(n){return function I9(t,n){return O9(t,5,n="function"==typeof n?n:void 0)}(n,(e,o)=>{if(U9(e)||"context"===o)return e})}}const Zb=w(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pi(t){return t<=0?()=>no:yn((n,e)=>{let o=0;n.subscribe(Et(e,s=>{++o<=t&&(e.next(s),t<=o&&e.complete())}))})}function e0(t){return yn((n,e)=>{let o=!1;n.subscribe(Et(e,s=>{o=!0,e.next(s)},()=>{o||e.next(t),e.complete()}))})}function kP(t=Y9){return yn((n,e)=>{let o=!1;n.subscribe(Et(e,s=>{o=!0,e.next(s)},()=>o?e.complete():e.error(t())))})}function Y9(){return new Zb}function ya(t,n){const e=arguments.length>=2;return o=>o.pipe(t?Hn((s,l)=>t(s,l,o)):yo,pi(1),e?e0(n):kP(()=>new Zb))}function Q9(t,n){}const Xi=new Array(256).fill(0).map((t,n)=>("0"+n.toString(16)).slice(-2)),ox="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let xP=(()=>{class t{constructor(e,o){this.config={},this.data="",this.tagName="div",this.ready=new Te,this.change=new Te,this.blur=new Te,this.focus=new Te,this.error=new Te,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function Z9(){const t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0;return"e"+Xi[t>>0&255]+Xi[t>>8&255]+Xi[t>>16&255]+Xi[t>>24&255]+Xi[n>>0&255]+Xi[n>>8&255]+Xi[n>>16&255]+Xi[n>>24&255]+Xi[e>>0&255]+Xi[e>>8&255]+Xi[e>>16&255]+Xi[e>>24&255]+Xi[o>>0&255]+Xi[o>>8&255]+Xi[o>>16&255]+Xi[o>>24&255]}(),this.ngZone=o,this.elementRef=e;const{CKEDITOR_VERSION:s}=window;if(s){const[l]=s.split(".").map(Number);l<34&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 34 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(e){this.setDisabledState(e)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let e=this.editorWatchdog;return this.watchdog&&(e=this.watchdog._watchdogs.get(this.id)),e?e.editor:null}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return Mr(this,void 0,void 0,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(e){null===e&&(e=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.setData(e),this.isEditorSettingData=!1):(this.data=e,this.ready.pipe(ya()).subscribe(o=>{o.setData(this.data)}))}registerOnChange(e){this.cvaOnChange=e}registerOnTouched(e){this.cvaOnTouched=e}setDisabledState(e){this.editorInstance&&(e?this.editorInstance.enableReadOnlyMode(ox):this.editorInstance.disableReadOnlyMode(ox)),this.initiallyDisabled=e}attachToWatchdog(){const e=(p,m)=>Mr(this,void 0,void 0,function*(){return this.ngZone.runOutsideAngular(()=>Mr(this,void 0,void 0,function*(){this.elementRef.nativeElement.appendChild(p);const v=yield this.editor.create(p,m);return this.initiallyDisabled&&v.enableReadOnlyMode(ox),this.ngZone.run(()=>{this.ready.emit(v)}),this.setUpEditorEvents(v),v}))}),o=p=>Mr(this,void 0,void 0,function*(){yield p.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),s=()=>{this.ngZone.run(()=>{this.error.emit()})},l=document.createElement(this.tagName),h=this.getConfig();if(this.editorElement=l,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:e,destructor:o,sourceElementOrData:l,config:h}),this.watchdog.on("itemError",(p,{itemId:m})=>{m===this.id&&s()});else{const p=new J9(this.editor);p.setCreator(e),p.setDestructor(o),p.on("error",s),this.editorWatchdog=p,this.editorWatchdog.create(l,h)}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const e=Object.assign({},this.config),o=this.config.initialData||this.data;return o&&(e.initialData=o),e}setUpEditorEvents(e){const s=e.editing.view.document;e.model.document.on("change:data",l=>{this.ngZone.run(()=>{if(this.cvaOnChange&&!this.isEditorSettingData){const h=e.getData();this.cvaOnChange(h)}this.change.emit({event:l,editor:e})})}),s.on("focus",l=>{this.ngZone.run(()=>{this.focus.emit({event:l,editor:e})})}),s.on("blur",l=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:l,editor:e})})})}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["ckeditor"]],inputs:{config:"config",data:"data",tagName:"tagName",disabled:"disabled",editor:"editor",watchdog:"watchdog"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[on([{provide:or,useExisting:_t(()=>t),multi:!0}])],decls:1,vars:0,template:function(e,o){1&e&&H(0,Q9,0,0,"ng-template")},encapsulation:2}),t})(),eH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Rk,Bo]}),t})();const tH=["addListener","removeListener"],nH=["addEventListener","removeEventListener"],iH=["on","off"];function Li(t,n,e,o){if(P(e)&&(o=e,e=void 0),o)return Li(t,n,e).pipe(pk(o));const[s,l]=function sH(t){return P(t.addEventListener)&&P(t.removeEventListener)}(t)?nH.map(h=>p=>t[h](n,p,e)):function oH(t){return P(t.addListener)&&P(t.removeListener)}(t)?tH.map(EP(t,n)):function rH(t){return P(t.on)&&P(t.off)}(t)?iH.map(EP(t,n)):[];if(!s&&Bh(t))return Ke(h=>Li(h,n,e))(Yn(t));if(!s)throw new TypeError("Invalid event target");return new Wt(h=>{const p=(...m)=>h.next(1<m.length?m:m[0]);return s(p),()=>l(p)})}function EP(t,n){return e=>o=>t[e](n,o)}class aH extends Se{constructor(n,e){super()}schedule(n,e=0){return this}}const t0={setInterval(t,n,...e){const{delegate:o}=t0;return o?.setInterval?o.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=t0;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},TP={now:()=>(TP.delegate||Date).now(),delegate:void 0};class bg{constructor(n,e=bg.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,o){return new this.schedulerActionCtor(this,n).schedule(o,e)}}bg.now=TP.now;const rx=new class cH extends bg{constructor(n,e=bg.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let o;this._active=!0;do{if(o=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,o){for(;n=e.shift();)n.unsubscribe();throw o}}}(class lH extends aH{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var o;if(this.closed)return this;this.state=n;const s=this.id,l=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(l,s,e)),this.pending=!0,this.delay=e,this.id=null!==(o=this.id)&&void 0!==o?o:this.requestAsyncId(l,this.id,e),this}requestAsyncId(n,e,o=0){return t0.setInterval(n.flush.bind(n,this),o)}recycleAsyncId(n,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;null!=e&&t0.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(n,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let s,o=!1;try{this.work(n)}catch(l){o=!0,s=l||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,j(o,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),uH=rx;function sx(t=0,n,e=uH){let o=-1;return null!=n&&(cu(n)?e=n:o=n),new Wt(s=>{let l=function dH(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;l<0&&(l=0);let h=0;return e.schedule(function(){s.closed||(s.next(h++),0<=o?this.schedule(void 0,o):s.complete())},l)})}const{isArray:hH}=Array;function DP(t){return 1===t.length&&hH(t[0])?t[0]:t}function MP(...t){return 1===(t=DP(t)).length?Yn(t[0]):new Wt(function fH(t){return n=>{let e=[];for(let o=0;e&&!n.closed&&o<t.length;o++)e.push(Yn(t[o]).subscribe(Et(n,s=>{if(e){for(let l=0;l<e.length;l++)l!==o&&e[l].unsubscribe();e=null}n.next(s)})))}}(t))}class Mi extends mt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:o}=this;if(n)throw e;return this._throwIfClosed(),o}next(n){super.next(this._value=n)}}function n0(...t){const n=Ol(t),e=Al(t),{args:o,keys:s}=hA(t);if(0===o.length)return dn([],n);const l=new Wt(function pH(t,n,e=yo){return o=>{SP(n,()=>{const{length:s}=t,l=new Array(s);let h=s,p=s;for(let m=0;m<s;m++)SP(n,()=>{const v=dn(t[m],n);let C=!1;v.subscribe(Et(o,D=>{l[m]=D,C||(C=!0,p--),p||o.next(e(l.slice()))},()=>{--h||o.complete()}))},o)},o)}}(o,n,s?h=>fA(s,h):yo));return e?l.pipe(pk(e)):l}function SP(t,n,e){t?Ho(e,t,n):n()}function o0(...t){const n=Al(t),e=DP(t);return e.length?new Wt(o=>{let s=e.map(()=>[]),l=e.map(()=>!1);o.add(()=>{s=l=null});for(let h=0;!o.closed&&h<e.length;h++)Yn(e[h]).subscribe(Et(o,p=>{if(s[h].push(p),s.every(m=>m.length)){const m=s.map(v=>v.shift());o.next(n?n(...m):m),s.some((v,C)=>!v.length&&l[C])&&o.complete()}},()=>{l[h]=!0,!s[h].length&&o.complete()}));return()=>{s=l=null}}):no}function yg(...t){return function gH(){return Da(1)}()(dn(t,Ol(t)))}function Kn(t){return yn((n,e)=>{Yn(t).subscribe(Et(e,()=>e.complete(),Fn)),!e.closed&&n.subscribe(e)})}function r0(...t){const n=Ol(t);return yn((e,o)=>{(n?yg(t,e,n):yg(t,e)).subscribe(o)})}function _H(t,n){return t===n}function kr(t,n){return yn((e,o)=>{let s=null,l=0,h=!1;const p=()=>h&&!s&&o.complete();e.subscribe(Et(o,m=>{s?.unsubscribe();let v=0;const C=l++;Yn(t(m,C)).subscribe(s=Et(o,D=>o.next(n?n(m,D,C,v++):D),()=>{s=null,p()}))},()=>{h=!0,p()}))})}function gi(t,n,e){const o=P(t)||n||e?{next:t,error:n,complete:e}:t;return o?yn((s,l)=>{var h;null===(h=o.subscribe)||void 0===h||h.call(o);let p=!0;s.subscribe(Et(l,m=>{var v;null===(v=o.next)||void 0===v||v.call(o,m),l.next(m)},()=>{var m;p=!1,null===(m=o.complete)||void 0===m||m.call(o),l.complete()},m=>{var v;p=!1,null===(v=o.error)||void 0===v||v.call(o,m),l.error(m)},()=>{var m,v;p&&(null===(m=o.unsubscribe)||void 0===m||m.call(o)),null===(v=o.finalize)||void 0===v||v.call(o)}))}):yo}function lx(...t){const n=Al(t);return yn((e,o)=>{const s=t.length,l=new Array(s);let h=t.map(()=>!1),p=!1;for(let m=0;m<s;m++)Yn(t[m]).subscribe(Et(o,v=>{l[m]=v,!p&&!h[m]&&(h[m]=!0,(p=h.every(yo))&&(h=null))},Fn));e.subscribe(Et(o,m=>{if(p){const v=[m,...l];o.next(n?n(...v):v)}}))})}function OP(t){return Be(()=>t)}function PP(t,n){return n?e=>yg(n.pipe(pi(1),function vH(){return yn((t,n)=>{t.subscribe(Et(n,Fn))})}()),e.pipe(PP(t))):Ke((e,o)=>t(e,o).pipe(pi(1),OP(e)))}function NP(t,n=rx){const e=sx(t,n);return PP(()=>e)}new Wt(Fn);var yH={left:"right",right:"left",bottom:"top",top:"bottom"};function s0(t){return t.replace(/left|right|bottom|top/g,function(n){return yH[n]})}function xs(t){return t.split("-")[0]}var wH={start:"end",end:"start"};function IP(t){return t.replace(/start|end/g,function(n){return wH[n]})}var rr="top",Qr="bottom",Xr="right",sr="left",cx="auto",wg=[rr,Qr,Xr,sr],ph="start",Cg="end",RP="viewport",kg="popper",FP=wg.reduce(function(t,n){return t.concat([n+"-"+ph,n+"-"+Cg])},[]),LP=[].concat(wg,[cx]).reduce(function(t,n){return t.concat([n,n+"-"+ph,n+"-"+Cg])},[]),NH=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function xr(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function Gc(t){return t instanceof xr(t).Element||t instanceof Element}function Er(t){return t instanceof xr(t).HTMLElement||t instanceof HTMLElement}function ux(t){return!(typeof ShadowRoot>"u")&&(t instanceof xr(t).ShadowRoot||t instanceof ShadowRoot)}function bl(t){return((Gc(t)?t.ownerDocument:t.document)||window.document).documentElement}var qc=Math.max,a0=Math.min,gh=Math.round;function dx(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function BP(){return!/^((?!chrome|android).)*safari/i.test(dx())}function mh(t,n,e){void 0===n&&(n=!1),void 0===e&&(e=!1);var o=t.getBoundingClientRect(),s=1,l=1;n&&Er(t)&&(s=t.offsetWidth>0&&gh(o.width)/t.offsetWidth||1,l=t.offsetHeight>0&&gh(o.height)/t.offsetHeight||1);var p=(Gc(t)?xr(t):window).visualViewport,m=!BP()&&e,v=(o.left+(m&&p?p.offsetLeft:0))/s,C=(o.top+(m&&p?p.offsetTop:0))/l,D=o.width/s,N=o.height/l;return{width:D,height:N,top:C,right:v+D,bottom:C+N,left:v,x:v,y:C}}function hx(t){var n=xr(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function fx(t){return mh(bl(t)).left+hx(t).scrollLeft}function wa(t){return xr(t).getComputedStyle(t)}function Es(t){return t?(t.nodeName||"").toLowerCase():null}function l0(t){return"html"===Es(t)?t:t.assignedSlot||t.parentNode||(ux(t)?t.host:null)||bl(t)}function px(t){var n=wa(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function VP(t){return["html","body","#document"].indexOf(Es(t))>=0?t.ownerDocument.body:Er(t)&&px(t)?t:VP(l0(t))}function xg(t,n){var e;void 0===n&&(n=[]);var o=VP(t),s=o===(null==(e=t.ownerDocument)?void 0:e.body),l=xr(o),h=s?[l].concat(l.visualViewport||[],px(o)?o:[]):o,p=n.concat(h);return s?p:p.concat(xg(l0(h)))}function FH(t){return["table","td","th"].indexOf(Es(t))>=0}function jP(t){return Er(t)&&"fixed"!==wa(t).position?t.offsetParent:null}function Eg(t){for(var n=xr(t),e=jP(t);e&&FH(e)&&"static"===wa(e).position;)e=jP(e);return e&&("html"===Es(e)||"body"===Es(e)&&"static"===wa(e).position)?n:e||function LH(t){var n=/firefox/i.test(dx());if(/Trident/i.test(dx())&&Er(t)&&"fixed"===wa(t).position)return null;var s=l0(t);for(ux(s)&&(s=s.host);Er(s)&&["html","body"].indexOf(Es(s))<0;){var l=wa(s);if("none"!==l.transform||"none"!==l.perspective||"paint"===l.contain||-1!==["transform","perspective"].indexOf(l.willChange)||n&&"filter"===l.willChange||n&&l.filter&&"none"!==l.filter)return s;s=s.parentNode}return null}(t)||n}function HP(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&ux(e)){var o=n;do{if(o&&t.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function gx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zP(t,n,e){return n===RP?gx(function IH(t,n){var e=xr(t),o=bl(t),s=e.visualViewport,l=o.clientWidth,h=o.clientHeight,p=0,m=0;if(s){l=s.width,h=s.height;var v=BP();(v||!v&&"fixed"===n)&&(p=s.offsetLeft,m=s.offsetTop)}return{width:l,height:h,x:p+fx(t),y:m}}(t,e)):Gc(n)?function BH(t,n){var e=mh(t,!1,"fixed"===n);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(n,e):gx(function RH(t){var n,e=bl(t),o=hx(t),s=null==(n=t.ownerDocument)?void 0:n.body,l=qc(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),h=qc(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),p=-o.scrollLeft+fx(t),m=-o.scrollTop;return"rtl"===wa(s||e).direction&&(p+=qc(e.clientWidth,s?s.clientWidth:0)-l),{width:l,height:h,x:p,y:m}}(bl(t)))}function _h(t){return t.split("-")[1]}function mx(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $P(t){var m,n=t.reference,e=t.element,o=t.placement,s=o?xs(o):null,l=o?_h(o):null,h=n.x+n.width/2-e.width/2,p=n.y+n.height/2-e.height/2;switch(s){case rr:m={x:h,y:n.y-e.height};break;case Qr:m={x:h,y:n.y+n.height};break;case Xr:m={x:n.x+n.width,y:p};break;case sr:m={x:n.x-e.width,y:p};break;default:m={x:n.x,y:n.y}}var v=s?mx(s):null;if(null!=v){var C="y"===v?"height":"width";switch(l){case ph:m[v]=m[v]-(n[C]/2-e[C]/2);break;case Cg:m[v]=m[v]+(n[C]/2-e[C]/2)}}return m}function GP(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function qP(t,n){return n.reduce(function(e,o){return e[o]=t,e},{})}function _x(t,n){void 0===n&&(n={});var o=n.placement,s=void 0===o?t.placement:o,l=n.strategy,h=void 0===l?t.strategy:l,p=n.boundary,m=void 0===p?"clippingParents":p,v=n.rootBoundary,C=void 0===v?RP:v,D=n.elementContext,N=void 0===D?kg:D,V=n.altBoundary,U=void 0!==V&&V,q=n.padding,J=void 0===q?0:q,Q=GP("number"!=typeof J?J:qP(J,wg)),X=t.rects.popper,ce=t.elements[U?N===kg?"reference":kg:N],ve=function jH(t,n,e,o){var s="clippingParents"===n?function VH(t){var n=xg(l0(t)),o=["absolute","fixed"].indexOf(wa(t).position)>=0&&Er(t)?Eg(t):t;return Gc(o)?n.filter(function(s){return Gc(s)&&HP(s,o)&&"body"!==Es(s)}):[]}(t):[].concat(n),l=[].concat(s,[e]),p=l.reduce(function(m,v){var C=zP(t,v,o);return m.top=qc(C.top,m.top),m.right=a0(C.right,m.right),m.bottom=a0(C.bottom,m.bottom),m.left=qc(C.left,m.left),m},zP(t,l[0],o));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}(Gc(ce)?ce:ce.contextElement||bl(t.elements.popper),m,C,h),me=mh(t.elements.reference),it=$P({reference:me,element:X,strategy:"absolute",placement:s}),gt=gx(Object.assign({},X,it)),bn=N===kg?gt:me,zn={top:ve.top-bn.top+Q.top,bottom:bn.bottom-ve.bottom+Q.bottom,left:ve.left-bn.left+Q.left,right:bn.right-ve.right+Q.right},Mn=t.modifiersData.offset;if(N===kg&&Mn){var vo=Mn[s];Object.keys(zn).forEach(function(_i){var ns=[Xr,Qr].indexOf(_i)>=0?1:-1,is=[rr,Qr].indexOf(_i)>=0?"y":"x";zn[_i]+=vo[is]*ns})}return zn}const UH={name:"flip",enabled:!0,phase:"main",fn:function $H(t){var n=t.state,e=t.options,o=t.name;if(!n.modifiersData[o]._skip){for(var s=e.mainAxis,l=void 0===s||s,h=e.altAxis,p=void 0===h||h,m=e.fallbackPlacements,v=e.padding,C=e.boundary,D=e.rootBoundary,N=e.altBoundary,V=e.flipVariations,U=void 0===V||V,q=e.allowedAutoPlacements,J=n.options.placement,Q=xs(J),X=m||(Q!==J&&U?function zH(t){if(xs(t)===cx)return[];var n=s0(t);return[IP(t),n,IP(n)]}(J):[s0(J)]),ce=[J].concat(X).reduce(function(Ph,El){return Ph.concat(xs(El)===cx?function HH(t,n){void 0===n&&(n={});var s=n.boundary,l=n.rootBoundary,h=n.padding,p=n.flipVariations,m=n.allowedAutoPlacements,v=void 0===m?LP:m,C=_h(n.placement),D=C?p?FP:FP.filter(function(U){return _h(U)===C}):wg,N=D.filter(function(U){return v.indexOf(U)>=0});0===N.length&&(N=D);var V=N.reduce(function(U,q){return U[q]=_x(t,{placement:q,boundary:s,rootBoundary:l,padding:h})[xs(q)],U},{});return Object.keys(V).sort(function(U,q){return V[U]-V[q]})}(n,{placement:El,boundary:C,rootBoundary:D,padding:v,flipVariations:U,allowedAutoPlacements:q}):El)},[]),ve=n.rects.reference,me=n.rects.popper,it=new Map,gt=!0,bn=ce[0],zn=0;zn<ce.length;zn++){var Mn=ce[zn],vo=xs(Mn),_i=_h(Mn)===ph,ns=[rr,Qr].indexOf(vo)>=0,is=ns?"width":"height",Hi=_x(n,{placement:Mn,boundary:C,rootBoundary:D,altBoundary:N,padding:v}),os=ns?_i?Xr:sr:_i?Qr:rr;ve[is]>me[is]&&(os=s0(os));var ry=s0(os),ou=[];if(l&&ou.push(Hi[vo]<=0),p&&ou.push(Hi[os]<=0,Hi[ry]<=0),ou.every(function(Ph){return Ph})){bn=Mn,gt=!1;break}it.set(Mn,ou)}if(gt)for(var dE=function(El){var im=ce.find(function(ly){var ru=it.get(ly);if(ru)return ru.slice(0,El).every(function(hE){return hE})});if(im)return bn=im,"break"},nm=U?3:1;nm>0&&"break"!==dE(nm);nm--);n.placement!==bn&&(n.modifiersData[o]._skip=!0,n.placement=bn,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Tg(t,n,e){return qc(t,a0(n,e))}function vx(t){var n=mh(t),e=t.offsetWidth,o=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-o)<=1&&(o=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:o}}const KH={name:"preventOverflow",enabled:!0,phase:"main",fn:function WH(t){var n=t.state,e=t.options,o=t.name,s=e.mainAxis,l=void 0===s||s,h=e.altAxis,p=void 0!==h&&h,N=e.tether,V=void 0===N||N,U=e.tetherOffset,q=void 0===U?0:U,J=_x(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),Q=xs(n.placement),te=_h(n.placement),X=!te,ce=mx(Q),ve=function GH(t){return"x"===t?"y":"x"}(ce),me=n.modifiersData.popperOffsets,it=n.rects.reference,gt=n.rects.popper,bn="function"==typeof q?q(Object.assign({},n.rects,{placement:n.placement})):q,zn="number"==typeof bn?{mainAxis:bn,altAxis:bn}:Object.assign({mainAxis:0,altAxis:0},bn),Mn=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,vo={x:0,y:0};if(me){if(l){var _i,ns="y"===ce?rr:sr,is="y"===ce?Qr:Xr,Hi="y"===ce?"height":"width",os=me[ce],ry=os+J[ns],ou=os-J[is],sy=V?-gt[Hi]/2:0,dE=te===ph?it[Hi]:gt[Hi],nm=te===ph?-gt[Hi]:-it[Hi],ay=n.elements.arrow,Ph=V&&ay?vx(ay):{width:0,height:0},El=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},im=El[ns],ly=El[is],ru=Tg(0,it[Hi],Ph[Hi]),hE=X?it[Hi]/2-sy-ru-im-zn.mainAxis:dE-ru-im-zn.mainAxis,HZ=X?-it[Hi]/2+sy+ru+ly+zn.mainAxis:nm+ru+ly+zn.mainAxis,fE=n.elements.arrow&&Eg(n.elements.arrow),O2=null!=(_i=Mn?.[ce])?_i:0,UZ=os+HZ-O2,P2=Tg(V?a0(ry,os+hE-O2-(fE?"y"===ce?fE.clientTop||0:fE.clientLeft||0:0)):ry,os,V?qc(ou,UZ):ou);me[ce]=P2,vo[ce]=P2-os}if(p){var N2,su=me[ve],cy="y"===ve?"height":"width",I2=su+J["x"===ce?rr:sr],R2=su-J["x"===ce?Qr:Xr],pE=-1!==[rr,sr].indexOf(Q),F2=null!=(N2=Mn?.[ve])?N2:0,L2=pE?I2:su-it[cy]-gt[cy]-F2+zn.altAxis,B2=pE?su+it[cy]+gt[cy]-F2-zn.altAxis:R2,V2=V&&pE?function qH(t,n,e){var o=Tg(t,n,e);return o>e?e:o}(L2,su,B2):Tg(V?L2:I2,su,V?B2:R2);me[ve]=V2,vo[ve]=V2-su}n.modifiersData[o]=vo}},requiresIfExists:["offset"]},XH={name:"arrow",enabled:!0,phase:"main",fn:function YH(t){var n,e=t.state,o=t.name,s=t.options,l=e.elements.arrow,h=e.modifiersData.popperOffsets,p=xs(e.placement),m=mx(p),C=[sr,Xr].indexOf(p)>=0?"height":"width";if(l&&h){var D=function(n,e){return GP("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:qP(n,wg))}(s.padding,e),N=vx(l),V="y"===m?rr:sr,U="y"===m?Qr:Xr,q=e.rects.reference[C]+e.rects.reference[m]-h[m]-e.rects.popper[C],J=h[m]-e.rects.reference[m],Q=Eg(l),te=Q?"y"===m?Q.clientHeight||0:Q.clientWidth||0:0,me=te/2-N[C]/2+(q/2-J/2),it=Tg(D[V],me,te-N[C]-D[U]);e.modifiersData[o]=((n={})[m]=it,n.centerOffset=it-me,n)}},effect:function QH(t){var n=t.state,o=t.options.element,s=void 0===o?"[data-popper-arrow]":o;null!=s&&("string"==typeof s&&!(s=n.elements.popper.querySelector(s))||!HP(n.elements.popper,s)||(n.elements.arrow=s))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nz(t,n,e){void 0===e&&(e=!1);var o=Er(n),s=Er(n)&&function tz(t){var n=t.getBoundingClientRect(),e=gh(n.width)/t.offsetWidth||1,o=gh(n.height)/t.offsetHeight||1;return 1!==e||1!==o}(n),l=bl(n),h=mh(t,s,e),p={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(o||!o&&!e)&&(("body"!==Es(n)||px(l))&&(p=function ez(t){return t!==xr(t)&&Er(t)?function ZH(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):hx(t)}(n)),Er(n)?((m=mh(n,!0)).x+=n.clientLeft,m.y+=n.clientTop):l&&(m.x=fx(l))),{x:h.left+p.scrollLeft-m.x,y:h.top+p.scrollTop-m.y,width:h.width,height:h.height}}function iz(t){var n=new Map,e=new Set,o=[];function s(l){e.add(l.name),[].concat(l.requires||[],l.requiresIfExists||[]).forEach(function(p){if(!e.has(p)){var m=n.get(p);m&&s(m)}}),o.push(l)}return t.forEach(function(l){n.set(l.name,l)}),t.forEach(function(l){e.has(l.name)||s(l)}),o}function rz(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var WP={placement:"bottom",modifiers:[],strategy:"absolute"};function KP(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(o){return!(o&&"function"==typeof o.getBoundingClientRect)})}function az(t){void 0===t&&(t={});var e=t.defaultModifiers,o=void 0===e?[]:e,s=t.defaultOptions,l=void 0===s?WP:s;return function(p,m,v){void 0===v&&(v=l);var C={placement:"bottom",orderedModifiers:[],options:Object.assign({},WP,l),modifiersData:{},elements:{reference:p,popper:m},attributes:{},styles:{}},D=[],N=!1,V={state:C,setOptions:function(Q){var te="function"==typeof Q?Q(C.options):Q;q(),C.options=Object.assign({},l,C.options,te),C.scrollParents={reference:Gc(p)?xg(p):p.contextElement?xg(p.contextElement):[],popper:xg(m)};var X=function oz(t){var n=iz(t);return NH.reduce(function(e,o){return e.concat(n.filter(function(s){return s.phase===o}))},[])}(function sz(t){var n=t.reduce(function(e,o){var s=e[o.name];return e[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(o,C.options.modifiers)));return C.orderedModifiers=X.filter(function(Mn){return Mn.enabled}),function U(){C.orderedModifiers.forEach(function(J){var te=J.options,ce=J.effect;if("function"==typeof ce){var ve=ce({state:C,name:J.name,instance:V,options:void 0===te?{}:te});D.push(ve||function(){})}})}(),V.update()},forceUpdate:function(){if(!N){var Q=C.elements,te=Q.reference,X=Q.popper;if(KP(te,X)){C.rects={reference:nz(te,Eg(X),"fixed"===C.options.strategy),popper:vx(X)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function(Mn){return C.modifiersData[Mn.name]=Object.assign({},Mn.data)});for(var ve=0;ve<C.orderedModifiers.length;ve++)if(!0!==C.reset){var me=C.orderedModifiers[ve],it=me.fn,gt=me.options;"function"==typeof it&&(C=it({state:C,options:void 0===gt?{}:gt,name:me.name,instance:V})||C)}else C.reset=!1,ve=-1}}},update:rz(function(){return new Promise(function(J){V.forceUpdate(),J(C)})}),destroy:function(){q(),N=!0}};if(!KP(p,m))return V;function q(){D.forEach(function(J){return J()}),D=[]}return V.setOptions(v).then(function(J){!N&&v.onFirstUpdate&&v.onFirstUpdate(J)}),V}}var c0={passive:!0};const cz={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function lz(t){var n=t.state,e=t.instance,o=t.options,s=o.scroll,l=void 0===s||s,h=o.resize,p=void 0===h||h,m=xr(n.elements.popper),v=[].concat(n.scrollParents.reference,n.scrollParents.popper);return l&&v.forEach(function(C){C.addEventListener("scroll",e.update,c0)}),p&&m.addEventListener("resize",e.update,c0),function(){l&&v.forEach(function(C){C.removeEventListener("scroll",e.update,c0)}),p&&m.removeEventListener("resize",e.update,c0)}},data:{}},dz={name:"popperOffsets",enabled:!0,phase:"read",fn:function uz(t){var n=t.state;n.modifiersData[t.name]=$P({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}};var hz={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JP(t){var n,e=t.popper,o=t.popperRect,s=t.placement,l=t.variation,h=t.offsets,p=t.position,m=t.gpuAcceleration,v=t.adaptive,C=t.roundOffsets,D=t.isFixed,N=h.x,V=void 0===N?0:N,U=h.y,q=void 0===U?0:U,J="function"==typeof C?C({x:V,y:q}):{x:V,y:q};V=J.x,q=J.y;var Q=h.hasOwnProperty("x"),te=h.hasOwnProperty("y"),X=sr,ce=rr,ve=window;if(v){var me=Eg(e),it="clientHeight",gt="clientWidth";me===xr(e)&&"static"!==wa(me=bl(e)).position&&"absolute"===p&&(it="scrollHeight",gt="scrollWidth"),(s===rr||(s===sr||s===Xr)&&l===Cg)&&(ce=Qr,q-=(D&&me===ve&&ve.visualViewport?ve.visualViewport.height:me[it])-o.height,q*=m?1:-1),s!==sr&&(s!==rr&&s!==Qr||l!==Cg)||(X=Xr,V-=(D&&me===ve&&ve.visualViewport?ve.visualViewport.width:me[gt])-o.width,V*=m?1:-1)}var _i,Mn=Object.assign({position:p},v&&hz),vo=!0===C?function fz(t){var e=t.y,s=window.devicePixelRatio||1;return{x:gh(t.x*s)/s||0,y:gh(e*s)/s||0}}({x:V,y:q}):{x:V,y:q};return V=vo.x,q=vo.y,Object.assign({},Mn,m?((_i={})[ce]=te?"0":"",_i[X]=Q?"0":"",_i.transform=(ve.devicePixelRatio||1)<=1?"translate("+V+"px, "+q+"px)":"translate3d("+V+"px, "+q+"px, 0)",_i):((n={})[ce]=te?q+"px":"",n[X]=Q?V+"px":"",n.transform="",n))}const gz={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function pz(t){var n=t.state,e=t.options,o=e.gpuAcceleration,s=void 0===o||o,l=e.adaptive,h=void 0===l||l,p=e.roundOffsets,m=void 0===p||p,C={placement:xs(n.placement),variation:_h(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:s,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,JP(Object.assign({},C,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:h,roundOffsets:m})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,JP(Object.assign({},C,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}};var vz=[cz,dz,gz,{name:"applyStyles",enabled:!0,phase:"write",fn:function mz(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var o=n.styles[e]||{},s=n.attributes[e]||{},l=n.elements[e];!Er(l)||!Es(l)||(Object.assign(l.style,o),Object.keys(s).forEach(function(h){var p=s[h];!1===p?l.removeAttribute(h):l.setAttribute(h,!0===p?"":p)}))})},effect:function _z(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(o){var s=n.elements[o],l=n.attributes[o]||{},p=Object.keys(n.styles.hasOwnProperty(o)?n.styles[o]:e[o]).reduce(function(m,v){return m[v]="",m},{});!Er(s)||!Es(s)||(Object.assign(s.style,p),Object.keys(l).forEach(function(m){s.removeAttribute(m)}))})}},requires:["computeStyles"]}],bz=az({defaultModifiers:vz});const Cz={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function wz(t){var n=t.state,o=t.name,s=t.options.offset,l=void 0===s?[0,0]:s,h=LP.reduce(function(C,D){return C[D]=function yz(t,n,e){var o=xs(t),s=[sr,rr].indexOf(o)>=0?-1:1,l="function"==typeof e?e(Object.assign({},n,{placement:t})):e,h=l[0],p=l[1];return h=h||0,p=(p||0)*s,[sr,Xr].indexOf(o)>=0?{x:p,y:h}:{x:h,y:p}}(D,n.rects,l),C},{}),p=h[n.placement],v=p.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=p.x,n.modifiersData.popperOffsets.y+=v),n.modifiersData[o]=h}};function kz(t,n){}function xz(t,n){if(1&t&&(x(0,"button",3),R(1),H(2,kz,0,0,"ng-template",4),M()),2&t){const e=n.$implicit;I("ngbPanelToggle",e),A(1),Pt(" ",e.title,""),A(1),I("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function Ez(t,n){}function Tz(t,n){}function Dz(t,n){if(1&t){const e=ke();x(0,"div",8),K("ngbRef",function(s){return ae(e),ne(B().$implicit.panelDiv=s)}),x(1,"div",9),H(2,Tz,0,0,"ng-template",4),M()()}if(2&t){const e=B().$implicit;Zd("id",e.id),wt("aria-labelledby",e.id+"-header"),A(2),I("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}const Mz=function(t,n){return{$implicit:t,opened:n}};function Sz(t,n){if(1&t&&(x(0,"div")(1,"div",5),H(2,Ez,0,0,"ng-template",6),M(),H(3,Dz,3,3,"div",7),M()),2&t){const e=n.$implicit,o=B(),s=Oe(1);la("accordion-item "+(e.cardClass||"")),A(1),la("accordion-header "+(e.type?"bg-"+e.type:o.type?"bg-"+o.type:"")),zr("id","",e.id,"-header"),A(1),I("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||s)("ngTemplateOutletContext",Cs(8,Mz,e,e.isOpen)),A(1),I("ngIf",!o.destroyOnHide||e.isOpen||e.transitionRunning)}}function Az(t,n){if(1&t){const e=ke();x(0,"button",1),K("click",function(){return ae(e),ne(B().close())}),M()}}const Dg=["*"],Fz=["month"],Lz=["year"];function Bz(t,n){if(1&t&&(x(0,"option",5),R(1),M()),2&t){const e=n.$implicit,o=B();I("value",e),wt("aria-label",o.i18n.getMonthFullName(e,o.date.year)),A(1),ge(o.i18n.getMonthShortName(e,o.date.year))}}function Vz(t,n){if(1&t&&(x(0,"option",5),R(1),M()),2&t){const e=n.$implicit,o=B();I("value",e),A(1),ge(o.i18n.getYearNumerals(e))}}function jz(t,n){if(1&t){const e=ke();x(0,"ngb-datepicker-navigation-select",7),K("select",function(s){return ae(e),ne(B().select.emit(s))}),M()}if(2&t){const e=B();I("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function Hz(t,n){1&t&&be(0,"div",0)}function zz(t,n){1&t&&be(0,"div",0)}function $z(t,n){if(1&t&&(H(0,Hz,1,0,"div",9),x(1,"div",10),R(2),M(),H(3,zz,1,0,"div",9)),2&t){const e=n.$implicit,o=n.index,s=B(2);I("ngIf",o>0),A(2),Pt(" ",s.i18n.getMonthLabel(e.firstDate)," "),A(1),I("ngIf",o!==s.months.length-1)}}function Uz(t,n){1&t&&H(0,$z,4,3,"ng-template",8),2&t&&I("ngForOf",B().months)}const Gz=["ngbDatepickerDayView",""],qz=["defaultDayTemplate"],Wz=["content"];function Kz(t,n){if(1&t&&be(0,"div",7),2&t){const o=n.currentMonth,s=n.selected,l=n.disabled,h=n.focused;I("date",n.date)("currentMonth",o)("selected",s)("disabled",l)("focused",h)}}function Jz(t,n){if(1&t&&(x(0,"div",12),R(1),M()),2&t){const e=B().$implicit,o=B(2);A(1),Pt(" ",o.i18n.getMonthLabel(e.firstDate)," ")}}function Yz(t,n){if(1&t&&(x(0,"div",9),H(1,Jz,2,1,"div",10),be(2,"ngb-datepicker-month",11),M()),2&t){const e=n.$implicit,o=B(2);A(1),I("ngIf","none"===o.navigation||o.displayMonths>1&&"select"===o.navigation),A(1),I("month",e.firstDate)}}function Qz(t,n){1&t&&H(0,Yz,3,2,"div",8),2&t&&I("ngForOf",B().model.months)}function Xz(t,n){if(1&t){const e=ke();x(0,"ngb-datepicker-navigation",13),K("navigate",function(s){return ae(e),ne(B().onNavigateEvent(s))})("select",function(s){return ae(e),ne(B().onNavigateDateSelect(s))}),M()}if(2&t){const e=B();I("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function Zz(t,n){}function e$(t,n){}function t$(t,n){if(1&t&&(x(0,"div",5),R(1),M()),2&t){const e=B(2);A(1),ge(e.i18n.getWeekLabel())}}function n$(t,n){if(1&t&&(x(0,"div",6),R(1),M()),2&t){const e=n.$implicit;A(1),ge(e)}}function i$(t,n){if(1&t&&(x(0,"div",2),H(1,t$,2,1,"div",3),H(2,n$,2,1,"div",4),M()),2&t){const e=B();A(1),I("ngIf",e.datepicker.showWeekNumbers),A(1),I("ngForOf",e.viewModel.weekdays)}}function o$(t,n){if(1&t&&(x(0,"div",11),R(1),M()),2&t){const e=B(2).$implicit,o=B();A(1),ge(o.i18n.getWeekNumerals(e.number))}}function r$(t,n){}function s$(t,n){if(1&t&&H(0,r$,0,0,"ng-template",14),2&t){const e=B().$implicit;I("ngTemplateOutlet",B(3).datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function a$(t,n){if(1&t){const e=ke();x(0,"div",12),K("click",function(s){const h=ae(e).$implicit;return B(3).doSelect(h),ne(s.preventDefault())}),H(1,s$,1,2,"ng-template",13),M()}if(2&t){const e=n.$implicit;Xt("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),I("tabindex",e.tabindex),wt("aria-label",e.ariaLabel),A(1),I("ngIf",!e.hidden)}}function l$(t,n){if(1&t&&(x(0,"div",8),H(1,o$,2,1,"div",9),H(2,a$,2,9,"div",10),M()),2&t){const e=B().$implicit,o=B();A(1),I("ngIf",o.datepicker.showWeekNumbers),A(1),I("ngForOf",e.days)}}function c$(t,n){1&t&&H(0,l$,3,2,"div",7),2&t&&I("ngIf",!n.$implicit.collapsed)}const u$=["dialog"],d$=["ngbNavOutlet",""];function h$(t,n){}const f$=function(t){return{$implicit:t}};function p$(t,n){if(1&t&&(x(0,"div",2),H(1,h$,0,0,"ng-template",3),M()),2&t){const e=B().$implicit,o=B();I("item",e)("nav",o.nav)("role",o.paneRole),A(1),I("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",Ee(5,f$,e.active||o.isPanelTransitioning(e)))}}function g$(t,n){if(1&t&&H(0,p$,2,7,"div",1),2&t){const e=n.$implicit,o=B();I("ngIf",e.isPanelInDom()||o.isPanelTransitioning(e))}}function z$(t,n){1&t&&R(0),2&t&&ge(B(2).title)}function $$(t,n){}function U$(t,n){if(1&t&&(x(0,"h3",3),H(1,z$,1,1,"ng-template",null,4,Xe),H(3,$$,0,0,"ng-template",5),M()),2&t){const e=Oe(2),o=B();A(3),I("ngTemplateOutlet",o.isTitleTemplate()?o.title:e)("ngTemplateOutletContext",o.context)}}function G$(t,n){if(1&t&&(x(0,"span"),ua(1,2),xe(2,"percent"),M()),2&t){const e=B();A(2),nb(je(2,1,e.getValue()/e.max)),function cC(t){!function $R(t,n,e){if(Yp>0){const o=t.data[e];RD(t,n,Array.isArray(o)?o:o.update,lr()-Yp-1,Jp)}Jp=0,Yp=0}(bt(),re(),t+22)}(1)}}function Vo(t){return parseInt(`${t}`,10)}function Mg(t){return"string"==typeof t}function Si(t){return!isNaN(Vo(t))}function Bi(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function Wc(t){return null!=t}function XP(t){return Si(t)?`0${t}`.slice(-2):""}function ZP(t,n){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(n)>=0}function vh(t){return(t||document.body).getBoundingClientRect()}const eN={animation:!0,transitionTimerDelayMs:5},rU=()=>{},{transitionTimerDelayMs:sU}=eN,Sg=new Map,Zi=(t,n,e,o)=>{let s=o.context||{};const l=Sg.get(n);if(l)switch(o.runningTransition){case"continue":return no;case"stop":t.run(()=>l.transition$.complete()),s=Object.assign(l.context,s),Sg.delete(n)}const h=e(n,o.animation,s)||rU;if(!o.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>h()),Me(void 0).pipe(function iU(t){return n=>new Wt(e=>n.subscribe({next:h=>t.run(()=>e.next(h)),error:h=>t.run(()=>e.error(h)),complete:()=>t.run(()=>e.complete())}))}(t));const p=new mt,m=new mt,v=p.pipe(function mH(...t){return n=>yg(n,Me(...t))}(!0));Sg.set(n,{transition$:p,complete:()=>{m.next(),m.complete()},context:s});const C=function oU(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const D=Li(n,"transitionend").pipe(Kn(v),Hn(({target:V})=>V===n));MP(sx(C+sU).pipe(Kn(v)),D,m).pipe(Kn(v)).subscribe(()=>{Sg.delete(n),t.run(()=>{h(),p.next(),p.complete()})})}),p.asObservable()},tN=(t,n,e)=>{let{direction:o,maxHeight:s}=e;const{classList:l}=t;function h(){l.add("collapse"),"show"===o?l.add("show"):l.remove("show")}if(n)return s||(s=function lU(t){if(typeof navigator>"u")return"0px";const{classList:n}=t,e=n.contains("show");e||n.add("show"),t.style.height="";const o=t.getBoundingClientRect().height+"px";return e||n.remove("show"),o}(t),e.maxHeight=s,t.style.height="show"!==o?s:"0px",l.remove("collapse"),l.remove("collapsing"),l.remove("show"),vh(t),l.add("collapsing")),t.style.height="show"===o?s:"0px",()=>{h(),l.remove("collapsing"),t.style.height=""};h()};let Kc=(()=>{class t{constructor(){this.animation=eN.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cU=(()=>{class t{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),uU=0,yx=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(En))},t.\u0275dir=he({type:t,selectors:[["ng-template","ngbPanelHeader",""]]}),t})(),u0=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(En))},t.\u0275dir=he({type:t,selectors:[["ng-template","ngbPanelTitle",""]]}),t})(),d0=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(En))},t.\u0275dir=he({type:t,selectors:[["ng-template","ngbPanelContent",""]]}),t})(),Ag=(()=>{class t{constructor(){this.disabled=!1,this.id="ngb-panel-"+uU++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new Te,this.hidden=new Te}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["ngb-panel"]],contentQueries:function(e,o,s){if(1&e&&(Wn(s,u0,4),Wn(s,yx,4),Wn(s,d0,4)),2&e){let l;Zt(l=en())&&(o.titleTpls=l),Zt(l=en())&&(o.headerTpls=l),Zt(l=en())&&(o.contentTpls=l)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"}}),t})(),dU=(()=>{class t{constructor(e){this._El=e,this.ngbRef=new Te}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return t.\u0275fac=function(e){return new(e||t)(z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"}}),t})(),h0=(()=>{class t{constructor(e,o,s){this._ngZone=o,this._changeDetector=s,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new Te,this.shown=new Te,this.hidden=new Te,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const o=this._findPanelById(e);o&&this._changeOpenState(o,!o.isOpen)}ngAfterContentChecked(){Mg(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(pi(1)).subscribe(()=>{this.panels.forEach(e=>{const o=e.panelDiv;o?e.initClassDone||(e.initClassDone=!0,Zi(this._ngZone,o,tN,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide"}})):e.initClassDone=!1})})}_changeOpenState(e,o){if(null!=e&&!e.disabled&&e.isOpen!==o){let s=!1;this.panelChange.emit({panelId:e.id,nextState:o,preventDefault:()=>{s=!0}}),s||(e.isOpen=o,e.transitionRunning=!0,o&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,o=!0){this.panels.forEach(s=>{s.id!==e&&s.isOpen&&(s.isOpen=!1,s.transitionRunning=o)})}_findPanelById(e){return this.panels.find(o=>o.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(o=>{o.transitionRunning&&Zi(this._ngZone,o.panelDiv,tN,{animation:e,runningTransition:"stop",context:{direction:o.isOpen?"show":"hide"}}).subscribe(()=>{o.transitionRunning=!1;const{id:l}=o;o.isOpen?(o.shown.emit(),this.shown.emit(l)):(o.hidden.emit(),this.hidden.emit(l))})})}}return t.\u0275fac=function(e){return new(e||t)(z(cU),z(Ht),z(ir))},t.\u0275cmp=$e({type:t,selectors:[["ngb-accordion"]],contentQueries:function(e,o,s){if(1&e&&Wn(s,Ag,4),2&e){let l;Zt(l=en())&&(o.panels=l)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,o){2&e&&wt("aria-multiselectable",!o.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(e,o){1&e&&(H(0,xz,3,3,"ng-template",0,1,Xe),H(2,Sz,4,11,"ng-template",2)),2&e&&(A(2),I("ngForOf",o.panels))},dependencies:function(){return[_n,zt,Kr,dU,yx,nN]},encapsulation:2}),t})(),nN=(()=>{class t{constructor(e,o){this.accordion=e,this.panel=o}set ngbPanelToggle(e){e&&(this.panel=e)}}return t.\u0275fac=function(e){return new(e||t)(z(h0),z(Ag,9))},t.\u0275dir=he({type:t,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,o){1&e&&K("click",function(){return o.accordion.toggle(o.panel.id)}),2&e&&(ca("disabled",o.panel.disabled),wt("aria-expanded",o.panel.isOpen)("aria-controls",o.panel.id),Xt("collapsed",!o.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),t})(),iN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})();const hU=({classList:t})=>{t.remove("show")};let fU=(()=>{class t{constructor(e){this._ngbConfig=e,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pU=(()=>{class t{constructor(e,o,s,l){this._renderer=o,this._element=s,this._zone=l,this.closed=new Te,this.dismissible=e.dismissible,this.type=e.type,this.animation=e.animation}close(){const e=Zi(this._zone,this._element.nativeElement,hU,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}ngOnChanges(e){const o=e.type;o&&!o.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${o.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${o.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return t.\u0275fac=function(e){return new(e||t)(z(fU),z(ai),z(Ot),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(e,o){2&e&&Xt("fade",o.animation)("alert-dismissible",o.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],features:[Ln],ngContentSelectors:Dg,decls:2,vars:1,consts:function(){let n;return n=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",n,3,"click",4,"ngIf"],["type","button","aria-label",n,1,"btn-close",3,"click"]]},template:function(e,o){1&e&&(Qd(),Xd(0),H(1,Az,1,0,"button",0)),2&e&&(A(1),I("ngIf",o.dismissible))},dependencies:[zt],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),t})(),oN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),aN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),lN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();class mi{constructor(n,e,o){this.year=Bi(n)?n:null,this.month=Bi(e)?e:null,this.day=Bi(o)?o:null}static from(n){return n instanceof mi?n:n?new mi(n.year,n.month,n.day):null}equals(n){return null!=n&&this.year===n.year&&this.month===n.month&&this.day===n.day}before(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day<n.day:this.month<n.month:this.year<n.year)}after(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day>n.day:this.month>n.month:this.year>n.year)}}function bh(t,n){return!function yU(t,n){return!t&&!n||!!t&&!!n&&t.equals(n)}(t,n)}function cN(t,n){return!(!t&&!n||t&&n&&t.year===n.year&&t.month===n.month)}function p0(t,n,e){return t&&n&&t.before(n)?n:t&&e&&t.after(e)?e:t||null}function wx(t,n){const{minDate:e,maxDate:o,disabled:s,markDisabled:l}=n;return!(null==t||s||l&&l(t,{year:t.year,month:t.month})||e&&t.before(e)||o&&t.after(o))}function uN(t){return new mi(t.getFullYear(),t.getMonth()+1,t.getDate())}function g0(t){const n=new Date(t.year,t.month-1,t.day,12);return isNaN(n.getTime())||n.setFullYear(t.year),n}let m0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return function SU(){return new AU}()},providedIn:"root"}),t})(),AU=(()=>{class t extends m0{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,o="d",s=1){let l=g0(e),h=!0,p=l.getMonth();switch(o){case"y":l.setFullYear(l.getFullYear()+s);break;case"m":p+=s,l.setMonth(p),p%=12,p<0&&(p+=12);break;case"d":l.setDate(l.getDate()+s),h=!1;break;default:return e}return h&&l.getMonth()!==p&&l.setDate(0),uN(l)}getPrev(e,o="d",s=1){return this.getNext(e,o,-s)}getWeekday(e){let s=g0(e).getDay();return 0===s?7:s}getWeekNumber(e,o){7===o&&(o=0);const h=g0(e[(11-o)%7]);h.setDate(h.getDate()+4-(h.getDay()||7));const p=h.getTime();return h.setMonth(0),h.setDate(1),Math.floor(Math.round((p-h.getTime())/864e5)/7)+1}getToday(){return uN(new Date)}isValid(e){if(!(e&&Bi(e.year)&&Bi(e.month)&&Bi(e.day)&&0!==e.year))return!1;const o=g0(e);return!isNaN(o.getTime())&&o.getFullYear()===e.year&&o.getMonth()+1===e.month&&o.getDate()===e.day}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),Yc=(()=>{class t{getMonthLabel(e){return`${this.getMonthFullName(e.month,e.year)} ${this.getYearNumerals(e.year)}`}getDayNumerals(e){return`${e.day}`}getWeekNumerals(e){return`${e}`}getYearNumerals(e){return`${e}`}getWeekLabel(){return""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(e){let o=null;return o=e?new e:function OU(t){return new PU(t)}(ie(yr)),o},providedIn:"root"}),t})(),PU=(()=>{class t extends Yc{constructor(e){super(),this._locale=e,this._monthsShort=qC(e,In.Standalone,nt.Abbreviated),this._monthsFull=qC(e,In.Standalone,nt.Wide)}getWeekdayLabel(e,o){const s=bS(this._locale,In.Standalone,void 0===o?nt.Short:o);return s.map((h,p)=>s[(p+1)%7])[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){return wS(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)}}return t.\u0275fac=function(e){return new(e||t)(ie(yr))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),Cx=(()=>{class t{constructor(e,o){this._calendar=e,this._i18n=o,this._VALIDATORS={dayTemplateData:s=>{if(this._state.dayTemplateData!==s)return{dayTemplateData:s}},displayMonths:s=>{if(Bi(s=Vo(s))&&s>0&&this._state.displayMonths!==s)return{displayMonths:s}},disabled:s=>{if(this._state.disabled!==s)return{disabled:s}},firstDayOfWeek:s=>{if(Bi(s=Vo(s))&&s>=0&&this._state.firstDayOfWeek!==s)return{firstDayOfWeek:s}},focusVisible:s=>{if(this._state.focusVisible!==s&&!this._state.disabled)return{focusVisible:s}},markDisabled:s=>{if(this._state.markDisabled!==s)return{markDisabled:s}},maxDate:s=>{const l=this.toValidDate(s,null);if(bh(this._state.maxDate,l))return{maxDate:l}},minDate:s=>{const l=this.toValidDate(s,null);if(bh(this._state.minDate,l))return{minDate:l}},navigation:s=>{if(this._state.navigation!==s)return{navigation:s}},outsideDays:s=>{if(this._state.outsideDays!==s)return{outsideDays:s}},weekdays:s=>{const l=!0===s||!1===s?nt.Short:s,h=!0!==s&&!1!==s||s;if(this._state.weekdayWidth!==l||this._state.weekdaysVisible!==h)return{weekdayWidth:l,weekdaysVisible:h}}},this._model$=new mt,this._dateSelect$=new mt,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:nt.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(Hn(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Hn(e=>null!==e))}set(e){let o=Object.keys(e).map(s=>this._VALIDATORS[s](e[s])).reduce((s,l)=>({...s,...l}),{});Object.keys(o).length>0&&this._nextState(o)}focus(e){const o=this.toValidDate(e,null);null!=o&&!this._state.disabled&&bh(this._state.focusDate,o)&&this._nextState({focusDate:e})}focusSelect(){wx(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const o=this.toValidDate(e,this._calendar.getToday());null!=o&&!this._state.disabled&&(!this._state.firstDate||cN(this._state.firstDate,o))&&this._nextState({firstDate:o})}select(e,o={}){const s=this.toValidDate(e,null);null!=s&&!this._state.disabled&&(bh(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),o.emitEvent&&wx(s,this._state)&&this._dateSelect$.next(s))}toValidDate(e,o){const s=mi.from(e);return void 0===o&&(o=this._calendar.getToday()),this._calendar.isValid(s)?s:o}getMonth(e){for(let o of this._state.months)if(e.month===o.number&&e.year===o.year)return o;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const o=this._updateState(e);this._patchContexts(o),this._state=o,this._model$.next(this._state)}_patchContexts(e){const{months:o,displayMonths:s,selectedDate:l,focusDate:h,focusVisible:p,disabled:m,outsideDays:v}=e;e.months.forEach(C=>{C.weeks.forEach(D=>{D.days.forEach(N=>{h&&(N.context.focused=h.equals(N.date)&&p),N.tabindex=!m&&h&&N.date.equals(h)&&h.month===C.number?0:-1,!0===m&&(N.context.disabled=!0),void 0!==l&&(N.context.selected=null!==l&&l.equals(N.date)),C.number!==N.date.month&&(N.hidden="hidden"===v||"collapsed"===v||s>1&&N.date.after(o[0].firstDate)&&N.date.before(o[s-1].lastDate))})})})}_updateState(e){const o=Object.assign({},this._state,e);let s=o.firstDate;if(("minDate"in e||"maxDate"in e)&&(function wU(t,n){if(n&&t&&n.before(t))throw new Error(`'maxDate' ${n} should be greater than 'minDate' ${t}`)}(o.minDate,o.maxDate),o.focusDate=p0(o.focusDate,o.minDate,o.maxDate),o.firstDate=p0(o.firstDate,o.minDate,o.maxDate),s=o.focusDate),"disabled"in e&&(o.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(s=o.selectedDate),"focusVisible"in e||"focusDate"in e&&(o.focusDate=p0(o.focusDate,o.minDate,o.maxDate),s=o.focusDate,0!==o.months.length&&o.focusDate&&!o.focusDate.before(o.firstDate)&&!o.focusDate.after(o.lastDate)))return o;if("firstDate"in e&&(o.firstDate=p0(o.firstDate,o.minDate,o.maxDate),s=o.firstDate),s){const h=function TU(t,n,e,o,s){const{displayMonths:l,months:h}=e,p=h.splice(0,h.length);return Array.from({length:l},(v,C)=>{const D=Object.assign(t.getNext(n,"m",C),{day:1});if(h[C]=null,!s){const N=p.findIndex(V=>V.firstDate.equals(D));-1!==N&&(h[C]=p.splice(N,1)[0])}return D}).forEach((v,C)=>{null===h[C]&&(h[C]=function DU(t,n,e,o,s={}){const{dayTemplateData:l,minDate:h,maxDate:p,firstDayOfWeek:m,markDisabled:v,outsideDays:C,weekdayWidth:D,weekdaysVisible:N}=e,V=t.getToday();s.firstDate=null,s.lastDate=null,s.number=n.month,s.year=n.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],n=function MU(t,n,e){const o=t.getDaysPerWeek(),s=new mi(n.year,n.month,1),l=t.getWeekday(s)%o;return t.getPrev(s,"d",(o+l-e)%o)}(t,n,m),N||(s.weekdays.length=0);for(let U=0;U<t.getWeeksPerMonth();U++){let q=s.weeks[U];q||(q=s.weeks[U]={number:0,days:[],collapsed:!0});const J=q.days;for(let Q=0;Q<t.getDaysPerWeek();Q++){0===U&&N&&(s.weekdays[Q]=o.getWeekdayLabel(t.getWeekday(n),D));const te=new mi(n.year,n.month,n.day),X=t.getNext(te),ce=o.getDayAriaLabel(te);let ve=!!(h&&te.before(h)||p&&te.after(p));!ve&&v&&(ve=v(te,{month:s.number,year:s.year}));let me=te.equals(V),it=l?l(te,{month:s.number,year:s.year}):void 0;null===s.firstDate&&te.month===s.number&&(s.firstDate=te),te.month===s.number&&X.month!==s.number&&(s.lastDate=te);let gt=J[Q];gt||(gt=J[Q]={}),gt.date=te,gt.context=Object.assign(gt.context||{},{$implicit:te,date:te,data:it,currentMonth:s.number,currentYear:s.year,disabled:ve,focused:!1,selected:!1,today:me}),gt.tabindex=-1,gt.ariaLabel=ce,gt.hidden=!1,n=X}q.number=t.getWeekNumber(J.map(Q=>Q.date),m),q.collapsed="collapsed"===C&&J[0].date.month!==s.number&&J[J.length-1].date.month!==s.number}return s}(t,v,e,o,p.shift()||{}))}),h}(this._calendar,s,o,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e||"weekdaysVisible"in e);o.months=h,o.firstDate=h[0].firstDate,o.lastDate=h[h.length-1].lastDate,"selectedDate"in e&&!wx(o.selectedDate,o)&&(o.selectedDate=null),"firstDate"in e&&(!o.focusDate||o.focusDate.before(o.firstDate)||o.focusDate.after(o.lastDate))&&(o.focusDate=s);const p=!this._state.firstDate||this._state.firstDate.year!==o.firstDate.year,m=!this._state.firstDate||this._state.firstDate.month!==o.firstDate.month;"select"===o.navigation?(("minDate"in e||"maxDate"in e||0===o.selectBoxes.years.length||p)&&(o.selectBoxes.years=function kU(t,n,e){if(!t)return[];const o=n?Math.max(n.year,t.year-500):t.year-10,l=(e?Math.min(e.year,t.year+500):t.year+10)-o+1,h=Array(l);for(let p=0;p<l;p++)h[p]=o+p;return h}(o.firstDate,o.minDate,o.maxDate)),("minDate"in e||"maxDate"in e||0===o.selectBoxes.months.length||p)&&(o.selectBoxes.months=function CU(t,n,e,o){if(!n)return[];let s=t.getMonths(n.year);if(e&&n.year===e.year){const l=s.findIndex(h=>h===e.month);s=s.slice(l)}if(o&&n.year===o.year){const l=s.findIndex(h=>h===o.month);s=s.slice(0,l+1)}return s}(this._calendar,o.firstDate,o.minDate,o.maxDate))):o.selectBoxes={years:[],months:[]},("arrows"===o.navigation||"select"===o.navigation)&&(m||p||"minDate"in e||"maxDate"in e||"disabled"in e)&&(o.prevDisabled=o.disabled||function EU(t,n,e){const o=Object.assign(t.getPrev(n,"m"),{day:1});return null!=e&&(o.year===e.year&&o.month<e.month||o.year<e.year&&1===e.month)}(this._calendar,o.firstDate,o.minDate),o.nextDisabled=o.disabled||function xU(t,n,e){const o=Object.assign(t.getNext(n,"m"),{day:1});return null!=e&&o.after(e)}(this._calendar,o.lastDate,o.maxDate))}return o}}return t.\u0275fac=function(e){return new(e||t)(ie(m0),ie(Yc))},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();var yh=(()=>(function(t){t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT"}(yh||(yh={})),yh))();let kx=(()=>{class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=nt.Short}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Pg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return function NU(){return new IU}()},providedIn:"root"}),t})(),IU=(()=>{class t extends Pg{fromModel(e){return e&&Bi(e.year)&&Bi(e.month)&&Bi(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&Bi(e.year)&&Bi(e.month)&&Bi(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),RU=(()=>{class t{constructor(e,o){this.i18n=e,this._renderer=o,this.select=new Te,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new mi(this.date.year,Vo(e),1))}changeYear(e){this.select.emit(new mi(Vo(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return t.\u0275fac=function(e){return new(e||t)(z(Yc),z(ai))},t.\u0275cmp=$e({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,o){if(1&e&&(ha(Fz,7,Ot),ha(Lz,7,Ot)),2&e){let s;Zt(s=en())&&(o.monthSelect=s.first),Zt(s=en())&&(o.yearSelect=s.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:6,vars:4,consts:function(){let n,e,o,s;return n=$localize`:@@ngb.datepicker.select-month:Select month`,e=$localize`:@@ngb.datepicker.select-month:Select month`,o=$localize`:@@ngb.datepicker.select-year:Select year`,s=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",n,"title",e,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",o,"title",s,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(e,o){1&e&&(x(0,"select",0,1),K("change",function(l){return o.changeMonth(l.target.value)}),H(2,Bz,2,3,"option",2),M(),x(3,"select",3,4),K("change",function(l){return o.changeYear(l.target.value)}),H(5,Vz,2,2,"option",2),M()),2&e&&(I("disabled",o.disabled),A(2),I("ngForOf",o.months),A(1),I("disabled",o.disabled),A(2),I("ngForOf",o.years))},dependencies:[_n,Ok,Nk],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),t})(),FU=(()=>{class t{constructor(e){this.i18n=e,this.navigation=yh,this.months=[],this.navigate=new Te,this.select=new Te}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return t.\u0275fac=function(e){return new(e||t)(z(Yc))},t.\u0275cmp=$e({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:8,vars:4,consts:function(){let n,e,o,s;return n=$localize`:@@ngb.datepicker.previous-month:Previous month`,e=$localize`:@@ngb.datepicker.previous-month:Previous month`,o=$localize`:@@ngb.datepicker.next-month:Next month`,s=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",n,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",o,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(e,o){1&e&&(x(0,"div",0)(1,"button",1),K("click",function(l){return o.onClickPrev(l)}),be(2,"span",2),M()(),H(3,jz,1,4,"ngb-datepicker-navigation-select",3),H(4,Uz,1,1,null,4),x(5,"div",5)(6,"button",6),K("click",function(l){return o.onClickNext(l)}),be(7,"span",2),M()()),2&e&&(A(1),I("disabled",o.prevDisabled),A(2),I("ngIf",o.showSelect),A(1),I("ngIf",!o.showSelect),A(2),I("disabled",o.nextDisabled))},dependencies:[_n,zt,RU],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),t})(),LU=(()=>{class t{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return t.\u0275fac=function(e){return new(e||t)(z(Yc))},t.\u0275cmp=$e({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,o){2&e&&Xt("bg-primary",o.selected)("text-white",o.selected)("text-muted",o.isMuted())("outside",o.isMuted())("active",o.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:Gz,decls:1,vars:1,template:function(e,o){1&e&&R(0),2&e&&ge(o.i18n.getDayNumerals(o.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),t})();var rn=(()=>(function(t){t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown"}(rn||(rn={})),rn))();let BU=(()=>{class t{processKey(e,o){const{state:s,calendar:l}=o;switch(e.which){case rn.PageUp:o.focusDate(l.getPrev(s.focusedDate,e.shiftKey?"y":"m",1));break;case rn.PageDown:o.focusDate(l.getNext(s.focusedDate,e.shiftKey?"y":"m",1));break;case rn.End:o.focusDate(e.shiftKey?s.maxDate:s.lastDate);break;case rn.Home:o.focusDate(e.shiftKey?s.minDate:s.firstDate);break;case rn.ArrowLeft:o.focusDate(l.getPrev(s.focusedDate,"d",1));break;case rn.ArrowUp:o.focusDate(l.getPrev(s.focusedDate,"d",l.getDaysPerWeek()));break;case rn.ArrowRight:o.focusDate(l.getNext(s.focusedDate,"d",1));break;case rn.ArrowDown:o.focusDate(l.getNext(s.focusedDate,"d",l.getDaysPerWeek()));break;case rn.Enter:case rn.Space:o.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VU=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(En))},t.\u0275dir=he({type:t,selectors:[["ng-template","ngbDatepickerContent",""]]}),t})(),dN=(()=>{class t{constructor(e,o,s,l,h,p,m,v){this._service=e,this._calendar=o,this.i18n=s,this._elementRef=p,this._ngbDateAdapter=m,this._ngZone=v,this._controlValue=null,this._destroyed$=new mt,this._publicState={},this.navigate=new Te,this.dateSelect=new Te,this.onChange=C=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(C=>this[C]=l[C]),e.dateSelect$.pipe(Kn(this._destroyed$)).subscribe(C=>{this.dateSelect.emit(C)}),e.model$.pipe(Kn(this._destroyed$)).subscribe(C=>{const D=C.firstDate,N=this.model?this.model.firstDate:null;this._publicState={maxDate:C.maxDate,minDate:C.minDate,firstDate:C.firstDate,lastDate:C.lastDate,focusedDate:C.focusDate,months:C.months.map(Q=>Q.firstDate)};let V=!1;if(!D.equals(N)&&(this.navigate.emit({current:N?{year:N.year,month:N.month}:null,next:{year:D.year,month:D.month},preventDefault:()=>V=!0}),V&&null!==N))return void this._service.open(N);const U=C.selectedDate,q=C.focusDate,J=this.model?this.model.focusDate:null;this.model=C,bh(U,this._controlValue)&&(this._controlValue=U,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(U))),bh(q,J)&&J&&C.focusVisible&&this.focus(),h.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(mi.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(pi(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(mi.from(e?e.day?e:{...e,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=Li(this._contentEl.nativeElement,"focusin"),o=Li(this._contentEl.nativeElement,"focusout"),{nativeElement:s}=this._elementRef;Uh(e,o).pipe(Hn(({target:l,relatedTarget:h})=>!(ZP(l,"ngb-dp-day")&&ZP(h,"ngb-dp-day")&&s.contains(l)&&s.contains(h))),Kn(this._destroyed$)).subscribe(({type:l})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===l})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(o=>e[o]=this[o]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const o={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in e).forEach(s=>o[s]=this[s]),this._service.set(o),"startDate"in e){const{currentValue:s,previousValue:l}=e.startDate;cN(l,s)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case yh.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case yh.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=mi.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return t.\u0275fac=function(e){return new(e||t)(z(Cx),z(m0),z(Yc),z(kx),z(ir),z(Ot),z(Pg),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(e,o,s){if(1&e&&Wn(s,VU,7),2&e){let l;Zt(l=en())&&(o.contentTemplate=l.first)}},viewQuery:function(e,o){if(1&e&&(ha(qz,7),ha(Wz,7)),2&e){let s;Zt(s=en())&&(o._defaultDayTemplate=s.first),Zt(s=en())&&(o._contentEl=s.first)}},hostVars:2,hostBindings:function(e,o){2&e&&Xt("disabled",o.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],features:[on([{provide:or,useExisting:_t(()=>t),multi:!0},Cx]),Ln],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,o){if(1&e&&(H(0,Kz,1,5,"ng-template",null,0,Xe),H(2,Qz,1,1,"ng-template",null,1,Xe),x(4,"div",2),H(5,Xz,1,7,"ngb-datepicker-navigation",3),M(),x(6,"div",4,5),H(8,Zz,0,0,"ng-template",6),M(),H(9,e$,0,0,"ng-template",6)),2&e){const s=Oe(3);A(5),I("ngIf","none"!==o.navigation),A(1),Xt("ngb-dp-months",!o.contentTemplate),A(2),I("ngTemplateOutlet",(null==o.contentTemplate?null:o.contentTemplate.templateRef)||s),A(1),I("ngTemplateOutlet",o.footerTemplate)}},dependencies:function(){return[_n,zt,Kr,jU,FU,LU]},styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),t})(),jU=(()=>{class t{constructor(e,o,s,l){this.i18n=e,this.datepicker=o,this._keyboardService=s,this._service=l}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){!e.context.disabled&&!e.hidden&&this.datepicker.onDateSelect(e.date)}}return t.\u0275fac=function(e){return new(e||t)(z(Yc),z(dN),z(BU),z(Cx))},t.\u0275cmp=$e({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,o){1&e&&K("keydown",function(l){return o.onKeyDown(l)})},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(H(0,i$,3,2,"div",0),H(1,c$,1,1,"ng-template",1)),2&e&&(I("ngIf",o.viewModel.weekdays.length>0),A(1),I("ngForOf",o.viewModel.weeks))},dependencies:[_n,zt,Kr],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),t})();const _0=(t,n)=>!!n&&n.some(e=>e.contains(t)),hN=(t,n)=>!n||null!=function nU(t,n){return!n||typeof t.closest>"u"?null:t.closest(n)}(t,n),HU=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function v0(t,n,e,o,s,l,h,p){e&&t.runOutsideAngular((t=>HU?()=>setTimeout(()=>t(),100):t)(()=>{const v=Li(n,"keydown").pipe(Kn(s),Hn(N=>N.which===rn.Escape),gi(N=>N.preventDefault())),C=Li(n,"mousedown").pipe(Be(N=>{const V=N.target;return 2!==N.button&&!_0(V,h)&&("inside"===e?_0(V,l)&&hN(V,p):"outside"===e?!_0(V,l):hN(V,p)||!_0(V,l))}),Kn(s)),D=Li(n,"mouseup").pipe(lx(C),Hn(([N,V])=>V),NP(0),Kn(s));MP([v.pipe(Be(N=>0)),D.pipe(Be(N=>1))]).subscribe(N=>t.run(()=>o(N)))}))}const fN=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function pN(t){const n=Array.from(t.querySelectorAll(fN)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const gN=(t,n,e,o=!1)=>{t.runOutsideAngular(()=>{const s=Li(n,"focusin").pipe(Kn(e),Be(l=>l.target));Li(n,"keydown").pipe(Kn(e),Hn(l=>l.which===rn.Tab),lx(s)).subscribe(([l,h])=>{const[p,m]=pN(n);(h===p||h===n)&&l.shiftKey&&(m.focus(),l.preventDefault()),h===m&&!l.shiftKey&&(p.focus(),l.preventDefault())}),o&&Li(n,"click").pipe(Kn(e),lx(s),Be(l=>l[1])).subscribe(l=>l.focus())})},$U=/\s+/,UU=/  +/gi,GU=/^start/,qU=/^end/,WU=/-(top|left)$/,KU=/-(bottom|right)$/,YU=/^left/,QU=/^right/,XU=/^start/,ZU=/^end/;function mN({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split($U),s=e.findIndex(m=>"auto"===m);s>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(m){null==e.find(v=>-1!==v.search("^"+m))&&e.splice(s++,1,m)});const l=e.map(m=>function JU(t){return t.replace(GU,"left").replace(qU,"right").replace(WU,"-start").replace(KU,"-end")}(m));return{placement:l.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:m}){const v=new RegExp(n+"(-[a-z]+)*","gi"),C=m.elements.popper,D=m.placement;let N=C.className;N=N.replace(v,""),N+=` ${function eG(t,n){let[e,o]=n.split("-");const s=e.replace(YU,"start").replace(QU,"end");let l=[s];if(o){let h=o;("left"===e||"right"===e)&&(h=h.replace(XU,"top").replace(ZU,"bottom")),l.push(`${s}-${h}`)}return t&&(l=l.map(h=>`${t}-${h}`)),l.join(" ")}(n,D)}`,N=N.trim().replace(UU," "),C.className=N}},UH,KH,XH,{enabled:!0,name:"flip",options:{fallbackPlacements:l}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function _N(t){return t}function b0(){let t=null;return{createPopper(n){if(!t){let o=(n.updatePopperOptions||_N)(mN(n));t=bz(n.hostElement,n.targetElement,o)}},update(){t&&t.update()},setOptions(n){if(t){let o=(n.updatePopperOptions||_N)(mN(n));t.setOptions(o)}},destroy(){t&&(t.destroy(),t=null)}}}let vN=(()=>{class t extends kx{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.restoreFocus=!0}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xx(t){return n=>(n.modifiers.push(Cz,{name:"offset",options:{offset:()=>t}}),n)}let y0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return function tG(){return new nG}()},providedIn:"root"}),t})(),nG=(()=>{class t extends y0{parse(e){if(null!=e){const o=e.trim().split("-");if(1===o.length&&Si(o[0]))return{year:Vo(o[0]),month:null,day:null};if(2===o.length&&Si(o[0])&&Si(o[1]))return{year:Vo(o[0]),month:Vo(o[1]),day:null};if(3===o.length&&Si(o[0])&&Si(o[1])&&Si(o[2]))return{year:Vo(o[0]),month:Vo(o[1]),day:Vo(o[2])}}return null}format(e){return e?`${e.year}-${Si(e.month)?XP(e.month):""}-${Si(e.day)?XP(e.day):""}`:""}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),iG=(()=>{class t{constructor(e,o,s,l,h,p,m,v,C,D){this._parserFormatter=e,this._elRef=o,this._vcRef=s,this._renderer=l,this._ngZone=h,this._calendar=p,this._dateAdapter=m,this._document=v,this._changeDetector=C,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._positioning=b0(),this._destroyCloseHandlers$=new mt,this.dateSelect=new Te,this.navigate=new Te,this.closed=new Te,this._onChange=N=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(N=>this[N]=D[N])}get disabled(){return this._disabled}set disabled(e){this._disabled=""===e||e&&"false"!==e,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}registerOnValidatorChange(e){this._validatorChange=e}setDisabledState(e){this.disabled=e}validate(e){const{value:o}=e;if(null!=o){const s=this._fromDateStruct(this._dateAdapter.fromModel(o));if(!s)return{ngbDate:{invalid:o}};if(this.minDate&&s.before(mi.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:o}}};if(this.maxDate&&s.after(mi.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:o}}}}return null}writeValue(e){this._model=this._fromDateStruct(this._dateAdapter.fromModel(e)),this._writeModelValue(this._model)}manualDateChange(e,o=!1){const s=e!==this._inputValue;s&&(this._inputValue=e,this._model=this._fromDateStruct(this._parserFormatter.parse(e))),(s||!o)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):""===e?null:e),o&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){let e;if(this._cRef=this._vcRef.createComponent(dN),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(o=>{this.writeValue(o),this._onChange(o),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,gN(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus()),e=Mg(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this._ngZone.runOutsideAngular(()=>{this._cRef&&(this._positioning.createPopper({hostElement:e,targetElement:this._cRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:xx([0,2])}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this.positionTarget&&!e)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._setCloseHandlers()}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let e=this._elWithFocus;Mg(this.restoreFocus)?e=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(e=this.restoreFocus),e&&e.focus?e.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(e){this.isOpen()&&this._cRef.instance.navigateTo(e)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(e){if((e.minDate||e.maxDate)&&(this._validatorChange(),this.isOpen()&&(e.minDate&&(this._cRef.instance.minDate=this.minDate),e.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(e))),e.datepickerClass){const{currentValue:o,previousValue:s}=e.datepickerClass;this._applyPopupClass(o,s)}e.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(e){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(o=>{void 0!==this[o]&&e.setInput(o,this[o])}),e.setInput("startDate",this.startDate||this._model)}_applyPopupClass(e,o){const s=this._cRef?.location.nativeElement;s&&(e&&this._renderer.addClass(s,e),o&&this._renderer.removeClass(s,o))}_applyPopupStyling(e){this._renderer.addClass(e,"dropdown-menu"),this._renderer.addClass(e,"show"),"body"===this.container&&this._renderer.addClass(e,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(e){e.navigate.subscribe(o=>this.navigate.emit(o)),e.dateSelect.subscribe(o=>{this.dateSelect.emit(o),(!0===this.autoClose||"inside"===this.autoClose)&&this.close()})}_writeModelValue(e){const o=this._parserFormatter.format(e);this._inputValue=o,this._renderer.setProperty(this._elRef.nativeElement,"value",o),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(e)),this._onTouched())}_fromDateStruct(e){const o=e?new mi(e.year,e.month,e.day):null;return this._calendar.isValid(o)?o:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),v0(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}return t.\u0275fac=function(e){return new(e||t)(z(y0),z(Ot),z(Ro),z(ai),z(Ht),z(m0),z(Pg),z(Tn),z(ir),z(vN))},t.\u0275dir=he({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(e,o){1&e&&K("input",function(l){return o.manualDateChange(l.target.value)})("change",function(l){return o.manualDateChange(l.target.value,!0)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),2&e&&ca("disabled",o.disabled)},inputs:{autoClose:"autoClose",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[on([{provide:or,useExisting:_t(()=>t),multi:!0},{provide:Fi,useExisting:_t(()=>t),multi:!0},{provide:kx,useExisting:vN}]),Ln]}),t})();new Date(1882,10,12),new Date(2174,10,25);let dG=(()=>{class t extends Pg{fromModel(e){return e instanceof Date&&!isNaN(e.getTime())?this._fromNativeDate(e):null}toModel(e){return e&&Bi(e.year)&&Bi(e.month)&&Bi(e.day)?this._toNativeDate(e):null}_fromNativeDate(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}_toNativeDate(e){const o=new Date(e.year,e.month-1,e.day,12);return o.setFullYear(e.year),o}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})(),xN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo,Rk]}),t})(),EN=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),TN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["",8,"navbar"]]}),t})(),x0=(()=>{class t{constructor(e,o){this.elementRef=e,this._renderer=o,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ai))},t.\u0275dir=he({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(e,o){2&e&&(ca("tabIndex",o.disabled?-1:0),Xt("disabled",o.disabled))},inputs:{disabled:"disabled"}}),t})(),E0=(()=>{class t{constructor(e,o){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=o.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(z(_t(()=>Ch)),z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,o,s){if(1&e&&Wn(s,x0,4),2&e){let l;Zt(l=en())&&(o.menuItems=l)}},hostVars:4,hostBindings:function(e,o){1&e&&K("keydown.ArrowUp",function(l){return o.dropdown.onKeyDown(l)})("keydown.ArrowDown",function(l){return o.dropdown.onKeyDown(l)})("keydown.Home",function(l){return o.dropdown.onKeyDown(l)})("keydown.End",function(l){return o.dropdown.onKeyDown(l)})("keydown.Enter",function(l){return o.dropdown.onKeyDown(l)})("keydown.Space",function(l){return o.dropdown.onKeyDown(l)})("keydown.Tab",function(l){return o.dropdown.onKeyDown(l)})("keydown.Shift.Tab",function(l){return o.dropdown.onKeyDown(l)}),2&e&&Xt("dropdown-menu",!0)("show",o.dropdown.isOpen())}}),t})(),T0=(()=>{class t{constructor(e,o){this.dropdown=e,this.nativeElement=o.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(z(_t(()=>Ch)),z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,o){2&e&&wt("aria-expanded",o.dropdown.isOpen())}}),t})(),Mx=(()=>{class t extends T0{constructor(e,o){super(e,o)}}return t.\u0275fac=function(e){return new(e||t)(z(_t(()=>Ch)),z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,o){1&e&&K("click",function(){return o.dropdown.toggle()})("keydown.ArrowUp",function(l){return o.dropdown.onKeyDown(l)})("keydown.ArrowDown",function(l){return o.dropdown.onKeyDown(l)})("keydown.Home",function(l){return o.dropdown.onKeyDown(l)})("keydown.End",function(l){return o.dropdown.onKeyDown(l)})("keydown.Tab",function(l){return o.dropdown.onKeyDown(l)})("keydown.Shift.Tab",function(l){return o.dropdown.onKeyDown(l)}),2&e&&wt("aria-expanded",o.dropdown.isOpen())},features:[on([{provide:T0,useExisting:_t(()=>t)}]),a]}),t})(),Ch=(()=>{class t{constructor(e,o,s,l,h,p,m){this._changeDetector=e,this._document=s,this._ngZone=l,this._elementRef=h,this._renderer=p,this._destroyCloseHandlers$=new mt,this._bodyContainer=null,this._positioning=b0(),this._open=!1,this.openChange=new Te,this.placement=o.placement,this.container=o.container,this.autoClose=o.autoClose,this.display=m?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(pi(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:o,previousValue:s}=e.dropdownClass;this._applyCustomDropdownClass(o,s)}e.autoClose&&this._open&&(this.autoClose=e.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:xx([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),v0(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(e){const o=e.which,s=this._getMenuElements();let l=-1,h=null;const p=this._isEventFromToggle(e);if(!p&&s.length&&s.forEach((m,v)=>{m.contains(e.target)&&(h=m),m===this._document.activeElement&&(l=v)}),o!==rn.Space&&o!==rn.Enter){if(o!==rn.Tab){if(p||h){if(this.open(),s.length){switch(o){case rn.ArrowDown:l=Math.min(l+1,s.length-1);break;case rn.ArrowUp:if(this._isDropup()&&-1===l){l=s.length-1;break}l=Math.max(l-1,0);break;case rn.Home:l=0;break;case rn.End:l=s.length-1}s[l].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const m=this._menu.nativeElement.querySelectorAll(fN);e.shiftKey&&e.target===m[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===m[m.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Li(e.target,"focusout").pipe(pi(1)).subscribe(({relatedTarget:m})=>{this._elementRef.nativeElement.contains(m)||this.close()})}}else h&&(!0===this.autoClose||"inside"===this.autoClose)&&Li(h,"click").pipe(pi(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(o=>!o.disabled).map(o=>o.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const o=this._renderer,s=this._menu.nativeElement,l=this._bodyContainer=this._bodyContainer||o.createElement("div");o.setStyle(l,"position","absolute"),o.setStyle(s,"position","static"),o.setStyle(l,"z-index","1055"),o.appendChild(l,s),o.appendChild(this._document.body,l)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,o){const s="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;s&&(o&&this._renderer.removeClass(s,o),e&&this._renderer.addClass(s,e))}_applyPlacementClasses(e){const o=this._menu;if(o){e||(e=this._getFirstPlacement(this.placement));const s=this._renderer,l=this._elementRef.nativeElement;s.removeClass(l,"dropup"),s.removeClass(l,"dropdown");const{nativeElement:h}=o;"static"===this.display?(o.placement=null,s.setAttribute(h,"data-bs-popper","static")):(o.placement=e,s.removeAttribute(h,"data-bs-popper"));const p=-1!==e.search("^top")?"dropup":"dropdown";s.addClass(l,p);const m=this._bodyContainer;m&&(s.removeClass(m,"dropup"),s.removeClass(m,"dropdown"),s.addClass(m,p))}}}return t.\u0275fac=function(e){return new(e||t)(z(ir),z(EN),z(Tn),z(Ht),z(Ot),z(ai),z(TN,8))},t.\u0275dir=he({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,o,s){if(1&e&&(Wn(s,E0,5),Wn(s,T0,5)),2&e){let l;Zt(l=en())&&(o._menu=l.first),Zt(l=en())&&(o._anchor=l.first)}},hostVars:2,hostBindings:function(e,o){2&e&&Xt("show",o.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Ln]}),t})(),DN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();class Zc{constructor(n,e,o){this.nodes=n,this.viewRef=e,this.componentRef=o}}class MN{constructor(n,e,o,s,l,h){this._componentType=n,this._injector=e,this._viewContainerRef=o,this._renderer=s,this._ngZone=l,this._applicationRef=h,this._windowRef=null,this._contentRef=null}open(n,e,o=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:s}=this._windowRef.location,l=this._ngZone.onStable.pipe(pi(1),Ke(()=>Zi(this._ngZone,s,({classList:h})=>h.add("show"),{animation:o,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:l}}close(n=!1){return this._windowRef?Zi(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(gi(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Me(void 0)}_getContentRef(n,e){if(n){if(n instanceof En){const o=n.createEmbeddedView(e);return this._applicationRef.attachView(o),new Zc([o.rootNodes],o)}return new Zc([[this._renderer.createText(`${n}`)]])}return new Zc([])}}let hG=(()=>{class t{constructor(e,o){this._el=e,this._zone=o}ngOnInit(){this._zone.onStable.asObservable().pipe(pi(1)).subscribe(()=>{Zi(this._zone,this._el.nativeElement,(e,o)=>{o&&vh(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Zi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,o){2&e&&(la("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),Xt("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,o){},encapsulation:2}),t})();class jo{close(n){}dismiss(n){}}class fG{constructor(n,e,o,s){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=o,this._beforeDismiss=s,this._closed=new mt,this._dismissed=new mt,this._hidden=new mt,n.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,h)=>{this._resolve=l,this._reject=h}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Kn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Kn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function QP(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(o=>{!1!==o&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Me(void 0);n.subscribe(()=>{const{nativeElement:o}=this._windowCmptRef.location;o.parentNode.removeChild(o),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:o}=this._backdropCmptRef.location;o.parentNode.removeChild(o),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),o0(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Rg=(()=>(function(t){t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC"}(Rg||(Rg={})),Rg))();let pG=(()=>{class t{constructor(e,o,s){this._document=e,this._elRef=o,this._zone=s,this._closed$=new mt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Te,this.shown=new mt,this.hidden=new mt}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Mg(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(pi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,o={animation:this.animation,runningTransition:"stop"},h=o0(Zi(this._zone,e,()=>e.classList.remove("show"),o),Zi(this._zone,this._dialogEl.nativeElement,()=>{},o));return h.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),h}_show(){const e={animation:this.animation,runningTransition:"continue"};o0(Zi(this._zone,this._elRef.nativeElement,(l,h)=>{h&&vh(l),l.classList.add("show")},e),Zi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Li(e,"keydown").pipe(Kn(this._closed$),Hn(s=>s.which===rn.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(Rg.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let o=!1;Li(this._dialogEl.nativeElement,"mousedown").pipe(Kn(this._closed$),gi(()=>o=!1),kr(()=>Li(e,"mouseup").pipe(Kn(this._closed$),pi(1))),Hn(({target:s})=>e===s)).subscribe(()=>{o=!0}),Li(e,"click").pipe(Kn(this._closed$)).subscribe(({target:s})=>{e===s&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!o&&this._zone.run(()=>this.dismiss(Rg.BACKDROP_CLICK))),o=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const o=e.querySelector("[ngbAutofocus]"),s=pN(e)[0];(o||s||e).focus()}}_restoreFocus(){const e=this._document.body,o=this._elWithFocus;let s;s=o&&o.focus&&e.contains(o)?o:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Zi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(z(Tn),z(Ot),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,o){if(1&e&&ha(u$,7),2&e){let s;Zt(s=en())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,o){2&e&&(wt("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),la("modal d-block"+(o.windowClass?" "+o.windowClass:"")),Xt("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Dg,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,o){1&e&&(Qd(),x(0,"div",0,1)(2,"div",2),Xd(3),M()()),2&e&&la("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),gG=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),o=this._document.body,s=o.style,{overflow:l,paddingRight:h}=s;if(e>0){const p=parseFloat(window.getComputedStyle(o).paddingRight);s.paddingRight=`${p+e}px`}return s.overflow="hidden",()=>{e>0&&(s.paddingRight=h),s.overflow=l}}}return t.\u0275fac=function(e){return new(e||t)(ie(Tn))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mG=(()=>{class t{constructor(e,o,s,l,h,p){this._applicationRef=e,this._injector=o,this._document=s,this._scrollBar=l,this._rendererFactory=h,this._ngZone=p,this._activeWindowCmptHasChanged=new mt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Te,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];gN(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,o,s){const l=s.container instanceof HTMLElement?s.container:Wc(s.container)?this._document.querySelector(s.container):this._document.body,h=this._rendererFactory.createRenderer(null,null);if(!l)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const p=new jo,m=this._getContentRef(s.injector||e,o,p,s);let v=!1!==s.backdrop?this._attachBackdrop(l):void 0,C=this._attachWindowComponent(l,m.nodes),D=new fG(C,m,v,s.beforeDismiss);return this._registerModalRef(D),this._registerWindowCmpt(C),D.hidden.pipe(pi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(h.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),p.close=N=>{D.close(N)},p.dismiss=N=>{D.dismiss(N)},this._applyWindowOptions(C.instance,s),1===this._modalRefs.length&&h.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,s),v.changeDetectorRef.detectChanges()),C.changeDetectorRef.detectChanges(),D}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(o=>o.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let o=zC(hG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(o.hostView),e.appendChild(o.location.nativeElement),o}_attachWindowComponent(e,o){let s=zC(pG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:o});return this._applicationRef.attachView(s.hostView),e.appendChild(s.location.nativeElement),s}_applyWindowOptions(e,o){this._windowAttributes.forEach(s=>{Wc(o[s])&&(e[s]=o[s])})}_applyBackdropOptions(e,o){this._backdropAttributes.forEach(s=>{Wc(o[s])&&(e[s]=o[s])})}_getContentRef(e,o,s,l){return o?o instanceof En?this._createFromTemplateRef(o,s):Mg(o)?this._createFromString(o):this._createFromComponent(e,o,s,l):new Zc([])}_createFromTemplateRef(e,o){const l=e.createEmbeddedView({$implicit:o,close(h){o.close(h)},dismiss(h){o.dismiss(h)}});return this._applicationRef.attachView(l),new Zc([l.rootNodes],l)}_createFromString(e){const o=this._document.createTextNode(`${e}`);return new Zc([[o]])}_createFromComponent(e,o,s,l){const h=Gn.create({providers:[{provide:jo,useValue:s}],parent:e}),p=zC(o,{environmentInjector:this._applicationRef.injector,elementInjector:h}),m=p.location.nativeElement;return l.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new Zc([[m]],p.hostView,p)}_setAriaHidden(e){const o=e.parentElement;o&&e!==this._document.body&&(Array.from(o.children).forEach(s=>{s!==e&&"SCRIPT"!==s.nodeName&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(o))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,o)=>{e?o.setAttribute("aria-hidden",e):o.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const o=()=>{const s=this._modalRefs.indexOf(e);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(o,o)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const o=this._windowCmpts.indexOf(e);o>-1&&(this._windowCmpts.splice(o,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(ie(Rc),ie(Gn),ie(Tn),ie(gG),ie(xd),ie(Ht))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_G=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wl=(()=>{class t{constructor(e,o,s){this._injector=e,this._modalStack=o,this._config=s}open(e,o={}){const s={...this._config,animation:this._config.animation,...o};return this._modalStack.open(this._injector,e,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(ie(Gn),ie(mG),ie(_G))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({providers:[wl]}),t})(),vG=(()=>{class t{constructor(e){this._ngbConfig=e,this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const AN=t=>Wc(t)&&""!==t;let bG=0,D0=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(En))},t.\u0275dir=he({type:t,selectors:[["ng-template","ngbNavContent",""]]}),t})(),Fg=(()=>{class t{constructor(e,o){this._nav=e,this.elementRef=o,this.disabled=!1,this.shown=new Te,this.hidden=new Te}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){Wc(this.domId)||(this.domId="ngb-nav-"+bG++)}get active(){return this._nav.activeId===this.id}get id(){return AN(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(Wc(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}}return t.\u0275fac=function(e){return new(e||t)(z(_t(()=>Lg)),z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbNavItem",""]],contentQueries:function(e,o,s){if(1&e&&Wn(s,D0,4),2&e){let l;Zt(l=en())&&(o.contentTpls=l)}},hostVars:2,hostBindings:function(e,o){2&e&&Xt("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:["ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]}),t})(),Lg=(()=>{class t{constructor(e,o,s,l){this.role=e,this._cd=s,this._document=l,this.activeIdChange=new Te,this.shown=new Te,this.hidden=new Te,this.destroy$=new mt,this.navItemChange$=new mt,this.navChange=new Te,this.animation=o.animation,this.destroyOnHide=o.destroyOnHide,this.orientation=o.orientation,this.roles=o.roles,this.keyboard=o.keyboard}click(e){e.disabled||this._updateActiveId(e.id)}onKeyDown(e){if("tablist"!==this.roles||!this.keyboard)return;const o=e.which,s=this.links.filter(p=>!p.navItem.disabled),{length:l}=s;let h=-1;if(s.forEach((p,m)=>{p.elRef.nativeElement===this._document.activeElement&&(h=m)}),l){switch(o){case rn.ArrowLeft:if("vertical"===this.orientation)return;h=(h-1+l)%l;break;case rn.ArrowRight:if("vertical"===this.orientation)return;h=(h+1)%l;break;case rn.ArrowDown:if("horizontal"===this.orientation)return;h=(h+1)%l;break;case rn.ArrowUp:if("horizontal"===this.orientation)return;h=(h-1+l)%l;break;case rn.Home:h=0;break;case rn.End:h=l-1}"changeWithArrows"===this.keyboard&&this.select(s[h].navItem.id),s[h].elRef.nativeElement.focus(),e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!Wc(this.activeId)){const e=this.items.first?this.items.first.id:null;AN(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(Kn(this.destroy$)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}ngOnDestroy(){this.destroy$.next()}_updateActiveId(e,o=!0){if(this.activeId!==e){let s=!1;o&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{s=!0}}),s||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(o=>o.id===e)||null}}return t.\u0275fac=function(e){return new(e||t)(qs("role"),z(vG),z(ir),z(Tn))},t.\u0275dir=he({type:t,selectors:[["","ngbNav",""]],contentQueries:function(e,o,s){if(1&e&&(Wn(s,Fg,4),Wn(s,M0,5)),2&e){let l;Zt(l=en())&&(o.items=l),Zt(l=en())&&(o.links=l)}},hostVars:6,hostBindings:function(e,o){1&e&&K("keydown.arrowLeft",function(l){return o.onKeyDown(l)})("keydown.arrowRight",function(l){return o.onKeyDown(l)})("keydown.arrowDown",function(l){return o.onKeyDown(l)})("keydown.arrowUp",function(l){return o.onKeyDown(l)})("keydown.Home",function(l){return o.onKeyDown(l)})("keydown.End",function(l){return o.onKeyDown(l)}),2&e&&(wt("aria-orientation","vertical"===o.orientation&&"tablist"===o.roles?"vertical":void 0)("role",o.role?o.role:o.roles?"tablist":void 0),Xt("nav",!0)("flex-column","vertical"===o.orientation))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[Ln]}),t})(),M0=(()=>{class t{constructor(e,o,s,l){this.role=e,this.navItem=o,this.nav=s,this.elRef=l}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}}return t.\u0275fac=function(e){return new(e||t)(qs("role"),z(Fg),z(Lg),z(Ot))},t.\u0275dir=he({type:t,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(e,o){1&e&&K("click",function(l){return o.nav.click(o.navItem),l.preventDefault()}),2&e&&(ca("id",o.navItem.domId),wt("role",o.role?o.role:o.nav.roles?"tab":void 0)("tabindex",o.navItem.disabled?-1:void 0)("aria-controls",o.navItem.isPanelInDom()?o.navItem.panelDomId:null)("aria-selected",o.navItem.active)("aria-disabled",o.navItem.disabled),Xt("nav-link",!0)("nav-item",o.hasNavItemClass())("active",o.navItem.active)("disabled",o.navItem.disabled))}}),t})();const yG=({classList:t})=>(t.remove("show"),()=>t.remove("active")),wG=(t,n)=>{n&&vh(t),t.classList.add("show")};let Sx=(()=>{class t{constructor(e){this.elRef=e}}return t.\u0275fac=function(e){return new(e||t)(z(Ot))},t.\u0275dir=he({type:t,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(e,o){2&e&&(ca("id",o.item.panelDomId),wt("role",o.role?o.role:o.nav.roles?"tabpanel":void 0)("aria-labelledby",o.item.domId),Xt("fade",o.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}}),t})(),Ax=(()=>{class t{constructor(e,o){this._cd=e,this._ngZone=o,this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Kn(this.nav.destroy$),r0(this._activePane?.item||null),function ax(t,n=yo){return t=t??_H,yn((e,o)=>{let s,l=!0;e.subscribe(Et(o,h=>{const p=n(h);(l||!t(s,p))&&(l=!1,s=p,o.next(h))}))})}(),function bH(t){return Hn((n,e)=>t<=e)}(1)).subscribe(e=>{const o={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Zi(this._ngZone,this._activePane.elRef.nativeElement,yG,o).subscribe(()=>{const s=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Zi(this._ngZone,this._activePane.elRef.nativeElement,wG,o).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),s&&(s.hidden.emit(),this.nav.hidden.emit(s.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(e){return this._panes&&this._panes.find(o=>o.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}}return t.\u0275fac=function(e){return new(e||t)(z(ir),z(Ht))},t.\u0275cmp=$e({type:t,selectors:[["","ngbNavOutlet",""]],viewQuery:function(e,o){if(1&e&&ha(Sx,5),2&e){let s;Zt(s=en())&&(o._panes=s)}},hostVars:2,hostBindings:function(e,o){2&e&&Xt("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},attrs:d$,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&H(0,g$,1,1,"ng-template",0),2&e&&I("ngForOf",o.nav.items)},dependencies:[_n,zt,Kr,Sx],encapsulation:2,changeDetection:0}),t})(),ON=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),VN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})();class kG{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const xG={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},jN=t=>t>0?NP(t):n=>n;function HN(t,n,e,o,s,l,h=0,p=0){const m=function EG(t,n=xG){const e=(t||"").trim();if(0===e.length)return[];const o=e.split(/\s+/).map(l=>l.split(":")).map(l=>{let h=n[l[0]]||l;return new kG(h[0],h[1])}),s=o.filter(l=>l.isManual());if(s.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===s.length&&o.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return o}(e);if(1===m.length&&m[0].isManual())return()=>{};const v=function TG(t,n,e,o){return new Wt(s=>{const l=[],h=()=>s.next(!0),p=()=>s.next(!1),m=()=>s.next(!o());return e.forEach(v=>{v.open===v.close?l.push(t.listen(n,v.open,m)):l.push(t.listen(n,v.open,h),t.listen(n,v.close,p))}),()=>{l.forEach(v=>v())}})}(t,n,m,o).pipe(function DG(t,n,e){return o=>{let s=null;const l=o.pipe(Be(m=>({open:m})),Hn(m=>{const v=e();return v===m.open||s&&s.open!==v?(s&&s.open!==m.open&&(s=null),!1):(s=m,!0)}),Gh());return Uh(l.pipe(Hn(m=>m.open),jN(t)),l.pipe(Hn(m=>!m.open),jN(n))).pipe(Hn(m=>m===s&&(s=null,m.open!==e())),Be(m=>m.open))}}(h,p,o)).subscribe(C=>C?s():l());return()=>v.unsubscribe()}let MG=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SG=0,AG=(()=>{class t{isTitleTemplate(){return this.title instanceof En}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$e({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,o){2&e&&(ca("id",o.id),la("popover"+(o.popoverClass?" "+o.popoverClass:"")),Xt("fade",o.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:Dg,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(Qd(),be(0,"div",0),H(1,U$,4,2,"h3",1),x(2,"div",2),Xd(3),M()),2&e&&(A(1),I("ngIf",o.title))},dependencies:[zt,Kr],encapsulation:2,changeDetection:0}),t})(),Bg=(()=>{class t{constructor(e,o,s,l,h,p,m,v,C){this._elementRef=e,this._renderer=o,this._ngZone=p,this._document=m,this._changeDetector=v,this.shown=new Te,this.hidden=new Te,this._ngbPopoverWindowId="ngb-popover-"+SG++,this._windowRef=null,this._positioning=b0(),this.animation=h.animation,this.autoClose=h.autoClose,this.placement=h.placement,this.triggers=h.triggers,this.container=h.container,this.disablePopover=h.disablePopover,this.popoverClass=h.popoverClass,this.openDelay=h.openDelay,this.closeDelay=h.closeDelay,this._popupService=new MN(AG,s,l,o,this._ngZone,C)}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:o,transition$:s}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=o,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("title",this.popoverTitle),this._windowRef.setInput("context",e),this._windowRef.setInput("popoverClass",this.popoverClass),this._windowRef.setInput("id",this._ngbPopoverWindowId),this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:xx([0,8])}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),v0(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),s.subscribe(()=>this.shown.emit())}}close(e=this.animation){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=HN(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:o,disablePopover:s,popoverClass:l}){l&&this.isOpen()&&(this._windowRef.instance.popoverClass=l.currentValue),(e||o||s)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ai),z(Gn),z(Ro),z(MG),z(Ht),z(Tn),z(ir),z(Rc))},t.\u0275dir=he({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Ln]}),t})(),zN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),$N=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OG=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Si(e)||e<=0?100:e}get max(){return this._max}getValue(){return function YP(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(z($N))},t.\u0275cmp=$e({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,o){2&e&&qp("height",o.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:Dg,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,o){1&e&&(Qd(),x(0,"div",0),H(1,G$,3,3,"span",1),Xd(2),M()),2&e&&(function hD(t,n,e,o,s,l,h,p,m){Ur(uo,ws,qd(re(),t,n,e,o,s,l,h,p,m),!0)}("progress-bar",o.type?" bg-"+o.type:"","",o.textType?" text-"+o.textType:"","\n    ",o.animated?" progress-bar-animated":"","",o.striped?" progress-bar-striped":"",""),qp("width",o.getPercentValue(),"%"),wt("aria-valuenow",o.getValue())("aria-valuemax",o.max),A(1),I("ngIf",o.showValue))},dependencies:[zt,BS],encapsulation:2,changeDetection:0}),t})(),UN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),GN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),qN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),WN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),IG=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(ie(Kc))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),RG=0,FG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$e({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,o){2&e&&(ca("id",o.id),la("tooltip"+(o.tooltipClass?" "+o.tooltipClass:"")),Xt("fade",o.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:Dg,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(e,o){1&e&&(Qd(),be(0,"div",0),x(1,"div",1),Xd(2),M())},encapsulation:2,changeDetection:0}),t})(),LG=(()=>{class t{constructor(e,o,s,l,h,p,m,v,C){this._elementRef=e,this._renderer=o,this._ngZone=p,this._document=m,this._changeDetector=v,this.shown=new Te,this.hidden=new Te,this._ngbTooltipWindowId="ngb-tooltip-"+RG++,this._windowRef=null,this._positioning=b0(),this.animation=h.animation,this.autoClose=h.autoClose,this.placement=h.placement,this.triggers=h.triggers,this.container=h.container,this.disableTooltip=h.disableTooltip,this.tooltipClass=h.tooltipClass,this.openDelay=h.openDelay,this.closeDelay=h.closeDelay,this._popupService=new MN(FG,s,l,o,this._ngZone,C)}set ngbTooltip(e){this._ngbTooltip=e,!e&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(e){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:o,transition$:s}=this._popupService.open(this._ngbTooltip,e,this.animation);this._windowRef=o,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-tooltip"}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),v0(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),s.subscribe(()=>this.shown.emit())}}close(e=this.animation){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(e).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=HN(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:e}){e&&this.isOpen()&&(this._windowRef.instance.tooltipClass=e.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}}return t.\u0275fac=function(e){return new(e||t)(z(Ot),z(ai),z(Gn),z(Ro),z(IG),z(Ht),z(Tn),z(ir),z(Rc))},t.\u0275dir=he({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[Ln]}),t})(),KN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();new De("live announcer delay",{providedIn:"root",factory:function BG(){return 100}});let JN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Bo]}),t})(),YN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({}),t})();const VG=[iN,oN,aN,lN,xN,DN,SN,ON,YN,VN,zN,UN,GN,qN,WN,KN,JN];let jG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[VG,iN,oN,aN,lN,xN,DN,SN,ON,YN,VN,zN,UN,GN,qN,WN,KN,JN]}),t})();function QN(t){return new Wt(n=>{Yn(t()).subscribe(n)})}function Vg(t,n){const e=P(t)?t:()=>t,o=s=>s.error(e());return new Wt(n?s=>n.schedule(o,0,s):o)}function Ox(){return yn((t,n)=>{let e=null;t._refCount++;const o=Et(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const s=t._connection,l=e;e=null,s&&(!l||s===l)&&s.unsubscribe(),n.unsubscribe()});t.subscribe(o),o.closed||(e=t.connect())})}class XN extends Wt{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,am(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Se;const e=this.getSubject();n.add(this.source.subscribe(Et(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Se.EMPTY)}return n}refCount(){return Ox()(this)}}function Cl(t){return yn((n,e)=>{let l,o=null,s=!1;o=n.subscribe(Et(e,void 0,void 0,h=>{l=Yn(t(h,Cl(t)(n))),o?(o.unsubscribe(),o=null,l.subscribe(e)):s=!0})),s&&(o.unsubscribe(),o=null,l.subscribe(e))})}function HG(t,n,e,o,s){return(l,h)=>{let p=e,m=n,v=0;l.subscribe(Et(h,C=>{const D=v++;m=p?t(m,C,D):(p=!0,C),o&&h.next(m)},s&&(()=>{p&&h.next(m),h.complete()})))}}function ZN(t,n){return yn(HG(t,n,arguments.length>=2,!0))}function Px(t){return t<=0?()=>no:yn((n,e)=>{let o=[];n.subscribe(Et(e,s=>{o.push(s),t<o.length&&o.shift()},()=>{for(const s of o)e.next(s);e.complete()},void 0,()=>{o=null}))})}function eI(t,n){const e=arguments.length>=2;return o=>o.pipe(t?Hn((s,l)=>t(s,l,o)):yo,Px(1),e?e0(n):kP(()=>new Zb))}function Nx(t){return yn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const ft="primary",jg=Symbol("RouteTitle");class $G{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function kh(t){return new $G(t)}function UG(t,n,e){const o=e.path.split("/");if(o.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||o.length<t.length))return null;const s={};for(let l=0;l<o.length;l++){const h=o[l],p=t[l];if(h.startsWith(":"))s[h.substring(1)]=p;else if(h!==p.path)return null}return{consumed:t.slice(0,o.length),posParams:s}}function Ts(t,n){const e=t?Object.keys(t):void 0,o=n?Object.keys(n):void 0;if(!e||!o||e.length!=o.length)return!1;let s;for(let l=0;l<e.length;l++)if(s=e[l],!tI(t[s],n[s]))return!1;return!0}function tI(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),o=[...n].sort();return e.every((s,l)=>o[l]===s)}return t===n}function nI(t){return Array.prototype.concat.apply([],t)}function iI(t){return t.length>0?t[t.length-1]:null}function Vi(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function kl(t){return rC(t)?t:Up(t)?dn(Promise.resolve(t)):Me(t)}const WG={exact:function sI(t,n,e){if(!tu(t.segments,n.segments)||!S0(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const o in n.children)if(!t.children[o]||!sI(t.children[o],n.children[o],e))return!1;return!0},subset:aI},oI={exact:function KG(t,n){return Ts(t,n)},subset:function JG(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>tI(t[e],n[e]))},ignored:()=>!0};function rI(t,n,e){return WG[e.paths](t.root,n.root,e.matrixParams)&&oI[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function aI(t,n,e){return lI(t,n,n.segments,e)}function lI(t,n,e,o){if(t.segments.length>e.length){const s=t.segments.slice(0,e.length);return!(!tu(s,e)||n.hasChildren()||!S0(s,e,o))}if(t.segments.length===e.length){if(!tu(t.segments,e)||!S0(t.segments,e,o))return!1;for(const s in n.children)if(!t.children[s]||!aI(t.children[s],n.children[s],o))return!1;return!0}{const s=e.slice(0,t.segments.length),l=e.slice(t.segments.length);return!!(tu(t.segments,s)&&S0(t.segments,s,o)&&t.children[ft])&&lI(t.children[ft],n,l,o)}}function S0(t,n,e){return n.every((o,s)=>oI[e](t[s].parameters,o.parameters))}class eu{constructor(n,e,o){this.root=n,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return XG.serialize(this)}}class pt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Vi(e,(o,s)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return A0(this)}}class Hg{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=kh(this.parameters)),this._parameterMap}toString(){return hI(this)}}function tu(t,n){return t.length===n.length&&t.every((e,o)=>e.path===n[o].path)}let cI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return new Rx},providedIn:"root"}),t})();class Rx{parse(n){const e=new aq(n);return new eu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${zg(n.root,!0)}`,o=function tq(t){const n=Object.keys(t).map(e=>{const o=t[e];return Array.isArray(o)?o.map(s=>`${O0(e)}=${O0(s)}`).join("&"):`${O0(e)}=${O0(o)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams),s="string"==typeof n.fragment?`#${function ZG(t){return encodeURI(t)}(n.fragment)}`:"";return`${e}${o}${s}`}}const XG=new Rx;function A0(t){return t.segments.map(n=>hI(n)).join("/")}function zg(t,n){if(!t.hasChildren())return A0(t);if(n){const e=t.children[ft]?zg(t.children[ft],!1):"",o=[];return Vi(t.children,(s,l)=>{l!==ft&&o.push(`${l}:${zg(s,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function QG(t,n){let e=[];return Vi(t.children,(o,s)=>{s===ft&&(e=e.concat(n(o,s)))}),Vi(t.children,(o,s)=>{s!==ft&&(e=e.concat(n(o,s)))}),e}(t,(o,s)=>s===ft?[zg(t.children[ft],!1)]:[`${s}:${zg(o,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ft]?`${A0(t)}/${e[0]}`:`${A0(t)}/(${e.join("//")})`}}function uI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O0(t){return uI(t).replace(/%3B/gi,";")}function Fx(t){return uI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function P0(t){return decodeURIComponent(t)}function dI(t){return P0(t.replace(/\+/g,"%20"))}function hI(t){return`${Fx(t.path)}${function eq(t){return Object.keys(t).map(n=>`;${Fx(n)}=${Fx(t[n])}`).join("")}(t.parameters)}`}const nq=/^[^\/()?;=#]+/;function N0(t){const n=t.match(nq);return n?n[0]:""}const iq=/^[^=?&#]+/,rq=/^[^&#]+/;class aq{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(o[ft]=new pt(n,e)),o}parseSegment(){const n=N0(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new pe(4009,!1);return this.capture(n),new Hg(P0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=N0(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const s=N0(this.remaining);s&&(o=s,this.capture(o))}n[P0(e)]=P0(o)}parseQueryParam(n){const e=function oq(t){const n=t.match(iq);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const h=function sq(t){const n=t.match(rq);return n?n[0]:""}(this.remaining);h&&(o=h,this.capture(o))}const s=dI(e),l=dI(o);if(n.hasOwnProperty(s)){let h=n[s];Array.isArray(h)||(h=[h],n[s]=h),h.push(l)}else n[s]=l}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=N0(this.remaining),s=this.remaining[o.length];if("/"!==s&&")"!==s&&";"!==s)throw new pe(4010,!1);let l;o.indexOf(":")>-1?(l=o.slice(0,o.indexOf(":")),this.capture(l),this.capture(":")):n&&(l=ft);const h=this.parseChildren();e[l]=1===Object.keys(h).length?h[ft]:new pt([],h),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new pe(4011,!1)}}function Lx(t){return t.segments.length>0?new pt([],{[ft]:t}):t}function I0(t){const n={};for(const o of Object.keys(t.children)){const l=I0(t.children[o]);(l.segments.length>0||l.hasChildren())&&(n[o]=l)}return function lq(t){if(1===t.numberOfChildren&&t.children[ft]){const n=t.children[ft];return new pt(t.segments.concat(n.segments),n.children)}return t}(new pt(t.segments,n))}function nu(t){return t instanceof eu}function dq(t,n,e,o,s){if(0===e.length)return xh(n.root,n.root,n.root,o,s);const l=function gI(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pI(!0,0,t);let n=0,e=!1;const o=t.reduce((s,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Vi(l.outlets,(m,v)=>{p[v]="string"==typeof m?m.split("/"):m}),[...s,{outlets:p}]}if(l.segmentPath)return[...s,l.segmentPath]}return"string"!=typeof l?[...s,l]:0===h?(l.split("/").forEach((p,m)=>{0==m&&"."===p||(0==m&&""===p?e=!0:".."===p?n++:""!=p&&s.push(p))}),s):[...s,l]},[]);return new pI(e,n,o)}(e);return l.toRoot()?xh(n.root,n.root,new pt([],{}),o,s):function h(m){const v=function fq(t,n,e,o){if(t.isAbsolute)return new Eh(n.root,!0,0);if(-1===o)return new Eh(e,e===n.root,0);return function mI(t,n,e){let o=t,s=n,l=e;for(;l>s;){if(l-=s,o=o.parent,!o)throw new pe(4005,!1);s=o.segments.length}return new Eh(o,!1,s-l)}(e,o+($g(t.commands[0])?0:1),t.numberOfDoubleDots)}(l,n,t.snapshot?._urlSegment,m),C=v.processChildren?Gg(v.segmentGroup,v.index,l.commands):Vx(v.segmentGroup,v.index,l.commands);return xh(n.root,v.segmentGroup,C,o,s)}(t.snapshot?._lastPathIndex)}function $g(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ug(t){return"object"==typeof t&&null!=t&&t.outlets}function xh(t,n,e,o,s){let h,l={};o&&Vi(o,(m,v)=>{l[v]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),h=t===n?e:fI(t,n,e);const p=Lx(I0(h));return new eu(p,l,s)}function fI(t,n,e){const o={};return Vi(t.children,(s,l)=>{o[l]=s===n?e:fI(s,n,e)}),new pt(t.segments,o)}class pI{constructor(n,e,o){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=o,n&&o.length>0&&$g(o[0]))throw new pe(4003,!1);const s=o.find(Ug);if(s&&s!==iI(o))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Eh{constructor(n,e,o){this.segmentGroup=n,this.processChildren=e,this.index=o}}function Vx(t,n,e){if(t||(t=new pt([],{})),0===t.segments.length&&t.hasChildren())return Gg(t,n,e);const o=function gq(t,n,e){let o=0,s=n;const l={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(o>=e.length)return l;const h=t.segments[s],p=e[o];if(Ug(p))break;const m=`${p}`,v=o<e.length-1?e[o+1]:null;if(s>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!vI(m,v,h))return l;o+=2}else{if(!vI(m,{},h))return l;o++}s++}return{match:!0,pathIndex:s,commandIndex:o}}(t,n,e),s=e.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){const l=new pt(t.segments.slice(0,o.pathIndex),{});return l.children[ft]=new pt(t.segments.slice(o.pathIndex),t.children),Gg(l,0,s)}return o.match&&0===s.length?new pt(t.segments,{}):o.match&&!t.hasChildren()?jx(t,n,e):o.match?Gg(t,0,s):jx(t,n,e)}function Gg(t,n,e){if(0===e.length)return new pt(t.segments,{});{const o=function pq(t){return Ug(t[0])?t[0].outlets:{[ft]:t}}(e),s={};return Vi(o,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(s[h]=Vx(t.children[h],n,l))}),Vi(t.children,(l,h)=>{void 0===o[h]&&(s[h]=l)}),new pt(t.segments,s)}}function jx(t,n,e){const o=t.segments.slice(0,n);let s=0;for(;s<e.length;){const l=e[s];if(Ug(l)){const m=mq(l.outlets);return new pt(o,m)}if(0===s&&$g(e[0])){o.push(new Hg(t.segments[n].path,_I(e[0]))),s++;continue}const h=Ug(l)?l.outlets[ft]:`${l}`,p=s<e.length-1?e[s+1]:null;h&&p&&$g(p)?(o.push(new Hg(h,_I(p))),s+=2):(o.push(new Hg(h,{})),s++)}return new pt(o,{})}function mq(t){const n={};return Vi(t,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[o]=jx(new pt([],{}),0,e))}),n}function _I(t){const n={};return Vi(t,(e,o)=>n[o]=`${e}`),n}function vI(t,n,e){return t==e.path&&Ts(n,e.parameters)}class Ca{constructor(n,e){this.id=n,this.url=e}}class Hx extends Ca{constructor(n,e,o="imperative",s=null){super(n,e),this.type=0,this.navigationTrigger=o,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class iu extends Ca{constructor(n,e,o){super(n,e),this.urlAfterRedirects=o,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class R0 extends Ca{constructor(n,e,o,s){super(n,e),this.reason=o,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bI extends Ca{constructor(n,e,o,s){super(n,e),this.error=o,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _q extends Ca{constructor(n,e,o,s){super(n,e),this.urlAfterRedirects=o,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vq extends Ca{constructor(n,e,o,s){super(n,e),this.urlAfterRedirects=o,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bq extends Ca{constructor(n,e,o,s,l){super(n,e),this.urlAfterRedirects=o,this.state=s,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yq extends Ca{constructor(n,e,o,s){super(n,e),this.urlAfterRedirects=o,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wq extends Ca{constructor(n,e,o,s){super(n,e),this.urlAfterRedirects=o,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cq{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kq{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xq{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eq{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tq{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dq{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yI{constructor(n,e,o){this.routerEvent=n,this.position=e,this.anchor=o,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wI{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=zx(n,this._root);return e?e.children.map(o=>o.value):[]}firstChild(n){const e=zx(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=$x(n,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return $x(n,this._root).map(e=>e.value)}}function zx(t,n){if(t===n.value)return n;for(const e of n.children){const o=zx(t,e);if(o)return o}return null}function $x(t,n){if(t===n.value)return[n];for(const e of n.children){const o=$x(t,e);if(o.length)return o.unshift(n),o}return[]}class ka{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Th(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class CI extends wI{constructor(n,e){super(n),this.snapshot=e,Ux(this,n)}toString(){return this.snapshot.toString()}}function kI(t,n){const e=function Sq(t,n){const h=new F0([],{},{},"",{},ft,n,null,t.root,-1,{});return new EI("",new ka(h,[]))}(t,n),o=new Mi([new Hg("",{})]),s=new Mi({}),l=new Mi({}),h=new Mi({}),p=new Mi(""),m=new es(o,s,h,p,l,ft,n,e.root);return m.snapshot=e.root,new CI(new ka(m,[]),e)}class es{constructor(n,e,o,s,l,h,p,m){this.url=n,this.params=e,this.queryParams=o,this.fragment=s,this.data=l,this.outlet=h,this.component=p,this.title=this.data?.pipe(Be(v=>v[jg]))??Me(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Be(n=>kh(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Be(n=>kh(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xI(t,n="emptyOnly"){const e=t.pathFromRoot;let o=0;if("always"!==n)for(o=e.length-1;o>=1;){const s=e[o],l=e[o-1];if(s.routeConfig&&""===s.routeConfig.path)o--;else{if(l.component)break;o--}}return function Aq(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(o))}class F0{constructor(n,e,o,s,l,h,p,m,v,C,D,N){this.url=n,this.params=e,this.queryParams=o,this.fragment=s,this.data=l,this.outlet=h,this.component=p,this.title=this.data?.[jg],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=C,this._correctedLastPathIndex=N??C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EI extends wI{constructor(n,e){super(e),this.url=n,Ux(this,e)}toString(){return TI(this._root)}}function Ux(t,n){n.value._routerState=t,n.children.forEach(e=>Ux(t,e))}function TI(t){const n=t.children.length>0?` { ${t.children.map(TI).join(", ")} } `:"";return`${t.value}${n}`}function Gx(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Ts(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),Ts(n.params,e.params)||t.params.next(e.params),function GG(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Ts(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),Ts(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function qx(t,n){const e=Ts(t.params,n.params)&&function YG(t,n){return tu(t,n)&&t.every((e,o)=>Ts(e.parameters,n[o].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||qx(t.parent,n.parent))}function qg(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=n.value;const s=function Pq(t,n,e){return n.children.map(o=>{for(const s of e.children)if(t.shouldReuseRoute(o.value,s.value.snapshot))return qg(t,o,s);return qg(t,o)})}(t,n,e);return new ka(o,s)}{if(t.shouldAttach(n.value)){const l=t.retrieve(n.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=n.value,h.children=n.children.map(p=>qg(t,p)),h}}const o=function Nq(t){return new es(new Mi(t.url),new Mi(t.params),new Mi(t.queryParams),new Mi(t.fragment),new Mi(t.data),t.outlet,t.component,t)}(n.value),s=n.children.map(l=>qg(t,l));return new ka(o,s)}}const Wx="ngNavigationCancelingError";function DI(t,n){const{redirectTo:e,navigationBehaviorOptions:o}=nu(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=MI(!1,0,n);return s.url=e,s.navigationBehaviorOptions=o,s}function MI(t,n,e){const o=new Error("NavigationCancelingError: "+(t||""));return o[Wx]=!0,o.cancellationCode=n,e&&(o.url=e),o}function SI(t){return AI(t)&&nu(t.url)}function AI(t){return t&&t[Wx]}class Iq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wg,this.attachRef=null}}let Wg=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,o){const s=this.getOrCreateContext(e);s.outlet=o,this.contexts.set(e,s)}onChildOutletDestroyed(e){const o=this.getContext(e);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let o=this.getContext(e);return o||(o=new Iq,this.contexts.set(e,o)),o}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const L0=!1;let B0=(()=>{class t{constructor(e,o,s,l,h){this.parentContexts=e,this.location=o,this.changeDetector=l,this.environmentInjector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.name=s||ft,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,L0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,L0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,L0);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new pe(4013,L0);this._activatedRoute=e;const s=this.location,h=e._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,m=new Rq(e,p,s.injector);if(o&&function Fq(t){return!!t.resolveComponentFactory}(o)){const v=o.resolveComponentFactory(h);this.activated=s.createComponent(v,s.length,m)}else this.activated=s.createComponent(h,{index:s.length,injector:m,environmentInjector:o??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(z(Wg),z(Ro),qs("name"),z(ir),z(gs))},t.\u0275dir=he({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),t})();class Rq{constructor(n,e,o){this.route=n,this.childContexts=e,this.parent=o}get(n,e){return n===es?this.route:n===Wg?this.childContexts:this.parent.get(n,e)}}let Kx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$e({type:t,selectors:[["ng-component"]],standalone:!0,features:[XD],decls:1,vars:0,template:function(e,o){1&e&&be(0,"router-outlet")},dependencies:[B0],encapsulation:2}),t})();function OI(t,n){return t.providers&&!t._injector&&(t._injector=ib(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Yx(t){const n=t.children&&t.children.map(Yx),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ft&&(e.component=Kx),e}function Tr(t){return t.outlet||ft}function PI(t,n){const e=t.filter(o=>Tr(o)===n);return e.push(...t.filter(o=>Tr(o)!==n)),e}function Kg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Hq{constructor(n,e,o,s){this.routeReuseStrategy=n,this.futureState=e,this.currState=o,this.forwardEvent=s}activate(n){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,n),Gx(this.futureState.root),this.activateChildRoutes(e,o,n)}deactivateChildRoutes(n,e,o){const s=Th(e);n.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,s[h],o),delete s[h]}),Vi(s,(l,h)=>{this.deactivateRouteAndItsChildren(l,o)})}deactivateRoutes(n,e,o){const s=n.value,l=e?e.value:null;if(s===l)if(s.component){const h=o.getContext(s.outlet);h&&this.deactivateChildRoutes(n,e,h.children)}else this.deactivateChildRoutes(n,e,o);else l&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const o=e.getContext(n.value.outlet),s=o&&n.value.component?o.children:e,l=Th(n);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],s);if(o&&o.outlet){const h=o.outlet.detach(),p=o.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:h,route:n,contexts:p})}}deactivateRouteAndOutlet(n,e){const o=e.getContext(n.value.outlet),s=o&&n.value.component?o.children:e,l=Th(n);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],s);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(n,e,o){const s=Th(e);n.children.forEach(l=>{this.activateRoutes(l,s[l.value.outlet],o),this.forwardEvent(new Dq(l.value.snapshot))}),n.children.length&&this.forwardEvent(new Eq(n.value.snapshot))}activateRoutes(n,e,o){const s=n.value,l=e?e.value:null;if(Gx(s),s===l)if(s.component){const h=o.getOrCreateContext(s.outlet);this.activateChildRoutes(n,e,h.children)}else this.activateChildRoutes(n,e,o);else if(s.component){const h=o.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(p.contexts),h.attachRef=p.componentRef,h.route=p.route.value,h.outlet&&h.outlet.attach(p.componentRef,p.route.value),Gx(p.route.value),this.activateChildRoutes(n,null,h.children)}else{const p=Kg(s.snapshot),m=p?.get(Tc)??null;h.attachRef=null,h.route=s,h.resolver=m,h.injector=p,h.outlet&&h.outlet.activateWith(s,h.injector),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,o)}}class NI{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class V0{constructor(n,e){this.component=n,this.route=e}}function zq(t,n,e){const o=t._root;return Jg(o,n?n._root:null,e,[o.value])}function Dh(t,n){const e=Symbol(),o=n.get(t,e);return o===e?"function"!=typeof t||function Cm(t){return null!==_u(t)}(t)?n.get(t):t:o}function Jg(t,n,e,o,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=Th(n);return t.children.forEach(h=>{(function Uq(t,n,e,o,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=t.value,h=n?n.value:null,p=e?e.getContext(t.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const m=function Gq(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!tu(t.url,n.url);case"pathParamsOrQueryParamsChange":return!tu(t.url,n.url)||!Ts(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qx(t,n)||!Ts(t.queryParams,n.queryParams);default:return!qx(t,n)}}(h,l,l.routeConfig.runGuardsAndResolvers);m?s.canActivateChecks.push(new NI(o)):(l.data=h.data,l._resolvedData=h._resolvedData),Jg(t,n,l.component?p?p.children:null:e,o,s),m&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new V0(p.outlet.component,h))}else h&&Yg(n,p,s),s.canActivateChecks.push(new NI(o)),Jg(t,null,l.component?p?p.children:null:e,o,s)})(h,l[h.value.outlet],e,o.concat([h.value]),s),delete l[h.value.outlet]}),Vi(l,(h,p)=>Yg(h,e.getContext(p),s)),s}function Yg(t,n,e){const o=Th(t),s=t.value;Vi(o,(l,h)=>{Yg(l,s.component?n?n.children.getContext(h):null:n,e)}),e.canDeactivateChecks.push(new V0(s.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,s))}function Qg(t){return"function"==typeof t}function Qx(t){return t instanceof Zb||"EmptyError"===t?.name}const j0=Symbol("INITIAL_VALUE");function Mh(){return kr(t=>n0(t.map(n=>n.pipe(pi(1),r0(j0)))).pipe(Be(n=>{for(const e of n)if(!0!==e){if(e===j0)return j0;if(!1===e||e instanceof eu)return e}return!0}),Hn(n=>n!==j0),pi(1)))}function II(t){return function hy(...t){return om(t)}(gi(n=>{if(nu(n))throw DI(0,n)}),Be(n=>!0===n))}const Xx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RI(t,n,e,o,s){const l=Zx(t,n,e);return l.matched?function lW(t,n,e,o){const s=n.canMatch;return s&&0!==s.length?Me(s.map(h=>{const p=Dh(h,t);return kl(function Qq(t){return t&&Qg(t.canMatch)}(p)?p.canMatch(n,e):t.runInContext(()=>p(n,e)))})).pipe(Mh(),II()):Me(!0)}(o=OI(n,o),n,e).pipe(Be(h=>!0===h?l:{...Xx})):Me(l)}function Zx(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...Xx}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(n.matcher||UG)(e,t,n);if(!s)return{...Xx};const l={};Vi(s.posParams,(p,m)=>{l[m]=p.path});const h=s.consumed.length>0?{...l,...s.consumed[s.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:h,positionalParamSegments:s.posParams??{}}}function H0(t,n,e,o,s="corrected"){if(e.length>0&&function dW(t,n,e){return e.some(o=>z0(t,n,o)&&Tr(o)!==ft)}(t,e,o)){const h=new pt(n,function uW(t,n,e,o){const s={};s[ft]=o,o._sourceSegment=t,o._segmentIndexShift=n.length;for(const l of e)if(""===l.path&&Tr(l)!==ft){const h=new pt([],{});h._sourceSegment=t,h._segmentIndexShift=n.length,s[Tr(l)]=h}return s}(t,n,o,new pt(e,t.children)));return h._sourceSegment=t,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function hW(t,n,e){return e.some(o=>z0(t,n,o))}(t,e,o)){const h=new pt(t.segments,function cW(t,n,e,o,s,l){const h={};for(const p of o)if(z0(t,e,p)&&!s[Tr(p)]){const m=new pt([],{});m._sourceSegment=t,m._segmentIndexShift="legacy"===l?t.segments.length:n.length,h[Tr(p)]=m}return{...s,...h}}(t,n,e,o,t.children,s));return h._sourceSegment=t,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:e}}const l=new pt(t.segments,t.children);return l._sourceSegment=t,l._segmentIndexShift=n.length,{segmentGroup:l,slicedSegments:e}}function z0(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function FI(t,n,e,o){return!!(Tr(t)===o||o!==ft&&z0(n,e,t))&&("**"===t.path||Zx(n,t,e).matched)}function LI(t,n,e){return 0===n.length&&!t.children[e]}const $0=!1;class U0{constructor(n){this.segmentGroup=n||null}}class BI{constructor(n){this.urlTree=n}}function Xg(t){return Vg(new U0(t))}function VI(t){return Vg(new BI(t))}class mW{constructor(n,e,o,s,l){this.injector=n,this.configLoader=e,this.urlSerializer=o,this.urlTree=s,this.config=l,this.allowRedirects=!0}apply(){const n=H0(this.urlTree.root,[],[],this.config).segmentGroup,e=new pt(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,ft).pipe(Be(l=>this.createUrlTree(I0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cl(l=>{if(l instanceof BI)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof U0?this.noMatchError(l):l}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,ft).pipe(Be(s=>this.createUrlTree(I0(s),n.queryParams,n.fragment))).pipe(Cl(s=>{throw s instanceof U0?this.noMatchError(s):s}))}noMatchError(n){return new pe(4002,$0)}createUrlTree(n,e,o){const s=Lx(n);return new eu(s,e,o)}expandSegmentGroup(n,e,o,s){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(n,e,o).pipe(Be(l=>new pt([],l))):this.expandSegment(n,o,e,o.segments,s,!0)}expandChildren(n,e,o){const s=[];for(const l of Object.keys(o.children))"primary"===l?s.unshift(l):s.push(l);return dn(s).pipe(ml(l=>{const h=o.children[l],p=PI(e,l);return this.expandSegmentGroup(n,p,h,l).pipe(Be(m=>({segment:m,outlet:l})))}),ZN((l,h)=>(l[h.outlet]=h.segment,l),{}),eI())}expandSegment(n,e,o,s,l,h){return dn(o).pipe(ml(p=>this.expandSegmentAgainstRoute(n,e,o,p,s,l,h).pipe(Cl(v=>{if(v instanceof U0)return Me(null);throw v}))),ya(p=>!!p),Cl((p,m)=>{if(Qx(p))return LI(e,s,l)?Me(new pt([],{})):Xg(e);throw p}))}expandSegmentAgainstRoute(n,e,o,s,l,h,p){return FI(s,e,l,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(n,e,s,l,h):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,o,s,l,h):Xg(e):Xg(e)}expandSegmentAgainstRouteUsingRedirect(n,e,o,s,l,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,o,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,o,s,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,o,s){const l=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?VI(l):this.lineralizeSegments(o,l).pipe(Ke(h=>{const p=new pt(h,{});return this.expandSegment(n,p,e,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,o,s,l,h){const{matched:p,consumedSegments:m,remainingSegments:v,positionalParamSegments:C}=Zx(e,s,l);if(!p)return Xg(e);const D=this.applyRedirectCommands(m,s.redirectTo,C);return s.redirectTo.startsWith("/")?VI(D):this.lineralizeSegments(s,D).pipe(Ke(N=>this.expandSegment(n,e,o,N.concat(v),h,!1)))}matchSegmentAgainstRoute(n,e,o,s,l){return"**"===o.path?(n=OI(o,n),o.loadChildren?(o._loadedRoutes?Me({routes:o._loadedRoutes,injector:o._loadedInjector}):this.configLoader.loadChildren(n,o)).pipe(Be(p=>(o._loadedRoutes=p.routes,o._loadedInjector=p.injector,new pt(s,{})))):Me(new pt(s,{}))):RI(e,o,s,n).pipe(kr(({matched:h,consumedSegments:p,remainingSegments:m})=>h?this.getChildConfig(n=o._injector??n,o,s).pipe(Ke(C=>{const D=C.injector??n,N=C.routes,{segmentGroup:V,slicedSegments:U}=H0(e,p,m,N),q=new pt(V.segments,V.children);if(0===U.length&&q.hasChildren())return this.expandChildren(D,N,q).pipe(Be(X=>new pt(p,X)));if(0===N.length&&0===U.length)return Me(new pt(p,{}));const J=Tr(o)===l;return this.expandSegment(D,q,N,U,J?ft:l,!0).pipe(Be(te=>new pt(p.concat(te.segments),te.children)))})):Xg(e)))}getChildConfig(n,e,o){return e.children?Me({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Me({routes:e._loadedRoutes,injector:e._loadedInjector}):function aW(t,n,e,o){const s=n.canLoad;return void 0===s||0===s.length?Me(!0):Me(s.map(h=>{const p=Dh(h,t);return kl(function Wq(t){return t&&Qg(t.canLoad)}(p)?p.canLoad(n,e):t.runInContext(()=>p(n,e)))})).pipe(Mh(),II())}(n,e,o).pipe(Ke(s=>s?this.configLoader.loadChildren(n,e).pipe(gi(l=>{e._loadedRoutes=l.routes,e._loadedInjector=l.injector})):function pW(t){return Vg(MI($0,3))}())):Me({routes:[],injector:n})}lineralizeSegments(n,e){let o=[],s=e.root;for(;;){if(o=o.concat(s.segments),0===s.numberOfChildren)return Me(o);if(s.numberOfChildren>1||!s.children[ft])return Vg(new pe(4e3,$0));s=s.children[ft]}}applyRedirectCommands(n,e,o){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,o)}applyRedirectCreateUrlTree(n,e,o,s){const l=this.createSegmentGroup(n,e.root,o,s);return new eu(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const o={};return Vi(n,(s,l)=>{if("string"==typeof s&&s.startsWith(":")){const p=s.substring(1);o[l]=e[p]}else o[l]=s}),o}createSegmentGroup(n,e,o,s){const l=this.createSegments(n,e.segments,o,s);let h={};return Vi(e.children,(p,m)=>{h[m]=this.createSegmentGroup(n,p,o,s)}),new pt(l,h)}createSegments(n,e,o,s){return e.map(l=>l.path.startsWith(":")?this.findPosParam(n,l,s):this.findOrReturn(l,o))}findPosParam(n,e,o){const s=o[e.path.substring(1)];if(!s)throw new pe(4001,$0);return s}findOrReturn(n,e){let o=0;for(const s of e){if(s.path===n.path)return e.splice(o),s;o++}return n}}class vW{}class wW{constructor(n,e,o,s,l,h,p,m){this.injector=n,this.rootComponentType=e,this.config=o,this.urlTree=s,this.url=l,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=p,this.urlSerializer=m}recognize(){const n=H0(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,ft).pipe(Be(e=>{if(null===e)return null;const o=new F0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ka(o,e),l=new EI(this.url,s);return this.inheritParamsAndData(l._root),l}))}inheritParamsAndData(n){const e=n.value,o=xI(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),n.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(n,e,o,s){return 0===o.segments.length&&o.hasChildren()?this.processChildren(n,e,o):this.processSegment(n,e,o,o.segments,s)}processChildren(n,e,o){return dn(Object.keys(o.children)).pipe(ml(s=>{const l=o.children[s],h=PI(e,s);return this.processSegmentGroup(n,h,l,s)}),ZN((s,l)=>s&&l?(s.push(...l),s):null),function zG(t,n=!1){return yn((e,o)=>{let s=0;e.subscribe(Et(o,l=>{const h=t(l,s++);(h||n)&&o.next(l),!h&&o.complete()}))})}(s=>null!==s),e0(null),eI(),Be(s=>{if(null===s)return null;const l=jI(s);return function CW(t){t.sort((n,e)=>n.value.outlet===ft?-1:e.value.outlet===ft?1:n.value.outlet.localeCompare(e.value.outlet))}(l),l}))}processSegment(n,e,o,s,l){return dn(e).pipe(ml(h=>this.processSegmentAgainstRoute(h._injector??n,h,o,s,l)),ya(h=>!!h),Cl(h=>{if(Qx(h))return LI(o,s,l)?Me([]):Me(null);throw h}))}processSegmentAgainstRoute(n,e,o,s,l){if(e.redirectTo||!FI(e,o,s,l))return Me(null);let h;if("**"===e.path){const p=s.length>0?iI(s).parameters:{},m=zI(o)+s.length;h=Me({snapshot:new F0(s,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UI(e),Tr(e),e.component??e._loadedComponent??null,e,HI(o),m,GI(e),m),consumedSegments:[],remainingSegments:[]})}else h=RI(o,e,s,n).pipe(Be(({matched:p,consumedSegments:m,remainingSegments:v,parameters:C})=>{if(!p)return null;const D=zI(o)+m.length;return{snapshot:new F0(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UI(e),Tr(e),e.component??e._loadedComponent??null,e,HI(o),D,GI(e),D),consumedSegments:m,remainingSegments:v}}));return h.pipe(kr(p=>{if(null===p)return Me(null);const{snapshot:m,consumedSegments:v,remainingSegments:C}=p;n=e._injector??n;const D=e._loadedInjector??n,N=function kW(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:V,slicedSegments:U}=H0(o,v,C,N.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===U.length&&V.hasChildren())return this.processChildren(D,N,V).pipe(Be(J=>null===J?null:[new ka(m,J)]));if(0===N.length&&0===U.length)return Me([new ka(m,[])]);const q=Tr(e)===l;return this.processSegment(D,N,V,U,q?ft:l).pipe(Be(J=>null===J?null:[new ka(m,J)]))}))}}function xW(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function jI(t){const n=[],e=new Set;for(const o of t){if(!xW(o)){n.push(o);continue}const s=n.find(l=>o.value.routeConfig===l.value.routeConfig);void 0!==s?(s.children.push(...o.children),e.add(s)):n.push(o)}for(const o of e){const s=jI(o.children);n.push(new ka(o.value,s))}return n.filter(o=>!e.has(o))}function HI(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function zI(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function UI(t){return t.data||{}}function GI(t){return t.resolve||{}}function qI(t){return"string"==typeof t.title||null===t.title}function eE(t){return kr(n=>{const e=t(n);return e?dn(e).pipe(Be(()=>n)):Me(n)})}let WI=(()=>{class t{buildTitle(e){let o,s=e.root;for(;void 0!==s;)o=this.getResolvedTitleForRoute(s)??o,s=s.children.find(l=>l.outlet===ft);return o}getResolvedTitleForRoute(e){return e.data[jg]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:function(){return ot(KI)},providedIn:"root"}),t})(),KI=(()=>{class t extends WI{constructor(e){super(),this.title=e}updateTitle(e){const o=this.buildTitle(e);void 0!==o&&this.title.setTitle(o)}}return t.\u0275fac=function(e){return new(e||t)(ie(aA))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class PW{}class IW extends class NW{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const q0=new De("",{providedIn:"root",factory:()=>({})}),tE=new De("ROUTES");let nE=(()=>{class t{constructor(e,o){this.injector=e,this.compiler=o,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Me(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const o=kl(e.loadComponent()).pipe(gi(l=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=l}),Nx(()=>{this.componentLoaders.delete(e)})),s=new XN(o,()=>new mt).pipe(Ox());return this.componentLoaders.set(e,s),s}loadChildren(e,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return Me({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);const l=this.loadModuleFactoryOrRoutes(o.loadChildren).pipe(Be(p=>{this.onLoadEndListener&&this.onLoadEndListener(o);let m,v,C=!1;Array.isArray(p)?v=p:(m=p.create(e).injector,v=nI(m.get(tE,[],Pe.Self|Pe.Optional)));return{routes:v.map(Yx),injector:m}}),Nx(()=>{this.childrenLoaders.delete(o)})),h=new XN(l,()=>new mt).pipe(Ox());return this.childrenLoaders.set(o,h),h}loadModuleFactoryOrRoutes(e){return kl(e()).pipe(Ke(o=>o instanceof YD||Array.isArray(o)?Me(o):dn(this.compiler.compileModuleAsync(o))))}}return t.\u0275fac=function(e){return new(e||t)(ie(Gn),ie(SC))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class FW{}class LW{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function BW(t){throw t}function VW(t,n,e){return n.parse("/")}const jW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function YI(){const t=ot(cI),n=ot(Wg),e=ot(GC),o=ot(Gn),s=ot(SC),l=ot(tE,{optional:!0})??[],h=ot(q0,{optional:!0})??{},p=ot(KI),m=ot(WI,{optional:!0}),v=ot(FW,{optional:!0}),C=ot(PW,{optional:!0}),D=new Ai(null,t,n,e,o,s,nI(l));return v&&(D.urlHandlingStrategy=v),C&&(D.routeReuseStrategy=C),D.titleStrategy=m??p,function zW(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(h,D),D}let Ai=(()=>{class t{constructor(e,o,s,l,h,p,m){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=s,this.location=l,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mt,this.errorHandler=BW,this.malformedUriErrorHandler=VW,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Me(void 0),this.urlHandlingStrategy=new LW,this.routeReuseStrategy=new IW,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=h.get(nE),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new kq(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new Cq(N)),this.ngModule=h.get(Ic),this.console=h.get(TF);const D=h.get(Ht);this.isNgZoneEnabled=D instanceof Ht&&Ht.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function qG(){return new eu(new pt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kI(this.currentUrlTree,this.rootComponentType),this.transitions=new Mi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(Hn(s=>0!==s.id),Be(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),kr(s=>{let l=!1,h=!1;return Me(s).pipe(gi(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kr(p=>{const m=this.browserUrlTree.toString(),v=!this.navigated||p.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return QI(p.source)&&(this.browserUrlTree=p.extractedUrl),Me(p).pipe(kr(D=>{const N=this.transitions.getValue();return o.next(new Hx(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),N!==this.transitions.getValue()?no:Promise.resolve(D)}),function _W(t,n,e,o){return kr(s=>function gW(t,n,e,o,s){return new mW(t,n,e,o,s).apply()}(t,n,e,s.extractedUrl,o).pipe(Be(l=>({...s,urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),gi(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},s.urlAfterRedirects=D.urlAfterRedirects}),function TW(t,n,e,o,s,l){return Ke(h=>function yW(t,n,e,o,s,l,h="emptyOnly",p="legacy"){return new wW(t,n,e,o,s,h,p,l).recognize().pipe(kr(m=>null===m?function bW(t){return new Wt(n=>n.error(t))}(new vW):Me(m)))}(t,n,e,h.urlAfterRedirects,o.serialize(h.urlAfterRedirects),o,s,l).pipe(Be(p=>({...h,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),gi(D=>{if(s.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(V,D)}this.browserUrlTree=D.urlAfterRedirects}const N=new _q(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);o.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:V,source:U,restoredState:q,extras:J}=p,Q=new Hx(N,this.serializeUrl(V),U,q);o.next(Q);const te=kI(V,this.rootComponentType).snapshot;return Me(s={...p,targetSnapshot:te,urlAfterRedirects:V,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),no}),gi(p=>{const m=new vq(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}),Be(p=>s={...p,guards:zq(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function Zq(t,n){return Ke(e=>{const{targetSnapshot:o,currentSnapshot:s,guards:{canActivateChecks:l,canDeactivateChecks:h}}=e;return 0===h.length&&0===l.length?Me({...e,guardsResult:!0}):function eW(t,n,e,o){return dn(t).pipe(Ke(s=>function sW(t,n,e,o,s){const l=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return l&&0!==l.length?Me(l.map(p=>{const m=Kg(n)??s,v=Dh(p,m);return kl(function Yq(t){return t&&Qg(t.canDeactivate)}(v)?v.canDeactivate(t,n,e,o):m.runInContext(()=>v(t,n,e,o))).pipe(ya())})).pipe(Mh()):Me(!0)}(s.component,s.route,e,n,o)),ya(s=>!0!==s,!0))}(h,o,s,t).pipe(Ke(p=>p&&function qq(t){return"boolean"==typeof t}(p)?function tW(t,n,e,o){return dn(n).pipe(ml(s=>yg(function iW(t,n){return null!==t&&n&&n(new xq(t)),Me(!0)}(s.route.parent,o),function nW(t,n){return null!==t&&n&&n(new Tq(t)),Me(!0)}(s.route,o),function rW(t,n,e){const o=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(h=>function $q(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(h)).filter(h=>null!==h).map(h=>QN(()=>Me(h.guards.map(m=>{const v=Kg(h.node)??e,C=Dh(m,v);return kl(function Jq(t){return t&&Qg(t.canActivateChild)}(C)?C.canActivateChild(o,t):v.runInContext(()=>C(o,t))).pipe(ya())})).pipe(Mh())));return Me(l).pipe(Mh())}(t,s.path,e),function oW(t,n,e){const o=n.routeConfig?n.routeConfig.canActivate:null;if(!o||0===o.length)return Me(!0);const s=o.map(l=>QN(()=>{const h=Kg(n)??e,p=Dh(l,h);return kl(function Kq(t){return t&&Qg(t.canActivate)}(p)?p.canActivate(n,t):h.runInContext(()=>p(n,t))).pipe(ya())}));return Me(s).pipe(Mh())}(t,s.route,e))),ya(s=>!0!==s,!0))}(o,l,t,n):Me(p)),Be(p=>({...e,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),gi(p=>{if(s.guardsResult=p.guardsResult,nu(p.guardsResult))throw DI(0,p.guardsResult);const m=new bq(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(m)}),Hn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),eE(p=>{if(p.guards.canActivateChecks.length)return Me(p).pipe(gi(m=>{const v=new yq(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),kr(m=>{let v=!1;return Me(m).pipe(function DW(t,n){return Ke(e=>{const{targetSnapshot:o,guards:{canActivateChecks:s}}=e;if(!s.length)return Me(e);let l=0;return dn(s).pipe(ml(h=>function MW(t,n,e,o){const s=t.routeConfig,l=t._resolve;return void 0!==s?.title&&!qI(s)&&(l[jg]=s.title),function SW(t,n,e,o){const s=function AW(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===s.length)return Me({});const l={};return dn(s).pipe(Ke(h=>function OW(t,n,e,o){const s=Kg(n)??o,l=Dh(t,s);return kl(l.resolve?l.resolve(n,e):s.runInContext(()=>l(n,e)))}(t[h],n,e,o).pipe(ya(),gi(p=>{l[h]=p}))),Px(1),OP(l),Cl(h=>Qx(h)?no:Vg(h)))}(l,t,n,o).pipe(Be(h=>(t._resolvedData=h,t.data=xI(t,e).resolve,s&&qI(s)&&(t.data[jg]=s.title),null)))}(h.route,o,t,n)),gi(()=>l++),Px(1),Ke(h=>l===s.length?Me(e):no))})}(this.paramsInheritanceStrategy,this.ngModule.injector),gi({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),gi(m=>{const v=new wq(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),eE(p=>{const m=v=>{const C=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(v.routeConfig).pipe(gi(D=>{v.component=D}),Be(()=>{})));for(const D of v.children)C.push(...m(D));return C};return n0(m(p.targetSnapshot.root)).pipe(e0(),pi(1))}),eE(()=>this.afterPreactivation()),Be(p=>{const m=function Oq(t,n,e){const o=qg(t,n._root,e?e._root:void 0);return new CI(o,n)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return s={...p,targetRouterState:m}}),gi(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((t,n,e)=>Be(o=>(new Hq(n,o.targetRouterState,o.currentRouterState,e).activate(t),o)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),gi({next(){l=!0},complete(){l=!0}}),Nx(()=>{l||h||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Cl(p=>{if(h=!0,AI(p)){SI(p)||(this.navigated=!0,this.restoreHistory(s,!0));const m=new R0(s.id,this.serializeUrl(s.extractedUrl),p.message,p.cancellationCode);if(o.next(m),SI(p)){const v=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),C={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||QI(s.source)};this.scheduleNavigation(v,"imperative",null,C,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const m=new bI(s.id,this.serializeUrl(s.extractedUrl),p,s.targetSnapshot??void 0);o.next(m);try{s.resolve(this.errorHandler(p))}catch(v){s.reject(v)}}return no}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{const s={replaceUrl:!0},l=e.state?.navigationId?e.state:null;if(l){const p={...l};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,o,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(Yx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:s,queryParams:l,fragment:h,queryParamsHandling:p,preserveFragment:m}=o,v=s||this.routerState.root,C=m?this.currentUrlTree.fragment:h;let D=null;switch(p){case"merge":D={...this.currentUrlTree.queryParams,...l};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=l||null}return null!==D&&(D=this.removeEmptyProps(D)),dq(v,this.currentUrlTree,e,D,C??null)}navigateByUrl(e,o={skipLocationChange:!1}){const s=nu(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function $W(t){for(let n=0;n<t.length;n++){if(null==t[n])throw new pe(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(s){o=this.malformedUriErrorHandler(s,this.urlSerializer,e)}return o}isActive(e,o){let s;if(s=!0===o?{...jW}:!1===o?{...HW}:o,nu(e))return rI(this.currentUrlTree,e,s);const l=this.parseUrl(e);return rI(this.currentUrlTree,l,s)}removeEmptyProps(e){return Object.keys(e).reduce((o,s)=>{const l=e[s];return null!=l&&(o[s]=l),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new iu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,s,l,h){if(this.disposed)return Promise.resolve(!1);let p,m,v;h?(p=h.resolve,m=h.reject,v=h.promise):v=new Promise((N,V)=>{p=N,m=V});const C=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),D=s&&s.\u0275routerPageId?s.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:C,targetPageId:D,source:o,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:p,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(N=>Promise.reject(N))}setBrowserUrl(e,o){const s=this.urlSerializer.serialize(e),l={...o.extras.state,...this.generateNgRouterState(o.id,o.targetPageId)};this.location.isCurrentPathEqualTo(s)||o.extras.replaceUrl?this.location.replaceState(s,"",l):this.location.go(s,"",l)}restoreHistory(e,o=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o,s){const l=new R0(e.id,this.serializeUrl(e.extractedUrl),o,s);this.triggerEvent(l),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return t.\u0275fac=function(e){Od()},t.\u0275prov=de({token:t,factory:function(){return YI()},providedIn:"root"}),t})();function QI(t){return"imperative"!==t}class XI{}let qW=(()=>{class t{constructor(e,o,s,l,h){this.router=e,this.injector=s,this.preloadingStrategy=l,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(Hn(e=>e instanceof iu),ml(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const s=[];for(const l of o){l.providers&&!l._injector&&(l._injector=ib(l.providers,e,`Route: ${l.path}`));const h=l._injector??e,p=l._loadedInjector??h;l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent?s.push(this.preloadConfig(h,l)):(l.children||l._loadedRoutes)&&s.push(this.processRoutes(p,l.children??l._loadedRoutes))}return dn(s).pipe(Da())}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>{let s;s=o.loadChildren&&void 0===o.canLoad?this.loader.loadChildren(e,o):Me(null);const l=s.pipe(Ke(h=>null===h?Me(void 0):(o._loadedRoutes=h.routes,o._loadedInjector=h.injector,this.processRoutes(h.injector??e,h.routes))));return o.loadComponent&&!o._loadedComponent?dn([l,this.loader.loadComponent(o)]).pipe(Da()):l})}}return t.\u0275fac=function(e){return new(e||t)(ie(Ai),ie(SC),ie(gs),ie(XI),ie(nE))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rE=new De("");let ZI=(()=>{class t{constructor(e,o,s={}){this.router=e,this.viewportScroller=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Hx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof iu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yI&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new yI(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Od()},t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();function Sh(t,n){return{\u0275kind:t,\u0275providers:n}}function sE(t){return[{provide:tE,multi:!0,useValue:t}]}function t2(){const t=ot(Gn);return n=>{const e=t.get(Rc);if(n!==e.components[0])return;const o=t.get(Ai),s=t.get(n2);1===t.get(aE)&&o.initialNavigation(),t.get(o2,null,Pe.Optional)?.setUpPreloading(),t.get(rE,null,Pe.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const n2=new De("",{factory:()=>new mt}),aE=new De("",{providedIn:"root",factory:()=>1});const o2=new De("");function YW(t){return Sh(0,[{provide:o2,useExisting:qW},{provide:XI,useExisting:t}])}const r2=new De("ROUTER_FORROOT_GUARD"),QW=[GC,{provide:cI,useClass:Rx},{provide:Ai,useFactory:YI},Wg,{provide:es,useFactory:function e2(t){return t.routerState.root},deps:[Ai]},nE];function XW(){return new GM("Router",Ai)}let s2=(()=>{class t{constructor(e){}static forRoot(e,o){return{ngModule:t,providers:[QW,[],sE(e),{provide:r2,useFactory:nK,deps:[[Ai,new ac,new lc]]},{provide:q0,useValue:o||{}},o?.useHash?{provide:Lc,useClass:p5}:{provide:Lc,useClass:mS},{provide:rE,useFactory:()=>{const t=ot(Ai),n=ot(wL),e=ot(q0);return e.scrollOffset&&n.setOffset(e.scrollOffset),new ZI(t,n,e)}},o?.preloadingStrategy?YW(o.preloadingStrategy).\u0275providers:[],{provide:GM,multi:!0,useFactory:XW},o?.initialNavigation?iK(o):[],[{provide:a2,useFactory:t2},{provide:BM,multi:!0,useExisting:a2}]]}}static forChild(e){return{ngModule:t,providers:[sE(e)]}}}return t.\u0275fac=function(e){return new(e||t)(ie(r2,8))},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[Kx]}),t})();function nK(t){return"guarded"}function iK(t){return["disabled"===t.initialNavigation?Sh(3,[{provide:ab,multi:!0,useFactory:()=>{const n=ot(Ai);return()=>{n.setUpLocationChangeListener()}}},{provide:aE,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Sh(2,[{provide:aE,useValue:0},{provide:ab,multi:!0,deps:[Gn],useFactory:n=>{const e=n.get(h5,Promise.resolve());let o=!1;return()=>e.then(()=>new Promise(l=>{const h=n.get(Ai),p=n.get(n2);(function s(l){n.get(Ai).events.pipe(Hn(p=>p instanceof iu||p instanceof R0||p instanceof bI),Be(p=>p instanceof iu||p instanceof R0&&(0===p.code||1===p.code)&&null),Hn(p=>null!==p),pi(1)).subscribe(()=>{l()})})(()=>{l(!0),o=!0}),h.afterPreactivation=()=>(l(!0),o||p.closed?Me(void 0):p),h.initialNavigation()}))}}]).\u0275providers:[]]}const a2=new De("");let rK=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$e({type:t,selectors:[["app-print"]],decls:2,vars:0,consts:[[1,"print-content"]],template:function(e,o){1&e&&(x(0,"div",0),be(1,"router-outlet"),M())},dependencies:[B0],styles:["@media screen{[_nghost-%COMP%]{display:none}}"]}),t})();class l2{constructor(){this.className="Classe",this.id="",this.titre="",this.eleves=[]}deserialize(n){return Object.assign(this,n),this}}class c2{constructor(){this.className="Groupe",this.id="",this.nom="",this.eleves=[]}deserialize(n){return Object.assign(this,n),this}isEleveInGroupe(n){return-1!==this.eleves.indexOf(n)}}class sK{constructor(){this.className="Capacite",this.id="",this.texte="",this.couleur=""}deserialize(n){return this.id=n.id,this.texte=n.texte,this}getCompetence(n){if(void 0!==n)for(const e of n.competences)for(const o of e.capacites)if(o.id===this.id)return e;return null}}class aK{constructor(){this.className="Competence",this.titre="",this.couleur="",this.capacites=[]}deserialize(n){this.titre=n.titre,this.couleur=n.couleur,this.capacites=[];for(const e of Object.keys(n.capacites)){let o=(new sK).deserialize(n.capacites[e]);o.couleur=this.couleur,this.capacites.push(o)}return this}}class u2{constructor(){this.className="Grille",this.titre="",this.competences=[]}deserialize(n){this.titre=n.titre,this.competences=[];for(const e of Object.keys(n.competences))this.competences.push((new aK).deserialize(n.competences[e]));return this}getCapacite(n){for(const e of this.competences)for(const o of e.capacites)if(o.id===n)return o;return null}}const d2={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Y0;const lK=new Uint8Array(16);function cK(){if(!Y0&&(Y0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Y0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y0(lK)}const ji=[];for(let t=0;t<256;++t)ji.push((t+256).toString(16).slice(1));const ts=function uK(t,n,e){if(d2.randomUUID&&!n&&!t)return d2.randomUUID();const o=(t=t||{}).random||(t.rng||cK)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){e=e||0;for(let s=0;s<16;++s)n[e+s]=o[s];return n}return function h2(t,n=0){return(ji[t[n+0]]+ji[t[n+1]]+ji[t[n+2]]+ji[t[n+3]]+"-"+ji[t[n+4]]+ji[t[n+5]]+"-"+ji[t[n+6]]+ji[t[n+7]]+"-"+ji[t[n+8]]+ji[t[n+9]]+"-"+ji[t[n+10]]+ji[t[n+11]]+ji[t[n+12]]+ji[t[n+13]]+ji[t[n+14]]+ji[t[n+15]]).toLowerCase()}(o)};class Q0{constructor(){this.className="Critere",this.id="",this.text="",this.capacite=null,this.bareme=0}deserialize(n,e,o=!1){return this.id=o?ts():n.id,this.text=n.text,this.bareme=parseFloat(n.bareme),this.capacite=null,e&&n.capacite&&(this.capacite=e.getCapacite(n.capacite)),this}serialize(){return{id:this.id,text:this.text,bareme:this.bareme,type:"cri",capacite:this.capacite?this.capacite.id:""}}isCapaciteUsed(n){return!(!this.capacite||this.capacite.id!==n.id)}getCapaciteBilan(n){this.capacite&&(n[this.capacite.id]?n[this.capacite.id].bareme+=this.bareme:n[this.capacite.id]={capacite:this.capacite,ok:0,encours:0,ko:0,total:0,pts:0,bareme:this.bareme})}}class xl{constructor(){this.className="Freetext",this.id="",this.text=""}deserialize(n,e=!1){return this.id=e?ts():n.id,this.text=n.text,this}serialize(){return{id:this.id,text:this.text,type:"free"}}isCapaciteUsed(n){return!1}getCapaciteBilan(n){}getCritere(n){return null}getCritereDeep(n){return null}}class X0{constructor(){this.className="Question",this.id="",this.title="",this.criteres=[]}deserialize(n,e,o=!1){this.id=o?ts():n.id,this.title=n.title,this.criteres=[];for(const s of Object.keys(n.criteres))"cri"===n.criteres[s].type&&this.criteres.push((new Q0).deserialize(n.criteres[s],e,o)),"free"===n.criteres[s].type&&this.criteres.push((new xl).deserialize(n.criteres[s],o));return this}serialize(){let n={id:this.id,title:this.title,type:"que",criteres:[]};for(const e of this.criteres)n.criteres.push(e.serialize());return n}get bareme(){let n=0;for(const e of this.criteres)n+=e.bareme?e.bareme:0;return n}getCritere(n){if(void 0!==this.criteres)for(const e of this.criteres)if(e.id===n)return e;return null}isCapaciteUsed(n){for(const e of this.criteres)if(e.isCapaciteUsed(n))return!0;return!1}getCapaciteBilan(n){for(const e of this.criteres)e.getCapaciteBilan(n)}}class Z0{constructor(){this.className="Exercice",this.id="",this.title="",this.questions=[],this.visible=!1}deserialize(n,e,o=!1){this.id=o?ts():n.id,this.title=n.title,this.questions=[];for(const s of Object.keys(n.questions))"que"===n.questions[s].type&&this.questions.push((new X0).deserialize(n.questions[s],e,o)),"free"===n.questions[s].type&&this.questions.push((new xl).deserialize(n.questions[s],o));return this}serialize(){let n={id:this.id,title:this.title,type:"exe",questions:[]};for(const e of this.questions)n.questions.push(e.serialize());return n}get bareme(){let n=0;for(const e of this.questions)n+=e.bareme?e.bareme:0;return n}get criteres(){let n=[];for(const e of this.questions)if(e.criteres)for(const o of e.criteres)n.push(o);return n}getCritere(n,e){if(void 0!==this.questions)for(const o of this.questions)if(o.id===n)return o.getCritere(e);return null}getCritereDeep(n){if(void 0!==this.questions)for(const e of this.questions){const o=e.getCritere(n);if(null!==o)return o}return null}isCapaciteUsed(n){for(const e of this.questions)if(e.isCapaciteUsed(n))return!0;return!1}getCapaciteBilan(n){for(const e of this.questions)e.getCapaciteBilan(n)}}class f2{constructor(){this.className="Note",this.critere=null,this.status="",this.noteCoeffs=[]}deserialize(n,e){return this.status=n.status,this.critere=null,void 0!==e&&(this.critere=e.getCritereDeep(n.critere),this.noteCoeffs=e.noteCoeffs),this}serialize(){return{status:this.status,critere:this.critere?this.critere.id:""}}getNote(n){return this.status&&this.critere&&this.noteCoeffs&&(void 0===n||-1!==n.indexOf(this.critere))?this.critere.bareme*this.noteCoeffs[this.status]:0}getNoteMax(n){return this.status&&this.critere&&(void 0===n||-1!==n.indexOf(this.critere))?this.critere.bareme:0}getCapaciteBilan(n){this.critere&&this.critere.capacite&&n[this.critere.capacite.id]&&("ok"===this.status&&n[this.critere.capacite.id].ok++,"ko"===this.status&&n[this.critere.capacite.id].ko++,"encours"===this.status&&n[this.critere.capacite.id].encours++,n[this.critere.capacite.id].pts+=this.getNote(),n[this.critere.capacite.id].total++)}}class Zg{constructor(){this.className="Notation",this.eleve="",this.commentaire="",this.notes=[],this.noteCoeffs=[]}deserialize(n,e){this.eleve=n.eleve,this.commentaire=n.commentaire,this.notes=[];for(const o of Object.keys(n.notes))this.notes.push((new f2).deserialize(n.notes[o],e));return e&&(this.noteCoeffs=e.noteCoeffs),this}serialize(){let n={eleve:this.eleve,commentaire:this.commentaire,notes:[]};for(const e of this.notes)n.notes.push(e.serialize());return n}set notes_coefficients(n){this.noteCoeffs=n;for(const e of this.notes)e.noteCoeffs=this.noteCoeffs}getNote(n){let e=0;for(const o of this.notes)e+=o.getNote(n);return e}getNoteMax(n){let e=0;for(const o of this.notes)e+=o.getNoteMax(n);return e}getCritereStatus(n){for(const e of this.notes)if(e.critere===n)return e.status;return null}getCapaciteBilan(n,e){for(const o of this.notes)(void 0===e||e&&this.eleve&&this.eleve===e)&&o.getCapaciteBilan(n)}}class p2{constructor(){this.className="Devoir",this.author="",this.creationDate=new Date,this.modificationDate=new Date,this.toolVersion="",this.id=0,this.titre="",this.arrondi=0,this.devoirDate=new Date,this.notationMode=0,this.notationCible=0,this.classe=null,this.grille=null,this.exercices=[],this.notations=[],this.groupes=[],this.noteCoeffs=[]}deserialize(n){this.author=n.meta.author?n.meta.author:"",this.toolVersion=n.meta.version?n.meta.version:"",this.titre=n.data.general.titre?n.data.general.titre:"",this.arrondi=n.data.general.note_arrondi?n.data.general.note_arrondi:0,this.notationMode=n.data.general.note_final_mode?n.data.general.note_final_mode:0,this.notationCible=n.data.general.note_final_cible?n.data.general.note_final_cible:0,this.creationDate=n.meta.date_creation?new Date(n.meta.date_creation):new Date,this.modificationDate=n.meta.date_save?new Date(n.meta.date_save):new Date,this.devoirDate=n.data.general.date?new Date(n.data.general.date):new Date,this.classe=n.data.general.classe?(new l2).deserialize(n.data.general.classe):null,this.grille=n.data.general.grille?(new u2).deserialize(n.data.general.grille):null,this.groupes=[],this.exercices=[],this.notations=[];for(const e of Object.keys(n.data.exercices))"exe"===n.data.exercices[e].type&&this.exercices.push((new Z0).deserialize(n.data.exercices[e],this.grille?this.grille:void 0)),"free"===n.data.exercices[e].type&&this.exercices.push((new xl).deserialize(n.data.exercices[e]));for(const e of Object.keys(n.data.notations))this.notations.push((new Zg).deserialize(n.data.notations[e],this));for(const e of Object.keys(n.data.groupes))this.groupes.push((new c2).deserialize(n.data.groupes[e]));return this}serialize(){let n={meta:{author:this.author,version:this.toolVersion,date_creation:this.creationDate,date_save:this.modificationDate},data:{general:{titre:this.titre,date:this.devoirDate,note_arrondi:this.arrondi,note_final_mode:this.notationMode,note_final_cible:this.notationCible,classe:this.classe,grille:this.grille},exercices:[],notations:[],groupes:this.groupes}};for(const e of this.exercices)n.data.exercices.push(e.serialize());for(const e of this.notations)n.data.notations.push(e.serialize());return n}set notes_coefficients(n){this.noteCoeffs=n;for(const e of this.notations)e.notes_coefficients=this.noteCoeffs}get bareme(){let n=0;for(const e of this.exercices)n+=e.bareme?e.bareme:0;return n}ajusterNote(n){let e=n;return 2===this.notationMode&&this.notationCible>0&&(e=e*this.notationCible/this.bareme),3===this.notationMode&&this.notationCible>0&&e>this.notationCible&&(e=this.notationCible),this.arrondi>0&&(e=Math.round(e/this.arrondi)*this.arrondi),e}get note_maximum(){let n=0,e=!1;for(const o of this.notations)if(!1===this.isGroupe(o.eleve)){const s=o.getNote();s>n&&(n=s,e=!0)}return e?n:0}get note_minimum(){let n=this.bareme,e=!1;for(const o of this.notations)if(!1===this.isGroupe(o.eleve)){const s=o.getNote();s<n&&(n=s,e=!0)}return e?n:0}get note_moyenne(){let n=0,e=0;for(const o of this.notations)!1===this.isGroupe(o.eleve)&&(n+=o.getNote(),e++);return e>0&&(n/=e,n*=1e3,n=Math.round(n),n/=1e3),n}get nb_inferieur_moyenne(){let n=0;const e=this.note_moyenne;for(const o of this.notations)!1===this.isGroupe(o.eleve)&&o.getNote()<e&&n++;return n}getEleveNotation(n){for(const e of this.notations)if(e.eleve===n)return e;return null}deleteEleveNotation(n){let e=null;for(const[o,s]of this.notations.entries())if(s.eleve===n){e=o;break}null!==e&&this.notations.splice(e,1)}getElevesAvecNoteMaximum(){let n=[];const e=this.note_maximum;for(const o of this.notations)!1===this.isGroupe(o.eleve)&&o.getNote()===e&&n.push(o.eleve);return n}getElevesAvecNoteMinimum(){let n=[];const e=this.note_minimum;for(const o of this.notations)!1===this.isGroupe(o.eleve)&&o.getNote()===e&&n.push(o.eleve);return n}getCritere(n,e,o){if(void 0!==this.exercices)for(const s of this.exercices)if(s.id===n)return s.getCritere(e,o);return null}getCritereDeep(n){if(void 0!==this.exercices)for(const e of this.exercices){const o=e.getCritereDeep(n);if(null!==o)return o}return null}isCapaciteUsed(n){for(const e of this.exercices)if(e.isCapaciteUsed(n))return!0;return!1}getCapaciteBilan(n){let e={};for(const o of this.exercices)o.getCapaciteBilan(e);for(const o of this.notations)!1===this.isGroupe(o.eleve)&&o.getCapaciteBilan(e,n);return e}getCompetenceBilan(n){const e=this.getCapaciteBilan(n);let o=[];if(this.grille)for(const s of this.grille.competences){let l={competence:s,ok:0,encours:0,ko:0,total:0,pts:0,bareme:0,capacites:[]};for(const h of s.capacites)e[h.id]&&(l.ok+=e[h.id].ok,l.encours+=e[h.id].encours,l.ko+=e[h.id].ko,l.total+=e[h.id].total,l.pts+=e[h.id].pts,l.bareme+=e[h.id].bareme,l.capacites.push(e[h.id]));l.bareme>0&&o.push(l)}return o}getEleveGroupe(n){for(const e of this.groupes)if(-1!==e.eleves.indexOf(n))return e;return null}isGroupe(n){for(const o of this.groupes)if(o.nom===n)return!0;return!1}get nb_notations(){let n=0;for(const e of this.notations)!1===this.isGroupe(e.eleve)&&n++;return n}}const Nt={storagePrefix:"mycontrole-",configurationPrefix:"config-",noteStatusOk:"ok",noteStatusEnCours:"encours",noteStatusKo:"ko",noteStatusOkCoeff:1,noteStatusEnCoursCoeff:.5,noteStatusKoCoeff:0,notationModeNormal:{id:1,titre:"Normal",description:"La note du devoir reste en l'\xe9tat."},notationModeProportionnel:{id:2,titre:"Proportionnel",description:"La note du devoir est proportionelle \xe0 la note cible\n                  (un \xe9l\xe8ve qui a 18/22 avec une cible \xe0 20 aura 16,4/20)."},notationModeRapporte:{id:3,titre:"Rapport\xe9",description:"La note du devoir est ramen\xe9e sur la note cible\n                  (un \xe9l\xe8ve qui a 22/22 avec une cible a 20 aura 20/20,\n                  un \xe9l\xe8ve qui a 12/22 avec une cible \xe0 20 aura 12/20)."},messageDuration:5e3,autosaveDuration:60,defaultMode:"edition",notationDefaultOrder:"nom",notationDefaultNoteMode:"brut",author:"MARTIN-DEIDIER",devoirTitreDefault:"Titre du devoir",devoirArrondiDefault:.5,devoirNotationModeDefault:1,devoirNotationCibleDefault:20,exerciceTitreDefaut:"Exercice x - Titre de l'exercice",exerciceNbQuestionDefaut:1,questionTitreDefaut:"Question x - Intitul\xe9 de la question",questionNbCritereDefaut:1,critereTitreDefaut:"D\xe9finition du crit\xe8re...",critereBaremeDefaut:0,critereFreeDefaut:"Texte libre...",questionNbFreetextDefaut:1,groupeNomDefaut:"Groupe n\xb0 ",impressionMargeExercice:50,impressionMargeQuestion:10};let eo=(()=>{class t{constructor(){this.storageConfigurationPrefix=Nt.storagePrefix+Nt.configurationPrefix,this.categories=["G\xe9n\xe9ral","Devoir","Exercices","Questions","Crit\xe8res","Textes Libres","Notation","Impression","Avanc\xe9e"],this.configurationItems={storagePrefix:{modifiable:!1,value:Nt.storagePrefix,title:"",categorie:""},noteStatusOk:{modifiable:!1,value:Nt.noteStatusOk,title:"",categorie:""},noteStatusEnCours:{modifiable:!1,value:Nt.noteStatusEnCours,title:"",categorie:""},noteStatusKo:{modifiable:!1,value:Nt.noteStatusKo,title:"",categorie:""},noteStatusOkCoeff:{modifiable:!0,title:"Coefficient crit\xe8re acquis",value:Nt.noteStatusOkCoeff,categorie:"Notation"},noteStatusEnCoursCoeff:{modifiable:!0,title:"Coefficient crit\xe8re en cours",value:Nt.noteStatusEnCoursCoeff,categorie:"Notation"},noteStatusKoCoeff:{modifiable:!0,title:"Coefficient crit\xe8re non acquis",value:Nt.noteStatusKoCoeff,categorie:"Notation"},notationModeNormal:{modifiable:!1,value:Nt.notationModeNormal,title:"",categorie:""},notationModeProportionnel:{modifiable:!1,value:Nt.notationModeProportionnel,title:"",categorie:""},notationModeRapporte:{modifiable:!1,value:Nt.notationModeRapporte,title:"",categorie:""},notationModeArr:{modifiable:!1,value:Nt.notationModeArr,title:"",categorie:""},messageDuration:{modifiable:!0,title:"Dur\xe9e affichage messages",value:Nt.messageDuration,categorie:"Avanc\xe9e"},autosaveDuration:{modifiable:!0,title:"Enregistrement automatique (secondes)",value:Nt.autosaveDuration,categorie:"Avanc\xe9e"},defaultMode:{modifiable:!0,title:"Mode par d\xe9faut [edition,notation]",value:Nt.defaultMode,categorie:"G\xe9n\xe9ral"},notationDefaultOrder:{modifiable:!0,title:"Ordre affichage par d\xe9faut [nom,note]",value:Nt.notationDefaultOrder,categorie:"G\xe9n\xe9ral"},notationDefaultNoteMode:{modifiable:!0,title:"Affichage des notes par d\xe9faut [brut,ajuste]",value:Nt.notationDefaultNoteMode,categorie:"G\xe9n\xe9ral"},author:{modifiable:!0,title:"Auteur par d\xe9faut",value:Nt.author,categorie:"Devoir"},devoirTitreDefault:{modifiable:!0,title:"Titre par d\xe9faut",value:Nt.devoirTitreDefault,categorie:"Devoir"},devoirArrondiDefault:{modifiable:!0,title:"Arrondi par d\xe9faut",value:Nt.devoirArrondiDefault,categorie:"Devoir"},devoirNotationModeDefault:{modifiable:!0,title:"Mode par d\xe9faut [1=Norm,2=Prop,3=Rapp]",value:Nt.devoirNotationModeDefault,categorie:"Devoir"},devoirNotationCibleDefault:{modifiable:!0,title:"Note cible par d\xe9faut",value:Nt.devoirNotationCibleDefault,categorie:"Devoir"},exerciceTitreDefaut:{modifiable:!0,title:"Titre par d\xe9faut",value:Nt.exerciceTitreDefaut,categorie:"Exercices"},exerciceNbQuestionDefaut:{modifiable:!0,title:"Nb questions par d\xe9faut",value:Nt.exerciceNbQuestionDefaut,categorie:"Exercices"},questionTitreDefaut:{modifiable:!0,title:"Titre par d\xe9faut",value:Nt.questionTitreDefaut,categorie:"Questions"},questionNbFreetextDefaut:{modifiable:!0,title:"Nb texte par d\xe9faut",value:Nt.questionNbFreetextDefaut,categorie:"Questions"},questionNbCritereDefaut:{modifiable:!0,title:"Nb crit\xe8res par d\xe9faut",value:Nt.questionNbCritereDefaut,categorie:"Questions"},critereTitreDefaut:{modifiable:!0,title:"Titre par d\xe9faut",value:Nt.critereTitreDefaut,categorie:"Crit\xe8res"},critereBaremeDefaut:{modifiable:!0,title:"Bar\xe8me par d\xe9faut",value:Nt.critereBaremeDefaut,categorie:"Crit\xe8res"},critereFreeDefaut:{modifiable:!0,title:"Texte par d\xe9faut",value:Nt.critereFreeDefaut,categorie:"Textes Libres"},groupeNomDefaut:{modifiable:!0,title:"Nom de groupe par d\xe9faut",value:Nt.groupeNomDefaut,categorie:"Notation"},impressionMargeExercice:{modifiable:!0,title:"Espace avant exercice",value:Nt.impressionMargeExercice,categorie:"Impression"},impressionMargeQuestion:{modifiable:!0,title:"Espace avant question",value:Nt.impressionMargeQuestion,categorie:"Impression"}},this.load()}load(){for(let[e,o]of Object.entries(this.configurationItems)){const s=localStorage.getItem(this.storageConfigurationPrefix+e);s&&(this.configurationItems[e].value=s)}}getValue(e){return this.configurationItems[e].value}setValue(e,o){this.configurationItems[e]&&(this.configurationItems[e].value=o,localStorage.setItem(this.storageConfigurationPrefix+e,o))}initValue(e){this.configurationItems[e]&&(localStorage.removeItem(this.storageConfigurationPrefix+e),this.configurationItems[e].value=Nt[e])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ar=(()=>{class t{constructor(e){this.configurationService=e,this.messagesUser=[],this.messagesDev=[],this.messageDuration=parseInt(this.configurationService.getValue("messageDuration"),10)}add(e,o,s){const l={text:e,type:o,date:new Date};let h=new mt;h.pipe(function dK(t,n=rx){return yn((e,o)=>{let s=null,l=null,h=null;const p=()=>{if(s){s.unsubscribe(),s=null;const v=l;l=null,o.next(v)}};function m(){const v=h+t,C=n.now();if(C<v)return s=this.schedule(void 0,v-C),void o.add(s);p()}e.subscribe(Et(o,v=>{l=v,h=n.now(),s||(s=n.schedule(m,t),o.add(s))},()=>{p(),o.complete()},void 0,()=>{l=s=null}))})}(this.messageDuration)).subscribe(p=>{this.messagesUser.forEach((m,v)=>{m===p&&this.messagesUser.splice(v,1)}),this.messagesDev.forEach((m,v)=>{m===p&&this.messagesDev.splice(v,1)})}),h.next(l),"USER"===s&&this.messagesUser.push(l),"DEV"===s&&this.messagesDev.push(l)}clear(e){"USER"===e&&(this.messagesUser=[]),"DEV"===e&&(this.messagesDev=[])}close(e){this.messagesUser.forEach((o,s)=>{o===e&&this.messagesUser.splice(s,1)}),this.messagesDev.forEach((o,s)=>{o===e&&this.messagesDev.splice(s,1)})}}return t.\u0275fac=function(e){return new(e||t)(ie(eo))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hK=(()=>{class t{constructor(e,o){this.messageService=e,this.modal=o,this.devoir="",this.devoirDate="",this.devoirDetails=""}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){if(this.devoir){const e=JSON.parse(this.devoir),o=new Date(JSON.parse(this.devoirDate));this.devoirDetails="<p><strong>"+e.data.general.titre+"</strong></p><p>Enregistr\xe9 automatiquement \xe0 <b>"+o.toLocaleString()+"</b></p>"}else setTimeout(()=>{this.updateDetails()},200)}}return t.\u0275fac=function(e){return new(e||t)(z(ar),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-confirm-restore-devoir"]],inputs:{devoir:"devoir",devoirDate:"devoirDate"},decls:18,vars:1,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Restauration"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"p"),R(8,"Un devoir non sauvegard\xe9 a \xe9t\xe9 d\xe9tect\xe9 :"),M(),be(9,"p",5)(10,"br"),x(11,"p"),R(12,"Voulez-vous le restaurer ?"),M()(),x(13,"div",6)(14,"button",7),K("click",function(){return o.modal.dismiss("cancel")}),R(15,"Non"),M(),x(16,"button",8),K("click",function(){return o.modal.close("ok")}),R(17,"OUI"),M()()),2&e&&(A(9),I("innerHTML",o.devoirDetails,Bt))}}),t})();const fK=["imgCheck"],pK=function(t,n,e){return{"bg-warning":t,"bg-danger":n,"bg-success":e}};function gK(t,n){if(1&t&&(x(0,"tr")(1,"th",13),R(2),M(),x(3,"td"),R(4),M(),x(5,"td"),R(6),M(),x(7,"td",14),R(8),xe(9,"titlecase"),M()()),2&t){const e=n.$implicit,o=n.index;A(2),ge(o+1),A(2),ge(e.type),A(2),ge(e.msg),A(1),I("ngClass",ih(7,pK,"warning"==e.level,"danger"==e.level,"success"==e.level)),A(1),ge(je(9,5,e.level))}}function mK(t,n){if(1&t){const e=ke();x(0,"button",15),K("click",function(){ae(e);const s=B();return ne(s.modal.close(s.fixList))}),R(1,"CORRIGER"),M()}}let _K=(()=>{class t{constructor(e,o){this.modal=e,this.configurationService=o,this.devoir=null,this.urlListPos=0,this.errorList=[],this.fixList=[],this.urlList=[],this.urlListPos=0}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.devoir?(this.checkGeneral(),this.checkIds(),this.checkExercices(),this.checkQuestions(),this.checkCritere(),this.checkFreeText(),this.checkURL(),this.checkNotation()):setTimeout(()=>{this.updateDetails()},200)}checkGeneral(){if(this.devoir){let e=0;(""===this.devoir.titre||this.devoir.titre===this.configurationService.getValue("devoirTitreDefault"))&&(this.errorList.push({type:"G\xe9n\xe9ral",msg:"Le titre du devoir n'est pas renseign\xe9.",level:"danger"}),e++),""===this.devoir.author&&(this.errorList.push({type:"G\xe9n\xe9ral",msg:"L'auteur du devoir n'est pas renseign\xe9.",level:"warning"}),this.fixList.push("auteur"),e++),null===this.devoir.devoirDate&&(this.errorList.push({type:"G\xe9n\xe9ral",msg:"La date du devoir n'est pas renseign\xe9e.",level:"danger"}),e++)}}checkURL(){const s=JSON.stringify(this.devoir).match(/src=\\"http[^"]+"/g);if(s){for(const l of s.entries()){const h=l[1].slice(6,-2);-1===h.indexOf("latex.codecogs.com")&&this.urlList.push(h)}this.urlList.length>0&&(this.urlListPos=0,this.imgCheck.nativeElement.src=this.urlList[this.urlListPos])}}urlError(e){this.errorList.push({type:"Images",msg:"L'URL de l'image "+e+" n'est pas valide.",level:"danger"}),this.nextURL()}urlSucceed(e){-1===e.indexOf("assets/")&&this.errorList.push({type:"Images",msg:"L'URL de l'image "+e+" est  valide.",level:"success"}),this.nextURL()}nextURL(){this.urlListPos<this.urlList.length-1&&(this.urlListPos++,this.imgCheck.nativeElement.src=this.urlList[this.urlListPos])}checkCritere(){let e=0;if(this.devoir){for(const[o,s]of this.devoir.exercices.entries())if(s.questions)for(const[l,h]of s.questions.entries())if(h.criteres)for(const[p,m]of h.criteres.entries())"Critere"===m.className&&(0===m.bareme&&(this.errorList.push({type:"Edition",msg:"Un des crit\xe8res de la question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" poss\xe8de un bar\xeame nul.",level:"warning"}),e++),null===m.capacite&&(this.errorList.push({type:"Edition",msg:"Un des crit\xe8res de la question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" ne poss\xe8de pas de capacit\xe9 li\xe9e.",level:"warning"}),e++),(""===m.text||m.text===this.configurationService.getValue("critereTitreDefaut"))&&(this.errorList.push({type:"Edition",msg:"Un des crit\xe8res de la question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" ne poss\xe8de aucun texte.",level:"danger"}),e++));0===e&&this.errorList.push({type:"Edition",msg:"Tous les crit\xe8res sont corrects.",level:"success"})}}checkExercices(){let e=0;if(this.devoir){for(const[o,s]of this.devoir.exercices.entries())(""===s.title||s.title===this.configurationService.getValue("exerciceTitreDefaut"))&&(this.errorList.push({type:"Edition",msg:"L'exercice n\xb0"+(o+1)+" poss\xe8de un intitul\xe9 vide.",level:"warning"}),e++),s.questions&&0===s.questions.length&&(this.errorList.push({type:"Edition",msg:"L'exercice n\xb0"+(o+1)+" ne contient ni question ni texte libre.",level:"danger"}),e++);0===e&&this.errorList.push({type:"Edition",msg:"Tous les exercices sont corrects.",level:"success"})}}checkQuestions(){let e=0;if(this.devoir){for(const[o,s]of this.devoir.exercices.entries())if(s.questions)for(const[l,h]of s.questions.entries())(""===h.title||h.title===this.configurationService.getValue("questionTitreDefaut"))&&(this.errorList.push({type:"Edition",msg:"La question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" poss\xe8de un intitul\xe9 vide.",level:"warning"}),e++),h.criteres&&0===h.criteres.length&&(this.errorList.push({type:"Edition",msg:"La question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" ne contient ni crit\xe8re ni texte libre.",level:"danger"}),e++);0===e&&this.errorList.push({type:"Edition",msg:"Toutes les questions sont correctes.",level:"success"})}}checkFreeText(){let e=0;if(this.devoir){for(const[o,s]of this.devoir.exercices.entries())if("Freetext"===s.className)(""===s.text||s.text===this.configurationService.getValue("critereFreeDefaut"))&&(this.errorList.push({type:"Edition",msg:"Le Texte libre n\xb0"+(o+1)+" ne poss\xe8de aucun texte.",level:"danger"}),e++);else for(const[l,h]of s.questions.entries())if("Freetext"===h.className)(""===h.text||h.text===this.configurationService.getValue("critereFreeDefaut"))&&(this.errorList.push({type:"Edition",msg:"Le Texte libre n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" ne poss\xe8de aucun texte.",level:"danger"}),e++);else for(const[p,m]of h.criteres.entries())"Freetext"===m.className&&(""===m.text||m.text===this.configurationService.getValue("critereFreeDefaut"))&&(this.errorList.push({type:"Edition",msg:"Un des textes libres de la question n\xb0"+(l+1)+" de l'exercice n\xb0"+(o+1)+" ne poss\xe8de aucun texte.",level:"danger"}),e++);0===e&&this.errorList.push({type:"Edition",msg:"Tous les textes libres sont corrects.",level:"success"})}}checkNotation(){let e=0;if(this.devoir){if(this.devoir.notations.length>0){this.devoir.classe&&this.devoir.notations.length!==this.devoir.classe.eleves.length&&(this.errorList.push({type:"Notation",msg:"Tous les \xe9l\xe8ves de la classe choisie n'ont pas \xe9t\xe9 not\xe9s.",level:"warning"}),e++);for(const[o,s]of this.devoir.notations.entries())s.getNoteMax()!==this.devoir.bareme&&this.errorList.push({type:"Notation",msg:"L'\xe9l\xe8ve "+s.eleve+" n'est pas enti\xe8rement \xe9valu\xe9.",level:"danger"}),(null===s.commentaire||""===s.commentaire)&&this.errorList.push({type:"Notation",msg:"La note de l'\xe9l\xe8ve "+s.eleve+" n'est pas comment\xe9e.",level:"warning"})}0===e&&this.errorList.push({type:"Edition",msg:"Toute la notation est correcte.",level:"success"})}}checkIds(){let e=0,o=[];if(this.devoir){for(const[s,l]of this.devoir.exercices.entries())if(o.lastIndexOf(l.id)>=0?(this.errorList.push({type:"Edition",msg:"L'objet n\xb0"+(s+1)+" utilise un identifiant en double ("+l.id+").",level:"danger"}),e++):o.push(l.id),l.questions)for(const[h,p]of l.questions.entries())if(o.lastIndexOf(p.id)>=0?(this.errorList.push({type:"Edition",msg:"L'objet n\xb0"+(h+1)+"."+(s+1)+" utilise un identifiant en double ("+p.id+").",level:"danger"}),e++):o.push(p.id),p.criteres)for(const[m,v]of p.criteres.entries())o.lastIndexOf(v.id)>=0?(this.errorList.push({type:"Edition",msg:"L'objet n\xb0"+(s+1)+"."+(h+1)+"."+(m+1)+" utilise un identifiant en double ("+v.id+").",level:"danger"}),e++):o.push(v.id);0===e?this.errorList.push({type:"Edition",msg:"Tous les identifiants sont uniques.",level:"success"}):this.fixList.push("ids")}}}return t.\u0275fac=function(e){return new(e||t)(z(jo),z(eo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-check-devoir"]],viewQuery:function(e,o){if(1&e&&ha(fK,5),2&e){let s;Zt(s=en())&&(o.imgCheck=s.first)}},inputs:{devoir:"devoir"},decls:26,vars:2,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["src","assets/index.png",3,"error","load"],["imgCheck",""],[1,"modal-footer"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["scope","row"],[3,"ngClass"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,o){if(1&e){const s=ke();x(0,"div",0)(1,"h4",1),R(2,"V\xe9rification du devoir"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th",6),R(11,"#"),M(),x(12,"th",6),R(13,"Type"),M(),x(14,"th",6),R(15,"Message"),M(),x(16,"th",6),R(17,"Level"),M()()(),x(18,"tbody"),H(19,gK,10,11,"tr",7),M()(),x(20,"img",8,9),K("error",function(){ae(s);const h=Oe(21);return ne(o.urlError(h.src))})("load",function(){ae(s);const h=Oe(21);return ne(o.urlSucceed(h.src))}),M()(),x(22,"div",10)(23,"button",11),K("click",function(){return o.modal.close("ok")}),R(24,"FERMER"),M(),H(25,mK,2,0,"button",12),M()}2&e&&(A(19),I("ngForOf",o.errorList),A(6),I("ngIf",o.fixList.length>0))},dependencies:[Lo,_n,zt,FS],styles:["img[_ngcontent-%COMP%]{display:none}"]}),t})();var vK=T(457);const bK=JSON.parse('{"a":{"grille2017c":{"titre":"Coll\xe8ge 2017","competences":{"competence1":{"titre":"Conna\xeetre","couleur":"#C0584D","capacites":{"Co1":"Restituer les notions scientifiques du programme et le vocabulaire appropri\xe9","Co2":"Mobiliser les notions scientifiques du programme et le vocabulaire appropri\xe9","Co3":"Conna\xeetre le vocabulaire, les grandeurs physiques, leurs unit\xe9s et leurs symboles"}},"competence2":{"titre":"S\u2019approprier des outils et des m\xe9thodes","couleur":"#2DD16F","capacites":{"App1":"Lire et comprendre des documents scientifiques","App2":"Identifier des questions de nature scientifique","App3":"Formuler une question scientifique","App4":"Effectuer des recherches bibliographiques","App5":"Extraire, organiser et v\xe9rifier l\'information - Exploiter en anglais des ressources scientifiques vari\xe9es","App6":"Utiliser des outils d\u2019acquisition et de traitements de donn\xe9es, de simulations, de mod\xe8les num\xe9riques"}},"competence3":{"titre":"Analyser une situation","couleur":"#FAD46D","capacites":{"Ana1":"Proposer une ou des hypoth\xe8ses pour r\xe9pondre \xe0 une question scientifique","Ana2":"Concevoir une exp\xe9rience, \xe9laborer un protocole","Ana3":"Proposer une strat\xe9gie de r\xe9solution","Ana4":"Planifier une t\xe2che exp\xe9rimentale"}},"competence4":{"titre":"R\xe9aliser","couleur":"#6194C8","capacites":{"Rea1":"Suivre un protocole donn\xe9","Rea2":"Mesurer des grandeurs physiques de mani\xe8re directe ou indirecte","Rea3":"Faire un sch\xe9ma normalis\xe9","Rea4":"Construire un tableau","Rea5":"Construire un graphique","Rea6":"Lire, interpr\xe9ter, commenter et exploiter tableaux, graphiques, et diagramme","Rea7":"Utiliser et exploiter un calcul litt\xe9ral / un graphique","Rea8":"Effectuer un calcul num\xe9rique","Rea9":"Utiliser la calculatrice","Rea10":"Convertir les unit\xe9s","Rea11":"Reconna\xeetre et utiliser la proportionnalit\xe9","Rea12":"Produire des documents scientifiques gr\xe2ce \xe0 des outils num\xe9riques, utilisant l\u2019argumentation et le vocabulaire sp\xe9cifique ","Rea13":"Utiliser des outils d\'acquisition et de traitement de donn\xe9es, de simulation et de mod\xe8les num\xe9riques","Rea14":"Respecter les r\xe8gles de s\xe9curit\xe9"}},"competence5":{"titre":"Valider","couleur":"#f39c00","capacites":{"Val1":"Observer","Val2":"Garder des traces des \xe9tapes suivies et des r\xe9sultats obtenus","Val3":"Interpr\xe9ter des r\xe9sultats exp\xe9rimentaux, en tirer des conclusions, savoir les justifier et les communiquer en argumentant","Val4":"D\xe9velopper des mod\xe8les simples pour expliquer des faits d\u2019observations et mettre en \u0153uvre des d\xe9marches propres aux sciences","Val5":"Faire preuve d\u2019esprit critique : valider/invalider une hypoth\xe8se, critiquer un protocole, une affirmation, un r\xe9sultat\u2026","Val6":"Rectifier une erreur"}},"competence6":{"titre":"Pratiquer des langages, Communiquer","couleur":"#BBB","capacites":{"Lan1":"Utiliser le langage formel (lettres, symboles)","Lan2":"Exprimer un r\xe9sultat (grandeur, unit\xe9, chiffres significatifs)","Lan3":"Exprimer une loi par une phrase correcte, traduire une loi par une relation, traduire une phrase par un sch\xe9ma normalis\xe9...","Lan4":"S\'exprimer correctement \xe0 l\'\xe9crit pour rendre compte des observations, exp\xe9riences, hypoth\xe8ses et conclusions\u2026Utiliser la langue fran\xe7aise en cultivant pr\xe9cision, richesse de vocabulaire et syntaxe - Utilisation d\'un vocabulaire scientifique","Lan5":"S\u2019exprimer correctement \xe0 l\u2019oral pour pr\xe9senter une observation, une situation, une solution\u2026 ou lors d\u2019un d\xe9bat scientifique","Lan6":"Expliquer les fondements des r\xe8gles de s\xe9curit\xe9 en chimie, \xe9lectricit\xe9 et acoustique et identifier les risques"}},"competence7":{"titre":"Etre responsable, autonome et travailler en \xe9quipe","couleur":"#6BD1D3","capacites":{"Aut1":"R\xe9investir ses connaissances sur les ressources et l\u2019\xe9nergie pour agir de fa\xe7on responsable","Aut2":"S\u2019impliquer dans un projet ayant une dimension citoyenne","Aut3":"Utiliser des outils num\xe9riques pour mutualiser des informations sur un sujet scientifique","Aut4":"S\'auto-\xe9valuer","Aut5":"Prendre des initiatives, anticiper, faire preuve de cr\xe9ativit\xe9 ","Aut6":"Travailler en autonomie","Aut7":"Travailler et trouver sa place en \xe9quipe ","Aut8":"G\xe9rer un projet : planifier des t\xe2ches, fixer des \xe9tapes, \xe9valuer les objectifs \xe0 atteindre","Aut9":"Avoir un comportement responsable : manipuler avec soin, organiser et ranger son espace de travail..."}},"competence8":{"titre":"Raisonner. R\xe9soudre une t\xe2che complexe","couleur":"#a1d12d","capacites":{"Rai1":"Raisonner. R\xe9soudre une t\xe2che complexe"}}}},"grille2017l":{"titre":"Lyc\xe9e 2017","competences":{"competence1":{"titre":"S\'approprier","couleur":"#C0584D","capacites":{"App1":"Rechercher, extraire et organiser l\u2019information utile","App2":"Adopter une attitude critique vis-\xe0-vis de l\u2019information","App3":"Questionner, identifier, formuler un probl\xe8me","App4":"Reformuler","App5":"Identifier les risques"}},"competence2":{"titre":"Analyser","couleur":"#FAD46D","capacites":{"Ana1":"\xc9mettre une hypoth\xe8se","Ana2":"Identifier les param\xe8tres qui influencent un ph\xe9nom\xe8ne, choisir les grandeurs \xe0 mesurer","Ana3":"\xc9laborer ou justifier un protocole","Ana4":"Proposer une m\xe9thode, un calcul, un outil adapt\xe9 ; faire des essais (choisir, adapter une m\xe9thode, un protocole)","Ana5":"Proposer, d\xe9crire un mod\xe8le ; utiliser un mod\xe8le pour pr\xe9voir, d\xe9crire et expliquer","Ana6":"Percevoir la diff\xe9rence entre un mod\xe8le et la r\xe9alit\xe9, entre la r\xe9alit\xe9 et une simulation"}},"competence3":{"titre":"R\xe9aliser","couleur":"#6194C8","capacites":{"R\xe9a1":"R\xe9aliser un montage \xe0 partir d\u2019un sch\xe9ma","R\xe9a2":"Suivre un protocole donn\xe9","R\xe9a3":"Utiliser, dans un contexte donn\xe9, le mat\xe9riel \xe0 disposition","R\xe9a4":"Savoir choisir, combiner et r\xe9aliser plusieurs actions","R\xe9a5":"Effectuer un relev\xe9 de mesures","R\xe9a6":"Sch\xe9matiser, construire un graphique, un tableau, etc...","R\xe9a7":"Exploiter une relation, un calcul litt\xe9ral","R\xe9a8":"Effectuer un calcul num\xe9rique, utiliser les symboles et les unit\xe9s appropri\xe9s, utiliser la calculatrice","R\xe9a9":"Reconna\xeetre et utiliser la proportionnalit\xe9","R\xe9a10":"Respecter les r\xe8gles de s\xe9curit\xe9, manipuler avec soin, veiller au rangement du plan de travail, etc..."}},"competence4":{"titre":"Valider","couleur":"#2DD16F","capacites":{"Val1":"Estimer l\u2019incertitude d\u2019une mesure, faire un traitement statistique d\u2019une s\xe9rie de mesures, etc...","Val2":"Interpr\xe9ter des r\xe9sultats, juger de la qualit\xe9 d\u2019une mesure, etc...","Val3":"Confronter le r\xe9sultat au r\xe9sultat attendu, mettre en relation, d\xe9duire","Val4":"Valider ou invalider une information, une hypoth\xe8se, etc..."}},"competence5":{"titre":"Communiquer","couleur":"#f39c00","capacites":{"Com1":"Communiquer des r\xe9sultats, r\xe9diger une solution","Com2":"Exprimer un r\xe9sultat (grandeur \u2500 unit\xe9 \u2500 chiffres significatifs)","Com3":"Rendre compte \xe0 l\u2019\xe9crit ou \xe0 l\u2019oral en utilisant un vocabulaire adapt\xe9"}},"competence6":{"titre":"Etre autonome, faire preuve d\u2019initiative","couleur":"#BBB","capacites":{"Aut1":"S\u2019impliquer","Aut2":"Prendre des initiatives, anticiper, faire preuve de cr\xe9ativit\xe9","Aut3":"Travailler en autonomie","Aut4":"Travailler en \xe9quipe"}},"competence7":{"titre":"Mobiliser ses connaissances","couleur":"#6BD1D3","capacites":{"Co1":"Conna\xeetre les notions scientifiques du programme","Co2":"Conna\xeetre  le vocabulaire appropri\xe9","Co3":"Conna\xeetre les symboles","Co4":"Conna\xeetre les unit\xe9s"}}}},"grille2016l":{"titre":"Lyc\xe9e","competences":{"competence1":{"titre":"S\'approprier","couleur":"#C0584D","capacites":{"App1":"Rechercher, extraire et organiser l\u2019information utile","App2":"Adopter une attitude critique vis-\xe0-vis de l\u2019information","App3":"Questionner, identifier, formuler un probl\xe8me","App4":"Reformuler","App5":"Identifier les risques"}},"competence2":{"titre":"Analyser","couleur":"#FAD46D","capacites":{"Ana1":"\xc9mettre une hypoth\xe8se","Ana2":"Identifier les param\xe8tres qui influencent un ph\xe9nom\xe8ne, choisir les grandeurs \xe0 mesurer","Ana3":"\xc9laborer ou justifier un protocole","Ana4":"Proposer une m\xe9thode, un calcul, un outil adapt\xe9 ; faire des essais (choisir, adapter une m\xe9thode, un protocole)","Ana5":"Proposer, d\xe9crire un mod\xe8le ; utiliser un mod\xe8le pour pr\xe9voir, d\xe9crire et expliquer","Ana6":"Percevoir la diff\xe9rence entre un mod\xe8le et la r\xe9alit\xe9, entre la r\xe9alit\xe9 et une simulation"}},"competence3":{"titre":"R\xe9aliser","couleur":"#6194C8","capacites":{"R\xe9a1":"R\xe9aliser un montage \xe0 partir d\u2019un sch\xe9ma","R\xe9a2":"Suivre un protocole donn\xe9","R\xe9a3":"Utiliser, dans un contexte donn\xe9, le mat\xe9riel \xe0 disposition","R\xe9a4":"Savoir choisir, combiner et r\xe9aliser plusieurs actions","R\xe9a5":"Effectuer un relev\xe9 de mesures","R\xe9a6":"Sch\xe9matiser, construire un graphique, un tableau, etc...","R\xe9a7":"Exploiter une relation, un calcul litt\xe9ral","R\xe9a8":"Effectuer un calcul num\xe9rique, utiliser les symboles et les unit\xe9s appropri\xe9s, utiliser la calculatrice","R\xe9a9":"Reconna\xeetre et utiliser la proportionnalit\xe9","R\xe9a10":"Respecter les r\xe8gles de s\xe9curit\xe9, manipuler avec soin, veiller au rangement du plan de travail, etc..."}},"competence4":{"titre":"Valider","couleur":"#2DD16F","capacites":{"Val1":"Estimer l\u2019incertitude d\u2019une mesure, faire un traitement statistique d\u2019une s\xe9rie de mesures, etc...","Val2":"Interpr\xe9ter des r\xe9sultats, juger de la qualit\xe9 d\u2019une mesure, etc...","Val3":"Confronter le r\xe9sultat au r\xe9sultat attendu, mettre en relation, d\xe9duire","Val4":"Valider ou invalider une information, une hypoth\xe8se, etc..."}},"competence5":{"titre":"Communiquer","couleur":"#f39c00","capacites":{"Com1":"Communiquer des r\xe9sultats, r\xe9diger une solution","Com2":"Exprimer un r\xe9sultat (grandeur \u2500 unit\xe9 \u2500 chiffres significatifs)","Com3":"Rendre compte \xe0 l\u2019\xe9crit ou \xe0 l\u2019oral en utilisant un vocabulaire adapt\xe9"}},"competence6":{"titre":"Etre autonome, faire preuve d\u2019initiative","couleur":"#BBB","capacites":{"Aut1":"S\u2019impliquer","Aut2":"Prendre des initiatives, anticiper, faire preuve de cr\xe9ativit\xe9","Aut3":"Travailler en autonomie","Aut4":"Travailler en \xe9quipe"}},"competence7":{"titre":"Mobiliser ses connaissances","couleur":"#6BD1D3","capacites":{"Co1":"Conna\xeetre les notions scientifiques du programme","Co2":"Conna\xeetre  le vocabulaire appropri\xe9","Co3":"Conna\xeetre les symboles","Co4":"Conna\xeetre les unit\xe9s"}}}}}}');function yK(t,n){if(1&t){const e=ke();x(0,"div",7)(1,"h4",8),R(2),M(),x(3,"button",9),K("click",function(){return ae(e),ne(B().modal.dismiss("close"))}),x(4,"span",10),R(5,"\xd7"),M()()()}if(2&t){const e=B();A(2),ge(e.selectedgrille.titre)}}function wK(t,n){1&t&&al(0)}const g2=function(t){return{currentGrille:t}};function CK(t,n){if(1&t&&H(0,wK,1,0,"ng-container",18),2&t){const e=B().$implicit;B(2),I("ngTemplateOutlet",Oe(9))("ngTemplateOutletContext",Ee(2,g2,e.value))}}function kK(t,n){if(1&t&&(Ct(0,15),x(1,"a",16),R(2),M(),H(3,CK,1,4,"ng-template",17),kt()),2&t){const e=n.$implicit;I("ngbNavItem",e.key),A(2),ge(e.value.titre)}}function xK(t,n){if(1&t&&(Ct(0),x(1,"ul",11,12),H(3,kK,4,2,"ng-container",13),xe(4,"keyvalue"),M(),be(5,"div",14),kt()),2&t){const e=Oe(2),o=B();A(3),I("ngForOf",je(4,2,o.grilles)),A(2),I("ngbNavOutlet",e)}}function EK(t,n){1&t&&al(0)}function TK(t,n){if(1&t&&(x(0,"div"),H(1,EK,1,0,"ng-container",18),M()),2&t){const e=B(),o=Oe(9);A(1),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Ee(2,g2,e.selectedgrille))}}function DK(t,n){if(1&t){const e=ke();Ct(0),x(1,"button",19),K("click",function(){return ae(e),ne(B().modal.dismiss("cancel"))}),R(2,"Annuler"),M(),x(3,"button",20),K("click",function(){return ae(e),ne(B().selectCapacite(null))}),R(4,"Retirer la capacit\xe9"),M(),kt()}}function MK(t,n){if(1&t){const e=ke();x(0,"button",21),K("click",function(){return ae(e),ne(B().modal.close("ok"))}),R(1,"Fermer"),M()}}const SK=function(t){return{"border-color":t}},AK=function(t){return{"list-group-item-info":t}},m2=function(t){return{"background-color":t}};function OK(t,n){if(1&t){const e=ke();x(0,"button",32),K("click",function(){const l=ae(e).$implicit;return ne(B(3).selectCapacite(l))}),x(1,"span"),R(2),M(),x(3,"span",28),R(4),M()()}if(2&t){const e=n.$implicit,o=B().$implicit,s=B(2);I("ngStyle",Ee(5,SK,o.couleur))("ngClass",Ee(7,AK,null==s.devoir?null:s.devoir.isCapaciteUsed(e))),A(2),ge(e.texte),A(1),I("ngStyle",Ee(9,m2,o.couleur)),A(1),ge(e.id)}}const PK=function(t){return{color:t}};function NK(t,n){if(1&t&&(x(0,"div",24)(1,"div",25)(2,"div",26)(3,"h5",27)(4,"span",28),R(5,"\xa0"),M(),R(6),M(),x(7,"div",29)(8,"div",30),H(9,OK,5,11,"button",31),M()()()()()),2&t){const e=n.$implicit;A(3),I("ngStyle",Ee(4,PK,e.couleur)),A(1),I("ngStyle",Ee(6,m2,e.couleur)),A(2),Pt(" ",e.titre,""),A(3),I("ngForOf",e.capacites)}}function IK(t,n){if(1&t&&(x(0,"div",22),H(1,NK,10,8,"div",23),M()),2&t){const e=n.currentGrille;A(1),I("ngForOf",e.competences)}}let RK=(()=>{class t{constructor(e){this.modal=e,this.grilles=null,this.selectedgrille=null,this.canChooseCapacite=!1}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.grilles||setTimeout(()=>{this.updateDetails()},200)}selectCapacite(e){!0===this.canChooseCapacite&&this.modal.close(e)}}return t.\u0275fac=function(e){return new(e||t)(z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-grid-selection"]],inputs:{grilles:"grilles",devoir:"devoir",selectedgrille:"selectedgrille",canChooseCapacite:"canChooseCapacite"},decls:10,vars:5,consts:[["class","modal-header",4,"ngIf"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[4,"ngIf","ngIfElse"],["default",""],["grid",""],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","",3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"mt-2",3,"ngbNavOutlet"],["ngbNavItem","",3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-outline-secondary",3,"click"],[1,"row","card-group"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"card"],[1,"card-body","p-2"],[1,"card-title","font-weight-bolder",3,"ngStyle"],[1,"badge","badge-pill",3,"ngStyle"],[1,"card-text"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center px-2 py-1",3,"ngStyle","ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center","px-2","py-1",3,"ngStyle","ngClass","click"]],template:function(e,o){if(1&e&&(H(0,yK,6,1,"div",0),x(1,"div",1),H(2,xK,6,4,"ng-container",2),H(3,TK,2,4,"div",2),M(),x(4,"div",3),H(5,DK,5,0,"ng-container",4),H(6,MK,2,0,"ng-template",null,5,Xe),M(),H(8,IK,2,1,"ng-template",null,6,Xe)),2&e){const s=Oe(7);I("ngIf",o.selectedgrille),A(2),I("ngIf",null==o.selectedgrille),A(1),I("ngIf",o.selectedgrille),A(2),I("ngIf",o.canChooseCapacite)("ngIfElse",s)}},dependencies:[Lo,_n,zt,Kr,cl,D0,Lg,Fg,M0,Ax,ul],styles:[".card-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 2px}.card[_ngcontent-%COMP%]{margin-top:5px}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:.7em}"]}),t})(),ty=(()=>{class t{constructor(e,o,s){this.messageService=e,this.configurationService=o,this.modalService=s,this.grilles=bK.a,this.selectedCapaciteSub=new mt,this.grilleStoragePrefix=this.configurationService.getValue("storagePrefix")+"grille-";for(let[l,h]of Object.entries(this.grilles))for(let[p,m]of Object.entries(this.grilles[l].competences)){let v=[];for(let[C,D]of Object.entries(this.grilles[l].competences[p].capacites))v.push({id:C,texte:D});this.grilles[l].competences[p].capacites=v}this.grilleItems={};for(let[l,h]of Object.entries(this.grilles))this.grilleItems[l]=(new u2).deserialize(this.grilles[l]);this.load()}load(){for(let[e,o]of Object.entries(this.grilleItems)){const s=localStorage.getItem(this.grilleStoragePrefix+e);if(s){const l=JSON.parse(s);this.grilleItems[e]=l}}}getGrille(e){return this.grilleItems[e]}setGrille(e,o){this.grilleItems[e]&&(this.grilleItems[e]=o,localStorage.setItem(this.grilleStoragePrefix+e,JSON.stringify(o)))}showGrille(e,o,s){this.selectedCapaciteSub=new mt;const l=this.modalService.open(RK,{centered:!0,size:"xl",scrollable:!0});l.componentInstance.selectedgrille=e,l.componentInstance.canChooseCapacite=o,l.componentInstance.grilles=this.grilleItems,void 0!==s&&(l.componentInstance.devoir=s),l.result.then(h=>{this.selectedCapaciteSub.next(h),this.selectedCapaciteSub.complete()},h=>{o&&this.messageService.add("Aucune capacit\xe9 s\xe9lectionn\xe9e.","warning","USER")})}compareGrille(e,o){let s=!0;return e&&o?e.titre!==o.titre?s=!1:e.competences.forEach((l,h)=>{e.competences[h].titre!==o.competences[h].titre||e.competences[h].couleur!==o.competences[h].couleur?s=!1:l.capacites.forEach((p,m)=>{(e.competences[h].capacites[m].id!==o.competences[h].capacites[m].id||e.competences[h].capacites[m].texte!==o.competences[h].capacites[m].texte)&&(s=!1)})}):s=!1,s}isAnExistingGrille(e){let o=!1;for(let[s,l]of Object.entries(this.grilleItems))if(!0===this.compareGrille(this.grilleItems[s],e)){o=!0;break}return o}diffCapacitesInGrilles(e,o){let s=[];return e.competences.forEach((l,h)=>{l.capacites.forEach((p,m)=>{null===o.getCapacite(p.id)&&s.push({capacite:p,criteres:0})})}),s}}return t.\u0275fac=function(e){return new(e||t)(ie(ar),ie(eo),ie(wl))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function FK(t,n){if(1&t){const e=ke();x(0,"div",7)(1,"h4",8),R(2),M(),x(3,"button",9),K("click",function(){return ae(e),ne(B().modal.dismiss("close"))}),x(4,"span",10),R(5,"\xd7"),M()()()}if(2&t){const e=B();A(2),ge(e.selectedClasse.titre)}}function LK(t,n){1&t&&al(0)}const _2=function(t){return{currentClasse:t}};function BK(t,n){if(1&t&&H(0,LK,1,0,"ng-container",18),2&t){const e=B().$implicit;B(2),I("ngTemplateOutlet",Oe(9))("ngTemplateOutletContext",Ee(2,_2,e.value))}}function VK(t,n){if(1&t&&(Ct(0,15),x(1,"a",16),R(2),M(),H(3,BK,1,4,"ng-template",17),kt()),2&t){const e=n.$implicit;I("ngbNavItem",e.key),A(2),ge(e.value.titre)}}function jK(t,n){if(1&t&&(Ct(0),x(1,"ul",11,12),H(3,VK,4,2,"ng-container",13),xe(4,"keyvalue"),M(),be(5,"div",14),kt()),2&t){const e=Oe(2),o=B();A(3),I("ngForOf",je(4,2,o.classes)),A(2),I("ngbNavOutlet",e)}}function HK(t,n){1&t&&al(0)}function zK(t,n){if(1&t&&(x(0,"div"),H(1,HK,1,0,"ng-container",18),M()),2&t){const e=B(),o=Oe(9);A(1),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Ee(2,_2,e.selectedClasse))}}function $K(t,n){if(1&t){const e=ke();Ct(0),x(1,"button",19),K("click",function(){return ae(e),ne(B().modal.dismiss("cancel"))}),R(2,"Annuler"),M(),kt()}}function UK(t,n){if(1&t){const e=ke();x(0,"button",20),K("click",function(){return ae(e),ne(B().modal.close("ok"))}),R(1,"Fermer"),M()}}function GK(t,n){if(1&t){const e=ke();x(0,"button",23),K("click",function(){const l=ae(e).$implicit;return ne(B(2).selectEleve(l))}),R(1),M()}if(2&t){const e=n.$implicit;A(1),ge(e)}}function qK(t,n){if(1&t&&(x(0,"div",21),H(1,GK,2,1,"button",22),M()),2&t){const e=n.currentClasse;A(1),I("ngForOf",e.eleves)}}let WK=(()=>{class t{constructor(e){this.modal=e,this.selectedClasse=null,this.classes=[],this.selectedClasse=null,this.canChooseEleve=!1}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.classes||setTimeout(()=>{this.updateDetails()},200)}selectEleve(e){!0===this.canChooseEleve&&this.modal.close(e)}}return t.\u0275fac=function(e){return new(e||t)(z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-classe-selection"]],inputs:{classes:"classes",selectedClasse:"selectedClasse",canChooseEleve:"canChooseEleve"},decls:10,vars:5,consts:[["class","modal-header",4,"ngIf"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[4,"ngIf","ngIfElse"],["default",""],["classeListe",""],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-outline-secondary",3,"click"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action",3,"click"]],template:function(e,o){if(1&e&&(H(0,FK,6,1,"div",0),x(1,"div",1),H(2,jK,6,4,"ng-container",2),H(3,zK,2,4,"div",2),M(),x(4,"div",3),H(5,$K,3,0,"ng-container",4),H(6,UK,2,0,"ng-template",null,5,Xe),M(),H(8,qK,2,1,"ng-template",null,6,Xe)),2&e){const s=Oe(7);I("ngIf",o.selectedClasse),A(2),I("ngIf",null==o.selectedClasse),A(1),I("ngIf",o.selectedClasse),A(2),I("ngIf",o.canChooseEleve)("ngIfElse",s)}},dependencies:[_n,zt,Kr,D0,Lg,Fg,M0,Ax,ul],styles:[".list-group[_ngcontent-%COMP%]{margin:10px 0}.list-group-item[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}"]}),t})(),ny=(()=>{class t{constructor(e,o,s,l){this.messageService=e,this.configurationService=o,this.modalService=s,this.http=l,this.selectedEleveSub=new mt,this.classeStoragePrefix=this.configurationService.getValue("storagePrefix")+"classe-",this.classeItems=[],this.http.get("assets/configuration/classes.csv",{responseType:"text"}).subscribe(h=>{if(h){const p=h.split("\n");for(const[m,v]of p.entries()){const C=v.split(";");for(const[D,N]of C.entries())if(0===m){let V=new l2;V.id="_"+N,V.titre=N,V.eleves=[],this.classeItems.push(V)}else N.length>0&&this.classeItems[D].eleves.push(N)}}this.load()},h=>{this.messageService.add(h,"danger","USER")})}load(){for(const[e,o]of this.classeItems.entries()){const s=localStorage.getItem(this.classeStoragePrefix+o.id);if(s){const l=JSON.parse(s);this.classeItems[e]=l}}}getClasse(e){return this.classeItems[e]}setClasse(e,o){this.classeItems[e]&&(this.classeItems[e]=o,localStorage.setItem(this.classeStoragePrefix+o.id,JSON.stringify(o)))}showClasse(e,o){this.selectedEleveSub=new mt;const s=this.modalService.open(WK,{centered:!0,scrollable:!0});s.componentInstance.selectedClasse=e,s.componentInstance.canChooseEleve=o,s.componentInstance.classes=this.classeItems,s.result.then(l=>{this.selectedEleveSub.next(l),this.selectedEleveSub.complete()},()=>{o&&this.messageService.add("Aucun \xe9l\xe8ve s\xe9lectionn\xe9e.","warning","USER")})}compareClasse(e,o){let s=!0;return e&&o?e.titre!==o.titre?s=!1:e.eleves.forEach((l,h)=>{-1===o.eleves.indexOf(l)&&(s=!1)}):s=!1,s}isAnExistingClasse(e){let o=!1;for(let[s,l]of Object.entries(this.classeItems))if(!0===this.compareClasse(this.classeItems[s],e)){o=!0;break}return o}diffElevesInClasses(e,o){let s=[];return e.eleves.forEach((l,h)=>{-1===o.eleves.indexOf(l)&&s.push({eleve:l,notation:!1})}),s}}return t.\u0275fac=function(e){return new(e||t)(ie(ar),ie(eo),ie(wl),ie(kO))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),to=(()=>{class t{constructor(e,o,s,l,h){this.messageService=e,this.grilleService=o,this.classeService=s,this.configurationService=l,this.modalService=h,this.currentFileName="",this.toolVersion="2.0.3",this.docIsEdited=!1,this.oldDevoir="",this.noteCoeffs={},this.loadNewDevoirSub=new mt;const p=this.configurationService.getValue("autosaveDuration"),m=this.configurationService.getValue("noteStatusOkCoeff"),v=this.configurationService.getValue("noteStatusEnCoursCoeff"),C=this.configurationService.getValue("noteStatusKoCoeff"),D=this.configurationService.getValue("noteStatusOk"),N=this.configurationService.getValue("noteStatusEnCours"),V=this.configurationService.getValue("noteStatusKo");this.noteCoeffs[D]=m,this.noteCoeffs[N]=v,this.noteCoeffs[V]=C,this.devoirStoragePrefix=this.configurationService.getValue("storagePrefix")+"devoir-",this.devoirDateStoragePrefix=this.configurationService.getValue("storagePrefix")+"devoir-date-";const U=localStorage.getItem(this.devoirStoragePrefix),q=localStorage.getItem(this.devoirDateStoragePrefix);if(void 0===this.devoir&&U){const J=this.modalService.open(hK,{centered:!0});J.componentInstance.devoir=U,J.componentInstance.devoirDate=q,J.result.then(Q=>{this.loadDevoir(U),this.docIsEdited=!0},Q=>{this.messageService.add("Restauration non demand\xe9e","warning","USER")})}setInterval(()=>this.doCheck(),1e3*p)}loadLocalFile(e){this.readLocalFile(e)}readLocalFile(e){const o=e.files[0],s=new FileReader;s.onloadstart=l=>{},s.onloadend=l=>{this.loadDevoir(s.result)},s.onprogress=l=>{},s.onerror=l=>{this.messageService.add("Echec de l'ouverture du fichier "+this.currentFileName+" !","danger","USER"),this.messageService.add(s.error?s.error.name:"Erreur inconnue","danger","DEV"),this.currentFileName=""},s.onabort=l=>{this.messageService.add("Abandon de l'ouverture du fichier \xe0 votre demande !","warning","USER"),this.currentFileName=""},this.currentFileName=o.name,s.readAsText(o)}loadDevoir(e){if(!1===this.docIsEdited||!0===this.docIsEdited&&confirm("Le devoir actuel n'est pas sauvegard\xe9. \xcates-vous s\xfbr de vouloir continuer (le travail non sauvegard\xe9 sera perdu) ? "))try{let o=JSON.parse(e);o=this.migrateDevoir(o),this.devoir=(new p2).deserialize(o),this.devoir.notes_coefficients=this.noteCoeffs,this.oldDevoir=JSON.stringify(this.devoir),this.docIsEdited=!1,this.messageService.add("Devoir charg\xe9 avec succ\xe8s !","success","USER"),this.loadNewDevoirSub.next(!0)}catch(o){o instanceof SyntaxError&&this.messageService.add("Le contenu du fichier n'est pas conforme.","danger","USER")}}clearDevoir(){(!1===this.docIsEdited||!0===this.docIsEdited&&confirm("Le devoir actuel n'est pas sauvegard\xe9. \xcates-vous s\xfbr de vouloir continuer (le travail non sauvegard\xe9 sera perdu) ? "))&&(this.devoir=new p2,this.devoir.author=this.configurationService.getValue("author"),this.devoir.toolVersion=this.toolVersion,this.devoir.titre=this.configurationService.getValue("devoirTitreDefault"),this.devoir.arrondi=parseFloat(this.configurationService.getValue("devoirArrondiDefault")),this.devoir.notationMode=parseInt(this.configurationService.getValue("devoirNotationModeDefault"),10),this.devoir.notationCible=parseFloat(this.configurationService.getValue("devoirNotationCibleDefault")),this.devoir.notes_coefficients=this.noteCoeffs,this.oldDevoir=JSON.stringify(this.devoir),this.docIsEdited=!1,this.loadNewDevoirSub.next(!0))}doCheck(){if(this.devoir){let e=JSON.stringify(this.devoir);const o=/,"modificationDate":"[^"]*"/gi;e=e.replace(o,""),this.oldDevoir=this.oldDevoir.replace(o,""),e!==this.oldDevoir&&(console.log("Modification d\xe9tect\xe9e."),this.updateDevoir(),this.oldDevoir=e)}}updateDevoir(){setTimeout(()=>{this.docIsEdited=!0});let e=this.devoir.serialize();localStorage.setItem(this.devoirStoragePrefix,JSON.stringify(e)),localStorage.setItem(this.devoirDateStoragePrefix,JSON.stringify(new Date))}saveDevoir(){if(""===this.currentFileName){const l=this.devoir.titre.replace(/[^a-z0-9]/gi,"");this.currentFileName=this.devoir.devoirDate?this.devoir.devoirDate.getFullYear()+""+(this.devoir.devoirDate.getMonth()+1)+this.devoir.devoirDate.getDate()+"_"+l+".json":l+".json"}this.devoir.modificationDate=new Date;let e=this.devoir.serialize();const o=JSON.stringify(e),s=new Blob([o],{type:"text/plain;charset=utf-8"});(0,vK.saveAs)(s,this.currentFileName),this.docIsEdited=!1,localStorage.removeItem(this.devoirStoragePrefix),localStorage.removeItem(this.devoirDateStoragePrefix),this.messageService.add("Devoir sauvegard\xe9 avec succ\xe8s !","success","USER")}migrateDevoir(e){let o=!1;e.meta.version=e.meta.version+"";const s=e.meta.version.split("."),l=parseInt(s[0],10);if(l<1&&(this.messageService.add("Migration pour traitement des modes de notation.","success","DEV"),e.data.general.note_arrondi=parseFloat(this.configurationService.getValue("devoirArrondiDefault")),e.data.general.note_final_mode=parseInt(this.configurationService.getValue("devoirNotationModeDefault"),10),e.data.general.note_final_cible=parseFloat(this.configurationService.getValue("devoirNotationCibleDefault")),o=!0),l<2){e.meta.date_creation=e.meta.date_save,this.messageService.add("Migration pour traitement du nouveau format sous Angular2.","success","DEV"),e.data.general.classe={id:"_"+e.data.general.classe,titre:e.data.general.classe,eleves:e.classes["_"+e.data.general.classe]},delete e.classes,e.data.general.grille={id:e.data.general.grille.id,titre:e.data.general.grille.titre,competences:e.grilles[e.data.general.grille.id].competences},delete e.grilles;let h=[];for(const D of Object.keys(e.data.general.grille.competences)){let N={id:D,titre:e.data.general.grille.competences[D].titre,couleur:e.data.general.grille.competences[D].couleur,capacites:[]};for(const V of Object.keys(e.data.general.grille.competences[D].capacites))N.capacites.push({id:V,texte:e.data.general.grille.competences[D].capacites[V]});h.push(N)}e.data.general.grille.competences=h,this.messageService.add("G\xe9n\xe9ration des nouveaux identifiants exercices/questions/criteres.","success","DEV");let p=0,m=0,v=0;for(const D of Object.keys(e.data.exercices)){if(e.data.exercices[D].id=""+p,e.data.exercices[D].questions)for(const N of Object.keys(e.data.exercices[D].questions)){if(e.data.exercices[D].questions[N].id=p+"_"+m,e.data.exercices[D].questions[N].criteres)for(const V of Object.keys(e.data.exercices[D].questions[N].criteres))e.data.exercices[D].questions[N].criteres[V].id=p+"_"+m+"_"+v,e.data.exercices[D].questions[N].criteres[V].capacite=e.data.exercices[D].questions[N].criteres[V].competence,v++;m++,v=0}p++,m=0,v=0}this.messageService.add("G\xe9n\xe9ration des nouvelles structures de notation.","success","DEV");let C=[];for(const D of Object.keys(e.data.notes)){let N={eleve:D,notes:[],commentaire:e.data.notes[D].commentaire};for(const V of Object.keys(e.data.notes[D].exercices)){const U=V.substr(1);for(const q of Object.keys(e.data.notes[D].exercices[V].questions)){const J=q.substr(1);for(const Q of Object.keys(e.data.notes[D].exercices[V].questions[q].criteres))if(e.data.notes[D].exercices[V].questions[q].criteres[Q].state===this.configurationService.getValue("noteStatusEnCours")||e.data.notes[D].exercices[V].questions[q].criteres[Q].state===this.configurationService.getValue("noteStatusKo")||e.data.notes[D].exercices[V].questions[q].criteres[Q].state===this.configurationService.getValue("noteStatusOk")){const te=Q.substr(1);N.notes.push({critere:U+"_"+J+"_"+te,status:e.data.notes[D].exercices[V].questions[q].criteres[Q].state})}}}C.push(N)}delete e.data.notes,e.data.notations=C;for(const D of Object.keys(e.data.exercices))if(e.data.exercices[D].questions){e.data.exercices[D].title=e.data.exercices[D].title.replace(/<div class="mycontrole-lines.+Bloc de <strong>(\d+)<\/strong> lignes<\/div>/,this.migrateMyControleLines);for(const N of Object.keys(e.data.exercices[D].questions))if(e.data.exercices[D].questions[N].criteres){e.data.exercices[D].questions[N].title=e.data.exercices[D].questions[N].title.replace(/<div class="mycontrole-lines.+Bloc de <strong>(\d+)<\/strong> lignes<\/div>/,this.migrateMyControleLines);for(const V of Object.keys(e.data.exercices[D].questions[N].criteres))e.data.exercices[D].questions[N].criteres[V].text=e.data.exercices[D].questions[N].criteres[V].text.replace(/<div class="mycontrole-lines.+Bloc de <strong>(\d+)<\/strong> lignes<\/div>/,this.migrateMyControleLines)}else e.data.exercices[D].questions[N].text=e.data.exercices[D].questions[N].text.replace(/<div class="mycontrole-lines.+Bloc de <strong>(\d+)<\/strong> lignes<\/div>/,this.migrateMyControleLines)}else e.data.exercices[D].text=e.data.exercices[D].text.replace(/<div class="mycontrole-lines.+Bloc de <strong>(\d+)<\/strong> lignes<\/div>/,this.migrateMyControleLines);o=!0}return o&&(e.meta.version=this.toolVersion,this.messageService.add("Une migration des donn\xe9es doit \xeatre r\xe9alis\xe9e.\n                               A la fin de la migration, il est conseill\xe9 d'enregistrer le document dans un nouveau fichier.","warning","USER"),this.docIsEdited=!0),e}migrateMyControleLines(e,o,s,l){return'<div class="mycontrole-lines"><span class="mycontrole-lines__label">Bloc de '+o+" lignes</span></div>"}getImpactedCriteres(e){let o=e;return e.length>0&&e.forEach((s,l)=>{for(const[h,p]of this.devoir.exercices.entries())if(p.questions)for(const[m,v]of p.questions.entries())if(v.criteres)for(const[C,D]of v.criteres.entries())D.capacite&&D.capacite.id===s.capacite.id&&s.criteres++}),o}getImpactedNotations(e){let o=e;return e.length>0&&e.forEach((s,l)=>{for(const[h,p]of this.devoir.notations.entries())p.eleve===s.eleve&&(s.notation=!0)}),o}replaceGrille(e){let o=0,s=0;for(const[l,h]of this.devoir.exercices.entries())if(h.questions)for(const[p,m]of h.questions.entries())if(m.criteres)for(const[v,C]of m.criteres.entries())if(C.capacite&&C.capacite.id){const D=e.getCapacite(C.capacite.id);D?(C.capacite=D,o++):(C.capacite=null,s++)}this.messageService.add("Remplacement de la grille termin\xe9 ("+o+" crit\xe8res avec capacit\xe9s remplac\xe9es / "+s+" crit\xe8res avec capacit\xe9s supprim\xe9es)","success","USER"),this.devoir.grille=e}replaceClasse(e){let o=0,s=0;for(const[l,h]of this.devoir.notations.entries())-1===e.eleves.indexOf(h.eleve)?(this.devoir.notations.splice(h,1),s++):o++;this.messageService.add("Remplacement de la classe termin\xe9 ("+o+" \xe9l\xe8ves avec notation remplac\xe9e / "+s+" \xe9l\xe8ves avec notation supprim\xe9e)","success","USER"),this.devoir.classe=e}chooseCapacite(e){null===this.devoir.grille?this.messageService.add("Aucune grille de comp\xe9tences n'est asscoi\xe9e au devoir. Impossible de choisir un capacit\xe9.","warning","USER"):(this.grilleService.showGrille(this.devoir.grille,!0,this.devoir),this.grilleService.selectedCapaciteSub.subscribe(o=>{null!==o?e.capacite=o:(e.capacite=null,this.messageService.add("La capacit\xe9 a bien \xe9t\xe9 retir\xe9e du crit\xe8re.","success","USER"))}))}checkDevoir(){const e=this.modalService.open(_K,{centered:!0,size:"xl",scrollable:!0});e.componentInstance.devoir=this.devoir,e.result.then(o=>{Array.isArray(o)&&this.fixDevoir(o)},o=>{})}fixDevoir(e){e.forEach(o=>{if("auteur"===o&&(this.devoir.author=this.configurationService.getValue("author"),this.messageService.add("Correction de l'auteur termin\xe9e.","success","USER")),"ids"===o)if(this.devoir.notations.length>0)this.messageService.add("Impossible de corriger les identifiants car la notation a commenc\xe9","danger","USER");else{for(const[s,l]of this.devoir.exercices.entries())if(l.id=ts(),l.questions)for(const[h,p]of l.questions.entries())if(p.id=ts(),p.criteres)for(const[m,v]of p.criteres.entries())v.id=ts();this.messageService.add("Correction des identifiants termin\xe9e.","success","USER")}})}}return t.\u0275fac=function(e){return new(e||t)(ie(ar),ie(ty),ie(ny),ie(eo),ie(wl))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),xa=(()=>{class t{constructor(e){this.router=e,this.isPrinting=!1}printDocument(e,o){this.isPrinting=!0,this.router.navigate(["/",{outlets:{print:["print",e,o?o.join():[]]}}])}onDataReady(){setTimeout(()=>{window.print(),this.isPrinting=!1,this.router.navigate([{outlets:{print:null}}])})}}return t.\u0275fac=function(e){return new(e||t)(ie(Ai))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ah=(()=>{class t{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e)}}return t.\u0275fac=function(e){return new(e||t)(z(uA,16))},t.\u0275pipe=Jt({name:"safeHtml",type:t,pure:!0}),t})(),lE=(()=>{class t{replaceMyControleLines(e,o,s,l){let h="";for(let p=0;p<o;p++)h+='<div class="mycontrole-line">&nbsp;</div>';return h}transform(e){let o=e.replace(/<div class="mycontrole-lines.+Bloc de (\d+) lignes<\/span>.*<\/div>/,this.replaceMyControleLines);return o=o.replace(/<span class="cke_reset.*<\/span>/,""),o=o.replace(/<div data-cke-hidden-sel.*<\/div>/,""),o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"stripMycontroleLine",type:t,pure:!0}),t})();function KK(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}const v2=function(t){return{"margin-top":t}};function JK(t,n){if(1&t&&(x(0,"div",8),be(1,"span",9),xe(2,"safeHtml"),x(3,"span"),R(4),M()()),2&t){const e=B().$implicit,o=B();I("ngStyle",Ee(5,v2,o.impressionMargeExercice+"px")),A(1),I("innerHTML",je(2,3,e.title),Bt),A(3),Pt("",e.bareme," pts")}}function YK(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}function QK(t,n){if(1&t&&(x(0,"div",11),be(1,"span",9),xe(2,"safeHtml"),x(3,"span"),R(4),M()()),2&t){const e=B().$implicit,o=B(2);I("ngStyle",Ee(5,v2,o.impressionMargeQuestion+"px")),A(1),I("innerHTML",je(2,3,e.title),Bt),A(3),Pt("",e.bareme," pts")}}function XK(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}function ZK(t,n){if(1&t&&(Ct(0),H(1,XK,3,5,"div",5),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className)}}function eJ(t,n){if(1&t&&(Ct(0),H(1,YK,3,5,"div",5),H(2,QK,5,7,"div",10),H(3,ZK,2,1,"ng-container",4),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Question"==e.className),A(1),I("ngForOf",e.criteres)}}function tJ(t,n){if(1&t&&(Ct(0),H(1,KK,3,5,"div",5),H(2,JK,5,7,"div",6),H(3,eJ,4,3,"ng-container",4),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Exercice"==e.className),A(1),I("ngForOf",e.questions)}}let nJ=(()=>{class t{constructor(e,o,s,l){this.devoirService=o,this.configurationService=s,this.printService=l,this.impressionMargeExercice=parseInt(this.configurationService.getValue("impressionMargeExercice")),this.impressionMargeQuestion=parseInt(this.configurationService.getValue("impressionMargeQuestion")),this.devoirDetails=this.devoirService.devoir}ngOnInit(){this.devoirDetails=this.devoirService.devoir,this.printService.onDataReady()}}return t.\u0275fac=function(e){return new(e||t)(z(es),z(to),z(eo),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-print-devoir"]],decls:17,vars:7,consts:[["id","devoir"],["id","title"],["id","classe"],["id","pupil"],[4,"ngFor","ngForOf"],["class","freetext",3,"innerHTML",4,"ngIf"],["class","exercice",3,"ngStyle",4,"ngIf"],[1,"freetext",3,"innerHTML"],[1,"exercice",3,"ngStyle"],[3,"innerHTML"],["class","question",3,"ngStyle",4,"ngIf"],[1,"question",3,"ngStyle"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"div",1)(2,"span"),R(3),M(),x(4,"span"),R(5),xe(6,"date"),M()(),x(7,"div",2)(8,"span"),R(9,"Votre classe"),M(),x(10,"span"),R(11),M()(),x(12,"div",3)(13,"span"),R(14,"Votre nom"),M(),be(15,"span"),M(),H(16,tJ,4,3,"ng-container",4),M()),2&e&&(A(3),ge(o.devoirDetails.titre),A(2),ge(Gr(6,4,o.devoirDetails.devoirDate,"fullDate")),A(6),ge(null==o.devoirDetails.classe?null:o.devoirDetails.classe.titre),A(5),I("ngForOf",o.devoirService.devoir.exercices))},dependencies:[_n,zt,cl,sg,Ah,lE],styles:["#devoir[_ngcontent-%COMP%]{width:100%;background-color:#fff;padding:0;margin:0;font-family:calibri}#title[_ngcontent-%COMP%]{width:100%;padding:5px;margin-bottom:15px;box-sizing:border-box;border-bottom:1px solid #AAA;font-weight:700}#title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:70%;display:inline-block;box-sizing:border-box;text-align:left;font-size:2.1em}#title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:30%;display:inline-block;box-sizing:border-box;text-align:right;font-size:1.2em;color:#aaa}#classe[_ngcontent-%COMP%], #pupil[_ngcontent-%COMP%]{width:40%;margin:10px;box-sizing:border-box;background-color:#fcfcfc;padding:10px;border:1px solid #E5E5E5;text-align:center;display:inline-block;float:left}#pupil[_ngcontent-%COMP%]{float:right}#classe[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1), #pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1){font-size:2em;color:#999;display:block}#classe[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2), #pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){display:block;min-height:40px;font-size:2em;color:#333;font-weight:700}.exercice[_ngcontent-%COMP%]{clear:both;width:100%;border-top:1px solid #AAA;background-color:#e5e5e5;font-weight:700}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;font-size:1.5em;display:inline-block}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;font-size:1.5em;color:#aaa;display:inline-block}.question[_ngcontent-%COMP%]{width:100%;background-color:#f5f5f5;font-weight:700}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;display:inline-block;font-size:1.2em}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;color:#aaa;display:inline-block;font-size:1.2em}.freetext[_ngcontent-%COMP%]{clear:both;width:100%;font-size:1.2em}[_nghost-%COMP%]     .mycontrole-line{border-bottom:1px dotted #000;margin:10px;line-height:30px;width:100%}[_nghost-%COMP%]     .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}[_nghost-%COMP%]     .image.image_resized img{width:100%}"]}),t})();function iJ(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}const b2=function(t){return{"margin-top":t}};function oJ(t,n){if(1&t&&(x(0,"div",8),be(1,"span",9),xe(2,"safeHtml"),x(3,"span"),R(4),M()()),2&t){const e=B().$implicit,o=B();I("ngStyle",Ee(5,b2,o.impressionMargeExercice+"px")),A(1),I("innerHTML",je(2,3,e.title),Bt),A(3),Pt("",e.bareme," pts")}}function rJ(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}function sJ(t,n){if(1&t&&(x(0,"div",11),be(1,"span",9),xe(2,"safeHtml"),x(3,"span"),R(4),M()()),2&t){const e=B().$implicit,o=B(2);I("ngStyle",Ee(5,b2,o.impressionMargeQuestion+"px")),A(1),I("innerHTML",je(2,3,e.title),Bt),A(3),Pt("",e.bareme," pts")}}function aJ(t,n){1&t&&(be(0,"div",7),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}const lJ=function(t){return{"background-color":t}};function cJ(t,n){if(1&t&&(x(0,"span")(1,"span",16),R(2),M()()),2&t){const e=B(2).$implicit;A(1),I("ngStyle",Ee(2,lJ,null==e.capacite?null:e.capacite.couleur)),A(1),ge(e.capacite.id)}}const uJ=function(){return{"background-color":"#CCC"}};function dJ(t,n){1&t&&(x(0,"span")(1,"span",16),R(2,"Aucune"),M()()),2&t&&(A(1),I("ngStyle",da(1,uJ)))}function hJ(t,n){1&t&&(be(0,"span",9),xe(1,"safeHtml")),2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function fJ(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit;A(1),ge(null==e.capacite?null:e.capacite.texte)}}function pJ(t,n){if(1&t&&(x(0,"div",13),H(1,cJ,3,4,"span",14),H(2,dJ,3,2,"span",14),H(3,hJ,2,3,"span",15),H(4,fJ,2,1,"span",14),x(5,"span")(6,"span"),R(7,"\xa0"),M()()()),2&t){const e=B().$implicit;A(1),I("ngIf",e.capacite),A(1),I("ngIf",null==e.capacite),A(1),I("ngIf",e.text&&""!=e.text),A(1),I("ngIf",null==e.text||""==e.text)}}function gJ(t,n){if(1&t&&(Ct(0),H(1,aJ,3,5,"div",5),H(2,pJ,8,4,"div",12),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Critere"==e.className)}}function mJ(t,n){if(1&t&&(Ct(0),H(1,rJ,3,5,"div",5),H(2,sJ,5,7,"div",10),H(3,gJ,3,2,"ng-container",4),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Question"==e.className),A(1),I("ngForOf",e.criteres)}}function _J(t,n){if(1&t&&(Ct(0),H(1,iJ,3,5,"div",5),H(2,oJ,5,7,"div",6),H(3,mJ,4,3,"ng-container",4),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Exercice"==e.className),A(1),I("ngForOf",e.questions)}}let vJ=(()=>{class t{constructor(e,o,s,l){this.devoirService=o,this.configurationService=s,this.printService=l,this.impressionMargeExercice=parseInt(this.configurationService.getValue("impressionMargeExercice")),this.impressionMargeQuestion=parseInt(this.configurationService.getValue("impressionMargeQuestion")),this.devoirDetails=this.devoirService.devoir}ngOnInit(){this.devoirDetails=this.devoirService.devoir,this.printService.onDataReady()}}return t.\u0275fac=function(e){return new(e||t)(z(es),z(to),z(eo),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-print-correction"]],decls:17,vars:7,consts:[["id","devoir"],["id","title"],["id","classe"],["id","pupil"],[4,"ngFor","ngForOf"],["class","freetext",3,"innerHTML",4,"ngIf"],["class","exercice",3,"ngStyle",4,"ngIf"],[1,"freetext",3,"innerHTML"],[1,"exercice",3,"ngStyle"],[3,"innerHTML"],["class","question",3,"ngStyle",4,"ngIf"],[1,"question",3,"ngStyle"],["class","critere",4,"ngIf"],[1,"critere"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngStyle"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"div",1)(2,"span"),R(3),M(),x(4,"span"),R(5),xe(6,"date"),M()(),x(7,"div",2)(8,"span"),R(9,"Classe"),M(),x(10,"span"),R(11),M()(),x(12,"div",3)(13,"span"),R(14,"El\xe8ve ou Groupe"),M(),be(15,"span"),M(),H(16,_J,4,3,"ng-container",4),M()),2&e&&(A(3),ge(o.devoirDetails.titre),A(2),ge(Gr(6,4,o.devoirDetails.devoirDate,"fullDate")),A(6),ge(null==o.devoirDetails.classe?null:o.devoirDetails.classe.titre),A(5),I("ngForOf",o.devoirService.devoir.exercices))},dependencies:[_n,zt,cl,sg,Ah,lE],styles:["#devoir[_ngcontent-%COMP%]{width:100%;background-color:#fff;padding:0;margin:0;font-family:calibri}#title[_ngcontent-%COMP%]{width:100%;padding:5px;margin-bottom:15px;box-sizing:border-box;border-bottom:1px solid #AAA;font-weight:700}#title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:70%;display:inline-block;box-sizing:border-box;text-align:left;font-size:2.1em}#title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:30%;display:inline-block;box-sizing:border-box;text-align:right;font-size:1.2em;color:#aaa}#classe[_ngcontent-%COMP%], #pupil[_ngcontent-%COMP%]{width:40%;margin:10px;box-sizing:border-box;background-color:#fcfcfc;padding:10px;border:1px solid #E5E5E5;text-align:center;display:inline-block;float:left}#pupil[_ngcontent-%COMP%]{float:right}#classe[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1), #pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1){font-size:2em;color:#999;display:block}#classe[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2), #pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){display:block;min-height:40px;font-size:2em;color:#333;font-weight:700}.freetext[_ngcontent-%COMP%]{clear:both;width:100%}.exercice[_ngcontent-%COMP%]{clear:both;width:100%;border-top:1px solid #AAA;background-color:#e5e5e5;font-weight:700}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;font-size:1.4em;display:inline-block}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;font-size:1.4em;color:#aaa;display:inline-block}.question[_ngcontent-%COMP%]{width:100%;background-color:#f5f5f5}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;display:inline-block;font-size:1.2em}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;color:#aaa;display:inline-block;font-size:1.2em}.critere[_ngcontent-%COMP%]{width:100%;padding-left:30px;box-sizing:border-box;margin:3px 0;display:flex}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1){width:10%;text-align:center;display:inline-block}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1) > span[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding:1px 3px;border-radius:5px}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){flex:1;text-align:left;display:inline-block;padding-left:5px;box-sizing:border-box}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3){display:inline-block}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3) > span[_ngcontent-%COMP%]{display:inline-block;border:1px solid #333;width:20px;height:20px}[_nghost-%COMP%]     .critere p{margin:0}[_nghost-%COMP%]     .mycontrole-line{display:none}[_nghost-%COMP%]     .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}[_nghost-%COMP%]     .image.image_resized img{width:100%}"]}),t})();function bJ(t,n){1&t&&(Ct(0),R(1,"Note exacte"),kt())}function yJ(t,n){1&t&&(Ct(0),R(1,"Note"),kt())}function wJ(t,n){if(1&t&&(x(0,"div")(1,"span"),H(2,bJ,2,0,"ng-container",14),H(3,yJ,2,0,"ng-container",14),M(),x(4,"span"),R(5),M()()),2&t){const e=B(2).$implicit,o=B(2);A(2),I("ngIf",o.printNotesBulletin),A(1),I("ngIf",0==o.printNotesBulletin),A(2),hi("",o.eleveNotations[e].getNote(),"/",o.printNotesNotValidated?o.devoirDetails.bareme:o.eleveNotations[e].getNoteMax(),"")}}function CJ(t,n){1&t&&(Ct(0),R(1,"Note bulletin"),kt())}function kJ(t,n){1&t&&(Ct(0),R(1,"Note"),kt())}function xJ(t,n){if(1&t&&(x(0,"div")(1,"span"),H(2,CJ,2,0,"ng-container",14),H(3,kJ,2,0,"ng-container",14),M(),x(4,"span"),R(5),M()()),2&t){const e=B(2).$implicit,o=B(2);A(2),I("ngIf",o.printNotesBrutes),A(1),I("ngIf",0==o.printNotesBrutes),A(2),hi("",o.devoirDetails.ajusterNote(o.eleveNotations[e].getNote()),"/",o.printNotesNotValidated?o.devoirDetails.bareme:o.devoirDetails.ajusterNote(o.eleveNotations[e].getNoteMax()),"")}}function EJ(t,n){if(1&t&&(Ct(0),H(1,wJ,6,4,"div",14),H(2,xJ,6,4,"div",14),kt()),2&t){const e=B(3);A(1),I("ngIf",e.printNotesBrutes),A(1),I("ngIf",e.printNotesBulletin)}}function TJ(t,n){1&t&&(x(0,"div")(1,"span"),R(2,"Non \xe9valu\xe9"),M()())}function DJ(t,n){if(1&t&&(be(0,"span",18),xe(1,"safeHtml")),2&t){const e=B(2).$implicit,o=B(2);I("innerHTML",je(1,1,null!=o.eleveNotations[e].commentaire||""!=o.eleveNotations[e].commentaire?o.eleveNotations[e].commentaire:"Non comment\xe9"),Bt)}}function MJ(t,n){1&t&&R(0," Vous n'avez pas \xe9t\xe9 \xe9valu\xe9 sur ce devoir. ")}function SJ(t,n){if(1&t&&(x(0,"div",15),H(1,DJ,2,3,"span",16),H(2,MJ,1,0,"ng-template",null,17,Xe),M()),2&t){const e=Oe(3),o=B().$implicit,s=B(2);A(1),I("ngIf",s.eleveNotations[o])("ngIfElse",e)}}function AJ(t,n){if(1&t&&(x(0,"table",19)(1,"thead")(2,"tr")(3,"th",20),R(4,"Bilan g\xe9n\xe9ral de la classe"),M()(),x(5,"tr")(6,"th"),R(7,"Moyenne"),M(),x(8,"th"),R(9,"Minimum"),M(),x(10,"th"),R(11,"Maximum"),M(),x(12,"th"),R(13,"Inf\xe9rieur Moyenne"),M()()(),x(14,"tbody")(15,"tr")(16,"td"),R(17),M(),x(18,"td"),R(19),M(),x(20,"td"),R(21),M(),x(22,"td"),R(23),M()()()()),2&t){const e=B(3);A(17),ge(e.devoirDetails.note_moyenne),A(2),ge(e.devoirDetails.note_minimum),A(2),ge(e.devoirDetails.note_maximum),A(2),ge(e.devoirDetails.nb_inferieur_moyenne)}}function OJ(t,n){if(1&t&&(x(0,"tr")(1,"td"),R(2),M(),x(3,"td"),R(4),M(),x(5,"td"),R(6),xe(7,"number"),M()()),2&t){const e=B().$implicit,o=B(2).$implicit,s=B(2);A(2),ge(e.title),A(2),hi("",s.eleveNotations[o].getNote(e.criteres),"/",s.printNotesNotValidated?e.bareme:s.eleveNotations[o].getNoteMax(e.criteres),""),A(2),hi("",Gr(7,5,s.classeNotation[e.id],"1.0-2"),"/",e.bareme,"")}}function PJ(t,n){if(1&t&&(Ct(0),H(1,OJ,8,8,"tr",14),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Exercice"==e.className)}}function NJ(t,n){if(1&t&&(x(0,"table",21)(1,"thead")(2,"tr")(3,"th",22),R(4,"Bilan personnel par exercice"),M()(),x(5,"tr")(6,"th"),R(7,"\xa0"),M(),x(8,"th"),R(9,"Votre Note"),M(),x(10,"th"),R(11,"Moyenne Classe"),M()()(),x(12,"tbody"),H(13,PJ,2,1,"ng-container",13),M()()),2&t){const e=B(3);A(13),I("ngForOf",e.devoirService.devoir.exercices)}}function IJ(t,n){1&t&&(x(0,"span"),R(1,"Acquis"),M())}function RJ(t,n){1&t&&(x(0,"span"),R(1,"Non acquis"),M())}function FJ(t,n){1&t&&(x(0,"span"),R(1,"En cours"),M())}function LJ(t,n){if(1&t&&(Ct(0),x(1,"tr")(2,"td"),R(3),M(),x(4,"td"),H(5,IJ,2,0,"span",14),H(6,RJ,2,0,"span",14),H(7,FJ,2,0,"span",14),M(),x(8,"td"),R(9),M(),x(10,"td"),R(11),xe(12,"number"),M()(),kt()),2&t){const e=n.$implicit,o=n.index,s=B(4);A(3),Pt(" ",e.value.competence.titre," "),A(2),I("ngIf",e.value.ok==e.value.total&&0!=e.value.total),A(1),I("ngIf",e.value.ko==e.value.total&&0!=e.value.total),A(1),I("ngIf",e.value.ok!=e.value.total&&e.value.ko!=e.value.total&&0!=e.value.total),A(2),hi(" ",e.value.pts,"/",e.value.bareme," "),A(2),hi(" ",Gr(12,8,s.bilanCompetencesClasse[o].pts/s.devoirDetails.nb_notations,"1.0-2"),"/",s.bilanCompetencesClasse[o].bareme," ")}}function BJ(t,n){if(1&t&&(x(0,"table",23)(1,"thead")(2,"tr")(3,"th",24),R(4,"Bilan personnel de comp\xe9tences"),M()(),x(5,"tr")(6,"th"),R(7,"\xa0"),M(),x(8,"th"),R(9,"Etat"),M(),x(10,"th"),R(11,"Votre Note"),M(),x(12,"th"),R(13,"Moyenne Classe"),M()()(),x(14,"tbody"),H(15,LJ,13,11,"ng-container",13),xe(16,"keyvalue"),M()()),2&t){const e=B().$implicit,o=B(2);A(15),I("ngForOf",je(16,1,o.devoirDetails.getCompetenceBilan(e)))}}function VJ(t,n){1&t&&(be(0,"div",27),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}function jJ(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit,o=B().$implicit,s=B(2);A(1),hi("",s.eleveNotations[o].getNote(e.criteres),"/",s.printNotesNotValidated?e.bareme:s.eleveNotations[o].getNoteMax(e.criteres)," pts ")}}function HJ(t,n){if(1&t&&(x(0,"div",28),be(1,"span",18),xe(2,"safeHtml"),H(3,jJ,2,2,"span",14),M()),2&t){const e=B().$implicit,o=B().$implicit,s=B(2);A(1),I("innerHTML",je(2,2,e.title),Bt),A(2),I("ngIf",s.eleveNotations[o])}}function zJ(t,n){1&t&&(be(0,"div",27),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}function $J(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit,o=B(2).$implicit,s=B(2);A(1),hi("",s.eleveNotations[o].getNote(e.criteres),"/",s.printNotesNotValidated?e.bareme:s.eleveNotations[o].getNoteMax(e.criteres)," pts ")}}function UJ(t,n){if(1&t&&(x(0,"div",30),be(1,"span",18),xe(2,"safeHtml"),H(3,$J,2,2,"span",14),M()),2&t){const e=B().$implicit,o=B(2).$implicit,s=B(2);A(1),I("innerHTML",je(2,2,e.title),Bt),A(2),I("ngIf",s.eleveNotations[o])}}function GJ(t,n){1&t&&(be(0,"div",27),xe(1,"safeHtml"),xe(2,"stripMycontroleLine")),2&t&&I("innerHTML",je(1,1,je(2,3,B().$implicit.text)),Bt)}const qJ=function(t){return{"background-color":t}};function WJ(t,n){if(1&t&&(x(0,"span")(1,"span",34),R(2),M()()),2&t){const e=B(2).$implicit;A(1),I("ngStyle",Ee(2,qJ,null==e.capacite?null:e.capacite.couleur)),A(1),ge(e.capacite.id)}}const KJ=function(){return{"background-color":"#CCC"}};function JJ(t,n){1&t&&(x(0,"span")(1,"span",34),R(2,"Aucune"),M()()),2&t&&(A(1),I("ngStyle",da(1,KJ)))}function YJ(t,n){1&t&&(be(0,"span",18),xe(1,"safeHtml")),2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function QJ(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit;A(1),ge(null==e.capacite?null:e.capacite.texte)}}const y2=function(t){return[t]};function XJ(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit,o=B(3).$implicit,s=B(2);A(1),hi("",s.eleveNotations[o].getNote(Ee(2,y2,e)),"/",s.eleveNotations[o].getNoteMax(Ee(4,y2,e)),"")}}function ZJ(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit;A(1),Pt("-/",e.bareme,"")}}function eY(t,n){if(1&t&&(x(0,"span"),R(1),M()),2&t){const e=B(2).$implicit;A(1),Pt("-/",e.bareme,"")}}function tY(t,n){if(1&t&&(x(0,"div",32),H(1,WJ,3,4,"span",14),H(2,JJ,3,2,"span",14),H(3,YJ,2,3,"span",33),H(4,QJ,2,1,"span",14),H(5,XJ,2,6,"span",14),H(6,ZJ,2,1,"span",14),H(7,eY,2,1,"span",14),M()),2&t){const e=B().$implicit,o=B(3).$implicit,s=B(2);A(1),I("ngIf",e.capacite),A(1),I("ngIf",null==e.capacite),A(1),I("ngIf",e.text&&""!=e.text),A(1),I("ngIf",null==e.text||""==e.text),A(1),I("ngIf",s.eleveNotations[o]&&null!=s.eleveNotations[o].getCritereStatus(e)),A(1),I("ngIf",s.printNotesNotValidated&&s.eleveNotations[o]&&null==s.eleveNotations[o].getCritereStatus(e)),A(1),I("ngIf",s.printNotesNotValidated&&null==s.eleveNotations[o])}}function nY(t,n){if(1&t&&(Ct(0),H(1,GJ,3,5,"div",25),H(2,tY,8,7,"div",31),kt()),2&t){const e=n.$implicit,o=B(3).$implicit,s=B(2);A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Critere"==e.className&&(s.eleveNotations[o]||null==s.eleveNotations[o]&&s.printNotesNotValidated))}}function iY(t,n){if(1&t&&(Ct(0),H(1,zJ,3,5,"div",25),H(2,UJ,4,4,"div",29),H(3,nY,3,2,"ng-container",13),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Question"==e.className),A(1),I("ngForOf",e.criteres)}}function oY(t,n){if(1&t&&(Ct(0),H(1,VJ,3,5,"div",25),H(2,HJ,4,4,"div",26),H(3,iY,4,3,"ng-container",13),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Exercice"==e.className),A(1),I("ngForOf",e.questions)}}function rY(t,n){if(1&t&&(x(0,"div",3)(1,"div",4)(2,"span"),R(3),M(),x(4,"span"),R(5),xe(6,"date"),M()(),x(7,"div",5)(8,"span"),R(9,"El\xe8ve"),M(),x(10,"span"),R(11),M()(),x(12,"div",6),H(13,EJ,3,2,"ng-container",7),H(14,TJ,3,0,"ng-template",null,8,Xe),M(),H(16,SJ,4,2,"div",9),H(17,AJ,24,4,"table",10),H(18,NJ,14,1,"table",11),H(19,BJ,17,3,"table",12),Ct(20),H(21,oY,4,3,"ng-container",13),kt(),M()),2&t){const e=n.$implicit,o=Oe(15),s=B(2);A(3),ge(s.devoirDetails.titre),A(2),ge(Gr(6,10,s.devoirDetails.devoirDate,"fullDate")),A(6),ge(e),A(2),I("ngIf",s.eleveNotations[e])("ngIfElse",o),A(3),I("ngIf",s.printCommentaire),A(1),I("ngIf",s.printDevoirStatistiques),A(1),I("ngIf",s.printExerciceSummary&&s.eleveNotations[e]),A(1),I("ngIf",s.printCompetencesSummary&&s.eleveNotations[e]),A(2),I("ngForOf",s.devoirService.devoir.exercices)}}function sY(t,n){if(1&t&&(x(0,"div",1),H(1,rY,22,13,"div",2),M()),2&t){const e=B();A(1),I("ngForOf",e.filterEleveBy(e.devoirDetails.classe.eleves))}}let aY=(()=>{class t{constructor(e,o,s){if(this.devoirService=o,this.printService=s,this.devoirDetails=this.devoirService.devoir,this.eleveNotations={},this.devoirDetails.classe)for(const h of this.devoirDetails.classe.eleves)this.eleveNotations[h]=this.devoirDetails.getEleveNotation(h);const l=e.snapshot.params.options.split(",");this.printNotesNotValidated="true"===l[0],this.printNotesBrutes="true"===l[1],this.printNotesBulletin="true"===l[2],this.printCommentaire="true"===l[3],this.printDevoirStatistiques="true"===l[4],this.printExerciceSummary="true"===l[5],this.printCompetencesSummary="true"===l[6],this.bilanCompetencesClasse=this.devoirDetails.getCompetenceBilan(),this.classeNotation=[];for(const h of this.devoirDetails.exercices){let p=0;this.classeNotation[h.id]=0;for(let m in this.eleveNotations)this.eleveNotations[m]&&(this.classeNotation[h.id]+=this.eleveNotations[m].getNote(h.criteres),p++);this.classeNotation[h.id]=this.classeNotation[h.id]/p}}ngOnInit(){this.printService.onDataReady()}filterEleveBy(e){let o=[];for(const s of e)(this.printNotesNotValidated||this.devoirDetails.getEleveNotation(s))&&o.push(s);return o.sort((s,l)=>s>l?1:s===l?0:-1)}}return t.\u0275fac=function(e){return new(e||t)(z(es),z(to),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-print-notations"]],decls:1,vars:1,consts:[["id","devoirs",4,"ngIf"],["id","devoirs"],["class","devoir",4,"ngFor","ngForOf"],[1,"devoir"],[1,"title"],[1,"pupil"],[1,"note"],[4,"ngIf","ngIfElse"],["noNotationBlockNote",""],["class","commentaire",4,"ngIf"],["class","statistiques",4,"ngIf"],["class","summary",4,"ngIf"],["class","competences",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"commentaire"],[3,"innerHTML",4,"ngIf","ngIfElse"],["noNotationBlockCommentaire",""],[3,"innerHTML"],[1,"statistiques"],["colspan","4"],[1,"summary"],["colspan","3"],[1,"competences"],["colspan","5"],["class","freetext",3,"innerHTML",4,"ngIf"],["class","exercice",4,"ngIf"],[1,"freetext",3,"innerHTML"],[1,"exercice"],["class","question",4,"ngIf"],[1,"question"],["class","critere",4,"ngIf"],[1,"critere"],[3,"innerHTML",4,"ngIf"],[3,"ngStyle"]],template:function(e,o){1&e&&H(0,sY,2,1,"div",0),2&e&&I("ngIf",null!=o.devoirDetails&&o.devoirDetails.classe)},dependencies:[_n,zt,cl,Tb,sg,ul,Ah,lE],styles:["[_nghost-%COMP%]     p{margin:0}[_nghost-%COMP%]     .mycontrole-line{display:none}[_nghost-%COMP%]     img{max-height:3em;width:auto}#devoirs[_ngcontent-%COMP%]{width:100%;background-color:#fff;padding:0;margin:0;font-family:calibri}.devoir[_ngcontent-%COMP%]{width:100%;padding:0;margin:0;page-break-after:always}.devoir[_ngcontent-%COMP%]:last-child{page-break-after:avoid}.title[_ngcontent-%COMP%]{width:100%;padding:5px;margin-bottom:15px;box-sizing:border-box;border-bottom:1px solid #AAA;font-weight:700}.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:70%;display:inline-block;box-sizing:border-box;text-align:left;font-size:2.1em}.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:30%;display:inline-block;box-sizing:border-box;text-align:right;font-size:1.2em;color:#aaa}.pupil[_ngcontent-%COMP%], .note[_ngcontent-%COMP%]{width:45%;min-height:100px;margin:10px 0;box-sizing:border-box;background-color:#fcfcfc;padding:10px;border:1px solid #E5E5E5;text-align:center;display:inline-block;float:left}.note[_ngcontent-%COMP%]{float:right}.note[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;width:45%}.note[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-left:1px solid #E5E5E5}.pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1), .note[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1){font-size:2em;color:#999;display:block}.pupil[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2), .note[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){display:block;min-height:40px;font-size:2em;color:#333;font-weight:700}.commentaire[_ngcontent-%COMP%]{width:75%;padding:5px;height:80px;margin:10px auto;box-sizing:border-box;background-color:#fcfcfc;border:1px solid #E5E5E5;font-size:1.2em;color:#333;overflow:hidden;clear:both}.statistiques[_ngcontent-%COMP%], .summary[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]{width:100%;margin:10px auto;box-sizing:border-box;background-color:#fcfcfc;padding:10px;border:1px solid #E5E5E5}.statistiques[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .summary[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#e5e5e5;font-size:1.2em;color:#999}.statistiques[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child, .summary[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child, .competences[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{color:#666;background-color:#d5d5d5}.statistiques[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .statistiques[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:25%;text-align:center}.summary[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .competences[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:right}.freetext[_ngcontent-%COMP%]{clear:both;width:100%}.exercice[_ngcontent-%COMP%]{clear:both;width:100%;border-top:1px solid #AAA;background-color:#d5d5d5;font-weight:700}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;font-size:1.4em;display:inline-block}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;font-size:1.4em;color:#aaa;display:inline-block}.question[_ngcontent-%COMP%]{width:100%;background-color:#e5e5e5}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:75%;text-align:left;display:inline-block;font-size:1.2em}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:25%;text-align:right;color:#aaa;display:inline-block;font-size:1.2em}.critere[_ngcontent-%COMP%]{width:100%;padding-left:30px;box-sizing:border-box;margin:3px 0;display:flex}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1){width:5%;text-align:right;display:inline-block}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(1) > span[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding:1px 3px;border-radius:5px}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){flex:1;text-align:left;display:inline-block;padding-left:5px;box-sizing:border-box}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3){display:inline-block;width:10%;text-align:right;color:#aaa}[_nghost-%COMP%]     .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}[_nghost-%COMP%]     .image.image_resized img{width:100%}"]}),t})();function lY(t,n){if(1&t&&(x(0,"table",5)(1,"thead")(2,"tr")(3,"th",6),R(4,"Bilan g\xe9n\xe9ral de la classe"),M()(),x(5,"tr")(6,"th"),R(7,"Moyenne"),M(),x(8,"th"),R(9,"Minimum"),M(),x(10,"th"),R(11,"Maximum"),M(),x(12,"th"),R(13,"Inf\xe9rieur Moyenne"),M()()(),x(14,"tbody")(15,"tr")(16,"td"),R(17),M(),x(18,"td"),R(19),M(),x(20,"td"),R(21),M(),x(22,"td"),R(23),M()()()()),2&t){const e=B();A(17),ge(e.devoirDetails.note_moyenne),A(2),ge(e.devoirDetails.note_minimum),A(2),ge(e.devoirDetails.note_maximum),A(2),ge(e.devoirDetails.nb_inferieur_moyenne)}}function cY(t,n){if(1&t&&(Ct(0),x(1,"tr")(2,"td"),R(3),M(),x(4,"td"),R(5),xe(6,"number"),M()(),kt()),2&t){const e=n.$implicit,o=n.index,s=B(2);A(3),Pt(" ",e.value.competence.titre," "),A(2),hi(" ",Gr(6,3,s.bilanCompetencesClasse[o].pts/s.devoirDetails.nb_notations,"1.0-2"),"/",s.bilanCompetencesClasse[o].bareme," ")}}function uY(t,n){if(1&t&&(x(0,"table",7)(1,"thead")(2,"tr")(3,"th",8),R(4,"Bilan de comp\xe9tences"),M()(),x(5,"tr")(6,"th"),R(7,"Intitul\xe9"),M(),x(8,"th"),R(9,"Moyenne Classe"),M()()(),x(10,"tbody"),H(11,cY,7,6,"ng-container",9),xe(12,"keyvalue"),M()()),2&t){const e=B();A(11),I("ngForOf",je(12,1,e.devoirDetails.getCompetenceBilan()))}}function dY(t,n){1&t&&(x(0,"th"),R(1,"Note r\xe9elle"),M())}function hY(t,n){1&t&&(x(0,"th"),R(1,"Note bulletin"),M())}function fY(t,n){1&t&&(x(0,"th"),R(1,"Commentaire"),M())}function pY(t,n){if(1&t&&(x(0,"td"),R(1),M()),2&t){const e=B().$implicit,o=B(2);A(1),ge(o.getNotePosition(e))}}function gY(t,n){if(1&t&&(x(0,"td"),R(1),M()),2&t){const e=B().$implicit,o=B(2);A(1),hi("",o.eleveNotations[e].getNote(),"/",o.printNotesNotValidated?o.devoirDetails.bareme:o.eleveNotations[e].getNoteMax(),"")}}function mY(t,n){if(1&t&&(x(0,"td"),R(1),M()),2&t){const e=B().$implicit,o=B(2);A(1),hi("",o.devoirDetails.ajusterNote(o.eleveNotations[e].getNote()),"/",o.printNotesNotValidated?o.devoirDetails.bareme:o.devoirDetails.ajusterNote(o.eleveNotations[e].getNoteMax()),"")}}function _Y(t,n){if(1&t&&(be(0,"td",13),xe(1,"safeHtml")),2&t){const e=B().$implicit,o=B(2);I("innerHTML",je(1,1,null!=o.eleveNotations[e].commentaire||""!=o.eleveNotations[e].commentaire?o.eleveNotations[e].commentaire:"Non comment\xe9"),Bt)}}function vY(t,n){1&t&&(x(0,"td"),R(1,"Non \xe9valu\xe9"),M()),2&t&&wt("colspan",B(3).nbColBilan-1)}function bY(t,n){if(1&t&&(x(0,"tr")(1,"td"),R(2),M(),H(3,pY,2,1,"td",11),H(4,gY,2,2,"td",11),H(5,mY,2,2,"td",11),H(6,_Y,2,3,"td",12),H(7,vY,2,1,"td",11),M()),2&t){const e=n.$implicit,o=B(2);A(2),ge(e),A(1),I("ngIf",o.eleveNotations[e]),A(1),I("ngIf",o.printNotesBrutes&&o.eleveNotations[e]),A(1),I("ngIf",o.printNotesBulletin&&o.eleveNotations[e]),A(1),I("ngIf",o.printCommentaire&&o.eleveNotations[e]),A(1),I("ngIf",o.nbColBilan>2&&o.printNotesNotValidated&&null==o.eleveNotations[e])}}function yY(t,n){if(1&t&&(x(0,"table",10)(1,"thead")(2,"tr")(3,"th"),R(4,"Bilan des notes"),M()(),x(5,"tr")(6,"th"),R(7,"El\xe8ve"),M(),x(8,"th"),R(9,"Classement"),M(),H(10,dY,2,0,"th",11),H(11,hY,2,0,"th",11),H(12,fY,2,0,"th",11),M()(),x(13,"tbody"),H(14,bY,8,6,"tr",9),M()()),2&t){const e=B();A(3),wt("colspan",e.nbColBilan),A(7),I("ngIf",e.printNotesBrutes),A(1),I("ngIf",e.printNotesBulletin),A(1),I("ngIf",e.printCommentaire),A(2),I("ngForOf",e.filterEleveBy(e.devoirDetails.classe.eleves))}}const wY=[{path:"print",outlet:"print",component:rK,children:[{path:"devoir",component:nJ},{path:"correction",component:vJ},{path:"notations/:options",component:aY},{path:"bilan/:options",component:(()=>{class t{constructor(e,o,s){if(this.devoirService=o,this.printService=s,this.devoirDetails=this.devoirService.devoir,this.eleveNotations={},this.devoirDetails.classe)for(const h of this.devoirDetails.classe.eleves)this.eleveNotations[h]=this.devoirDetails.getEleveNotation(h);const l=e.snapshot.params.options.split(",");this.printNotesNotValidated="true"===l[0],this.printNotesBrutes="true"===l[1],this.printNotesBulletin="true"===l[2],this.printCommentaire="true"===l[3],this.printDevoirStatistiques="true"===l[4],this.printCompetencesSummary="true"===l[5],this.bilanCompetencesClasse=this.devoirDetails.getCompetenceBilan(),this.classeNotation=[];for(const h of this.devoirDetails.exercices){let p=0;this.classeNotation[h.id]=0;for(let m in this.eleveNotations)this.eleveNotations[m]&&(this.classeNotation[h.id]+=this.eleveNotations[m].getNote(h.criteres),p++);this.classeNotation[h.id]=this.classeNotation[h.id]/p}this.nbColBilan=2,this.nbColBilan+=this.printNotesBrutes?1:0,this.nbColBilan+=this.printNotesBulletin?1:0,this.nbColBilan+=this.printCommentaire?1:0}ngOnInit(){this.printService.onDataReady()}filterEleveBy(e){let o=[];for(const s of e)(this.printNotesNotValidated||this.devoirDetails.getEleveNotation(s))&&o.push(s);return o.sort((s,l)=>s>l?1:s===l?0:-1)}getNotePosition(e){let o=[];for(let s in this.eleveNotations)this.eleveNotations[s]&&o.push(this.eleveNotations[s].getNote());return o.sort(),o.indexOf(this.eleveNotations[e].getNote())+1}}return t.\u0275fac=function(e){return new(e||t)(z(es),z(to),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-print-bilan"]],decls:10,vars:8,consts:[[1,"devoir"],[1,"title"],["class","statistiques",4,"ngIf"],["class","competences",4,"ngIf"],["class","bilan",4,"ngIf"],[1,"statistiques"],["colspan","4"],[1,"competences"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"bilan"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"div",1)(2,"span"),R(3),M(),x(4,"span"),R(5),xe(6,"date"),M()(),H(7,lY,24,4,"table",2),H(8,uY,13,3,"table",3),H(9,yY,15,5,"table",4),M()),2&e&&(A(3),ge(o.devoirDetails.titre),A(2),ge(Gr(6,5,o.devoirDetails.devoirDate,"fullDate")),A(2),I("ngIf",o.printDevoirStatistiques),A(1),I("ngIf",o.printCompetencesSummary),A(1),I("ngIf",o.devoirDetails.classe))},dependencies:[_n,zt,Tb,sg,ul,Ah],styles:[".devoir[_ngcontent-%COMP%]{width:100%;min-height:100%;background-color:#fff;padding:0;margin:0;font-family:calibri}.title[_ngcontent-%COMP%]{width:100%;padding:5px;margin-bottom:15px;box-sizing:border-box;border-bottom:1px solid #AAA;font-weight:700}.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{width:70%;display:inline-block;box-sizing:border-box;text-align:left;font-size:2.1em}.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:30%;display:inline-block;box-sizing:border-box;text-align:right;font-size:1.2em;color:#aaa}.statistiques[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%], .bilan[_ngcontent-%COMP%]{width:100%;margin:10px auto;box-sizing:border-box;background-color:#fcfcfc;padding:10px;border:1px solid #E5E5E5}.statistiques[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .bilan[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#e5e5e5;font-size:1.2em;color:#999}.statistiques[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child, .competences[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child, .bilan[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{color:#666;background-color:#d5d5d5}.statistiques[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .statistiques[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:25%;text-align:center}.competences[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .competences[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.bilan[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f0f0f0}.bilan[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:1.1em;text-align:left;min-width:6cm}.s2_bilan[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){text-align:left;font-size:.9em}.s2_bilan[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5)   p[_ngcontent-%COMP%]{margin:0}"]}),t})()}]}];let CY=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t}),t.\u0275inj=Dt({imports:[s2.forRoot(wY),s2]}),t})();function kY(t,n){1&t&&R(0,"Les \xe9l\xe8ves et crit\xe8res non \xe9valu\xe9s seront \xe9galement export\xe9s (normallement pas utile sauf pour \xe9ventuellement avoir un export plus exhaustif).")}function xY(t,n){1&t&&R(0,"L'en-t\xeate du devoir de chaque \xe9l\xe8ve contiendra un encart avec la note brute (sans application de l'arrondi et du mode de notation).")}function EY(t,n){1&t&&R(0,"L'en-t\xeate du devoir de chaque \xe9l\xe8ve contiendra un encart avec la note bulletin (avec application de l'arrondi et du mode de notation).")}function TY(t,n){1&t&&R(0,"L'en-t\xeate du devoir contient le commentaire de notation individualis\xe9 pour chaque \xe9l\xe8ve.")}function DY(t,n){1&t&&R(0,"Chaque devoir export\xe9 contiendra une matrice que indique les statistiques de la classe.")}function MY(t,n){1&t&&R(0,"Chaque devoir export\xe9 contiendra une matrice que r\xe9sume les notes exercice par exercice.")}function SY(t,n){1&t&&R(0,"Chaque devoir export\xe9 contiendra une matrice de comp\xe9tences que r\xe9sume l'acquisition de chaque comp\xe9tence pour l'\xe9l\xe8ve dans le devoir.")}let AY=(()=>{class t{constructor(e,o){this.modal=e,this.printService=o,this.printNotesNotValidated=!1,this.printNotesBrutes=!0,this.printNotesBulletin=!0,this.printCommentaire=!0,this.printDevoirStatistiques=!0,this.printExerciceSummary=!1,this.printCompetencesSummary=!0}ngOnInit(){}printNotations(){this.printService.printDocument("notations",[this.printNotesNotValidated,this.printNotesBrutes,this.printNotesBulletin,this.printCommentaire,this.printDevoirStatistiques,this.printExerciceSummary,this.printCompetencesSummary]),this.modal.close("ok")}}return t.\u0275fac=function(e){return new(e||t)(z(jo),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-print-notations"]],decls:55,vars:14,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"funkyradio"],[1,"funkyradio-primary"],["type","checkbox","name","printNotesNotValidated","id","printNotesNotValidated",3,"ngModel","ngModelChange"],["popContent1",""],["for","printNotesNotValidated","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printNotesBrutes","id","printNotesBrutes",3,"ngModel","ngModelChange"],["popContent2",""],["for","printNotesBrutes","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printNotesBulletin","id","printNotesBulletin",3,"ngModel","ngModelChange"],["popContent3",""],["for","printNotesBulletin","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printCommentaire","id","printCommentaire",3,"ngModel","ngModelChange"],["popContent7",""],["for","printCommentaire","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printDevoirStatistiques","id","printDevoirStatistiques",3,"ngModel","ngModelChange"],["popContent6",""],["for","printDevoirStatistiques","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printExerciceSummary","id","printExerciceSummary",3,"ngModel","ngModelChange"],["popContent5",""],["for","printExerciceSummary","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printCompetencesSummary","id","printCompetencesSummary",3,"ngModel","ngModelChange"],["popContent8",""],["for","printCompetencesSummary","triggers","hover",3,"ngbPopover"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"]],template:function(e,o){if(1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Configuration de l'export des notes"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),K("ngModelChange",function(l){return o.printNotesNotValidated=l}),M(),H(10,kY,1,0,"ng-template",null,8,Xe),x(12,"label",9),R(13,"Inclure les \xe9l\xe8ves et crit\xe8res non \xe9valu\xe9s"),M()(),x(14,"div",6)(15,"input",10),K("ngModelChange",function(l){return o.printNotesBrutes=l}),M(),H(16,xY,1,0,"ng-template",null,11,Xe),x(18,"label",12),R(19,"Afficher les notes r\xe9elles"),M()(),x(20,"div",6)(21,"input",13),K("ngModelChange",function(l){return o.printNotesBulletin=l}),M(),H(22,EY,1,0,"ng-template",null,14,Xe),x(24,"label",15),R(25,"Afficher les notes bulletin"),M()(),x(26,"div",6)(27,"input",16),K("ngModelChange",function(l){return o.printCommentaire=l}),M(),H(28,TY,1,0,"ng-template",null,17,Xe),x(30,"label",18),R(31,"Afficher les commentaires de notation"),M()(),x(32,"div",6)(33,"input",19),K("ngModelChange",function(l){return o.printDevoirStatistiques=l}),M(),H(34,DY,1,0,"ng-template",null,20,Xe),x(36,"label",21),R(37,"Ins\xe9rer les statistiques g\xe9n\xe9rales"),M()(),x(38,"div",6)(39,"input",22),K("ngModelChange",function(l){return o.printExerciceSummary=l}),M(),H(40,MY,1,0,"ng-template",null,23,Xe),x(42,"label",24),R(43,"Ins\xe9rer le r\xe9sum\xe9 par exercice"),M()(),x(44,"div",6)(45,"input",25),K("ngModelChange",function(l){return o.printCompetencesSummary=l}),M(),H(46,SY,1,0,"ng-template",null,26,Xe),x(48,"label",27),R(49,"Ins\xe9rer la matrice de comp\xe9tences"),M()()()(),x(50,"div",28)(51,"button",29),K("click",function(){return o.modal.dismiss("cancel")}),R(52,"Annuler"),M(),x(53,"button",30),K("click",function(){return o.printNotations()}),R(54,"EXPORTER"),M()()),2&e){const s=Oe(11),l=Oe(17),h=Oe(23),p=Oe(29),m=Oe(35),v=Oe(41),C=Oe(47);A(9),I("ngModel",o.printNotesNotValidated),A(3),I("ngbPopover",s),A(3),I("ngModel",o.printNotesBrutes),A(3),I("ngbPopover",l),A(3),I("ngModel",o.printNotesBulletin),A(3),I("ngbPopover",h),A(3),I("ngModel",o.printCommentaire),A(3),I("ngbPopover",p),A(3),I("ngModel",o.printDevoirStatistiques),A(3),I("ngbPopover",m),A(3),I("ngModel",o.printExerciceSummary),A(3),I("ngbPopover",v),A(3),I("ngModel",o.printCompetencesSummary),A(3),I("ngbPopover",C)}},dependencies:[Pb,gl,_a,Bg],styles:['@charset "UTF-8";.funkyradio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{clear:both;overflow:hidden}.funkyradio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;border-radius:4px;border:1px solid #D1D3D4;font-weight:400}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty{display:none}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty ~ label[_ngcontent-%COMP%]{position:relative;color:#777;line-height:2.5em;text-indent:3.25em;margin-top:1em;cursor:pointer;-webkit-user-select:none;-webkit-user-select--moz-user-select:none;-webkit-user-select--moz-user-select--ms-user-select:none;-webkit-user-select--moz-user-select--ms-user-select-user-select:none}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty ~ label[_ngcontent-%COMP%]:before{position:absolute;display:block;top:0;bottom:0;left:0;content:"";width:2.5em;background:#D1D3D4;border-radius:3px 0 0 3px}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked) ~ label[_ngcontent-%COMP%]{color:#888}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked) ~ label[_ngcontent-%COMP%]:before{content:"\\2714";text-indent:.9em;color:#c2c2c2}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{color:#333}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{content:"\\2714";text-indent:.9em;color:#333;background-color:#ccc}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]:before{box-shadow:0 0 0 3px #999}.funkyradio-default[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#333;background-color:#ccc}.funkyradio-primary[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#007bff}.funkyradio-success[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#5cb85c}.funkyradio-danger[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#d9534f}.funkyradio-warning[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#f0ad4e}.funkyradio-info[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#5bc0de}']}),t})();function OY(t,n){1&t&&R(0,"Les \xe9l\xe8ves et crit\xe8res non \xe9valu\xe9s seront \xe9galement au bilan (normallement pas utile sauf pour \xe9ventuellement avoir un export plus exhaustif).")}function PY(t,n){1&t&&R(0,"Le bilan contiendra la note brute (sans application de l'arrondi et du mode de notation).")}function NY(t,n){1&t&&R(0,"Le bilan contiendra la note bulletin (avec application de l'arrondi et du mode de notation).")}function IY(t,n){1&t&&R(0,"Le bilan contiendra le commentaire de notation individualis\xe9 pour chaque \xe9l\xe8ve.")}function RY(t,n){1&t&&R(0,"Le bilan contiendra une matrice que indique les statistiques de la classe.")}function FY(t,n){1&t&&R(0,"Le bilan contiendra une matrice de comp\xe9tences que r\xe9sume l'acquisition de chaque comp\xe9tence.")}let LY=(()=>{class t{constructor(e,o){this.modal=e,this.printService=o,this.printNotesNotValidated=!1,this.printNotesBrutes=!0,this.printNotesBulletin=!0,this.printCommentaire=!0,this.printDevoirStatistiques=!0,this.printCompetencesSummary=!0}ngOnInit(){}printBilan(){this.printService.printDocument("bilan",[this.printNotesNotValidated,this.printNotesBrutes,this.printNotesBulletin,this.printCommentaire,this.printDevoirStatistiques,this.printCompetencesSummary]),this.modal.close("ok")}}return t.\u0275fac=function(e){return new(e||t)(z(jo),z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-print-bilan"]],decls:49,vars:12,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"funkyradio"],[1,"funkyradio-primary"],["type","checkbox","name","printNotesNotValidated","id","printNotesNotValidated",3,"ngModel","ngModelChange"],["popContent1",""],["for","printNotesNotValidated","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printNotesBrutes","id","printNotesBrutes",3,"ngModel","ngModelChange"],["popContent2",""],["for","printNotesBrutes","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printNotesBulletin","id","printNotesBulletin",3,"ngModel","ngModelChange"],["popContent3",""],["for","printNotesBulletin","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printCommentaire","id","printCommentaire",3,"ngModel","ngModelChange"],["popContent7",""],["for","printCommentaire","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printDevoirStatistiques","id","printDevoirStatistiques",3,"ngModel","ngModelChange"],["popContent6",""],["for","printDevoirStatistiques","triggers","hover",3,"ngbPopover"],["type","checkbox","name","printCompetencesSummary","id","printCompetencesSummary",3,"ngModel","ngModelChange"],["popContent8",""],["for","printCompetencesSummary","triggers","hover",3,"ngbPopover"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"]],template:function(e,o){if(1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Configuration du bilan des notes"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),K("ngModelChange",function(l){return o.printNotesNotValidated=l}),M(),H(10,OY,1,0,"ng-template",null,8,Xe),x(12,"label",9),R(13,"Inclure les \xe9l\xe8ves et crit\xe8res non \xe9valu\xe9s"),M()(),x(14,"div",6)(15,"input",10),K("ngModelChange",function(l){return o.printNotesBrutes=l}),M(),H(16,PY,1,0,"ng-template",null,11,Xe),x(18,"label",12),R(19,"Afficher les notes r\xe9elles"),M()(),x(20,"div",6)(21,"input",13),K("ngModelChange",function(l){return o.printNotesBulletin=l}),M(),H(22,NY,1,0,"ng-template",null,14,Xe),x(24,"label",15),R(25,"Afficher les notes bulletin"),M()(),x(26,"div",6)(27,"input",16),K("ngModelChange",function(l){return o.printCommentaire=l}),M(),H(28,IY,1,0,"ng-template",null,17,Xe),x(30,"label",18),R(31,"Afficher les commentaires de notation"),M()(),x(32,"div",6)(33,"input",19),K("ngModelChange",function(l){return o.printDevoirStatistiques=l}),M(),H(34,RY,1,0,"ng-template",null,20,Xe),x(36,"label",21),R(37,"Ins\xe9rer les statistiques g\xe9n\xe9rales"),M()(),x(38,"div",6)(39,"input",22),K("ngModelChange",function(l){return o.printCompetencesSummary=l}),M(),H(40,FY,1,0,"ng-template",null,23,Xe),x(42,"label",24),R(43,"Ins\xe9rer la matrice de comp\xe9tences"),M()()()(),x(44,"div",25)(45,"button",26),K("click",function(){return o.modal.dismiss("cancel")}),R(46,"Annuler"),M(),x(47,"button",27),K("click",function(){return o.printBilan()}),R(48,"CONSULTER"),M()()),2&e){const s=Oe(11),l=Oe(17),h=Oe(23),p=Oe(29),m=Oe(35),v=Oe(41);A(9),I("ngModel",o.printNotesNotValidated),A(3),I("ngbPopover",s),A(3),I("ngModel",o.printNotesBrutes),A(3),I("ngbPopover",l),A(3),I("ngModel",o.printNotesBulletin),A(3),I("ngbPopover",h),A(3),I("ngModel",o.printCommentaire),A(3),I("ngbPopover",p),A(3),I("ngModel",o.printDevoirStatistiques),A(3),I("ngbPopover",m),A(3),I("ngModel",o.printCompetencesSummary),A(3),I("ngbPopover",v)}},dependencies:[Pb,gl,_a,Bg],styles:['@charset "UTF-8";.funkyradio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{clear:both;overflow:hidden}.funkyradio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;border-radius:4px;border:1px solid #D1D3D4;font-weight:400}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty{display:none}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty ~ label[_ngcontent-%COMP%]{position:relative;color:#777;line-height:2.5em;text-indent:3.25em;margin-top:1em;cursor:pointer;-webkit-user-select:none;-webkit-user-select--moz-user-select:none;-webkit-user-select--moz-user-select--ms-user-select:none;-webkit-user-select--moz-user-select--ms-user-select-user-select:none}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:empty ~ label[_ngcontent-%COMP%]:before{position:absolute;display:block;top:0;bottom:0;left:0;content:"";width:2.5em;background:#D1D3D4;border-radius:3px 0 0 3px}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked) ~ label[_ngcontent-%COMP%]{color:#888}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover:not(:checked) ~ label[_ngcontent-%COMP%]:before{content:"\\2714";text-indent:.9em;color:#c2c2c2}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{color:#333}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{content:"\\2714";text-indent:.9em;color:#333;background-color:#ccc}.funkyradio[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]:before{box-shadow:0 0 0 3px #999}.funkyradio-default[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#333;background-color:#ccc}.funkyradio-primary[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#007bff}.funkyradio-success[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#5cb85c}.funkyradio-danger[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#d9534f}.funkyradio-warning[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#f0ad4e}.funkyradio-info[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{color:#fff;background-color:#5bc0de}']}),t})(),BY=(()=>{class t{constructor(){}transform(e,o,s){let h,p,l=[];for([h,p]of Object.entries(e))p.modifiable===o&&p.categorie===s&&(p.id=h,l.push(p));return l}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"filterConfiguration",type:t,pure:!0}),t})();function VY(t,n){if(1&t&&(x(0,"i",8),R(1,"category"),M(),x(2,"span",9),R(3),M()),2&t){const e=B().$implicit;A(3),ge(e)}}function jY(t,n){if(1&t){const e=ke();x(0,"div",11)(1,"div",12)(2,"span",13),R(3),M()(),x(4,"input",14),K("change",function(s){ae(e);const l=B().$implicit;return ne(B(4).setValue(l.id,s))})("ngModelChange",function(s){return ae(e),ne(B().$implicit.value=s)}),M(),x(5,"div",15)(6,"button",16),K("click",function(){ae(e);const s=B().$implicit;return ne(B(4).reset(s.id))}),x(7,"i",17),R(8,"cancel"),M()()()()}if(2&t){const e=B().$implicit;A(2),Zd("title",e.id),A(1),ge(e.title),A(1),I("ngModel",e.value)}}function HY(t,n){if(1&t&&(x(0,"div"),H(1,jY,9,3,"div",10),M()),2&t){const e=n.$implicit;A(1),I("ngIf",e.modifiable)}}function zY(t,n){if(1&t&&(H(0,HY,2,1,"div",5),xe(1,"filterConfiguration")),2&t){const e=B().$implicit;I("ngForOf",oh(1,1,B(2).configurationService.configurationItems,!0,e))}}function $Y(t,n){1&t&&(x(0,"ngb-panel"),H(1,VY,4,1,"ng-template",6),H(2,zY,2,5,"ng-template",7),M())}function UY(t,n){if(1&t){const e=ke();x(0,"section")(1,"button",1),K("click",function(){return ae(e),ne(B().toggleVisibility())}),x(2,"i",2),R(3,"close"),M()(),x(4,"h1"),R(5,"Configuration"),M(),x(6,"ngb-accordion",3,4),H(8,$Y,3,0,"ngb-panel",5),M()()}if(2&t){const e=B();A(8),I("ngForOf",e.configurationService.categories)}}let GY=(()=>{class t{constructor(e){this.configurationService=e,this.visible=!1}ngOnInit(){this.visible=!1}toggleVisibility(){this.visible=!this.visible}reset(e){this.configurationService.initValue(e)}setValue(e,o){this.configurationService.setValue(e,o.target.value)}}return t.\u0275fac=function(e){return new(e||t)(z(eo))},t.\u0275cmp=$e({type:t,selectors:[["app-configuration"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","close","title","Fermer",3,"click"],[1,"material-icons","md-dark","md-36"],["activeIds","ngb-panel-0"],["acc","ngbAccordion"],[4,"ngFor","ngForOf"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"material-icons","md-48"],[1,"configuration-category"],["class","input-group mb-3",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text",3,"title"],[1,"form-control",3,"ngModel","change","ngModelChange"],[1,"input-group-append"],["type","button","title","Revenir \xe0 la valeur par d\xe9faut",1,"btn","btn-danger",3,"click"],[1,"material-icons"]],template:function(e,o){1&e&&H(0,UY,9,1,"section",0),2&e&&I("ngIf",o.visible)},dependencies:[_n,zt,Vc,gl,_a,h0,Ag,u0,d0,BY],styles:["section[_ngcontent-%COMP%]{height:100%;width:100%;position:fixed;top:0;left:0;box-sizing:border-box;color:#878;overflow-y:auto;overflow-x:hidden;z-index:5000;background-color:#f0f0f0;padding:20px}button#close[_ngcontent-%COMP%]{position:fixed;top:0;display:inline-block;margin:10px 0;cursor:pointer;transition:all .2s;border:none;height:40px;background:transparent}button#close[_ngcontent-%COMP%]:hover{background-color:#e5e5e5;border-radius:20px}h1[_ngcontent-%COMP%]{text-align:center;width:100%;font-size:1.5em;font-family:Segoe UI Black}.input-group-text[_ngcontent-%COMP%]{width:400px}button.btn[_ngcontent-%COMP%]{padding:0 10px}button.btn[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:24px;margin-top:5px}.configuration-category[_ngcontent-%COMP%]{font-size:1.3em;text-transform:uppercase;line-height:1;vertical-align:top;font-weight:700}"]}),t})();const qY=["fileInput"];function WY(t,n){1&t&&(x(0,"i",20),R(1,"more_vert"),M())}function KY(t,n){1&t&&(x(0,"i",20),R(1,"close"),M())}function JY(t,n){1&t&&(x(0,"span",21),R(1,"!"),M())}function YY(t,n){1&t&&(x(0,"span",22),R(1,"Attention !"),M())}const w2=function(t){return{open:t}},C2=function(t,n){return{"btn-primary":t,"btn-secondary":n}},Oh=function(t){return{disabled:t}};let QY=(()=>{class t{constructor(e,o,s,l,h,p,m){this.devoirService=e,this.classeService=o,this.messageService=s,this.configurationService=l,this.grilleService=h,this.printService=p,this.modalService=m,this.toggleModeDevoir=new Te,this.visible=!0,this.appVersionMenu="2.0.3",this.appNameMenu="my-controle",this.mode="",this.mode=this.configurationService.getValue("defaultMode")}ngOnInit(){this.visible=!0,this.devoirService.loadNewDevoirSub.subscribe(e=>{!0===e&&(this.close(),this.toggleMode(this.configurationService.getValue("defaultMode")))})}toggleVisibility(){this.visible=!this.visible}close(){this.visible=!1}toggleMode(e){"notation"===e&&null===this.devoirService.devoir.classe&&(e="edition"),this.mode=e,this.toggleModeDevoir.emit(this.mode)}openFile(e){this.devoirService.loadLocalFile(e.target)}openNewDevoir(){this.devoirService.clearDevoir(),this.close()}openExistingDevoir(){const e=new MouseEvent("click",{bubbles:!0});this.fileInput.nativeElement.dispatchEvent(e),this.close()}saveCurrentDevoir(){this.devoirService.saveDevoir(),this.close()}checkDevoir(){this.devoirService.checkDevoir(),this.close()}printDevoir(){this.printService.printDocument("devoir")}printCorrection(){this.printService.printDocument("correction")}printNotations(){this.modalService.open(AY,{centered:!0}).result.then(o=>{},o=>{})}printBilan(){this.modalService.open(LY,{centered:!0}).result.then(o=>{},o=>{})}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(ny),z(ar),z(eo),z(ty),z(xa),z(wl))},t.\u0275cmp=$e({type:t,selectors:[["app-menu"]],viewQuery:function(e,o){if(1&e&&ha(qY,5),2&e){let s;Zt(s=en())&&(o.fileInput=s.first)}},outputs:{toggleModeDevoir:"toggleModeDevoir"},decls:81,vars:41,consts:[["id","menuButton","title","Menu",3,"ngClass","click"],["class","material-icons md-dark md-36",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn-toolbar","justify-content-between","bg-light","p-2"],[1,"btn-group"],["type","button",1,"btn",3,"ngClass","disabled","title","click"],[3,"ngClass"],[3,"click"],[1,"material-icons","md-36","blueicon"],[3,"ngClass","click"],["class","badge badge-danger","ngbPopover","Il existe des modifications non sauvegard\xe9es. Vous devriez enregistrer votre devoir !","triggers","mouseenter:mouseleave","popoverTitle","Attention !",4,"ngIf"],["title","Impression \xe0 distribuer aux \xe9l\xe8ves pour un devoir",3,"ngClass","click"],[1,"material-icons","md-36","greenicon"],["title","Correction pour le professeur pour \xe9valuer en directe",3,"ngClass","click"],["title","Exporter les devoirs not\xe9s - un devoir par \xe9l\xe8ve",3,"ngClass","click"],["title","Exporter le bilan des notes - une matrice unique globale",3,"ngClass","click"],[1,"material-icons","md-36"],["type","file","hidden","",3,"change"],["fileInput",""],["configuration",""],[1,"material-icons","md-dark","md-36"],[1,"badge","badge-danger"],["ngbPopover","Il existe des modifications non sauvegard\xe9es. Vous devriez enregistrer votre devoir !","triggers","mouseenter:mouseleave","popoverTitle","Attention !",1,"badge","badge-danger"]],template:function(e,o){if(1&e){const s=ke();x(0,"button",0),K("click",function(){return o.toggleVisibility()}),H(1,WY,2,0,"i",1),H(2,KY,2,0,"i",1),H(3,JY,2,0,"span",2),M(),x(4,"div",3)(5,"div",4)(6,"button",5),K("click",function(){return o.toggleMode("edition")}),R(7,"Edition"),M(),x(8,"button",5),K("click",function(){return o.toggleMode("notation")}),R(9,"Notation"),M()()(),x(10,"section",6)(11,"span"),R(12,"myControle"),M(),x(13,"div")(14,"h3"),R(15,"Gestion des devoirs"),M(),x(16,"div",7),K("click",function(){return o.openNewDevoir()}),x(17,"i",8),R(18,"note_add"),M(),x(19,"span"),R(20,"Nouveau devoir"),M()(),x(21,"div",7),K("click",function(){return o.openExistingDevoir()}),x(22,"i",8),R(23,"folder_open"),M(),x(24,"span"),R(25,"Ouvrir un devoir"),M()(),x(26,"div",9),K("click",function(){return o.devoirService.devoir?o.checkDevoir():null}),x(27,"i",8),R(28,"playlist_add_check"),M(),x(29,"span"),R(30,"V\xe9rifier"),M()(),x(31,"div",9),K("click",function(){return o.devoirService.devoir?o.saveCurrentDevoir():null}),x(32,"i",8),R(33,"save"),M(),x(34,"span"),R(35,"Enregistrer\xa0"),M(),H(36,YY,2,0,"span",10),M(),x(37,"div",11),K("click",function(){return o.printDevoir()}),x(38,"i",12),R(39,"local_printshop"),M(),x(40,"span"),R(41,"Imprimer le devoir"),M()(),x(42,"div",13),K("click",function(){return o.printCorrection()}),x(43,"i",12),R(44,"ballot"),M(),x(45,"span"),R(46,"Imprimer la correction"),M()(),x(47,"div",14),K("click",function(){return o.printNotations()}),x(48,"i",12),R(49,"present_to_all"),M(),x(50,"span"),R(51,"Exporter les notes"),M()(),x(52,"div",15),K("click",function(){return o.printBilan()}),x(53,"i",12),R(54,"outlined_flag"),M(),x(55,"span"),R(56,"Consulter le bilan"),M()(),x(57,"h3"),R(58,"Configuration"),M(),x(59,"div",7),K("click",function(){return ae(s),ne(Oe(80).toggleVisibility())}),x(60,"i",16),R(61,"settings_applications"),M(),x(62,"span"),R(63,"Pr\xe9f\xe9rences"),M()(),x(64,"div",7),K("click",function(){return o.classeService.showClasse()}),x(65,"i",16),R(66,"group"),M(),x(67,"span"),R(68,"Consulter les classes"),M()(),x(69,"div",7),K("click",function(){return o.grilleService.showGrille()}),x(70,"i",16),R(71,"emoji_events"),M(),x(72,"span"),R(73,"Consulter les grilles"),M()(),x(74,"input",17,18),K("change",function(h){return o.openFile(h)}),M()(),x(76,"div")(77,"div"),R(78),M()()(),be(79,"app-configuration",null,19)}2&e&&(I("ngClass",Ee(19,w2,o.visible)),A(1),I("ngIf",0==o.visible),A(1),I("ngIf",1==o.visible),A(1),I("ngIf",o.devoirService.docIsEdited&&0==o.visible),A(3),I("ngClass",Cs(21,C2,"edition"==o.mode,"edition"!=o.mode))("disabled",null==o.devoirService.devoir)("title",null==o.devoirService.devoir?"Aucun devoir ouvert":"Editer le contenu du devoir"),A(2),I("ngClass",Cs(24,C2,"notation"==o.mode,"notation"!=o.mode))("disabled",null==o.devoirService.devoir||null==o.devoirService.devoir.classe)("title",null==(null==o.devoirService.devoir?null:o.devoirService.devoir.classe)?"Aucune classe d\xe9finie":"Noter la classe"),A(2),I("ngClass",Ee(27,w2,o.visible)),A(16),I("ngClass",Ee(29,Oh,void 0===o.devoirService.devoir)),A(5),I("ngClass",Ee(31,Oh,void 0===o.devoirService.devoir)),A(5),I("ngIf",o.devoirService.docIsEdited),A(1),I("ngClass",Ee(33,Oh,void 0===o.devoirService.devoir)),A(5),I("ngClass",Ee(35,Oh,void 0===o.devoirService.devoir)),A(5),I("ngClass",Ee(37,Oh,void 0===o.devoirService.devoir||0==o.devoirService.devoir.notations.length)),A(5),I("ngClass",Ee(39,Oh,void 0===o.devoirService.devoir||0==o.devoirService.devoir.notations.length)),A(26),Pt("\xa9 2020 - Copyright HubR Design - Tous droits r\xe9serv\xe9s - ",o.appVersionMenu,""))},dependencies:[Lo,zt,Bg,GY],styles:[".material-icons.blueicon[_ngcontent-%COMP%]{color:#427aa1}.material-icons.greenicon[_ngcontent-%COMP%]{color:#679436}.material-icons.whiteicon[_ngcontent-%COMP%]{color:#fff}#menuButton[_ngcontent-%COMP%]{position:fixed;top:0;display:inline-block;margin:7px;cursor:pointer;transition:all .2s;z-index:1200;border:1px solid transparent;height:39px;background:transparent}#menuButton[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}#menuButton.open[_ngcontent-%COMP%]{transform:rotate(90deg)}#menuButton[_ngcontent-%COMP%] > span.badge[_ngcontent-%COMP%]{position:absolute;right:0}.btn-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{margin-left:50px}.btn-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{margin-right:45px}section[_ngcontent-%COMP%]{height:100%;width:0px;position:fixed;top:0;left:0;box-sizing:border-box;color:#878;border-right:1px solid #e5e5e5;box-shadow:5px 0 5px #888;overflow-y:auto;overflow-x:hidden;z-index:1100;transition:all .2s;background-image:url(/assets/index.png);background-repeat:no-repeat;background-size:120px;background-position:center 9px;background-color:#f0f0f0}section.open[_ngcontent-%COMP%]{width:300px}section[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{margin-top:130px;display:inline-block;text-align:center;width:100%;font-size:1.5em;font-family:Segoe UI Black;color:#3abca7}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > h3[_ngcontent-%COMP%]{padding:20px 0 5px;border-bottom:1px solid #D0D0D0;margin-bottom:0}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > div[_ngcontent-%COMP%]{width:100%;border:1px solid #D0D0D0;background:#F9F9F9;cursor:pointer;padding:0;border-width:0 0 1px 0}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > div[_ngcontent-%COMP%]:hover{background:#FFF;transition:all .2s}.disabled[_ngcontent-%COMP%]{color:#aaa;opacity:.5;cursor:not-allowed!important}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:middle;padding:3px;background-color:#e8e8e8;margin-right:4px}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){padding:2px 0}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{position:absolute;bottom:10px;font-size:.7em;width:100%;text-align:center}"]}),t})();function XY(t,n){if(1&t&&(x(0,"span",16),R(1),M()),2&t){const e=B().$implicit;A(1),Pt("",e.criteres," crit\xe8res")}}function ZY(t,n){1&t&&(x(0,"span",17),R(1,"Non utilis\xe9"),M())}const eQ=function(t){return{"list-group-item-danger":t,"list-group-item":!0}};function tQ(t,n){if(1&t&&(x(0,"li",13),R(1),H(2,XY,2,1,"span",14),H(3,ZY,2,0,"span",15),M()),2&t){const e=n.$implicit;I("ngClass",Ee(4,eQ,e.criteres>0)),A(1),Pt("",e.capacite.id," "),A(1),I("ngIf",e.criteres>0),A(1),I("ngIf",0==e.criteres)}}function nQ(t,n){if(1&t&&(x(0,"div")(1,"p"),R(2,"Les capacit\xe9s suivantes n'existent plus dans la nouvelle grille : "),M(),x(3,"ul",11),H(4,tQ,4,6,"li",12),M()()),2&t){const e=B();A(4),I("ngForOf",e.impactedCriteres)}}function iQ(t,n){1&t&&R(0," Toutes les capacit\xe9s utilis\xe9es seront remplac\xe9es sans affecter le devoir. ")}let oQ=(()=>{class t{constructor(e,o,s,l){this.messageService=e,this.devoirService=o,this.grilleService=s,this.modal=l,this.grilleConfirm=null,this.removedCapacites=[],this.impactedCriteres=[]}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.grilleConfirm&&this.devoirService.devoir.grille?(this.removedCapacites=this.grilleService.diffCapacitesInGrilles(this.devoirService.devoir.grille,this.grilleConfirm),this.impactedCriteres=this.devoirService.getImpactedCriteres(this.removedCapacites)):setTimeout(()=>{this.updateDetails()},1e3)}}return t.\u0275fac=function(e){return new(e||t)(z(ar),z(to),z(ty),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-confirm-grid"]],inputs:{grilleConfirm:"grilleConfirm"},decls:21,vars:3,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-danger"],[4,"ngIf","ngIfElse"],["noRemovedCapacites",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"],[1,"list-group"],["class","d-flex justify-content-between align-items-center",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center",3,"ngClass"],["class","badge badge-danger badge-pill",4,"ngIf"],["class","badge badge-warning badge-pill",4,"ngIf"],[1,"badge","badge-danger","badge-pill"],[1,"badge","badge-warning","badge-pill"]],template:function(e,o){if(1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Modification de la grille"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"p")(8,"strong"),R(9,"\xcates-vous s\xfbr de vouloir modifier la grille actuelle par la nouvelle grille "),x(10,"span",5),R(11),M(),R(12," ?"),M()(),H(13,nQ,5,1,"div",6),H(14,iQ,1,0,"ng-template",null,7,Xe),M(),x(16,"div",8)(17,"button",9),K("click",function(){return o.modal.dismiss("cancel")}),R(18,"Non"),M(),x(19,"button",10),K("click",function(){return o.modal.close("ok")}),R(20,"OUI"),M()()),2&e){const s=Oe(15);A(11),ge(o.grilleConfirm?o.grilleConfirm.titre:""),A(2),I("ngIf",o.impactedCriteres.length>0)("ngIfElse",s)}},dependencies:[Lo,_n,zt]}),t})();function rQ(t,n){1&t&&(x(0,"span",16),R(1,"Not\xe9"),M())}function sQ(t,n){1&t&&(x(0,"span",17),R(1,"Non not\xe9"),M())}const aQ=function(t){return{"list-group-item-danger":t,"list-group-item":!0}};function lQ(t,n){if(1&t&&(x(0,"li",13),R(1),H(2,rQ,2,0,"span",14),H(3,sQ,2,0,"span",15),M()),2&t){const e=n.$implicit;I("ngClass",Ee(4,aQ,e.notation)),A(1),Pt("",e.eleve," "),A(1),I("ngIf",e.notation),A(1),I("ngIf",0==e.notation)}}function cQ(t,n){if(1&t&&(x(0,"div")(1,"p"),R(2,"Les \xe9l\xe8ves suivants n'existent plus dans la nouvelle classe : "),M(),x(3,"ul",11),H(4,lQ,4,6,"li",12),M()()),2&t){const e=B();A(4),I("ngForOf",e.impactedNotations)}}function uQ(t,n){1&t&&R(0," Tous les \xe9l\xe8ves seront remplac\xe9s sans affecter la notation du devoir. ")}let dQ=(()=>{class t{constructor(e,o,s,l){this.messageService=e,this.devoirService=o,this.classeService=s,this.modal=l,this.classeConfirm=null,this.removedEleves=[],this.impactedNotations=[]}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.classeConfirm&&this.devoirService.devoir.classe?(this.removedEleves=this.classeService.diffElevesInClasses(this.devoirService.devoir.classe,this.classeConfirm),this.impactedNotations=this.devoirService.getImpactedNotations(this.removedEleves)):setTimeout(()=>{this.updateDetails()},1e3)}}return t.\u0275fac=function(e){return new(e||t)(z(ar),z(to),z(ny),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-confirm-classe"]],inputs:{classeConfirm:"classeConfirm"},decls:21,vars:3,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-danger"],[4,"ngIf","ngIfElse"],["noRemovedEleves",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"click"],[1,"list-group"],["class","d-flex justify-content-between align-items-center",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center",3,"ngClass"],["class","badge badge-danger badge-pill",4,"ngIf"],["class","badge badge-warning badge-pill",4,"ngIf"],[1,"badge","badge-danger","badge-pill"],[1,"badge","badge-warning","badge-pill"]],template:function(e,o){if(1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Modification de la classe"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"p")(8,"strong"),R(9,"\xcates-vous s\xfbr de vouloir modifier la classe actuelle par la nouvelle classe "),x(10,"span",5),R(11),M(),R(12," ?"),M()(),H(13,cQ,5,1,"div",6),H(14,uQ,1,0,"ng-template",null,7,Xe),M(),x(16,"div",8)(17,"button",9),K("click",function(){return o.modal.dismiss("cancel")}),R(18,"Non"),M(),x(19,"button",10),K("click",function(){return o.modal.close("ok")}),R(20,"OUI"),M()()),2&e){const s=Oe(15);A(11),ge(o.classeConfirm?o.classeConfirm.titre:""),A(2),I("ngIf",o.impactedNotations.length>0)("ngIfElse",s)}},dependencies:[Lo,_n,zt]}),t})(),hQ=(()=>{class t extends y0{toInteger(e){return parseInt(`${e}`,10)}isNumber(e){return!isNaN(this.toInteger(e))}padNumber(e){return this.isNumber(e)?`0${e}`.slice(-2):""}parse(e){if(e){const o=e.trim().split("/");if(1===o.length&&this.isNumber(o[0]))return{day:this.toInteger(o[0]),month:0,year:0};if(2===o.length&&this.isNumber(o[0])&&this.isNumber(o[1]))return{day:this.toInteger(o[0]),month:this.toInteger(o[1]),year:0};if(3===o.length&&this.isNumber(o[0])&&this.isNumber(o[1])&&this.isNumber(o[2]))return{day:this.toInteger(o[0]),month:this.toInteger(o[1]),year:this.toInteger(o[2])}}return null}format(e){return e?`${this.isNumber(e.day)?this.padNumber(e.day):""}/${this.isNumber(e.month)?this.padNumber(e.month):""}/${e.year}`:""}}return t.\u0275fac=function(){let n;return function(o){return(n||(n=pn(t)))(o||t)}}(),t.\u0275prov=de({token:t,factory:t.\u0275fac}),t})();function fQ(t,n){1&t&&(x(0,"i",8),R(1,"info"),M())}function pQ(t,n){1&t&&(x(0,"i",9),R(1,"close"),M())}function gQ(t,n){1&t&&(x(0,"i",8),R(1,"tune"),M(),x(2,"span"),R(3,"Configuration du devoir"),M())}function mQ(t,n){if(1&t){const e=ke();x(0,"button",40),K("click",function(){ae(e);const s=B(2);return ne(s.devoirService.devoir.creationDate=s.today)}),R(1,"Aujourd'hui"),M()}}function _Q(t,n){1&t&&(R(0,"Arrondi appliqu\xe9 \xe0 la note finale bulletin. "),be(1,"hr"),x(2,"small"),R(3,"Exemple : si la note est de 18.25 est l'arrondi est 0.5 alors la note finale est 18.5."),M())}function vQ(t,n){1&t&&R(0,"Arrondi de notation")}function bQ(t,n){1&t&&R(0),2&t&&ge(B(2).notationModeNormalContent)}function yQ(t,n){1&t&&R(0),2&t&&ge(B(2).notationModeNormalTitre)}function wQ(t,n){1&t&&R(0,"Note cible obtenue apr\xe8s application du mode transformation.")}function CQ(t,n){1&t&&R(0,"Note cible")}function kQ(t,n){if(1&t){const e=ke();x(0,"div",10)(1,"div",11)(2,"span",12),R(3,"Cible"),M()(),x(4,"input",41),K("ngModelChange",function(s){return ae(e),ne(B(2).devoirService.devoir.notationCible=s)}),M(),x(5,"div",17),H(6,wQ,1,0,"ng-template",null,21,Xe),H(8,CQ,1,0,"ng-template",null,22,Xe),x(10,"button",23)(11,"i",19),R(12,"help"),M()()()()}if(2&t){const e=Oe(7),o=Oe(9),s=B(2);A(4),I("ngModel",s.devoirService.devoir.notationCible),A(6),I("ngbPopover",e)("popoverTitle",o)}}function xQ(t,n){1&t&&(x(0,"span"),R(1,"(ce devoir)"),M())}const k2=function(t){return{active:t}};function EQ(t,n){if(1&t){const e=ke();x(0,"button",42),K("click",function(){const l=ae(e).$implicit;return ne(B(2).grilleChanged(l.value))}),R(1),M()}if(2&t){const e=n.$implicit,o=B(2);I("ngClass",Ee(2,k2,o.grilleService.compareGrille(e.value,o.devoirService.devoir.grille))),A(1),ge(e.value.titre)}}function TQ(t,n){if(1&t&&(Ct(0),be(1,"div",43),x(2,"h6",36),R(3,"Grille int\xe9gr\xe9e dans le devoir"),M(),x(4,"button",44),R(5),M(),kt()),2&t){const e=B(2);A(5),Pt("",e.devoirService.devoir.grille.titre," (ce devoir)")}}function DQ(t,n){1&t&&(x(0,"span"),R(1,"(ce devoir)"),M())}function MQ(t,n){if(1&t){const e=ke();x(0,"button",42),K("click",function(){const l=ae(e).$implicit;return ne(B(2).classeChanged(l.value))}),R(1),M()}if(2&t){const e=n.$implicit,o=B(2);I("ngClass",Ee(2,k2,o.classeService.compareClasse(e.value,o.devoirService.devoir.classe))),A(1),ge(e.value.titre)}}function SQ(t,n){if(1&t&&(Ct(0),be(1,"div",43),x(2,"h6",36),R(3,"Classe int\xe9gr\xe9e dans le devoir"),M(),x(4,"button",44),R(5),M(),kt()),2&t){const e=B(2);A(5),Pt("",e.devoirService.devoir.classe.titre," (ce devoir)")}}function AQ(t,n){if(1&t){const e=ke();x(0,"div",10)(1,"div",11)(2,"span",12),R(3,"Titre"),M()(),x(4,"input",13),K("ngModelChange",function(s){return ae(e),ne(B().devoirService.devoir.titre=s)}),M()(),H(5,mQ,2,0,"ng-template",null,14,Xe),x(7,"div",10)(8,"div",11)(9,"span",12),R(10,"Date"),M()(),x(11,"input",15,16),K("ngModelChange",function(s){return ae(e),ne(B().devoirService.devoir.devoirDate=s)}),M(),x(14,"div",17)(15,"button",18),K("click",function(){return ae(e),ne(Oe(13).toggle())}),x(16,"i",19),R(17,"calendar_today"),M()()()(),x(18,"div",10)(19,"div",11)(20,"span",12),R(21,"Arrondi"),M()(),x(22,"input",20),K("ngModelChange",function(s){return ae(e),ne(B().devoirService.devoir.arrondi=s)})("blur",function(s){return ae(e),ne(B().checkArrondi(s))}),M(),x(23,"div",17),H(24,_Q,4,0,"ng-template",null,21,Xe),H(26,vQ,1,0,"ng-template",null,22,Xe),x(28,"button",23)(29,"i",19),R(30,"help"),M()()()(),x(31,"div",10)(32,"div",11)(33,"label",12),R(34,"Mode"),M()(),x(35,"select",24),K("ngModelChange",function(s){return ae(e),ne(B().devoirService.devoir.notationMode=s)}),x(36,"option",25),R(37,"Choose..."),M(),x(38,"option",26),R(39),M(),x(40,"option",26),R(41),M(),x(42,"option",26),R(43),M()(),x(44,"div",17),H(45,bQ,1,1,"ng-template",null,27,Xe),H(47,yQ,1,1,"ng-template",null,28,Xe),x(49,"button",29),K("click",function(){return ae(e),ne(B().toggleNotationMode())}),x(50,"i",19),R(51,"help"),M()()()(),H(52,kQ,13,3,"div",30),x(53,"div",10)(54,"div",11)(55,"label",31),R(56,"Grille"),M()(),x(57,"div",32)(58,"button",33),R(59),H(60,xQ,2,0,"span",34),M(),x(61,"div",35)(62,"h6",36),R(63,"Grilles configur\xe9es dans l'outil"),M(),H(64,EQ,2,4,"button",37),xe(65,"keyvalue"),H(66,TQ,6,1,"ng-container",34),M()(),x(67,"div",17)(68,"button",38),K("click",function(){return ae(e),ne(B().toggleGrilleSelection())}),x(69,"i",19),R(70,"help"),M()()()(),x(71,"div",10)(72,"div",11)(73,"label",39),R(74,"Classe"),M()(),x(75,"div",32)(76,"button",33),R(77),H(78,DQ,2,0,"span",34),M(),x(79,"div",35)(80,"h6",36),R(81,"Classes configur\xe9es dans l'outil"),M(),H(82,MQ,2,4,"button",37),xe(83,"keyvalue"),H(84,SQ,6,1,"ng-container",34),M()(),x(85,"div",17)(86,"button",38),K("click",function(){return ae(e),ne(B().toggleClasseSelection())}),x(87,"i",19),R(88,"help"),M()()()()}if(2&t){const e=Oe(6),o=Oe(25),s=Oe(27),l=Oe(46),h=Oe(48),p=B();A(4),I("ngModel",p.devoirService.devoir.titre),A(7),I("ngModel",p.devoirService.devoir.devoirDate)("footerTemplate",e),A(11),I("ngModel",p.devoirService.devoir.arrondi),A(6),I("ngbPopover",o)("popoverTitle",s),A(7),I("ngModel",p.devoirService.devoir.notationMode),A(3),I("ngValue",p.notationModeNormal.id),A(1),ge(p.notationModeNormal.titre),A(1),I("ngValue",p.notationModeProportionnel.id),A(1),ge(p.notationModeProportionnel.titre),A(1),I("ngValue",p.notationModeRapporte.id),A(1),ge(p.notationModeRapporte.titre),A(6),I("ngbPopover",l)("popoverTitle",h),A(3),I("ngIf",2==p.devoirService.devoir.notationMode||3==p.devoirService.devoir.notationMode),A(7),Pt("",null==p.devoirService.devoir.grille?null:p.devoirService.devoir.grille.titre," "),A(1),I("ngIf",p.devoirService.devoir.grille&&0==p.grilleService.isAnExistingGrille(p.devoirService.devoir.grille)),A(4),I("ngForOf",je(65,24,p.grilleService.grilleItems)),A(2),I("ngIf",p.devoirService.devoir.grille&&0==p.grilleService.isAnExistingGrille(p.devoirService.devoir.grille)),A(11),Pt("",null==p.devoirService.devoir.classe?null:p.devoirService.devoir.classe.titre," "),A(1),I("ngIf",p.devoirService.devoir.classe&&0==p.classeService.isAnExistingClasse(p.devoirService.devoir.classe)),A(4),I("ngForOf",je(83,26,p.classeService.classeItems)),A(2),I("ngIf",p.devoirService.devoir.classe&&0==p.classeService.isAnExistingClasse(p.devoirService.devoir.classe))}}function OQ(t,n){1&t&&(x(0,"i",8),R(1,"more"),M(),x(2,"span"),R(3,"Propri\xe9t\xe9s du devoir"),M())}function PQ(t,n){if(1&t&&(x(0,"div",10)(1,"div",11)(2,"span",12),R(3,"Auteur"),M()(),be(4,"input",45),M(),x(5,"div",10)(6,"div",11)(7,"span",12),R(8,"Cr\xe9\xe9 le"),M()(),be(9,"input",46,47),M(),x(11,"div",10)(12,"div",11)(13,"span",12),R(14,"Modifi\xe9 le"),M()(),be(15,"input",46,48),M(),x(17,"div",10)(18,"div",11)(19,"span",12),R(20,"Version"),M()(),be(21,"input",49),M()),2&t){const e=B();A(4),I("ngModel",e.devoirService.devoir.author),A(5),I("ngModel",e.devoirService.devoir.creationDate),A(6),I("ngModel",e.devoirService.devoir.modificationDate),A(6),I("ngModel",e.devoirService.devoir.toolVersion)}}const x2=function(t){return{open:t}};let NQ=(()=>{class t{constructor(e,o,s,l,h,p,m){this.devoirService=e,this.grilleService=o,this.classeService=s,this.messageService=l,this.modalService=h,this.config=p,this.configurationService=m,this.visible=!1,this.notationModeNormalTitre="Mode de notation",this.notationModeNormalContent="Transformation de la note pour arriver \xe0 la note finale :",this.notationModeNormal=this.configurationService.getValue("notationModeNormal"),this.notationModeProportionnel=this.configurationService.getValue("notationModeProportionnel"),this.notationModeRapporte=this.configurationService.getValue("notationModeRapporte"),p.container="body"}ngOnInit(){this.visible=!1}toggleVisibility(){this.visible=!this.visible}toggleNotationMode(){this.devoirService.devoir.notationMode?this.configurationService.getValue("notationModeArr").forEach((e,o)=>{this.devoirService.devoir.notationMode===e.id&&(this.notationModeNormalTitre="Mode de notation : "+e.titre,this.notationModeNormalContent=e.description)}):(this.notationModeNormalTitre="Mode de notation",this.notationModeNormalContent="Transformation de la note pour arriver \xe0 la note finale :")}grilleChanged(e){if(null===this.devoirService.devoir.grille)this.devoirService.devoir.grille=e;else if(!1===this.grilleService.compareGrille(this.devoirService.devoir.grille,e)){const o=this.modalService.open(oQ,{centered:!0,scrollable:!0});o.componentInstance.grilleConfirm=e,o.result.then(s=>{this.devoirService.replaceGrille(e)},s=>{this.messageService.add("Changement de grille annul\xe9","warning","USER")})}}toggleGrilleSelection(){this.grilleService.showGrille(this.devoirService.devoir.grille,!1,this.devoirService.devoir)}classeChanged(e){if(null===this.devoirService.devoir.classe)this.devoirService.devoir.classe=e;else if(!1===this.classeService.compareClasse(this.devoirService.devoir.classe,e)){const o=this.modalService.open(dQ,{centered:!0,scrollable:!0});o.componentInstance.classeConfirm=e,o.result.then(s=>{this.devoirService.replaceClasse(e)},s=>{this.messageService.add("Changement de classe annul\xe9","warning","USER")})}}toggleClasseSelection(){this.classeService.showClasse(this.devoirService.devoir.classe,!1)}get today(){return new Date}checkArrondi(e){0===this.devoirService.devoir.arrondi&&this.messageService.add("L'arrondi ne peut pas \xeatre \xe9gal \xe0 0 !","warning","USER")}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(ty),z(ny),z(ar),z(wl),z(EN),z(eo))},t.\u0275cmp=$e({type:t,selectors:[["app-generalites"]],features:[on([{provide:Pg,useClass:dG},{provide:y0,useClass:hQ}])],decls:12,vars:8,consts:[["id","generalitesButton","title","G\xe9n\xe9ralit\xe9s du devoir",3,"ngClass","click"],["class","material-icons md-48",4,"ngIf"],["class","material-icons md-36",4,"ngIf"],["id","generalitesMenu",3,"ngClass"],["activeIds","ngb-panel-0,ngb-panel-1"],["acc","ngbAccordion"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"material-icons","md-48"],[1,"material-icons","md-36"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Titre du devoir",1,"form-control",3,"ngModel","ngModelChange"],["t2",""],["placeholder","dd/mm/yyyy","name","d2","ngbDatepicker","",1,"form-control",3,"ngModel","footerTemplate","ngModelChange"],["c2","ngModel","d2","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"material-icons","md-18"],["type","number","step","0.05","min","0.05","max","5","placeholder","0.5",1,"form-control",3,"ngModel","ngModelChange","blur"],["popContent",""],["popTitle",""],["type","button",1,"input-group-text",3,"ngbPopover","popoverTitle"],[1,"custom-select",3,"ngModel","ngModelChange"],["selected",""],[3,"ngValue"],["popContent2",""],["popTitle2",""],["type","button",1,"input-group-text",3,"ngbPopover","popoverTitle","click"],["class","input-group mb-3",4,"ngIf"],["for","inputGroupGrille",1,"input-group-text"],["ngbDropdown","",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary"],[4,"ngIf"],["ngbDropdownMenu","",1,"dropdown-menu"],[1,"dropdown-header"],["ngbDropdownItem","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"input-group-text",3,"click"],["for","inputGroupClasse",1,"input-group-text"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],["type","number","placeholder","20",1,"form-control",3,"ngModel","ngModelChange"],["ngbDropdownItem","",3,"ngClass","click"],[1,"dropdown-divider"],["ngbDropdownItem","",1,"active"],["type","text","placeholder","Auteur du devoir",1,"form-control",3,"ngModel"],["type","text","readonly","","ngbDatepicker","",1,"form-control",3,"ngModel"],["d1","ngbDatepicker"],["d3","ngbDatepicker"],["type","text","placeholder","Auteur du devoir","readonly","",1,"form-control",3,"ngModel"]],template:function(e,o){1&e&&(x(0,"button",0),K("click",function(){return o.toggleVisibility()}),H(1,fQ,2,0,"i",1),H(2,pQ,2,0,"i",2),M(),x(3,"section",3)(4,"ngb-accordion",4,5)(6,"ngb-panel"),H(7,gQ,4,0,"ng-template",6),H(8,AQ,89,28,"ng-template",7),M(),x(9,"ngb-panel"),H(10,OQ,4,0,"ng-template",6),H(11,PQ,22,4,"ng-template",7),M()()()),2&e&&(I("ngClass",Ee(4,x2,o.visible)),A(1),I("ngIf",0==o.visible),A(1),I("ngIf",1==o.visible),A(1),I("ngClass",Ee(6,x2,o.visible)))},dependencies:[Lo,_n,zt,Ok,Nk,Vc,zb,$b,gl,Gb,Ub,_a,h0,Ag,u0,d0,iG,Ch,Mx,E0,x0,Bg,ul],styles:["input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#generalitesButton[_ngcontent-%COMP%]{position:fixed;top:0;right:0;display:inline-block;margin:7px;cursor:pointer;transition:all .2s;z-index:1200;border:1px solid transparent;height:40px;background:transparent;color:#0000008a}#generalitesButton[_ngcontent-%COMP%]:hover{border-radius:.25rem;background-color:#e9ecef;border:1px solid #ced4da}#generalitesButton.open[_ngcontent-%COMP%]{transform:rotate(90deg)}#generalitesButton[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:middle}#generalitesMenu[_ngcontent-%COMP%]{height:100%;width:0px;position:fixed;top:0;right:0;box-sizing:border-box;background:#f0f0f0;color:#878;border-left:1px solid #e5e5e5;box-shadow:-2px 0 5px #888;overflow-y:auto;overflow-x:hidden;transition:all .2s;z-index:1000}#generalitesMenu.open[_ngcontent-%COMP%]{width:500px;padding:50px 5px 0}button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:22px}i.material-icons[_ngcontent-%COMP%]{vertical-align:top;margin-right:3px}.dropdown[_ngcontent-%COMP%]{flex:1 1 0}.dropdown[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-child{border-radius:0;border-color:#ced4da;text-align:left}"]}),t})();var E2=T(432);let T2=(()=>{class t{constructor(e){this.configurationService=e,this.clipboardType=null,this.clipboardTypeConversion={free:"freetext",exe:"exercice",cri:"critere",que:"question"},this.clipboardKeyName=this.configurationService.getValue("storagePrefix")+"clipboard",this.loadClipboardType()}loadClipboardType(){const e=localStorage.getItem(this.clipboardKeyName);if(e){const o=JSON.parse(e);o&&(this.clipboardType=this.clipboardTypeConversion[o.type])}}copy(e){this.clipboardType=this.clipboardTypeConversion[e.type],localStorage.setItem(this.clipboardKeyName,JSON.stringify(e))}paste(){const e=localStorage.getItem(this.clipboardKeyName);return e?JSON.parse(e):null}}return t.\u0275fac=function(e){return new(e||t)(ie(eo))},t.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const D2=function(t){return["material-icons","md-48",t]};function IQ(t,n){if(1&t){const e=ke();x(0,"button",6),K("click",function(){ae(e);const s=B();return ne(s.pasteItem(s.exeId,s.queId,s.criId))}),x(1,"i",2),R(2,"loupe"),M()()}if(2&t){const e=B();A(1),I("ngClass",Ee(1,D2,e.clipboardService.clipboardType+"-button"))}}const RQ=function(t){return{active:t}};let FQ=(()=>{class t{constructor(e,o,s,l){this.devoirService=e,this.clipboardService=o,this.messageService=s,this.configurationService=l,this.itemTextConversion={exercice:"un exercice",critere:"un crit\xe8re",question:"une question"},this.itemType=""}ngOnInit(){}isVisible(){return 0===this.devoirService.devoir.exercices.length}addItem(e,o,s,l,h){"exercice"===e&&this.additemExercice(o,h),"question"===e&&this.additemQuestion(o,s,h),"critere"===e&&this.additemCritere(o,s,l,h),"freetext"===e&&this.additemFreetext(o,s,l,h)}additemExercice(e,o){const s=new Z0;if(s.id=o?o.id:ts(),s.title=o?o.title:this.configurationService.getValue("exerciceTitreDefaut"),s.questions=o?o.questions:[],s.visible=!0,"end"!==e){let l=0;this.devoirService.devoir.exercices.forEach((h,p)=>{h.id===e&&(l=p)}),this.devoirService.devoir.exercices.splice(l,0,s)}else this.devoirService.devoir.exercices.push(s);if(void 0===o){const l=parseInt(this.configurationService.getValue("exerciceNbQuestionDefaut"),10);for(let h=0;h<l;h++)this.additemQuestion(s.id,"end")}}additemQuestion(e,o,s){const l=new X0;if(l.id=s?s.id:ts(),l.title=s?s.title:this.configurationService.getValue("questionTitreDefaut"),l.criteres=s?s.criteres:[],null!==e&&this.devoirService.devoir.exercices.forEach((h,p)=>{if(h.id===e)if("end"!==o){let m=0;this.devoirService.devoir.exercices[p].questions.forEach((v,C)=>{v.id===o&&(m=C)}),this.devoirService.devoir.exercices[p].questions.splice(m,0,l)}else this.devoirService.devoir.exercices[p].questions.push(l)}),void 0===s){const h=parseInt(this.configurationService.getValue("questionNbFreetextDefaut"),10);for(let m=0;m<h;m++)this.additemFreetext(e,l.id,"end");const p=parseInt(this.configurationService.getValue("questionNbCritereDefaut"),10);for(let m=0;m<p;m++)this.additemCritere(e,l.id,"end")}}additemCritere(e,o,s,l){const h=new Q0;h.id=l?l.id:ts(),h.text=l?l.text:this.configurationService.getValue("critereTitreDefaut"),h.bareme=l?l.bareme:parseFloat(this.configurationService.getValue("critereBaremeDefaut")),h.capacite=l?l.capacite:null,null!==e&&null!==o&&this.devoirService.devoir.exercices.forEach((p,m)=>{p.id===e&&this.devoirService.devoir.exercices[m].questions.forEach((v,C)=>{if(v.id===o)if("end"!==s){let D=0;this.devoirService.devoir.exercices[m].questions[C].criteres.forEach((N,V)=>{N.id===s&&(D=V)}),this.devoirService.devoir.exercices[m].questions[C].criteres.splice(D,0,h)}else this.devoirService.devoir.exercices[m].questions[C].criteres.push(h)})})}additemFreetext(e,o,s,l){const h=new xl;h.id=l?l.id:ts(),h.text=l?l.text:this.configurationService.getValue("critereFreeDefaut");let p=0;if("end"===e)this.devoirService.devoir.exercices.push(h);else if(null===e)this.messageService.add("Erreur d'insertion : une exigence doit \xeatre d\xe9finie","danger","DEV");else for(const[m,v]of this.devoirService.devoir.exercices.entries())if(v.id===e){if(p=m,null===o){this.devoirService.devoir.exercices.splice(p,0,h);break}if("end"===o)this.devoirService.devoir.exercices[m].questions.push(h);else for(const[C,D]of this.devoirService.devoir.exercices[m].questions.entries())if(D.id===o){if(p=C,null===s){this.devoirService.devoir.exercices[m].questions.splice(p,0,h);break}if("end"===s)this.devoirService.devoir.exercices[m].questions[C].criteres.push(h);else for(const[N,V]of this.devoirService.devoir.exercices[m].questions[C].criteres.entries())if(V.id===s){this.devoirService.devoir.exercices[m].questions[C].criteres.splice(N,0,h);break}}}}pasteItem(e,o,s){let l=null;const h=this.clipboardService.paste(),p=this.devoirService.devoir.grille;h&&("free"===h.type&&(l=(new xl).deserialize(h,!0),this.addItem("freetext",e,o,s,l)),"exe"===h.type&&(l=(new Z0).deserialize(h,p,!0),this.addItem("exercice",e,o,s,l)),"que"===h.type&&(l=(new X0).deserialize(h,p,!0),this.addItem("question",e,o,s,l)),"cri"===h.type&&(l=(new Q0).deserialize(h,p,!0),this.addItem("critere",e,o,s,l)))}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(T2),z(ar),z(eo))},t.\u0275cmp=$e({type:t,selectors:[["app-devoir-edition-toolbox"]],inputs:{itemType:"itemType",exeId:"exeId",queId:"queId",criId:"criId"},decls:9,vars:8,consts:[[1,"toolBox",3,"ngClass"],[3,"title","click"],[3,"ngClass"],["title","Ajouter un texte libre",3,"click"],[1,"material-icons","md-48","freetext-button"],["title","Coller",3,"click",4,"ngIf"],["title","Coller",3,"click"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"div")(2,"button",1),K("click",function(){return o.addItem(o.itemType,o.exeId,o.queId,o.criId)}),x(3,"i",2),R(4,"add_circle"),M()(),x(5,"button",3),K("click",function(){return o.addItem("freetext",o.exeId,o.queId,o.criId)}),x(6,"i",4),R(7,"add_circle"),M()(),H(8,IQ,3,3,"button",5),M()()),2&e&&(I("ngClass",Ee(4,RQ,o.isVisible())),A(2),zr("title","Ajouter ",o.itemTextConversion[o.itemType],""),A(1),I("ngClass",Ee(6,D2,o.itemType+"-button")),A(5),I("ngIf","freetext"==o.clipboardService.clipboardType||o.clipboardService.clipboardType==o.itemType))},dependencies:[Lo,zt],styles:[".material-icons.md-18[_ngcontent-%COMP%]{font-size:18px}.material-icons.md-24[_ngcontent-%COMP%]{font-size:24px}.material-icons.md-36[_ngcontent-%COMP%]{font-size:36px}.material-icons.md-48[_ngcontent-%COMP%]{font-size:48px}.freetext-button[_ngcontent-%COMP%]{color:#666}.exercice-button[_ngcontent-%COMP%]{color:#4caf50}.question-button[_ngcontent-%COMP%]{color:#fad46d}.critere-button[_ngcontent-%COMP%]{color:#6194c8}.toolBox[_ngcontent-%COMP%]{opacity:0;margin:2px 0;text-align:center;background-color:transparent;border:1px dashed #D0D0D0;position:relative;min-height:15px;z-index:200;transition:all .2s}.toolBox[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%]{opacity:1}.toolBox[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-14px;right:50%}button[_ngcontent-%COMP%]{display:inline-block;margin:3px;cursor:pointer;transition:all .2s;border:none;height:40px;background:transparent}.toolBox[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:auto!important;padding:0;transition:all .2s}.toolBox[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{transform:rotate(-90deg)}.toolBox[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:middle;font-size:30px;text-shadow:#999 0px 2px 5px;transition:all .2s}.toolBox[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]{color:#d0d0d0;text-shadow:none}"]}),t})();function LQ(t,n){if(1&t&&(x(0,"div")(1,"p"),R(2,"Toutes les informations associ\xe9es seront d\xe9finitivement supprim\xe9es : "),M(),be(3,"ul",10),M()),2&t){const e=B();A(3),I("innerHTML",e.itemContent,Bt)}}let BQ=(()=>{class t{constructor(e,o){this.messageService=e,this.modal=o,this.itemDetails="",this.itemContent=null}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){if(this.itemConfirm)switch(this.itemConfirm.className){case"Freetext":this.itemDetails="un texte libre",this.itemContent=null;break;case"Exercice":{this.itemDetails="un exercice ("+this.itemConfirm.bareme+" pts)";let e=0,o=0,s=0;this.itemConfirm.questions.forEach((l,h)=>{l.criteres?(e++,l.criteres.forEach((p,m)=>{p.bareme?o++:s++})):s++}),this.itemContent="<li>Nombre de questions : "+e+"</li><li>Nombre de crit\xe8res : "+o+"</li><li>Nombre de textes libres : "+s+"</li>";break}case"Question":{this.itemDetails="une question ("+this.itemConfirm.bareme+" pts)";let e=0,o=0;this.itemConfirm.criteres.forEach((s,l)=>{s.bareme?e++:o++}),this.itemContent="<li>Nombre de crit\xe8res : "+e+"</li><li>Nombre de textes libres : "+o+"</li>";break}case"Critere":this.itemDetails="un crit\xe8re ("+this.itemConfirm.bareme+" pts)",this.itemContent=null;break;default:this.messageService.add("Erreur de traitement pour une suppression de donn\xe9es","warning","USER")}else setTimeout(()=>{this.updateDetails()},1e3)}}return t.\u0275fac=function(e){return new(e||t)(z(ar),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-confirm"]],inputs:{itemConfirm:"itemConfirm"},decls:22,vars:2,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-danger"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-danger",3,"click"],[3,"innerHTML"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Confirmation de suppression"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"p")(8,"strong"),R(9,"\xcates-vous s\xfbr de vouloir supprimer "),x(10,"span",5),R(11),M(),R(12," ?"),M()(),H(13,LQ,4,1,"div",6),x(14,"p")(15,"span",5),R(16,"Cette op\xe9ration ne peut pas \xeatre annul\xe9e."),M()()(),x(17,"div",7)(18,"button",8),K("click",function(){return o.modal.dismiss("cancel")}),R(19,"Annuler"),M(),x(20,"button",9),K("click",function(){return o.modal.close("ok")}),R(21,"OK"),M()()),2&e&&(A(11),ge(o.itemDetails),A(2),I("ngIf",o.itemContent))},dependencies:[zt]}),t})(),VQ=(()=>{class t{transform(e){return e.replace(/<.*?>/g,"")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Jt({name:"stripHtml",type:t,pure:!0}),t})();function jQ(t,n){if(1&t&&(x(0,"span")(1,"span",14),R(2,"\xa0"),M(),R(3),xe(4,"slice"),xe(5,"stripHtml"),M()),2&t){const e=B().$implicit;A(3),Pt("",oh(4,1,je(5,5,e.text),0,50),"...")}}function HQ(t,n){if(1&t&&(x(0,"span")(1,"span",15),R(2,"\xa0"),M(),R(3),M()),2&t){const e=B().$implicit;A(3),ge(e.title)}}function zQ(t,n){if(1&t&&(x(0,"span")(1,"span",14),R(2,"\xa0"),M(),R(3),xe(4,"slice"),xe(5,"stripHtml"),M()),2&t){const e=B().$implicit;A(3),Pt("",oh(4,1,je(5,5,e.text),0,50),"...")}}function $Q(t,n){if(1&t&&(x(0,"span")(1,"span",16),R(2,"\xa0"),M(),R(3),M()),2&t){const e=B().$implicit;A(3),ge(e.title)}}function UQ(t,n){if(1&t&&(x(0,"span")(1,"span",14),R(2,"\xa0"),M(),R(3),xe(4,"slice"),xe(5,"stripHtml"),M()),2&t){const e=B().$implicit;A(3),Pt("",oh(4,1,je(5,5,e.text),0,50),"...")}}function GQ(t,n){if(1&t&&(x(0,"span")(1,"span",17),R(2,"\xa0"),M(),R(3),xe(4,"slice"),xe(5,"stripHtml"),M()),2&t){const e=B().$implicit;A(3),ge(oh(4,1,je(5,5,e.text),0,50))}}const cE=function(t,n){return{active:t,"list-group-item-success":n}};function qQ(t,n){if(1&t){const e=ke();Ct(0),x(1,"button",11),K("click",function(){const l=ae(e).$implicit;return ne(B(3).selectItem(l,"before"))}),H(2,UQ,6,7,"span",12),H(3,GQ,6,7,"span",12),M(),kt()}if(2&t){const e=n.$implicit,o=B(3);A(1),I("ngClass",Cs(4,cE,e==o.item,e==o.selectedItem))("disabled","Critere"!=o.itemType&&"Freetext"!=o.itemType),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Critere"==e.className)}}const uE=function(t){return{"list-group-item-success":t}};function WQ(t,n){if(1&t){const e=ke();x(0,"button",18),K("click",function(){ae(e);const s=B().$implicit;return ne(B(2).selectItem(s,"end"))}),x(1,"span",17),R(2,"\xa0"),M(),R(3,"En dernier"),M()}if(2&t){const e=B().$implicit,o=B(2);I("ngClass",Ee(1,uE,e==o.selectedItem&&"end"==o.selectedPosition))}}function KQ(t,n){if(1&t){const e=ke();Ct(0),x(1,"button",11),K("click",function(){const l=ae(e).$implicit;return ne(B(2).selectItem(l,"before"))}),H(2,zQ,6,7,"span",12),H(3,$Q,4,1,"span",12),M(),x(4,"div",13),H(5,qQ,4,7,"ng-container",6),H(6,WQ,4,3,"button",7),M(),kt()}if(2&t){const e=n.$implicit,o=B(2);A(1),I("ngClass",Cs(6,cE,e==o.item,e==o.selectedItem))("disabled","Question"!=o.itemType&&"Freetext"!=o.itemType),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Question"==e.className),A(2),I("ngForOf",e.criteres),A(1),I("ngIf","Freetext"!=e.className&&("Critere"==o.itemType||"Freetext"==o.itemType))}}function JQ(t,n){if(1&t){const e=ke();x(0,"button",18),K("click",function(){ae(e);const s=B().$implicit;return ne(B().selectItem(s,"end"))}),x(1,"span",16),R(2,"\xa0"),M(),R(3,"En dernier"),M()}if(2&t){const e=B().$implicit,o=B();I("ngClass",Ee(1,uE,e==o.selectedItem&&"end"==o.selectedPosition))}}function YQ(t,n){if(1&t){const e=ke();Ct(0),x(1,"button",11),K("click",function(){const l=ae(e).$implicit;return ne(B().selectItem(l,"before"))}),H(2,jQ,6,7,"span",12),H(3,HQ,4,1,"span",12),M(),x(4,"div",13),H(5,KQ,7,9,"ng-container",6),H(6,JQ,4,3,"button",7),M(),kt()}if(2&t){const e=n.$implicit,o=B();A(1),I("ngClass",Cs(6,cE,e==o.item,e==o.selectedItem))("disabled","Exercice"!=o.itemType&&"Freetext"!=o.itemType),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Exercice"==e.className),A(2),I("ngForOf",e.questions),A(1),I("ngIf","Freetext"!=e.className&&("Question"==o.itemType||"Freetext"==o.itemType))}}function QQ(t,n){if(1&t){const e=ke();x(0,"button",18),K("click",function(){return ae(e),ne(B().selectItem(null,"end"))}),x(1,"span",19),R(2,"\xa0"),M(),R(3,"En dernier"),M()}if(2&t){const e=B();I("ngClass",Ee(1,uE,null==e.selectedItem&&"end"==e.selectedPosition))}}let XQ=(()=>{class t{constructor(e,o){this.devoirService=e,this.modal=o,this.item=null,this.itemType="",this.selectedItem=null,this.selectedPosition=null,this.returnValue={}}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.item?this.itemType=this.item.className:setTimeout(()=>{this.updateDetails()},200)}selectItem(e,o){this.selectedItem=e,this.selectedPosition=o,this.returnValue={item:this.selectedItem,position:this.selectedPosition}}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-move"]],inputs:{item:"item"},decls:15,vars:3,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Fermer","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"list-group","list-group-root","well"],[4,"ngFor","ngForOf"],["type","button","class","list-group-item list-group-item-action last",3,"ngClass","click",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"list-group-item","list-group-item-action",3,"ngClass","disabled","click"],[4,"ngIf"],[1,"list-group"],[1,"badge","badge-pill","freetext"],[1,"badge","badge-pill","exercice"],[1,"badge","badge-pill","question"],[1,"badge","badge-pill","critere"],["type","button",1,"list-group-item","list-group-item-action","last",3,"ngClass","click"],[1,"badge","badge-pill","exercice","last"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"h4",1),R(2,"D\xe9placement dans le devoir avant :"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span",3),R(5,"\xd7"),M()()(),x(6,"div",4)(7,"div",5),H(8,YQ,7,9,"ng-container",6),H(9,QQ,4,3,"button",7),M()(),x(10,"div",8)(11,"button",9),K("click",function(){return o.modal.dismiss("cancel")}),R(12,"Annuler"),M(),x(13,"button",10),K("click",function(){return o.modal.close(o.returnValue)}),R(14,"DEPLACER"),M()()),2&e&&(A(8),I("ngForOf",o.devoirService.devoir.exercices),A(1),I("ngIf","Exercice"==o.itemType||"Freetext"==o.itemType),A(4),I("disabled",null==o.selectedItem&&null==o.selectedPosition))},dependencies:[Lo,_n,zt,VS,VQ],styles:[".badge[_ngcontent-%COMP%]{margin-right:10px}.freetext[_ngcontent-%COMP%]{background-color:#666}.exercice[_ngcontent-%COMP%]{background-color:#4caf50}.question[_ngcontent-%COMP%]{background-color:#fad46d}.critere[_ngcontent-%COMP%]{background-color:#6194c8}.last[_ngcontent-%COMP%]{font-style:italic;text-transform:uppercase}button[disabled][_ngcontent-%COMP%]{font-style:italic;background-color:#f0f0f0;color:#ccc}.list-group[_ngcontent-%COMP%]{margin-bottom:10px}.list-group.list-group-root[_ngcontent-%COMP%]{padding:0;overflow:hidden}.list-group.list-group-root[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{margin-bottom:0}.list-group.list-group-root[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-radius:0;border-width:1px 0 0 0}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]:first-child{border-top-width:0}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{padding-left:30px}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{padding-left:45px}"]}),t})();const ZQ=function(t){return["material-icons","md-24",t]},em=function(){return["material-icons","md-24"]};let eX=(()=>{class t{constructor(e,o,s,l){this.devoirService=e,this.messageService=o,this.clipboardService=s,this.modalService=l}ngOnInit(){}copyItem(e){const o=e.serialize();this.clipboardService.copy(o)}moveUpItem(e){this.shiftItem(e,-1)}moveDownItem(e){this.shiftItem(e,1)}shiftItem(e,o){let s=null;for(const[l,h]of this.devoirService.devoir.exercices.entries()){if(h===e){(o>0&&l+o<=this.devoirService.devoir.exercices.length-1||o<0&&l+o>=0)&&(s=this.devoirService.devoir.exercices[l+o].serialize(),this.devoirService.devoir.exercices[l+o]=e,this.devoirService.devoir.exercices[l]="exe"===s.type?(new Z0).deserialize(s):(new xl).deserialize(s));break}if(this.devoirService.devoir.exercices[l].questions)for(const[p,m]of this.devoirService.devoir.exercices[l].questions.entries()){if(m===e){(o>0&&p+o<=this.devoirService.devoir.exercices[l].questions.length-1||o<0&&p+o>=0)&&(s=this.devoirService.devoir.exercices[l].questions[p+o].serialize(),this.devoirService.devoir.exercices[l].questions[p+o]=e,this.devoirService.devoir.exercices[l].questions[p]="que"===s.type?(new X0).deserialize(s):(new xl).deserialize(s));break}if(this.devoirService.devoir.exercices[l].questions[p].criteres)for(const[v,C]of this.devoirService.devoir.exercices[l].questions[p].criteres.entries())if(C===e){(o>0&&v+o<=this.devoirService.devoir.exercices[l].questions[p].criteres.length-1||o<0&&v+o>=0)&&(s=this.devoirService.devoir.exercices[l].questions[p].criteres[v+o].serialize(),this.devoirService.devoir.exercices[l].questions[p].criteres[v+o]=e,this.devoirService.devoir.exercices[l].questions[p].criteres[v]="cri"===s.type?(new Q0).deserialize(s):(new xl).deserialize(s));break}}}}deleteConfirmItem(e){for(const[o,s]of this.devoirService.devoir.exercices.entries()){if(s.id===e.id){this.devoirService.devoir.exercices.splice(o,1);break}if(this.devoirService.devoir.exercices[o].questions)for(const[l,h]of this.devoirService.devoir.exercices[o].questions.entries()){if(h.id===e.id){this.devoirService.devoir.exercices[o].questions.splice(l,1);break}if(this.devoirService.devoir.exercices[o].questions[l].criteres)for(const[p,m]of this.devoirService.devoir.exercices[o].questions[l].criteres.entries())if(m.id===e.id){this.devoirService.devoir.exercices[o].questions[l].criteres.splice(p,1);break}}}}deleteItem(e){const o=this.modalService.open(BQ,{centered:!0});o.componentInstance.itemConfirm=e,o.result.then(s=>{this.deleteConfirmItem(e),this.messageService.add("Suppression termin\xe9e","success","USER")},s=>{this.messageService.add("Suppression annul\xe9e","warning","USER")})}moveItem(e){const o=this.modalService.open(XQ,{centered:!0,size:"xl",scrollable:!0});o.componentInstance.item=e,o.result.then(s=>{const l=s.item,h=s.position;if(this.deleteConfirmItem(e),null===l&&"end"===h)this.devoirService.devoir.exercices.push(e);else for(const[p,m]of this.devoirService.devoir.exercices.entries()){if(m.id===l.id&&"before"===h){this.devoirService.devoir.exercices.splice(p,0,e);break}if(m.id===l.id&&"end"===h){this.devoirService.devoir.exercices[p].questions.push(e);break}if(this.devoirService.devoir.exercices[p].questions)for(const[v,C]of this.devoirService.devoir.exercices[p].questions.entries()){if(C.id===l.id&&"before"===h){this.devoirService.devoir.exercices[p].questions.splice(v,0,e);break}if(C.id===l.id&&"end"===h)this.devoirService.devoir.exercices[p].questions[v].criteres.push(e);else if(this.devoirService.devoir.exercices[p].questions[v].criteres)for(const[D,N]of this.devoirService.devoir.exercices[p].questions[v].criteres.entries())if(N.id===l.id){this.devoirService.devoir.exercices[p].questions[v].criteres.splice(D,0,e);break}}}this.messageService.add("D\xe9placement termin\xe9","success","USER")},s=>{this.messageService.add("D\xe9placement annul\xe9","warning","USER")})}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(ar),z(T2),z(wl))},t.\u0275cmp=$e({type:t,selectors:[["app-devoir-edition-optionbox"]],inputs:{itemType:"itemType",item:"item"},decls:19,vars:13,consts:[[1,"optionBox"],["title","Actions",3,"ngClass"],[1,"btn-group"],["type","button","title","Copier",1,"btn","btn-success","btn-sm",3,"click"],[3,"ngClass"],["type","button","title","Supprimer",1,"btn","btn-danger","btn-sm",3,"click"],["type","button","title","Monter",1,"btn","btn-primary","btn-sm",3,"click"],["type","button","title","Descendre",1,"btn","btn-primary","btn-sm",3,"click"],["type","button","title","D\xe9placer",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(e,o){1&e&&(x(0,"span",0)(1,"i",1),R(2,"more_vert"),M(),x(3,"div",2)(4,"button",3),K("click",function(){return o.copyItem(o.item)}),x(5,"i",4),R(6,"layers"),M()(),x(7,"button",5),K("click",function(){return o.deleteItem(o.item)}),x(8,"i",4),R(9,"delete"),M()(),x(10,"button",6),K("click",function(){return o.moveUpItem(o.item)}),x(11,"i",4),R(12,"arrow_upward"),M()(),x(13,"button",7),K("click",function(){return o.moveDownItem(o.item)}),x(14,"i",4),R(15,"arrow_downward"),M()(),x(16,"button",8),K("click",function(){return o.moveItem(o.item)}),x(17,"i",4),R(18,"compare_arrows"),M()()()()),2&e&&(A(1),I("ngClass",Ee(6,ZQ,o.itemType+"-button")),A(4),I("ngClass",da(8,em)),A(3),I("ngClass",da(9,em)),A(3),I("ngClass",da(10,em)),A(3),I("ngClass",da(11,em)),A(3),I("ngClass",da(12,em)))},dependencies:[Lo],styles:[".material-icons.md-18[_ngcontent-%COMP%]{font-size:18px}.material-icons.md-24[_ngcontent-%COMP%]{font-size:24px}.material-icons.md-36[_ngcontent-%COMP%]{font-size:36px}.material-icons.md-48[_ngcontent-%COMP%]{font-size:48px}.optionBox[_ngcontent-%COMP%]{position:absolute;right:0;top:7px}.optionBox[_ngcontent-%COMP%]:hover{right:2px;top:2px}.optionBox[_ngcontent-%COMP%] > .btn-group[_ngcontent-%COMP%]{display:none}.optionBox[_ngcontent-%COMP%]:hover > .btn-group[_ngcontent-%COMP%]{display:block}.optionBox[_ngcontent-%COMP%]:hover > i[_ngcontent-%COMP%]:first-child{display:none}.btn-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:4px 8px 0}.freetext-button[_ngcontent-%COMP%]{color:#666}.exercice-button[_ngcontent-%COMP%]{color:#4caf50}.question-button[_ngcontent-%COMP%]{color:#fad46d}.critere-button[_ngcontent-%COMP%]{color:#6194c8}"]}),t})();function tX(t,n){if(1&t){const e=ke();x(0,"span",9),K("click",function(s){ae(e);const l=B(2).$implicit;return ne(B().convertToEditor(l,s))}),xe(1,"safeHtml"),M()}2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function nX(t,n){if(1&t){const e=ke();x(0,"ckeditor",10),K("ngModelChange",function(s){return ae(e),ne(B(2).$implicit.text=s)})("blur",function(s){return ae(e),ne(B(3).onBlurEditor(s))})("ready",function(s){return ae(e),ne(B(3).onReadyEditor(s))}),M()}if(2&t){const e=B(2).$implicit;I("editor",B().editor)("ngModel",e.text)}}function iX(t,n){if(1&t&&(x(0,"div",4,5),be(2,"app-devoir-edition-optionbox",6),H(3,tX,2,3,"span",7),H(4,nX,1,2,"ckeditor",8),M()),2&t){const e=B().$implicit,o=B();A(2),I("itemType","freetext")("item",e),A(1),I("ngIf",o.itemEdited!==e),A(1),I("ngIf",o.itemEdited===e)}}function oX(t,n){if(1&t){const e=ke();x(0,"span",9),K("click",function(s){ae(e);const l=B(2).$implicit;return ne(B(3).convertToEditor(l,s))}),xe(1,"safeHtml"),M()}2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function rX(t,n){if(1&t){const e=ke();x(0,"ckeditor",10),K("ngModelChange",function(s){return ae(e),ne(B(2).$implicit.text=s)})("blur",function(s){return ae(e),ne(B(5).onBlurEditor(s))})("ready",function(s){return ae(e),ne(B(5).onReadyEditor(s))}),M()}if(2&t){const e=B(2).$implicit;I("editor",B(3).editor)("ngModel",e.text)}}function sX(t,n){if(1&t&&(x(0,"div",16),be(1,"app-devoir-edition-optionbox",6),H(2,oX,2,3,"span",7),H(3,rX,1,2,"ckeditor",8),M()),2&t){const e=B().$implicit,o=B(3);A(1),I("itemType","freetext")("item",e),A(1),I("ngIf",o.itemEdited!==e),A(1),I("ngIf",o.itemEdited===e)}}function aX(t,n){if(1&t){const e=ke();x(0,"span",9),K("click",function(s){ae(e);const l=B(2).$implicit;return ne(B(3).convertToEditor(l,s))}),xe(1,"safeHtml"),M()}2&t&&I("innerHTML",je(1,1,B(2).$implicit.title),Bt)}function lX(t,n){if(1&t){const e=ke();x(0,"ckeditor",10),K("ngModelChange",function(s){return ae(e),ne(B(2).$implicit.title=s)})("blur",function(s){return ae(e),ne(B(5).onBlurEditor(s))})("ready",function(s){return ae(e),ne(B(5).onReadyEditor(s))}),M()}if(2&t){const e=B(2).$implicit;I("editor",B(3).editor)("ngModel",e.title)}}function cX(t,n){if(1&t){const e=ke();x(0,"span",9),K("click",function(s){ae(e);const l=B(2).$implicit;return ne(B(5).convertToEditor(l,s))}),xe(1,"safeHtml"),M()}2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function uX(t,n){if(1&t){const e=ke();x(0,"ckeditor",10),K("ngModelChange",function(s){return ae(e),ne(B(2).$implicit.text=s)})("blur",function(s){return ae(e),ne(B(7).onBlurEditor(s))})("ready",function(s){return ae(e),ne(B(7).onReadyEditor(s))}),M()}if(2&t){const e=B(2).$implicit;I("editor",B(5).editor)("ngModel",e.text)}}function dX(t,n){if(1&t&&(x(0,"div",20),be(1,"app-devoir-edition-optionbox",6),H(2,cX,2,3,"span",7),H(3,uX,1,2,"ckeditor",8),M()),2&t){const e=B().$implicit,o=B(5);A(1),I("itemType","freetext")("item",e),A(1),I("ngIf",o.itemEdited!==e),A(1),I("ngIf",o.itemEdited===e)}}const hX=function(t){return{"background-color":t}};function fX(t,n){if(1&t){const e=ke();x(0,"span",25),K("click",function(){ae(e);const s=B(2).$implicit;return ne(B(5).devoirService.chooseCapacite(s))}),R(1),M()}if(2&t){const e=B(2).$implicit,o=B(5);let s;I("ngStyle",Ee(3,hX,null==(s=e.capacite.getCompetence(o.devoirService.devoir.grille))?null:s.couleur))("ngbTooltip",e.capacite.texte),A(1),ge(e.capacite.id)}}function pX(t,n){if(1&t){const e=ke();x(0,"span",26),K("click",function(){ae(e);const s=B(2).$implicit;return ne(B(5).devoirService.chooseCapacite(s))}),R(1,"Aucune"),M()}}function gX(t,n){if(1&t){const e=ke();x(0,"span",9),K("click",function(s){ae(e);const l=B(2).$implicit;return ne(B(5).convertToEditor(l,s))}),xe(1,"safeHtml"),M()}2&t&&I("innerHTML",je(1,1,B(2).$implicit.text),Bt)}function mX(t,n){if(1&t){const e=ke();x(0,"ckeditor",10),K("ngModelChange",function(s){return ae(e),ne(B(2).$implicit.text=s)})("blur",function(s){return ae(e),ne(B(7).onBlurEditor(s))})("ready",function(s){return ae(e),ne(B(7).onReadyEditor(s))}),M()}if(2&t){const e=B(2).$implicit;I("editor",B(5).editor)("ngModel",e.text)}}function _X(t,n){if(1&t){const e=ke();x(0,"div",21),be(1,"app-devoir-edition-optionbox",6),x(2,"span"),H(3,fX,2,5,"span",22),M(),H(4,pX,2,0,"ng-template",null,23,Xe),H(6,gX,2,3,"span",7),H(7,mX,1,2,"ckeditor",8),x(8,"span")(9,"input",24),K("ngModelChange",function(s){return ae(e),ne(B().$implicit.bareme=s)}),M(),R(10," pts"),M()()}if(2&t){const e=Oe(5),o=B().$implicit,s=B(5);A(1),I("itemType","critere")("item",o),A(2),I("ngIf",o.capacite)("ngIfElse",e),A(3),I("ngIf",s.itemEdited!==o),A(1),I("ngIf",s.itemEdited===o),A(2),I("ngModel",o.bareme)}}function vX(t,n){if(1&t&&(x(0,"div"),be(1,"app-devoir-edition-toolbox",1),H(2,dX,4,4,"div",18),H(3,_X,11,7,"div",19),M()),2&t){const e=n.$implicit,o=B(2).$implicit,s=B(2).$implicit;A(1),I("itemType","critere")("exeId",s.id)("queId",o.id)("criId",e.id),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Critere"==e.className)}}function bX(t,n){if(1&t&&(x(0,"div",17),be(1,"app-devoir-edition-optionbox",6),H(2,aX,2,3,"span",7),H(3,lX,1,2,"ckeditor",8),x(4,"span"),R(5),M(),H(6,vX,4,6,"div",0),be(7,"app-devoir-edition-toolbox",1),M()),2&t){const e=B().$implicit,o=B(2).$implicit,s=B();A(1),I("itemType","question")("item",e),A(1),I("ngIf",s.itemEdited!==e),A(1),I("ngIf",s.itemEdited===e),A(2),Pt("(",e.bareme," pts)"),A(1),I("ngForOf",e.criteres)("ngForTrackBy",s.trackByItems),A(1),I("itemType","critere")("exeId",o.id)("queId",e.id)("criId","end")}}function yX(t,n){if(1&t&&(x(0,"div"),be(1,"app-devoir-edition-toolbox",1),H(2,sX,4,4,"div",14),H(3,bX,8,11,"div",15),M()),2&t){const e=n.$implicit,o=B(2).$implicit;A(1),I("itemType","question")("exeId",o.id)("queId",e.id)("criId",null),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Question"==e.className)}}const wX=function(t){return{exercice:!0,hidden:t}},CX=function(){return["material-icons","md-24"]};function kX(t,n){if(1&t){const e=ke();x(0,"div",11),be(1,"app-devoir-edition-optionbox",6),x(2,"button",12),K("click",function(){ae(e);const s=B().$implicit;return ne(B().toggleItem(s))}),be(3,"i",11),M(),x(4,"input",13),K("ngModelChange",function(s){return ae(e),ne(B().$implicit.title=s)}),M(),x(5,"span"),R(6),M(),H(7,yX,4,6,"div",0),be(8,"app-devoir-edition-toolbox",1),M()}if(2&t){const e=B().$implicit,o=B();I("ngClass",Ee(12,wX,0==e.visible)),A(1),I("itemType","exercice")("item",e),A(2),I("ngClass",da(14,CX)),A(1),I("ngModel",e.title),A(2),Pt("(",e.bareme," pts)"),A(1),I("ngForOf",e.questions)("ngForTrackBy",o.trackByItems),A(1),I("itemType","question")("exeId",e.id)("queId","end")("criId",null)}}function xX(t,n){if(1&t&&(x(0,"div"),be(1,"app-devoir-edition-toolbox",1),H(2,iX,5,4,"div",2),H(3,kX,9,15,"div",3),M()),2&t){const e=n.$implicit;A(1),I("itemType","exercice")("exeId",e.id)("queId",null)("criId",null),A(1),I("ngIf","Freetext"==e.className),A(1),I("ngIf","Exercice"==e.className)}}let EX=(()=>{class t{constructor(e){this.devoirService=e,this.editor=E2,this.itemEdited=null}ngOnInit(){}trackByItems(e,o){return o.id}convertToEditor(e,o){this.itemEdited=e}onBlurEditor({}){}onReadyEditor(e){e.editing.view.focus()}toggleItem(e){e.id&&(e.visible=!e.visible)}}return t.\u0275fac=function(e){return new(e||t)(z(to))},t.\u0275cmp=$e({type:t,selectors:[["app-devoir-edition"]],decls:8,vars:7,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"itemType","exeId","queId","criId"],["class","freetext exercicefreetext",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"freetext","exercicefreetext"],["exercice.id",""],[3,"itemType","item"],[3,"innerHTML","click",4,"ngIf"],[3,"editor","ngModel","ngModelChange","blur","ready",4,"ngIf"],[3,"innerHTML","click"],[3,"editor","ngModel","ngModelChange","blur","ready"],[3,"ngClass"],["type","button","title","Afficher/Masquer",1,"btn","btn-sm",3,"click"],["placeholder","Titre de l'exercice",3,"ngModel","ngModelChange"],["class","freetext questionfreetext",4,"ngIf"],["class","question",4,"ngIf"],[1,"freetext","questionfreetext"],[1,"question"],["class","freetext criterefreetext",4,"ngIf"],["class","critere",4,"ngIf"],[1,"freetext","criterefreetext"],[1,"critere"],["class","badge badge-dark","placement","right","tooltipClass","capaciteTooltip",3,"ngStyle","ngbTooltip","click",4,"ngIf","ngIfElse"],["elseBlock",""],["type","number","step","0.05","min","0","max","20","placeholder","0",3,"ngModel","ngModelChange"],["placement","right","tooltipClass","capaciteTooltip",1,"badge","badge-dark",3,"ngStyle","ngbTooltip","click"],["ngbTooltip","Aucune capacit\xe9 associ\xe9e au crit\xe8re","placement","right",1,"badge","badge-light",3,"click"]],template:function(e,o){1&e&&(x(0,"section")(1,"h1")(2,"span"),R(3,"Votre devoir"),M(),x(4,"span"),R(5),M()(),H(6,xX,4,6,"div",0),be(7,"app-devoir-edition-toolbox",1),M()),2&e&&(A(5),Pt("(",o.devoirService.devoir.bareme," pts)"),A(1),I("ngForOf",o.devoirService.devoir.exercices)("ngForTrackBy",o.trackByItems),A(1),I("itemType","exercice")("exeId","end")("queId",null)("criId",null))},dependencies:[Lo,_n,zt,cl,Vc,zb,gl,Gb,Ub,_a,xP,LG,FQ,eX,Ah],styles:['.material-icons.md-18[_ngcontent-%COMP%]{font-size:18px}.material-icons.md-24[_ngcontent-%COMP%]{font-size:24px}.material-icons.md-36[_ngcontent-%COMP%]{font-size:36px}.material-icons.md-48[_ngcontent-%COMP%]{font-size:48px}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}section[_ngcontent-%COMP%]{padding:20px 40px;position:relative;width:100%;box-sizing:border-box}section[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{font-size:2em;color:#999;margin-bottom:10px;font-family:Segoe UI;font-weight:700}section[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{float:right}.freetext[_ngcontent-%COMP%]{border:1px solid #D0D0D0;border-left:8px solid #666;padding:4px 0;position:relative;min-height:38px}.freetext[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){margin-right:20px;display:block;padding:3px;border:1px solid transparent}.freetext[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2):hover{background-color:#fff;border:1px solid #E5E5E5}.freetext[_ngcontent-%COMP%] > ckeditor[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #E5E5E5;width:100%;display:inline-block}.exercicefreetext[_ngcontent-%COMP%]{border-left-width:8px;margin:2px 0;background-color:#fff}.questionfreetext[_ngcontent-%COMP%]{border-left-width:5px;margin:1px 7px;background-color:#fdfdfd}.criterefreetext[_ngcontent-%COMP%]{border-color:#e5e5e5;border-left:3px solid #666;margin:1px 7px;background-color:#f5f5f5}.exercice[_ngcontent-%COMP%]{margin:2px 0;border:1px solid #D0D0D0;background-color:#fff;border-left:8px solid #4CAF50;position:relative;padding:0}.exercice[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:0;line-height:1;margin-top:-10px}.exercice[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{opacity:.6}.exercice[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{font-size:1.4em;font-weight:400;width:87%;box-sizing:border-box;display:inline-block;margin:3px;border:1px solid transparent;background:transparent;transition:all .2s}.exercice[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:hover{border:1px solid #E5E5E5;background-color:#fff}.exercice[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(4){font-size:1.4em;width:9%;box-sizing:border-box;display:inline-block;padding:5px;text-align:right;font-family:Segoe UI;font-weight:700;color:#999}.hidden[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%] > app-devoir-edition-toolbox[_ngcontent-%COMP%]{display:none}.exercice[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]:before{content:"arrow_drop_up"}.hidden[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]:before{content:"arrow_drop_down"}.question[_ngcontent-%COMP%]{margin:1px 7px;border:1px solid #D0D0D0;background-color:#fdfdfd;border-left:5px solid #FAD46D;position:relative}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:1.1em;font-weight:400;width:88%;box-sizing:border-box;display:inline-block;margin:3px;border:1px solid transparent;transition:all .2s;background-color:transparent}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:hover{border:1px solid #E5E5E5;background-color:#fff}.question[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3){font-size:1.1em;width:10%;box-sizing:border-box;display:inline-block;padding:5px;text-align:right;font-family:Segoe UI;font-weight:700;color:#999}.question[_ngcontent-%COMP%] > ckeditor[_ngcontent-%COMP%]{width:88%;background-color:#fff;border:1px solid #E5E5E5;display:inline-block;margin:3px}.critere[_ngcontent-%COMP%]{margin:1px 7px;border:1px solid #E5E5E5;background-color:#f5f5f5;padding:3px;position:relative;border-left:3px solid #6194C8;min-height:41px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){width:60px;font-weight:700;font-family:Segoe UI;color:#d0d0d0;text-align:left;font-size:1.1em}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2) > span[_ngcontent-%COMP%]{cursor:pointer}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3){border:1px solid transparent;transition:all .2s;flex:1}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3):hover{background-color:#fff;border:1px solid #E5E5E5}.critere[_ngcontent-%COMP%] > ckeditor[_ngcontent-%COMP%]{flex:1;background-color:#fff;border:1px solid #E5E5E5}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{width:80px;box-sizing:border-box;font-family:Segoe UI;font-weight:600;color:#999;text-align:right;font-size:1.1em;margin-right:20px}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{border:1px solid transparent;padding:2px;transition:all .2s;background:none;width:60%;font:inherit;text-align:inherit;color:inherit}.critere[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]:hover{background-color:#fff;border:1px solid #E5E5E5}[_nghost-%COMP%]     .image{position:relative;clear:both;text-align:center;margin:1em auto}[_nghost-%COMP%]     .image.image_resized{max-width:100%;display:block;box-sizing:border-box}[_nghost-%COMP%]     .image.image-style-side{float:right;margin-left:1.5em}[_nghost-%COMP%]     .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}[_nghost-%COMP%]     .image.image_resized img{width:100%}[_nghost-%COMP%]     .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}[_nghost-%COMP%]     .image.image_resized>figcaption{display:block}[_nghost-%COMP%]     code{background-color:#c7c7c74d;padding:.15em;border-radius:2px}']}),t})();function TX(t,n){if(1&t&&(x(0,"h4",10),R(1),M()),2&t){const e=B();A(1),ge(e.notation.eleve)}}function DX(t,n){1&t&&(x(0,"h4",10),R(1,"Choix de l'\xe9l\xe8ve"),M())}function MX(t,n){if(1&t&&(x(0,"button",18)(1,"span",19),R(2,"\xa0"),M(),be(3,"span",20),x(4,"span"),R(5),M()()),2&t){const e=B().$implicit,o=B(3);A(3),I("innerHTML",e.title,Bt),A(2),hi("",o.notation.getNote(e.criteres),"/",o.notation.getNoteMax(e.criteres),"")}}function SX(t,n){if(1&t&&(x(0,"button",18)(1,"span",21),R(2,"\xa0"),M(),be(3,"span",20),x(4,"span"),R(5),M()()),2&t){const e=B().$implicit,o=B(4);A(3),I("innerHTML",e.title,Bt),A(2),hi("",o.notation.getNote(e.criteres),"/",o.notation.getNoteMax(e.criteres),"")}}const tm=function(t){return{"font-size.px":t}};function AX(t,n){if(1&t&&(x(0,"button",30),R(1,"check_circle_outline"),M()),2&t){const e=B(2).$implicit,o=B(5);zr("title","",e.bareme," pts"),I("ngStyle",Ee(2,tm,1.5*o.fontSizeDisplay))}}function OX(t,n){if(1&t&&(x(0,"button",31),R(1,"error_outline"),M()),2&t){const e=B(2).$implicit,o=B(5);zr("title","",e.bareme," pts"),I("ngStyle",Ee(2,tm,1.5*o.fontSizeDisplay))}}function PX(t,n){if(1&t&&(x(0,"button",32),R(1,"cancel"),M()),2&t){const e=B(2).$implicit,o=B(5);zr("title","",e.bareme," pts"),I("ngStyle",Ee(2,tm,1.5*o.fontSizeDisplay))}}function NX(t,n){if(1&t&&(x(0,"button",33),R(1,"help_outline"),M()),2&t){const e=B(2).$implicit,o=B(5);zr("title","",e.bareme," pts"),I("ngStyle",Ee(2,tm,1.5*o.fontSizeDisplay))}}const M2=function(t){return{"list-group-item-info":t}};function IX(t,n){if(1&t){const e=ke();x(0,"button",23),K("click",function(){ae(e);const s=B().$implicit;return ne(B(5).toggleCritere(s))}),x(1,"span",24),R(2,"\xa0"),M(),be(3,"span",20),x(4,"span",25),H(5,AX,2,4,"button",26),H(6,OX,2,4,"button",27),H(7,PX,2,4,"button",28),H(8,NX,2,4,"button",29),M()()}if(2&t){const e=B().$implicit,o=B(5);I("id",e.id)("ngClass",Ee(7,M2,o.critereEvalue==e)),A(3),I("innerHTML",e.text,Bt),A(1),I("ngSwitch",o.notation.getCritereStatus(e)),A(1),I("ngSwitchCase","ok"),A(1),I("ngSwitchCase","encours"),A(1),I("ngSwitchCase","ko")}}function RX(t,n){if(1&t&&(Ct(0),H(1,IX,9,9,"button",22),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Critere"==e.className)}}function FX(t,n){if(1&t&&(Ct(0),H(1,SX,6,3,"button",16),x(2,"div",17),H(3,RX,2,1,"ng-container",15),M(),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Question"==e.className),A(2),I("ngForOf",e.criteres)}}function LX(t,n){if(1&t&&(Ct(0),H(1,MX,6,3,"button",16),x(2,"div",17),H(3,FX,4,2,"ng-container",15),M(),kt()),2&t){const e=n.$implicit;A(1),I("ngIf","Exercice"==e.className),A(2),I("ngForOf",e.questions)}}function BX(t,n){if(1&t&&(x(0,"div",14),H(1,LX,4,2,"ng-container",15),M()),2&t){const e=B(2);I("ngStyle",Ee(2,tm,e.fontSizeDisplay)),A(1),I("ngForOf",e.devoirService.devoir.exercices)}}function VX(t,n){if(1&t){const e=ke();x(0,"button",36),K("click",function(){const l=ae(e).$implicit;return ne(B(3).openNotation(l))}),x(1,"h6",37),R(2),M()()}if(2&t){const e=n.$implicit,o=B(3);I("ngClass",Ee(2,M2,null!=o.devoirService.devoir.getEleveNotation(e))),A(2),ge(e)}}function jX(t,n){if(1&t&&(x(0,"div",34),H(1,VX,3,4,"button",35),M()),2&t){const e=B(2);A(1),I("ngForOf",e.devoirService.devoir.classe.eleves)}}function HX(t,n){if(1&t&&(x(0,"div",11),H(1,BX,2,4,"div",12),H(2,jX,2,1,"div",13),M()),2&t){const e=B();A(1),I("ngIf",e.notation),A(1),I("ngIf",null==e.notation)}}function zX(t,n){1&t&&(x(0,"span"),R(1,"Acquis"),M())}function $X(t,n){1&t&&(x(0,"span"),R(1,"Non acquis"),M())}function UX(t,n){1&t&&(x(0,"span"),R(1,"En cours"),M())}const GX=function(t){return{"background-color":t}},qX=function(t,n,e){return{"text-success":t,"text-warning":n,"text-danger":e}};function WX(t,n){if(1&t&&(x(0,"tr")(1,"th",40)(2,"span",41),R(3),M()(),x(4,"td",42),R(5),M(),x(6,"td",42),R(7),M(),x(8,"td",43),H(9,zX,2,0,"span",44),H(10,$X,2,0,"span",44),H(11,UX,2,0,"span",44),x(12,"span"),R(13),M()()()),2&t){const e=n.$implicit;A(2),I("ngStyle",Ee(10,GX,e.value.capacite.couleur)),A(1),ge(e.key),A(2),Pt(" ",e.value.capacite.texte," "),A(2),Pt(" ",e.value.bareme," "),A(1),I("ngClass",ih(12,qX,e.value.ok==e.value.total,e.value.ok<e.value.total,e.value.ok+e.value.encours==0)),A(1),I("ngIf",e.value.ok==e.value.total&&0!=e.value.total),A(1),I("ngIf",e.value.ko==e.value.total&&0!=e.value.total),A(1),I("ngIf",e.value.ok!=e.value.total&&e.value.ko!=e.value.total&&0!=e.value.total),A(2),hi(" (",e.value.ok+.5*e.value.encours,"/",e.value.total,")")}}function KX(t,n){if(1&t&&(x(0,"div",11)(1,"table",38)(2,"thead")(3,"tr")(4,"th",39),R(5,"Capacit\xe9"),M(),x(6,"th",39),R(7,"D\xe9tails"),M(),x(8,"th",39),R(9,"Points"),M(),x(10,"th",39),R(11,"Statut"),M()()(),x(12,"tbody"),H(13,WX,14,16,"tr",15),xe(14,"keyvalue"),M()()()),2&t){const e=B();A(13),I("ngForOf",je(14,1,e.getUsedCapacites()))}}function JX(t,n){if(1&t){const e=ke();x(0,"div",5)(1,"h4"),R(2,"Commentaire de notation"),M(),x(3,"ckeditor",45),K("ngModelChange",function(s){ae(e);const l=B();return ne(l.notation&&(l.notation.commentaire=s))})("blur",function(s){return ae(e),ne(B().onBlurEditor(s))})("focus",function(s){return ae(e),ne(B().onFocusEditor(s))})("ready",function(s){return ae(e),ne(B().onReadyEditor(s))}),M()()}if(2&t){const e=B();A(3),I("editor",e.editor)("ngModel",e.notation&&e.notation.commentaire)}}function YX(t,n){if(1&t&&(x(0,"div",46)(1,"button",47)(2,"i",48),R(3,"crop_free"),M()(),x(4,"button",49),R(5),M(),x(6,"button",50)(7,"i",48),R(8,"crop_din"),M()(),x(9,"button",49),R(10),M()()),2&t){const e=B();A(5),hi(" ",e.notation.getNote(),"/",e.notation.getNoteMax()," "),A(5),hi(" ",e.devoirService.devoir.ajusterNote(e.notation.getNote()),"/",e.devoirService.devoir.ajusterNote(e.notation.getNoteMax())," ")}}function QX(t,n){if(1&t){const e=ke();x(0,"div",46)(1,"button",51),K("click",function(){return ae(e),ne(B().changeZoom(1))}),x(2,"i",48),R(3,"zoom_in"),M()(),x(4,"button",52),K("click",function(){return ae(e),ne(B().changeZoom(-1))}),x(5,"i",48),R(6,"zoom_out"),M()()()}}function XX(t,n){if(1&t){const e=ke();x(0,"div",53)(1,"div",46)(2,"button",54),K("click",function(){return ae(e),ne(B().acceptAllCriteres())}),x(3,"i",48),R(4,"check_circle_outline"),M()(),x(5,"button",55),K("click",function(){return ae(e),ne(B().denyAllCriteres())}),x(6,"i",48),R(7,"cancel"),M()(),x(8,"button",56),K("click",function(){return ae(e),ne(B().deleteAllCriteres())}),x(9,"i",48),R(10,"help_outline"),M()()(),x(11,"div",46)(12,"button",57),K("click",function(){return ae(e),ne(B().deleteNotation())}),x(13,"i",48),R(14,"delete"),M()(),x(15,"button",58),K("click",function(){return ae(e),ne(B().toggleCommentaire())}),x(16,"i",48),R(17,"insert_comment"),M()(),x(18,"button",59),K("click",function(){return ae(e),ne(B().toggleCapacites())}),x(19,"i",48),R(20,"playlist_add_check"),M()()()()}}function ZX(t,n){if(1&t){const e=ke();x(0,"button",60),K("click",function(){return ae(e),ne(B().nextNotation())}),R(1,"Suivant"),M()}}let iy=(()=>{class t{constructor(e,o,s){this.devoirService=e,this.configurationService=o,this.modal=s,this.notation=null,this.groupe=null,this.eleve=null,this.notationMode=null,this.noteStatusOk="",this.noteStatusEnCours="",this.noteStatusKo="",this.critereEvalue=null,this.critereEvaluePos=null,this.criteres=[],this.fontSizeDisplay=12,this.displayCapacites=!1,this.displayCommentaire=!1,this.editor=E2,this.editorIsFocused=!1,this.notation=null,this.eleve=null,this.groupe=null,this.noteStatusOk=this.configurationService.getValue("noteStatusOk"),this.noteStatusEnCours=this.configurationService.getValue("noteStatusEnCours"),this.noteStatusKo=this.configurationService.getValue("noteStatusKo"),this.displayCommentaire=!1,this.displayCapacites=!1}handleKeyboardEvent(e){this.notation&&this.critereEvalue&&(!1===this.editorIsFocused&&(console.dir(e.key),"ArrowUp"===e.key&&(this.onKeyUp(),document.getElementById(this.critereEvalue.id)?.scrollIntoView()),"ArrowDown"===e.key&&(this.onKeyDown(),document.getElementById(this.critereEvalue.id)?.scrollIntoView()),("0"===e.key||"1"===e.key||"2"===e.key||"3"===e.key)&&(this.onChangeStatut(e.key),document.getElementById(this.critereEvalue.id)?.scrollIntoView()),e.stopPropagation(),e.preventDefault()),"Tab"===e.key&&"multi"===this.notationMode&&this.nextNotation())}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){if(this.notationMode){this.criteres=[];for(const[e,o]of this.devoirService.devoir.exercices.entries())if(this.devoirService.devoir.exercices[e].questions)for(const[s,l]of this.devoirService.devoir.exercices[e].questions.entries())if(this.devoirService.devoir.exercices[e].questions[s].criteres)for(const[h,p]of this.devoirService.devoir.exercices[e].questions[s].criteres.entries())"Critere"===p.className&&this.criteres.push(p);this.eleve?this.openNotation(this.eleve):this.groupe?this.openNotationForGroupe():this.notation&&this.setPremierCritereEvalue()}else setTimeout(()=>{this.updateDetails()},200)}setPremierCritereEvalue(){this.notation&&this.critereEvalue&&(this.notation.notes.length>0?(this.critereEvalue=this.notation.notes[this.notation.notes.length-1].critere,this.critereEvalue&&(this.critereEvaluePos=this.criteres.indexOf(this.critereEvalue))):(this.critereEvalue=this.criteres[0],this.critereEvaluePos=0),setTimeout(()=>{this.critereEvalue&&(document.getElementById(this.critereEvalue.id)?.focus(),document.getElementById(this.critereEvalue.id)?.scrollIntoView())},200))}createNote(e,o){const s=new f2;return s.status=e,s.critere=o,s.noteCoeffs=this.devoirService.devoir.noteCoeffs,s}toggleCritere(e){if(this.notation){this.critereEvalue=e,this.critereEvaluePos=this.criteres.indexOf(e);let o=!1;for(const s of this.notation.notes)if(s.critere===this.critereEvalue)switch(o=!0,s.status){case"":s.status=this.noteStatusKo;break;case this.noteStatusKo:s.status=this.noteStatusEnCours;break;case this.noteStatusEnCours:s.status=this.noteStatusOk;break;case this.noteStatusOk:s.status=""}!1===o&&this.notation.notes.push(this.createNote(this.noteStatusKo,this.critereEvalue)),this.groupe&&this.duplicateGroupeToEleves()}}onChangeStatut(e){if(this.notation){let o="";switch(e){case"1":o=this.noteStatusKo;break;case"2":o=this.noteStatusEnCours;break;case"3":o=this.noteStatusOk;break;case"0":o=""}let s=!1;for(const l of this.notation.notes)l.critere===this.critereEvalue&&(s=!0,l.status=o);!1===s&&null!==o&&this.critereEvalue&&this.notation.notes.push(this.createNote(o,this.critereEvalue)),this.groupe&&this.duplicateGroupeToEleves(),this.critereEvaluePos!==this.criteres.length-1?this.onKeyDown():this.displayCommentaire=!0}}onKeyUp(){this.critereEvalue&&this.critereEvaluePos&&(this.critereEvaluePos--,0===this.critereEvaluePos&&(this.critereEvaluePos=this.criteres.length-1),this.critereEvalue=this.criteres[this.critereEvaluePos])}onKeyDown(){this.critereEvalue&&this.critereEvaluePos&&(this.critereEvaluePos++,this.critereEvaluePos===this.criteres.length&&(this.critereEvaluePos=0),this.critereEvalue=this.criteres[this.critereEvaluePos])}acceptAllCriteres(){if(this.notation){this.notation.notes=[];for(const e of this.criteres)this.notation.notes.push(this.createNote(this.noteStatusOk,e));this.groupe&&this.duplicateGroupeToEleves()}}denyAllCriteres(){if(this.notation){this.notation.notes=[];for(const e of this.criteres)this.notation.notes.push(this.createNote(this.noteStatusKo,e));this.groupe&&this.duplicateGroupeToEleves()}}deleteAllCriteres(){this.notation&&(this.notation.notes=[],this.groupe&&this.duplicateGroupeToEleves())}toggleCommentaire(){this.displayCommentaire=!this.displayCommentaire}onReadyEditor(e){e.editing.view.focus(),this.editorIsFocused=!0}onBlurEditor({}){this.editorIsFocused=!1,this.duplicateGroupeToEleves()}onFocusEditor({}){this.editorIsFocused=!0}toggleCapacites(){this.displayCapacites=!this.displayCapacites}changeZoom(e){this.fontSizeDisplay=this.fontSizeDisplay+e}openNotation(e){if(this.notation=this.devoirService.devoir.getEleveNotation(e),null===this.notation){let o=new Zg;o.eleve=e,o.commentaire="",o.notes=[],o.notes_coefficients=this.devoirService.devoir.noteCoeffs,this.notation=o,this.devoirService.devoir.notations.push(this.notation)}this.setPremierCritereEvalue()}openNotationForGroupe(){if(this.groupe){for(const e of this.groupe.eleves)if(null===this.devoirService.devoir.getEleveNotation(e)){let s=new Zg;s.eleve=e,s.commentaire="",s.notes=[],s.notes_coefficients=this.devoirService.devoir.noteCoeffs,this.devoirService.devoir.notations.push(s)}this.openNotation(this.groupe.nom)}}nextNotation(){this.eleve=null,this.groupe=null,this.notation=null,this.critereEvalue=null,this.displayCommentaire=!1,this.displayCapacites=!1,this.editorIsFocused=!1}deleteNotation(){if(this.notation&&confirm("Voulez-vous vraiment supprimer d\xe9finitivement la notation de "+this.notation.eleve+" ?")){if(this.devoirService.devoir.deleteEleveNotation(this.notation.eleve),this.groupe&&confirm("Voulez-vous \xe9galement supprimer les notations des \xe9l\xe8ves du groupe ?"))for(const e of this.groupe.eleves)this.devoirService.devoir.deleteEleveNotation(e);"single"===this.notationMode?this.modal.close("ok"):this.nextNotation()}}duplicateGroupeToEleves(){if(this.groupe&&this.notation)for(const e of this.groupe.eleves){this.devoirService.devoir.deleteEleveNotation(e);const o=JSON.stringify(this.notation.serialize());let s=(new Zg).deserialize(JSON.parse(o),this.devoirService.devoir);s.eleve=e,this.devoirService.devoir.notations.push(s)}}getUsedCapacites(){return this.notation?this.devoirService.devoir.getCapaciteBilan(this.notation.eleve):[]}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(eo),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-eleve-notation"]],hostBindings:function(e,o){1&e&&K("keydown",function(l){return o.handleKeyboardEvent(l)},0,cp)},inputs:{notation:"notation",groupe:"groupe",eleve:"eleve",notationMode:"notationMode"},decls:16,vars:9,consts:[[1,"modal-header"],["class","modal-title","id","modal-title",4,"ngIf"],["type","button",1,"close",3,"click"],["class","modal-body",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"modal-footer"],["class","btn-group mr-2",4,"ngIf"],["class","btn-toolbar",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["id","modal-title",1,"modal-title"],[1,"modal-body"],["class","list-group list-group-root well",3,"ngStyle",4,"ngIf"],["class","list-group m-3 w-50 mx-auto",4,"ngIf"],[1,"list-group","list-group-root","well",3,"ngStyle"],[4,"ngFor","ngForOf"],["type","button","class","list-group-item list-group-item-action list-group-item-dark",4,"ngIf"],[1,"list-group"],["type","button",1,"list-group-item","list-group-item-action","list-group-item-dark"],[1,"badge","badge-pill","exercice"],[3,"innerHTML"],[1,"badge","badge-pill","question"],["type","button","class","list-group-item list-group-item-action",3,"id","ngClass","click",4,"ngIf"],["type","button",1,"list-group-item","list-group-item-action",3,"id","ngClass","click"],[1,"badge","badge-pill","critere"],[3,"ngSwitch"],["class","material-icons text-success",3,"title","ngStyle",4,"ngSwitchCase"],["class","material-icons text-warning",3,"title","ngStyle",4,"ngSwitchCase"],["class","material-icons text-danger",3,"title","ngStyle",4,"ngSwitchCase"],["class","material-icons text-secondary",3,"title","ngStyle",4,"ngSwitchDefault"],[1,"material-icons","text-success",3,"title","ngStyle"],[1,"material-icons","text-warning",3,"title","ngStyle"],[1,"material-icons","text-danger",3,"title","ngStyle"],[1,"material-icons","text-secondary",3,"title","ngStyle"],[1,"list-group","m-3","w-50","mx-auto"],["type","button","class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"p-1"],[1,"table","table-striped","m-2"],["scope","col"],["scope","row",1,"py-1"],[1,"badge","badge-pill",3,"ngStyle"],[1,"py-1"],[1,"py-1","font-weight-bolder",3,"ngClass"],[4,"ngIf"],[3,"editor","ngModel","ngModelChange","blur","focus","ready"],[1,"btn-group","mr-2"],["type","button","title","R\xe9sultat total brut",1,"btn","btn-outline-primary"],[1,"material-icons","md-dark"],["type","button",1,"btn","btn-outline-primary"],["type","button","title","R\xe9sultat total ajust\xe9",1,"btn","btn-outline-primary"],["type","button","title","Plus gros",1,"btn","btn-outline-primary",3,"click"],["type","button","title","plus petit",1,"btn","btn-outline-primary",3,"click"],[1,"btn-toolbar"],["type","button","title","Tout est juste",1,"btn","btn-outline-success",3,"click"],["type","button","title","Tout est faux",1,"btn","btn-outline-danger",3,"click"],["type","button","title","Tout est \xe0 d\xe9finir",1,"btn","btn-outline-secondary",3,"click"],["type","button","title","Supprimer compl\xe8tement la notation",1,"btn","btn-outline-danger",3,"click"],["type","button","title","Commenter le travail de l'\xe9l\xe8ve",1,"btn","btn-outline-secondary",3,"click"],["type","button","title","Voir le bilan de capacites",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){1&e&&(x(0,"div",0),H(1,TX,2,1,"h4",1),H(2,DX,2,0,"h4",1),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span"),R(5,"\xd7"),M()()(),H(6,HX,3,2,"div",3),H(7,KX,15,3,"div",3),H(8,JX,4,2,"div",4),x(9,"div",5),H(10,YX,11,4,"div",6),H(11,QX,7,0,"div",6),H(12,XX,21,0,"div",7),H(13,ZX,2,0,"button",8),x(14,"button",9),K("click",function(){return o.modal.close("ok")}),R(15,"FERMER"),M()()),2&e&&(A(1),I("ngIf",o.notation),A(1),I("ngIf",null==o.notation),A(4),I("ngIf",0==o.displayCapacites),A(1),I("ngIf",o.displayCapacites),A(1),I("ngIf",o.displayCommentaire),A(2),I("ngIf",o.notation),A(1),I("ngIf",o.notation),A(1),I("ngIf",o.notation),A(1),I("ngIf","multi"==o.notationMode&&o.notation))},dependencies:[Lo,_n,zt,cl,Eb,NS,IS,gl,_a,xP,ul],styles:[".badge[_ngcontent-%COMP%]{margin-right:10px}.freetext[_ngcontent-%COMP%]{background-color:#666}.exercice[_ngcontent-%COMP%]{background-color:#4caf50}.question[_ngcontent-%COMP%]{background-color:#fad46d}.critere[_ngcontent-%COMP%]{background-color:#6194c8}.list-group[_ngcontent-%COMP%]{margin-bottom:10px}.list-group.list-group-root[_ngcontent-%COMP%]{padding:0;overflow:hidden}.list-group.list-group-root[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{margin-bottom:0}.list-group.list-group-root[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-radius:0;border-width:1px 0 0 0;display:flex}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{font-weight:600;padding-left:5px;padding-right:2px}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]:first-child{border-top-width:0}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{padding-left:20px;padding-right:2px;display:flex}.list-group.list-group-root[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{padding-left:35px;padding-right:2px;display:flex}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){flex:1;display:inline-block}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3){width:80px;text-align:right;display:inline-block}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(3) > button[_ngcontent-%COMP%]{border:none;background:none;padding:0}.list-group-item[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}[_nghost-%COMP%]     img{max-height:3em;width:auto}.modal-footer[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:top}ckeditor[_ngcontent-%COMP%]{border:1px solid #EEE}"]}),t})();function eZ(t,n){if(1&t&&(x(0,"i",18),R(1,"group"),M()),2&t){const e=B().$implicit;zr("title","Appartient \xe0 ",B(2).devoirService.devoir.getEleveGroupe(e).nom,"")}}const tZ=function(t){return{"list-group-item-info":t}};function nZ(t,n){if(1&t){const e=ke();x(0,"button",16),K("click",function(){const l=ae(e).$implicit;return ne(B(2).addEleveInGroupe(l))}),x(1,"span"),R(2),M(),H(3,eZ,2,1,"i",17),M()}if(2&t){const e=n.$implicit,o=B(2);I("ngClass",Ee(3,tZ,o.groupe.isEleveInGroupe(e))),A(2),ge(e),A(1),I("ngIf",null!=o.devoirService.devoir.getEleveGroupe(e))}}function iZ(t,n){if(1&t){const e=ke();x(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),R(4,"Nom du groupe"),M()(),x(5,"input",12),K("ngModelChange",function(s){return ae(e),ne(B().groupe.nom=s)}),M()(),x(6,"div",13)(7,"span",14)(8,"h4"),R(9,"Eleves du groupe"),M()(),H(10,nZ,4,5,"button",15),M()()}if(2&t){const e=B();A(5),I("ngModel",e.groupe.nom),A(5),I("ngForOf",e.devoirService.devoir.classe.eleves)}}let S2=(()=>{class t{constructor(e,o,s){this.devoirService=e,this.configurationService=o,this.modal=s,this.groupe=null,this.selectedGroupe=!1,this.groupeNomDefaut="",this.groupeNomDefaut=this.configurationService.getValue("groupeNomDefaut")}ngOnInit(){setTimeout(()=>{this.updateDetails()})}updateDetails(){this.selectedGroupe?null===this.groupe&&(this.groupe=new c2,this.groupe.nom=this.groupeNomDefaut,this.groupe.eleves=[],this.devoirService.devoir.groupes.push(this.groupe)):setTimeout(()=>{this.updateDetails()},200)}addEleveInGroupe(e){if(this.groupe){let o=!0,s=this.devoirService.devoir.getEleveGroupe(e);if(null!==s&&(s===this.groupe?(this.groupe.eleves.splice(this.groupe.eleves.indexOf(e),1),o=!1):confirm(e+' est d\xe9j\xe0 dans le groupe "'+s.nom+"\". L'ajouter \xe0 ce groupe l'enl\xe8vera de son groupe actuel. \xcates vus s\xfbr de vouloir l'ajouter ?")?s.eleves.splice(s.eleves.indexOf(e),1):o=!1),o){this.groupe.eleves.push(e);const l=this.devoirService.devoir.getEleveNotation(this.groupe.nom);if(null!==l){this.devoirService.devoir.deleteEleveNotation(e);const h=JSON.stringify(l.serialize());let p=(new Zg).deserialize(JSON.parse(h),this.devoirService.devoir);p.eleve=e,this.devoirService.devoir.notations.push(p)}}}}deleteGroupe(){if(this.groupe&&confirm("Voulez-vous vraiment supprimer d\xe9finitivement ce groupe ?")){if(this.devoirService.devoir.deleteEleveNotation(this.groupe.nom),confirm("Voulez-vous \xe9galement supprimer les notations des \xe9l\xe8ves du groupe ?"))for(const e of this.groupe.eleves)this.devoirService.devoir.deleteEleveNotation(e);for(const[e,o]of this.devoirService.devoir.groupes.entries())o===this.groupe&&(this.devoirService.devoir.groupes.splice(e,1),this.modal.close("ok"))}}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(eo),z(jo))},t.\u0275cmp=$e({type:t,selectors:[["app-modal-edit-group"]],inputs:{groupe:"groupe",selectedGroupe:"selectedGroupe"},decls:13,vars:1,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button",1,"close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","title","Supprimer d\xe9finitivement le groupe",1,"btn","btn-outline-danger",3,"click"],[1,"material-icons","md-dark"],["type","button",1,"btn","btn-success",3,"click"],[1,"modal-body"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Nom du groupe","ngbAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","m-3","mx-auto"],[1,"list-group-item","list-group-item-secondary","p-1"],["type","button","class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action",3,"ngClass","click"],["class","material-icons",3,"title",4,"ngIf"],[1,"material-icons",3,"title"]],template:function(e,o){1&e&&(x(0,"div",0)(1,"h4",1),R(2,"Edition d'un groupe de notation"),M(),x(3,"button",2),K("click",function(){return o.modal.dismiss("close")}),x(4,"span"),R(5,"\xd7"),M()()(),H(6,iZ,11,2,"div",3),x(7,"div",4)(8,"button",5),K("click",function(){return o.deleteGroupe()}),x(9,"i",6),R(10,"delete"),M()(),x(11,"button",7),K("click",function(){return o.modal.close("ok")}),R(12,"ENREGISTRER"),M()()),2&e&&(A(6),I("ngIf",o.groupe))},dependencies:[Lo,_n,zt,Vc,gl,_a],styles:["button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:top}.list-group-item-action[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{float:right;opacity:.6}"]}),t})();function oZ(t,n){if(1&t&&(x(0,"li",41),R(1),M()),2&t){const e=n.$implicit;A(1),ge(e)}}function rZ(t,n){if(1&t&&(x(0,"ul",39),H(1,oZ,2,1,"li",40),M()),2&t){const e=B();A(1),I("ngForOf",e.devoirService.devoir.getElevesAvecNoteMaximum())}}function sZ(t,n){1&t&&R(0,"Eleves(s) concern\xe9(s)")}function aZ(t,n){if(1&t&&(x(0,"li",41),R(1),M()),2&t){const e=n.$implicit;A(1),ge(e)}}function lZ(t,n){if(1&t&&(x(0,"ul",39),H(1,aZ,2,1,"li",40),M()),2&t){const e=B();A(1),I("ngForOf",e.devoirService.devoir.getElevesAvecNoteMinimum())}}function cZ(t,n){1&t&&R(0,"Eleves(s) concern\xe9(s)")}const uZ=function(t){return{"background-color":t}},dZ=function(t){return{"text-success font-weight-bolder":t}},hZ=function(t){return{"text-warning font-weight-bolder":t}},fZ=function(t){return{"text-danger font-weight-bolder":t}};function pZ(t,n){if(1&t&&(x(0,"tr")(1,"th",42)(2,"span",43),R(3),M()(),x(4,"td"),R(5),M(),x(6,"td",44)(7,"span"),R(8),M(),x(9,"span",45),R(10),xe(11,"number"),M()(),x(12,"td",44)(13,"span"),R(14),M(),x(15,"span",45),R(16),xe(17,"number"),M()(),x(18,"td",44)(19,"span"),R(20),M(),x(21,"span",45),R(22),xe(23,"number"),M()()()),2&t){const e=n.$implicit;A(2),Zd("title",e.value.capacite.texte),I("ngStyle",Ee(22,uZ,e.value.capacite.couleur)),A(1),ge(e.key),A(2),ge(e.value.bareme),A(1),I("ngClass",Ee(24,dZ,e.value.ok/e.value.total>.5)),A(2),ge(e.value.ok),A(2),Pt(" (",Gr(11,13,e.value.ok/e.value.total*100,"1.0-0"),"%)"),A(2),I("ngClass",Ee(26,hZ,e.value.encours/e.value.total>.5)),A(2),ge(e.value.encours),A(2),Pt(" (",Gr(17,16,e.value.encours/e.value.total*100,"1.0-0"),"%)"),A(2),I("ngClass",Ee(28,fZ,e.value.ko/e.value.total>.5)),A(2),ge(e.value.ko),A(2),Pt(" (",Gr(23,19,e.value.ko/e.value.total*100,"1.0-0"),"%)")}}function gZ(t,n){1&t&&al(0)}const A2=function(t){return{eleve:t}};function mZ(t,n){if(1&t&&(Ct(0),H(1,gZ,1,0,"ng-container",48),kt()),2&t){const e=n.$implicit;B(2);const o=Oe(116);A(1),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Ee(2,A2,e))}}function _Z(t,n){if(1&t&&(x(0,"div",46)(1,"span",47)(2,"h2"),R(3),M()(),H(4,mZ,2,4,"ng-container",32),M()),2&t){const e=B();A(3),ge(null==e.devoirService.devoir.classe?null:e.devoirService.devoir.classe.titre),A(1),I("ngForOf",e.sortEleveBy(e.devoirService.devoir.classe.eleves))}}function vZ(t,n){1&t&&(x(0,"span",56),R(1,"Aucun \xe9l\xe8ve dans le groupe"),M())}function bZ(t,n){1&t&&al(0)}function yZ(t,n){if(1&t&&(Ct(0),H(1,bZ,1,0,"ng-container",48),kt()),2&t){const e=n.$implicit;B(3);const o=Oe(116);A(1),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Ee(2,A2,e))}}function wZ(t,n){if(1&t){const e=ke();x(0,"div",51)(1,"span",52)(2,"h2",53),K("click",function(){const l=ae(e).$implicit;return ne(B(2).selectGroupe(l))}),R(3),M(),x(4,"i",54),K("click",function(){const l=ae(e).$implicit;return ne(B(2).editGroupe(l))}),R(5,"edit"),M()(),H(6,vZ,2,0,"span",55),H(7,yZ,2,4,"ng-container",32),M()}if(2&t){const e=n.$implicit,o=B(2);A(3),ge(e.nom),A(3),I("ngIf",0==e.eleves.length),A(1),I("ngForOf",o.sortEleveBy(e.eleves))}}function CZ(t,n){if(1&t&&(x(0,"div",49),H(1,wZ,8,3,"div",50),M()),2&t){const e=B();A(1),I("ngForOf",e.devoirService.devoir.groupes)}}function kZ(t,n){if(1&t&&(x(0,"i",61),R(1,"group"),M()),2&t){const e=B().eleve;zr("title","Appartient \xe0 ",B().devoirService.devoir.getEleveGroupe(e).nom,"")}}function xZ(t,n){if(1&t&&(be(0,"small",62),xe(1,"safeHtml")),2&t){const e=B().eleve;I("innerHTML",je(1,1,B().devoirService.devoir.getEleveNotation(e).commentaire),Bt)}}function EZ(t,n){if(1&t&&(x(0,"span",63)(1,"span",64),R(2),M(),x(3,"span",65),R(4),M()()),2&t){const e=B().eleve,o=B();A(2),ge(o.devoirService.devoir.getEleveNotation(e).getNote()),A(2),ge(o.devoirService.devoir.getEleveNotation(e).getNoteMax())}}function TZ(t,n){if(1&t&&(x(0,"span",63)(1,"span",66),R(2),M(),x(3,"span",67),R(4),M()()),2&t){const e=B().eleve,o=B();A(2),ge(o.devoirService.devoir.ajusterNote(o.devoirService.devoir.getEleveNotation(e).getNote())),A(2),ge(o.devoirService.devoir.ajusterNote(o.devoirService.devoir.getEleveNotation(e).getNoteMax()))}}function DZ(t,n){1&t&&(x(0,"span",63)(1,"span",68),R(2,"?"),M(),x(3,"span"),R(4,"?"),M()())}const MZ=function(t,n,e){return{"list-group-item-warning":t,"list-group-item-danger":n,"list-group-item-success":e}};function SZ(t,n){if(1&t){const e=ke();x(0,"button",57),K("click",function(){const l=ae(e).eleve;return ne(B().selectEleve(l))}),x(1,"span"),H(2,kZ,2,1,"i",58),x(3,"h5"),R(4),M(),H(5,xZ,2,3,"small",59),M(),H(6,EZ,5,2,"span",60),H(7,TZ,5,2,"span",60),H(8,DZ,5,0,"span",60),M()}if(2&t){const e=n.eleve,o=B();let s;I("ngClass",ih(7,MZ,null!=o.devoirService.devoir.getEleveNotation(e)&&o.devoirService.devoir.getEleveNotation(e).getNote()<o.devoirService.devoir.note_moyenne,(null==(s=o.devoirService.devoir.getEleveNotation(e))?null:s.getNote())==o.devoirService.devoir.note_minimum,(null==(s=o.devoirService.devoir.getEleveNotation(e))?null:s.getNote())==o.devoirService.devoir.note_maximum)),A(2),I("ngIf",null!=o.devoirService.devoir.getEleveGroupe(e)),A(2),ge(e),A(1),I("ngIf",o.devoirService.devoir.getEleveNotation(e)),A(1),I("ngIf",o.devoirService.devoir.getEleveNotation(e)&&"brut"==o.noteMode),A(1),I("ngIf",o.devoirService.devoir.getEleveNotation(e)&&"ajuste"==o.noteMode),A(1),I("ngIf",null==o.devoirService.devoir.getEleveNotation(e))}}const oy=function(t){return{active:t}};let AZ=(()=>{class t{constructor(e,o,s,l){this.devoirService=e,this.configurationService=o,this.modalService=s,this.orderList="",this.noteMode="",this.orderList=this.configurationService.getValue("notationDefaultOrder"),this.noteMode=this.configurationService.getValue("notationDefaultNoteMode"),l.height="20px",l.striped=!0,l.animated=!0}ngOnInit(){}sortEleveBy(e){return e.sort("nom"===this.orderList?(o,s)=>o>s?1:o===s?0:-1:(o,s)=>null===this.devoirService.devoir.getEleveNotation(o)&&null===this.devoirService.devoir.getEleveNotation(s)?0:null===this.devoirService.devoir.getEleveNotation(o)?1:null===this.devoirService.devoir.getEleveNotation(s)||this.devoirService.devoir.getEleveNotation(o).getNote()>this.devoirService.devoir.getEleveNotation(s).getNote()?-1:this.devoirService.devoir.getEleveNotation(o).getNote()===this.devoirService.devoir.getEleveNotation(s).getNote()?0:this.devoirService.devoir.getEleveNotation(o).getNote()<this.devoirService.devoir.getEleveNotation(s).getNote()?1:0)}selectEleve(e){const o=this.devoirService.devoir.getEleveNotation(e);o?this.selectNotation(o):this.addNotation(e)}selectGroupe(e){const o=this.devoirService.devoir.getEleveNotation(e.nom);o?this.selectNotation(o,e):this.addNotationForGroupe(e)}selectNotation(e,o=null){const s=this.modalService.open(iy,{centered:!0,size:"xl",scrollable:!0});s.componentInstance.notation=e,null!==o&&(s.componentInstance.groupe=o),s.componentInstance.notationMode="single"}addNotation(e){const o=this.modalService.open(iy,{centered:!0,size:"xl",scrollable:!0});o.componentInstance.notationMode="single",o.componentInstance.eleve=e}addNotationForGroupe(e){const o=this.modalService.open(iy,{centered:!0,size:"xl",scrollable:!0});o.componentInstance.notationMode="single",o.componentInstance.groupe=e}launchNotation(){this.modalService.open(iy,{centered:!0,size:"xl",scrollable:!0}).componentInstance.notationMode="multi"}deleteAllNotations(){confirm("Voulez-vous vraiment supprimer d\xe9finitivement toutes les notations de ce devoir ? ")&&(this.devoirService.devoir.notations=[])}addGroupe(){this.modalService.open(S2,{centered:!0,scrollable:!0}).componentInstance.selectedGroupe=!0}editGroupe(e){const o=this.modalService.open(S2,{centered:!0,scrollable:!0});o.componentInstance.groupe=e,o.componentInstance.selectedGroupe=!0}getGlobalProgressValue(){let e=0;for(const s of this.devoirService.devoir.exercices)if(s.questions)for(const l of s.questions)if(l.criteres)for(const h of l.criteres)"Critere"===h.className&&e++;e*=this.devoirService.devoir.classe.eleves.length;let o=0;for(const s of this.devoirService.devoir.notations)!1===this.devoirService.devoir.isGroupe(s.eleve)&&(o+=s.notes.length);return e=Math.round(o/e*100),e}getGlobalProgressStatus(){const e=this.getGlobalProgressValue();return e<25?"danger":e>=25&&e<50?"warning":e>=50&&e<75?"info":"success"}getUsedCapacites(){return this.devoirService.devoir.getCapaciteBilan()}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(eo),z(wl),z($N))},t.\u0275cmp=$e({type:t,selectors:[["app-devoir-notation"]],decls:117,vars:31,consts:[[1,"btn-toolbar","bg-light","py-1","border-top","border-white","sticky-top"],[1,"btn-group","btn-group-sm","mr-2"],["type","button","title","Lancer la notation de la classe",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"material-icons","md-dark"],["type","button","title","Supprimer toutes les notes",1,"btn","btn-sm","btn-outline-danger",3,"click"],["type","button","title","Ajouter un groupe",1,"btn","btn-sm","btn-outline-success",3,"click"],["ngbDropdown","",1,"btn-group"],["title","Trier par","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem","",3,"ngClass","click"],["title","Mode d'affichage des notes","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-secondary"],["title","Statistiques","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-secondary"],[1,"m-2"],[1,"list-group","m-2"],[1,"list-group-item","p-1"],[1,"notation-progress"],[3,"showValue","type","value"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","0",1,"form-control",3,"value"],[1,"input-group-append"],["popContentMax",""],["popTitleMax",""],["type","button",1,"input-group-text",3,"ngbPopover","popoverTitle"],[1,"material-icons","md-18"],["popContentMin",""],["popTitleMin",""],["title","Bilan de comp\xe9tences","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-secondary"],["ngbDropdownMenu","",1,"dropdown-menu","p-2"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"container","my-2"],[1,"row"],[1,"col"],["class","list-group",4,"ngIf"],["class","col groupes",4,"ngIf"],["eleveButton",""],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["scope","row"],[1,"badge","badge-pill",3,"title","ngStyle"],[3,"ngClass"],[1,"capacitePercent"],[1,"list-group"],[1,"list-group-item","active","p-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col","groupes"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"group-header","list-group-item","active","p-2"],[3,"click"],[1,"material-icons",3,"click"],["class","list-group-item p-2",4,"ngIf"],[1,"list-group-item","p-2"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],["class","material-icons",3,"title",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","bg-light",4,"ngIf"],[1,"material-icons",3,"title"],[3,"innerHTML"],[1,"bg-light"],["title","Note brute",1,"h3","mb-0"],["title","Note maximum (crit\xe8res \xe9valu\xe9s uniquement)"],["title","Note ajust\xe9e (arrondie)",1,"h3","mb-0"],["title","Note maximum ajust\xe9e (crit\xe8res \xe9valu\xe9s uniquement)"],[1,"h3","mb-0"]],template:function(e,o){if(1&e&&(x(0,"div",0)(1,"div",1)(2,"button",2),K("click",function(){return o.launchNotation()}),x(3,"i",3),R(4,"play_circle_outline"),M()(),x(5,"button",4),K("click",function(){return o.deleteAllNotations()}),x(6,"i",3),R(7,"delete_sweep"),M()(),x(8,"button",5),K("click",function(){return o.addGroupe()}),x(9,"i",3),R(10,"group_add"),M()()(),x(11,"div",1)(12,"div",6)(13,"button",7)(14,"i",3),R(15,"sort"),M()(),x(16,"div",8)(17,"button",9),K("click",function(){return o.orderList="nom"}),x(18,"i",3),R(19,"sort_by_alpha"),M(),R(20,"Nom"),M(),x(21,"button",9),K("click",function(){return o.orderList="note"}),x(22,"i",3),R(23,"123"),M(),R(24,"Note"),M()()(),x(25,"div",6)(26,"button",10)(27,"i",3),R(28,"flip"),M()(),x(29,"div",8)(30,"button",9),K("click",function(){return o.noteMode="brut"}),x(31,"i",3),R(32,"crop_free"),M(),R(33,"Notes brutes (sans arrondi ni ajustement)"),M(),x(34,"button",9),K("click",function(){return o.noteMode="ajuste"}),x(35,"i",3),R(36,"crop_din"),M(),R(37,"Note ajust\xe9es (arrondies et ajust\xe9es)"),M()()(),x(38,"div",6)(39,"button",11)(40,"i",3),R(41,"data_usage"),M()(),x(42,"div",8)(43,"h4",12),R(44,"Statistisques de notation"),M(),x(45,"div",13)(46,"span",14)(47,"p",15),be(48,"ngb-progressbar",16),M()(),x(49,"span",14)(50,"div",17)(51,"div",18)(52,"span",19),R(53,"Note maximum"),M()(),be(54,"input",20),x(55,"div",21),H(56,rZ,2,1,"ng-template",null,22,Xe),H(58,sZ,1,0,"ng-template",null,23,Xe),x(60,"button",24)(61,"i",25),R(62,"group"),M()()()()(),x(63,"span",14)(64,"div",17)(65,"div",18)(66,"span",19),R(67,"Note minimum"),M()(),be(68,"input",20),x(69,"div",21),H(70,lZ,2,1,"ng-template",null,26,Xe),H(72,cZ,1,0,"ng-template",null,27,Xe),x(74,"button",24)(75,"i",25),R(76,"group"),M()()()()(),x(77,"span",14)(78,"div",17)(79,"div",18)(80,"span",19),R(81,"Moyenne"),M()(),be(82,"input",20),M()(),x(83,"span",14)(84,"div",17)(85,"div",18)(86,"span",19),R(87,"< Moyenne"),M()(),be(88,"input",20),M()()()()(),x(89,"div",6)(90,"button",28)(91,"i",3),R(92,"playlist_add_check"),M()(),x(93,"div",29)(94,"table",30)(95,"thead")(96,"tr")(97,"th",31),R(98,"Capacit\xe9"),M(),x(99,"th",31),R(100,"Points"),M(),x(101,"th",31),R(102,"Acquis"),M(),x(103,"th",31),R(104,"En cours"),M(),x(105,"th",31),R(106,"Non acquis"),M()()(),x(107,"tbody"),H(108,pZ,24,30,"tr",32),xe(109,"keyvalue"),M()()()()()(),x(110,"div",33)(111,"div",34)(112,"div",35),H(113,_Z,5,2,"div",36),M(),H(114,CZ,2,1,"div",37),M()(),H(115,SZ,9,11,"ng-template",null,38,Xe)),2&e){const s=Oe(57),l=Oe(59),h=Oe(71),p=Oe(73);A(17),I("ngClass",Ee(23,oy,"nom"==o.orderList)),A(4),I("ngClass",Ee(25,oy,"note"==o.orderList)),A(9),I("ngClass",Ee(27,oy,"brut"==o.noteMode)),A(4),I("ngClass",Ee(29,oy,"ajuste"==o.noteMode)),A(14),I("showValue",!0)("type",o.getGlobalProgressStatus())("value",o.getGlobalProgressValue()),A(6),Gp("value","",o.devoirService.devoir.ajusterNote(o.devoirService.devoir.note_maximum)," (",o.devoirService.devoir.note_maximum,")"),A(6),I("ngbPopover",s)("popoverTitle",l),A(8),Gp("value","",o.devoirService.devoir.ajusterNote(o.devoirService.devoir.note_minimum)," (",o.devoirService.devoir.note_minimum,")"),A(6),I("ngbPopover",h)("popoverTitle",p),A(8),Gp("value","",o.devoirService.devoir.ajusterNote(o.devoirService.devoir.note_moyenne)," (",o.devoirService.devoir.note_moyenne,")"),A(6),Zd("value",o.devoirService.devoir.nb_inferieur_moyenne),A(20),I("ngForOf",je(109,21,o.getUsedCapacites())),A(5),I("ngIf",o.devoirService.devoir.classe),A(1),I("ngIf",o.devoirService.devoir.groupes.length>0)}},dependencies:[Lo,_n,zt,Kr,cl,Ch,Mx,E0,x0,Bg,OG,Tb,ul,Ah],styles:[".btn-toolbar[_ngcontent-%COMP%]{justify-content:center}button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{vertical-align:top}.notation-progress[_ngcontent-%COMP%]{flex:1}.capacitePercent[_ngcontent-%COMP%]{font-size:70%;opacity:.8;font-style:italic}.list-group-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;padding:0}.list-group-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .list-group-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.list-group-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:70%;color:#999;font-style:italic;margin:0;max-height:35px;display:inline-block;overflow:hidden}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{flex:1;padding:5px}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child > i[_ngcontent-%COMP%]{float:right;opacity:.5}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){width:85px;text-align:center}.list-group-item[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:nth-child(2){border-top-right-radius:.25rem}.list-group-item[_ngcontent-%COMP%]:last-child > span[_ngcontent-%COMP%]:nth-child(2){border-bottom-right-radius:.25rem}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2) > span[_ngcontent-%COMP%]:first-child{font-weight:900;display:block}.list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2) > span[_ngcontent-%COMP%]:last-child{color:#999;font-size:1.3rem;display:block;border-top:1px solid #999;margin:0 10px}.groupes[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child > i[_ngcontent-%COMP%]{display:none}.group-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1;cursor:pointer}.group-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{font-weight:600}.group-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;cursor:pointer;opacity:.5;color:#ccc;transition:all .2s}.group-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}"]}),t})();function OZ(t,n){1&t&&be(0,"app-devoir-edition")}function PZ(t,n){1&t&&be(0,"app-devoir-notation")}function NZ(t,n){if(1&t&&(x(0,"section"),be(1,"app-generalites"),H(2,OZ,1,0,"app-devoir-edition",0),H(3,PZ,1,0,"app-devoir-notation",0),M()),2&t){const e=B();A(2),I("ngIf","edition"==e.mode),A(1),I("ngIf","notation"==e.mode)}}let IZ=(()=>{class t{constructor(e,o,s){this.devoirService=e,this.configurationService=o,this.messageService=s,this.mode="",this.mode=this.configurationService.getValue("defaultMode")}doSomething(e){if(this.devoirService.docIsEdited)return e.preventDefault(),e.returnValue="Vous souhaitez quitter la page alors que le devoir en cours n'est pas sauvegard\xe9e.\n\n      Voulez-vous vraiment continuer ?",e}ngOnInit(){}toggleMode(e){this.mode=e}}return t.\u0275fac=function(e){return new(e||t)(z(to),z(eo),z(ar))},t.\u0275cmp=$e({type:t,selectors:[["app-devoir"]],hostBindings:function(e,o){1&e&&K("beforeunload",function(l){return o.doSomething(l)},0,Dc)},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,o){1&e&&H(0,NZ,4,2,"section",0),2&e&&I("ngIf",o.devoirService.devoir)},dependencies:[zt,NQ,EX,AZ]}),t})();function RZ(t,n){if(1&t){const e=ke();x(0,"div")(1,"ngb-alert",2),K("close",function(){const l=ae(e).$implicit;return ne(B(2).close(l))}),R(2),M()()}if(2&t){const e=n.$implicit;A(1),I("type",e.type),A(1),ge(e.text)}}function FZ(t,n){if(1&t){const e=ke();x(0,"div")(1,"ngb-alert",3),K("close",function(){const l=ae(e).$implicit;return ne(B(2).close(l))}),R(2),M()()}if(2&t){const e=n.$implicit;A(2),ge(e.text)}}function LZ(t,n){if(1&t&&(x(0,"section"),H(1,RZ,3,2,"div",1),H(2,FZ,3,1,"div",1),M()),2&t){const e=B();A(1),I("ngForOf",e.messageService.messagesUser),A(1),I("ngForOf",e.messageService.messagesDev)}}let BZ=(()=>{class t{constructor(e){this.messageService=e}ngOnInit(){}close(e){this.messageService.close(e)}}return t.\u0275fac=function(e){return new(e||t)(z(ar))},t.\u0275cmp=$e({type:t,selectors:[["app-messages"]],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"type","close"],["type","info",3,"close"]],template:function(e,o){1&e&&H(0,LZ,3,2,"section",0),2&e&&I("ngIf",o.messageService.messagesUser.length)},dependencies:[_n,zt,pU],styles:["section[_ngcontent-%COMP%]{position:fixed;bottom:0;right:10px;min-width:400px;z-index:900}"]}),t})(),VZ=(()=>{class t{constructor(e){this.printService=e,this.title="myControle"}}return t.\u0275fac=function(e){return new(e||t)(z(xa))},t.\u0275cmp=$e({type:t,selectors:[["app-root"]],decls:7,vars:2,consts:[[3,"toggleModeDevoir"],["menu",""],["devoir",""],["name","print"]],template:function(e,o){if(1&e){const s=ke();x(0,"div")(1,"app-menu",0,1),K("toggleModeDevoir",function(h){return ae(s),ne(Oe(4).toggleMode(h))}),M(),be(3,"app-devoir",null,2)(5,"app-messages")(6,"router-outlet",3),M()}2&e&&Xt("is-printing",o.printService.isPrinting)},dependencies:[B0,QY,IZ,BZ]}),t})();!function Y5(t,n,e){(function SR(t,n,e){"string"!=typeof n&&(e=n,n=t[ye.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),th[n]=t,e&&(th[n][ye.ExtraData]=e)})(t,n,e)}(VB);let jZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=It({type:t,bootstrap:[VZ]}),t.\u0275inj=Dt({providers:[xa,{provide:yr,useValue:"fr-FR"}],imports:[c4,CY,LB,Rk,eH,jG]}),t})();(function GF(){tS=!1})(),l4().bootstrapModule(jZ).catch(t=>console.error(t))}},E=>{E(E.s=203)}]);